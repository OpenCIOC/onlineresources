window.CIOC={};
(function(a,b){b.do_drop_down_navigation=function(){for(var e=a.getElementById("ActionList").options,d=0;d<e.length;d++)if(e[d].selected){var f=e[d].getAttribute("href");f&&("undefined"!=typeof e[d].attributes.newwindow?b.open(f):b.location.href=f);break}};jQuery(function(e){e("[data-toggle=dialog]").each(function(){var d=e(this),f=e(d.data("target")),l={autoOpen:!1,title:f.data("title"),modal:f.data("modal")};f.dialog(l);d.click(function(){f.dialog("isOpen")?f.dialog("close"):f.dialog("open")})})})})(document,window);
function CheckAll(a,b){a||="IDList";var e=b;b||(e=document.RecordList);b=e.elements.length;for(var d=0;d<b;d++){var f=e.elements[d];f.name===a&&(f.checked=!0)}}function ClearAll(a,b){a||="IDList";var e=b;b||(e=document.RecordList);b=e.elements.length;for(var d=0;d<b;d++){var f=e.elements[d];f.name===a&&(f.checked=!1)}}function add_class(a,b){a&&!(new RegExp("\\b"+b+"\\b")).test(a.className)&&(a.className&&(b=" "+b),a.className+=b)}
function remove_class(a,b){if(a){for(var e=a.className.split(" "),d=[],f=0;f<e.length;f++){var l=e[f];l!==b&&d.push(l)}a.className=d.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,b){window.open(a,b,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,b){window.open(a,b,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,b){window.open(a,b,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var b={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var e=a(this).data("popargs");(b[e.size||"sm"]||openWin)(this.href,e.name||"popwin");return!1})});
(function(){var a=jQuery,b={},e=function(c){null!==c&&"undefined"!==typeof c?a("#myListCount").text(c):(c=a("#myListCount").text())&&(c=parseInt(c,10));c?b.myListLink.show():b.myListLink.hide()},d=function(c){a.each(c,function(k,n){a("#added_to_list_"+n).show();a("#add_to_list_"+n).hide()})},f=function(c){return function(k){k.fail?alert(k.errinfo):(k.ids?e(a.grep(k.ids,g[b.domain]).length):k.count?e(k.count):e(0),d([c]))}},l=function(c){c=a(c.currentTarget).data("id");a.ajax({success:f(c),dataType:"json",
error:function(){alert("Error")},data:{id:c},type:"POST",url:b.current_list_url})},t=function(c){return function(k){if(k.fail)alert(k.errinfo);else{k=!0;if(c){var n=a("#results_table #remove_from_list_"+c);n.length?n.parent().parent().remove():(k=!1,n=a("#results_container #remove_from_list_"+c),n.parents(".dlist-result").remove())}(k?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&c||(a("#records_ui").hide(),a("#no_records_message").show())}}},r=function(c){c=
a(c.currentTarget).data("id");a.ajax({success:t(c),dataType:"json",error:function(){alert("Error")},data:{ID:c,RemoveItem:b.domain},type:"POST",url:b.current_list_url})},p=function(c){a.ajax({success:t(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:b.domain},type:"POST",url:b.current_list_url})},g={CIC:function(c){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(c)},VOL:function(c){return/^[1-9][0-9]*$/.test(c)}},m=function(c){if(c.fail)q();else if(c.inrequest){var k=a.grep(c.ids,
g[b.domain]);d(k);e(k.length);(c=c.previous_ids)&&a.each(c,function(n,u){a("#ct_added_to_previous_request_"+u).show()});a(".ListUI img").prop("src",function(n,u){return u.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();b.current_list_url=b.ct_update_url;h()}else q()},q=function(){var c=function(){b.list_view_mode||d(b.already_added||[]);b.current_list_url=b.list_view_mode&&"ct"===b.list_view_mode?b.ct_update_url:b.list_update_url;e((b.already_added||[]).length);
h()};b.list_view_mode||b.has_session?c():a.ajax({dataType:"json",error:null,url:b.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(k){k.has_session&&c()}})},h=function(){a(".HideListUI").delegate(".add_to_list","click",l).delegate(".remove_from_list","click",r).removeClass("HideListUI");a("#remove_all_from_list").click(p);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(c){b=c;b.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
c.in_request?a.ajax({success:m,dataType:"json",error:null,type:"POST",url:c.in_request}):q()}})();this.JSON||(this.JSON={});
(function(){function a(g){return 10>g?"0"+g:g}function b(g){f.lastIndex=0;return f.test(g)?'"'+g.replace(f,function(m){var q=r[m];return"string"===typeof q?q:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+g+'"'}function e(g,m){var q=l,h=m[g];h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(g));"function"===typeof p&&(h=p.call(m,g,h));switch(typeof h){case "string":return b(h);case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);
case "object":if(!h)return"null";l+=t;var c=[];if("[object Array]"===Object.prototype.toString.apply(h)){var k=h.length;for(g=0;g<k;g+=1)c[g]=e(g,h)||"null";m=0===c.length?"[]":l?"[\n"+l+c.join(",\n"+l)+"\n"+q+"]":"["+c.join(",")+"]";l=q;return m}if(p&&"object"===typeof p)for(k=p.length,g=0;g<k;g+=1){var n=p[g];"string"===typeof n&&(m=e(n,h))&&c.push(b(n)+(l?": ":":")+m)}else for(n in h)Object.hasOwnProperty.call(h,n)&&(m=e(n,h))&&c.push(b(n)+(l?": ":":")+m);m=0===c.length?"{}":l?"{\n"+l+c.join(",\n"+
l)+"\n"+q+"}":"{"+c.join(",")+"}";l=q;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(g){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(g){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,t,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(g,m,q){var h;t=l="";if("number"===typeof q)for(h=0;h<q;h+=1)t+=" ";else"string"===typeof q&&(t=q);if((p=m)&&"function"!==typeof m&&("object"!==typeof m||"number"!==typeof m.length))throw Error("JSON.stringify");return e("",{"":g})});
"function"!==typeof JSON.parse&&(JSON.parse=function(g,m){function q(h,c){var k,n=h[c];if(n&&"object"===typeof n)for(k in n)if(Object.hasOwnProperty.call(n,k)){var u=q(n,k);void 0!==u?n[k]=u:delete n[k]}return m.call(h,c,n)}g=String(g);d.lastIndex=0;d.test(g)&&(g=g.replace(d,function(h){return"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(g.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+g+")"),"function"===typeof m?q({"":g},""):g;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var b={};jQuery(a).find("input,select,textarea").each(function(e){if(this.name)if(b[this.name]||(b[this.name]=[]),"select"===this.nodeName.toLowerCase()){var d=b[this.name];$(this).find("option").each(function(f){this.selected&&d.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&b[this.name].push(this.value||"")});return b};window.restore_form_values=function(a,b){var e=jQuery;e(a).find("input,select,textarea").each(function(d){if(this.name){var f=
b[this.name];"undefined"!=typeof f&&null!==f&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?e(this).find("option").each(function(l){this.selected=1<f.length?0<=e.inArray(this.value,f):0===f.length?!1:this.value===f[0]}):this.value=f.length?f[0]:"":this.checked=1<f.length?0<=e.inArray(this.value,f):0===f.length?!1:this.value===f[0])}})};window.init_cached_state=function(a){var b=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];var e=function(){var d={form_values:get_form_values(a)};b.each(onbeforeunload_fns,function(f,l){l(d)});document.getElementById("cache_form_values").value=JSON.stringify(d)};document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&e()});document.addEventListener("freeze",e);window.addEventListener("pagehide",e);window.cache_register_onbeforeunload=function(d){onbeforeunload_fns.push(d)};window.cache_register_onbeforerestorevalues=function(d){onbeforerestorevalues_fns.push(d)};
window.restore_cached_state=function(){b(window).on("pageshow",function(d){if(!d.originalEvent.persisted&&(d=document.getElementById("cache_form_values"))&&d.value){var f=JSON.parse(d.value);b.each(onbeforerestorevalues_fns,function(l,t){t(f)});restore_form_values(a,f.form_values)}})}}})();
(function(){var a=jQuery,b={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},e={"en-CA":!0,"":!0},d={},f={"fr-CA":"fr","es-MX":"es"},l=function(){var r=a(this),p=r.data("culture"),g=b[p]||a.datepicker.regional[p].dateFormat,m={};r.hasClass("NoYear")&&(g=g.replace(/[\- .\/]*yy[\/]?/,""),m={beforeShow:function(q,
h){h.dpDiv.addClass("NoYearDatePicker")},onClose:function(q,h){h.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});m.dateFormat=g;r.datepicker(a.extend({},a.datepicker.regional[p],m)).prop("autocomplete","off")},t=function(r){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+r+".min.js",function(){e[r]=!0;a.each(d[r],function(){l.call(this)});delete d[r]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var r=
a(this);var p=r.parents("[lang]").first().prop("lang")||"en-CA";p=f[p]||p;r.data("culture",p);e[p]?l.call(this):(r=d[p],r||(r=d[p]=[],t(p)),r.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
