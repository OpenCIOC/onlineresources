/*
 Globalize

 http://github.com/jquery/globalize

 Copyright Software Freedom Conservancy, Inc.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
window.CIOC={};
(function(b,a){a.do_drop_down_navigation=function(){for(var c=b.getElementById("ActionList").options,d=0;d<c.length;d++)if(c[d].selected){var e=c[d].getAttribute("href");e&&("undefined"!=typeof c[d].attributes.newwindow?a.open(e):a.location.href=e);break}};jQuery(function(c){c("[data-toggle=dialog]").each(function(){var d=c(this),e=c(d.data("target")),h={autoOpen:!1,title:e.data("title"),modal:e.data("modal")};e.dialog(h);d.click(function(){e.dialog("isOpen")?e.dialog("close"):e.dialog("open")})})})})(document,window);
function CheckAll(b,a){b||="IDList";var c=a;a||(c=document.RecordList);a=c.elements.length;for(var d=0;d<a;d++){var e=c.elements[d];e.name===b&&(e.checked=!0)}}function ClearAll(b,a){b||="IDList";var c=a;a||(c=document.RecordList);a=c.elements.length;for(var d=0;d<a;d++){var e=c.elements[d];e.name===b&&(e.checked=!1)}}function add_class(b,a){b&&!(new RegExp("\\b"+a+"\\b")).test(b.className)&&(b.className&&(a=" "+a),b.className+=a)}
function remove_class(b,a){if(b){for(var c=b.className.split(" "),d=[],e=0;e<c.length;e++){var h=c[e];h!==a&&d.push(h)}b.className=d.join(" ")}}function hide(b){add_class(b,"NotVisible")}function show(b){remove_class(b,"NotVisible")}function openWin(b,a){window.open(b,a,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(b,a){window.open(b,a,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(b,a){window.open(b,a,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(b){var a={sm:openWin,lg:openWinL,xl:openWinXL};b(document).on("click","a.poplink",function(){var c=b(this).data("popargs");(a[c.size||"sm"]||openWin)(this.href,c.name||"popwin");return!1})});
(function(){var b=jQuery,a={},c=function(p){null!==p&&"undefined"!==typeof p?b("#myListCount").text(p):(p=b("#myListCount").text())&&(p=parseInt(p,10));p?a.myListLink.show():a.myListLink.hide()},d=function(p){b.each(p,function(u,A){b("#added_to_list_"+A).show();b("#add_to_list_"+A).hide()})},e=function(p){return function(u){u.fail?alert(u.errinfo):(u.ids?c(b.grep(u.ids,m[a.domain]).length):u.count?c(u.count):c(0),d([p]))}},h=function(p){p=b(p.currentTarget).data("id");b.ajax({success:e(p),dataType:"json",
error:function(){alert("Error")},data:{id:p},type:"POST",url:a.current_list_url})},q=function(p){return function(u){if(u.fail)alert(u.errinfo);else{u=!0;if(p){var A=b("#results_table #remove_from_list_"+p);A.length?A.parent().parent().remove():(u=!1,A=b("#results_container #remove_from_list_"+p),A.parents(".dlist-result").remove())}(u?1!==b("#results_table tr").length:0!==b("#results_container .dlist-result").length)&&p||(b("#records_ui").hide(),b("#no_records_message").show())}}},v=function(p){p=
b(p.currentTarget).data("id");b.ajax({success:q(p),dataType:"json",error:function(){alert("Error")},data:{ID:p,RemoveItem:a.domain},type:"POST",url:a.current_list_url})},r=function(p){b.ajax({success:q(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:a.domain},type:"POST",url:a.current_list_url})},m={CIC:function(p){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(p)},VOL:function(p){return/^[1-9][0-9]*$/.test(p)}},y=function(p){if(p.fail)E();else if(p.inrequest){var u=b.grep(p.ids,
m[a.domain]);d(u);c(u.length);(p=p.previous_ids)&&b.each(p,function(A,H){b("#ct_added_to_previous_request_"+H).show()});b(".ListUI img").prop("src",function(A,H){return H.replace("list","referral")});b("#list_header_text").hide();b("#ct_header_text").show();a.current_list_url=a.ct_update_url;t()}else E()},E=function(){var p=function(){a.list_view_mode||d(a.already_added||[]);a.current_list_url=a.list_view_mode&&"ct"===a.list_view_mode?a.ct_update_url:a.list_update_url;c((a.already_added||[]).length);
t()};a.list_view_mode||a.has_session?p():b.ajax({dataType:"json",error:null,url:a.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(u){u.has_session&&p()}})},t=function(){b(".HideListUI").delegate(".add_to_list","click",h).delegate(".remove_from_list","click",v).removeClass("HideListUI");b("#remove_all_from_list").click(r);b.browser.msie&&"8.0">b.browser.msie&&b(".ListUI").removeClass("FixIE")};window.init_list_adder=function(p){a=p;a.myListLink=b("#myListLink").parent(":hidden").add("#myListLink");
p.in_request?b.ajax({success:y,dataType:"json",error:null,type:"POST",url:p.in_request}):E()}})();this.JSON||(this.JSON={});
(function(){function b(m){return 10>m?"0"+m:m}function a(m){e.lastIndex=0;return e.test(m)?'"'+m.replace(e,function(y){var E=v[y];return"string"===typeof E?E:"\\u"+("0000"+y.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+m+'"'}function c(m,y){var E=h,t=y[m];t&&"object"===typeof t&&"function"===typeof t.toJSON&&(t=t.toJSON(m));"function"===typeof r&&(t=r.call(y,m,t));switch(typeof t){case "string":return a(t);case "number":return isFinite(t)?String(t):"null";case "boolean":case "null":return String(t);
case "object":if(!t)return"null";h+=q;var p=[];if("[object Array]"===Object.prototype.toString.apply(t)){var u=t.length;for(m=0;m<u;m+=1)p[m]=c(m,t)||"null";y=0===p.length?"[]":h?"[\n"+h+p.join(",\n"+h)+"\n"+E+"]":"["+p.join(",")+"]";h=E;return y}if(r&&"object"===typeof r)for(u=r.length,m=0;m<u;m+=1){var A=r[m];"string"===typeof A&&(y=c(A,t))&&p.push(a(A)+(h?": ":":")+y)}else for(A in t)Object.hasOwnProperty.call(t,A)&&(y=c(A,t))&&p.push(a(A)+(h?": ":":")+y);y=0===p.length?"{}":h?"{\n"+h+p.join(",\n"+
h)+"\n"+E+"}":"{"+p.join(",")+"}";h=E;return y}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(m){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(m){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,q,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;"function"!==typeof JSON.stringify&&(JSON.stringify=function(m,y,E){var t;q=h="";if("number"===typeof E)for(t=0;t<E;t+=1)q+=" ";else"string"===typeof E&&(q=E);if((r=y)&&"function"!==typeof y&&("object"!==typeof y||"number"!==typeof y.length))throw Error("JSON.stringify");return c("",{"":m})});
"function"!==typeof JSON.parse&&(JSON.parse=function(m,y){function E(t,p){var u,A=t[p];if(A&&"object"===typeof A)for(u in A)if(Object.hasOwnProperty.call(A,u)){var H=E(A,u);void 0!==H?A[u]=H:delete A[u]}return y.call(t,p,A)}m=String(m);d.lastIndex=0;d.test(m)&&(m=m.replace(d,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(m.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return m=eval("("+m+")"),"function"===typeof y?E({"":m},""):m;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(b){var a={};jQuery(b).find("input,select,textarea").each(function(c){if(this.name)if(a[this.name]||(a[this.name]=[]),"select"===this.nodeName.toLowerCase()){var d=a[this.name];$(this).find("option").each(function(e){this.selected&&d.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&a[this.name].push(this.value||"")});return a};window.restore_form_values=function(b,a){var c=jQuery;c(b).find("input,select,textarea").each(function(d){if(this.name){var e=
a[this.name];"undefined"!=typeof e&&null!==e&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?c(this).find("option").each(function(h){this.selected=1<e.length?0<=c.inArray(this.value,e):0===e.length?!1:this.value===e[0]}):this.value=e.length?e[0]:"":this.checked=1<e.length?0<=c.inArray(this.value,e):0===e.length?!1:this.value===e[0])}})};window.init_cached_state=function(b){var a=jQuery;b=b||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];a(window).on("beforeunload",function(){var c={form_values:get_form_values(b)};a.each(onbeforeunload_fns,function(d,e){e(c)});document.getElementById("cache_form_values").value=JSON.stringify(c)});window.cache_register_onbeforeunload=function(c){onbeforeunload_fns.push(c)};window.cache_register_onbeforerestorevalues=function(c){onbeforerestorevalues_fns.push(c)};window.restore_cached_state=function(){var c=document.getElementById("cache_form_values");if(c&&c.value){var d=
JSON.parse(c.value);a.each(onbeforerestorevalues_fns,function(e,h){h(d)});restore_form_values(b,d.form_values)}}}})();
(function(){var b=jQuery,a={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},c={"en-CA":!0,"":!0},d={},e={"fr-CA":"fr","es-MX":"es"},h=function(){var v=b(this),r=v.data("culture"),m=a[r]||b.datepicker.regional[r].dateFormat,y={};v.hasClass("NoYear")&&(m=m.replace(/[\- .\/]*yy[\/]?/,""),y={beforeShow:function(E,
t){t.dpDiv.addClass("NoYearDatePicker")},onClose:function(E,t){t.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});y.dateFormat=m;v.datepicker(b.extend({},b.datepicker.regional[r],y)).prop("autocomplete","off")},q=function(v){b.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+b.ui.version+"/i18n/jquery.ui.datepicker-"+v+".min.js",function(){c[v]=!0;b.each(d[v],function(){h.call(this)});delete d[v]})};b.datepicker.regional["en-CA"]=b.extend({},b.datepicker.regional[""]);b.fn.extend({autodatepicker:function(){return this.each(function(){var v=
b(this);var r=v.parents("[lang]").first().prop("lang")||"en-CA";r=e[r]||r;v.data("culture",r);c[r]?h.call(this):(v=d[r],v||(v=d[r]=[],q(r)),v.push(this))})}});jQuery(function(){b("input.DatePicker").autodatepicker()})})();
(function(b){b.widget("ui.combobox",{options:{source:null},_create:function(){var a=this.element;this.options.source&&(b(a).autocomplete({focus:function(c,d){return!1},source:this.options.source,delay:0,minLength:0}),b("<span>").insertAfter(a).addClass("SmallButton DownButton").css("margin-left","1px").click(function(c){a.autocomplete("widget").is(":visible")?a.autocomplete("close"):(a.autocomplete("search",""),a.focus())}))}})})(jQuery);
(function(b){b.extend(b.fn,{validate:function(a){if(this.length){var c=b.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate");c=new b.validator(a,this[0]);b.data(this[0],"validator",c);c.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&a.filter(":submit").click(function(){c.submitButton=this}),this.submit(function(d){function e(){if(c.settings.submitHandler){if(c.submitButton)var h=b("<input type='hidden'/>").attr("name",
c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&h.remove();return!1}return!0}c.settings.debug&&d.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,e();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):e();c.focusInvalid();return!1}));return c}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(b(this[0]).is("form"))return this.validate().form();
var a=!0,c=b(this[0].form).validate();this.each(function(){a&=c.element(this)});return a},removeAttrs:function(a){var c={},d=this;b.each(a.split(/\s/),function(e,h){c[h]=d.attr(h);d.removeAttr(h)});return c},rules:function(a,c){var d=this[0];if(a){var e=b.data(d.form,"validator").settings,h=e.rules,q=b.validator.staticRules(d);switch(a){case "add":b.extend(q,b.validator.normalizeRule(c));h[d.name]=q;c.messages&&(e.messages[d.name]=b.extend(e.messages[d.name],c.messages));break;case "remove":if(!c)return delete h[d.name],
q;var v={};b.each(c.split(/\s/),function(r,m){v[m]=q[m];delete q[m]});return v}}a=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(d),b.validator.classRules(d),b.validator.attributeRules(d),b.validator.staticRules(d)),d);a.required&&(c=a.required,delete a.required,a=b.extend({required:c},a));return a}});b.extend(b.expr[":"],{blank:function(a){return!b.trim(""+a.value)},filled:function(a){return!!b.trim(""+a.value)},unchecked:function(a){return!a.checked}});b.validator=function(a,c){this.settings=
b.extend(!0,{},b.validator.defaults,a);this.currentForm=c;this.init()};b.validator.format=function(a,c){if(1==arguments.length)return function(){var d=b.makeArray(arguments);d.unshift(a);return b.validator.format.apply(this,d)};2<arguments.length&&c.constructor!=Array&&(c=b.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);b.each(c,function(d,e){a=a.replace(new RegExp("\\{"+d+"\\}","g"),e)});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a,c){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,c){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,
c){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a,c){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).addClass(c).removeClass(d):b(a).addClass(c).removeClass(d)},unhighlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).removeClass(c).addClass(d):b(a).removeClass(c).addClass(d)}},setDefaults:function(a){b.extend(b.validator.defaults,
a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:b.validator.format("Please enter no more than {0} characters."),
minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(e){var h=b.data(this[0].form,"validator"),q="on"+e.type.replace(/^validate/,
"");h.settings[q]&&h.settings[q].call(h,this[0],e)}this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};b.each(this.settings.groups,function(e,h){b.each(h.split(/\s/),function(q,v){c[v]=e})});var d=
this.settings.rules;b.each(d,function(e,h){d[e]=b.validator.normalizeRule(h)});b(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",
a);this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,c=this.currentElements=this.elements();c[a];a++)this.check(c[a]);return this.valid()},element:function(a){this.lastElement=
a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=b(a);var c=this.check(a);c?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(a){if(a){b.extend(this.errorMap,a);this.errorList=[];for(var c in a)this.errorList.push({message:a[c],element:this.findByName(c)[0]});this.successList=b.grep(this.successList,function(d){return!(d.name in a)})}this.settings.showErrors?
this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var c=0,d;for(d in a)c++;return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==b.grep(this.errorList,function(c){return c.element.name==a.name}).length&&a},elements:function(){var a=this,c={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in c||!a.objectLength(b(this).rules())?!1:c[this.name]=!0})},clean:function(a){return b(a)[0]},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var c=b(a).rules(),d=!1,e;for(e in c){var h={method:e,parameters:c[e]};try{var q=b.validator.methods[e].call(this,a.value.replace(/\r/g,""),a,h.parameters);if("dependency-mismatch"==q)d=!0;else{d=!1;if("pending"==q){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!q)return this.formatAndAdd(a,h),!1}}catch(v){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+
a.id+", check the '"+h.method+"' method",v),v;}}if(!d)return this.objectLength(c)&&this.successList.push(a),!0},customMetaMessage:function(a,c){if(b.metadata)return(a=this.settings.meta?b(a).metadata()[this.settings.meta]:b(a).metadata())&&a.messages&&a.messages[c]},customMessage:function(a,c){return(a=this.settings.messages[a])&&(a.constructor==String?a:a[c])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,c){return this.findDefined(this.customMessage(a.name,
c),this.customMetaMessage(a,c),!this.settings.ignoreTitle&&a.title||void 0,b.validator.messages[c],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,c){var d=this.defaultMessage(a,c.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,c.parameters,a):e.test(d)&&(d=jQuery.format(d.replace(e,"{$1}"),c.parameters));this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=
a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var c=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass);this.showLabel(c.element,c.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,
c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(a,c){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=b("<"+this.settings.errorElement+
"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,b(a)):d.insertAfter(a)));!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(a){var c=
this.idOrName(a);return this.errors().filter(function(){return b(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var c=this.currentForm;return b(document.getElementsByName(a)).map(function(d,e){return e.form==c&&e.name==a&&e||null})},
getLength:function(a,c){switch(c.nodeName.toLowerCase()){case "select":return b("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return a.length},depend:function(a,c){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,c):!0},dependTypes:{"boolean":function(a,c){return a},string:function(a,c){return!!b(a,c.form).length},"function":function(a,c){return a(c)}},optional:function(a){return!b.validator.methods.required.call(this,
b.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!c&&0==this.pendingRequest&&this.formSubmitted&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(a){return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,c){a.constructor==String?this.classRuleSettings[a]=c:b.extend(this.classRuleSettings,a)},classRules:function(a){var c=
{};(a=b(a).attr("class"))&&b.each(a.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(c,b.validator.classRuleSettings[this])});return c},attributeRules:function(a){var c={};a=b(a);for(var d in b.validator.methods){var e;(e="required"===d&&"function"===typeof b.fn.prop?a.prop(d):a.attr(d))?c[d]=e:a[0].getAttribute("type")===d&&(c[d]=!0)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(a){if(!b.metadata)return{};var c=b.data(a.form,
"validator").settings.meta;return c?b(a).metadata()[c]:b(a).metadata()},staticRules:function(a){var c={},d=b.data(a.form,"validator");d.settings.rules&&(c=b.validator.normalizeRule(d.settings.rules[a.name])||{});return c},normalizeRules:function(a,c){b.each(a,function(d,e){if(!1===e)delete a[d];else if(e.param||e.depends){var h=!0;switch(typeof e.depends){case "string":h=!!b(e.depends,c.form).length;break;case "function":h=e.depends.call(c,c)}h?a[d]=void 0!==e.param?e.param:!0:delete a[d]}});b.each(a,
function(d,e){a[d]=b.isFunction(e)?e(c):e});b.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});b.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});b.validator.autoCreateRanges&&(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==
typeof a){var c={};b.each(a.split(/\s/),function(){c[this]=!0});a=c}return a},addMethod:function(a,c,d){b.validator.methods[a]=c;b.validator.messages[a]=void 0!=d?d:b.validator.messages[a];3>c.length&&b.validator.addClassRules(a,b.validator.normalizeRule(a))},methods:{required:function(a,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case "select":return(a=b(c).val())&&0<a.length;case "input":if(this.checkable(c))return 0<this.getLength(a,c);default:return 0<
b.trim(a).length}},remote:function(a,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});e.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=e.message;d="string"==typeof d&&{url:d}||d;if(this.pending[c.name])return"pending";if(e.old===a)return e.valid;e.old=a;var h=this;this.startRequest(c);var q={};q[c.name]=a;b.ajax(b.extend(!0,{url:d,mode:"abort",port:"validate"+
c.name,dataType:"json",data:q,success:function(v){h.settings.messages[c.name].remote=e.originalMessage;var r=!0===v;if(r){var m=h.formSubmitted;h.prepareElement(c);h.formSubmitted=m;h.successList.push(c);h.showErrors()}else m={},v=v||h.defaultMessage(c,"remote"),m[c.name]=e.message=b.isFunction(v)?v(a):v,h.showErrors(m);e.valid=r;h.stopRequest(c,r)}},d));return"pending"},minlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)>=d},maxlength:function(a,c,d){return this.optional(c)||
this.getLength(b.trim(a),c)<=d},rangelength:function(a,c,d){a=this.getLength(b.trim(a),c);return this.optional(c)||a>=d[0]&&a<=d[1]},min:function(a,c,d){return this.optional(c)||a>=d},max:function(a,c,d){return this.optional(c)||a<=d},range:function(a,c,d){return this.optional(c)||a>=d[0]&&a<=d[1]},email:function(a,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,c){return this.optional(c)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,c){return this.optional(c)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,c){return this.optional(c)||/^\d+$/.test(a)},creditcard:function(a,c){if(this.optional(c))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;c=0;var d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;0<=e;e--){var h=
a.charAt(e);h=parseInt(h,10);d&&9<(h*=2)&&(h-=9);c+=h;d=!d}return 0==c%10},accept:function(a,c,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(c)||a.match(new RegExp(".("+d+")$","i"))},equalTo:function(a,c,d){d=b(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(c).valid()});return a==d.val()}}});b.format=b.validator.format})(jQuery);
(function(b){var a={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(d,e,h){e=d.port;"abort"==d.mode&&(a[e]&&a[e].abort(),a[e]=h)});else{var c=b.ajax;b.ajax=function(d){var e=("port"in d?d:b.ajaxSettings).port;return"abort"==("mode"in d?d:b.ajaxSettings).mode?(a[e]&&a[e].abort(),a[e]=c.apply(this,arguments)):c.apply(this,arguments)}}})(jQuery);
(function(b){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||b.each({focus:"focusin",blur:"focusout"},function(a,c){function d(e){e=b.event.fix(e);e.type=c;return b.event.handle.call(this,e)}b.event.special[c]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(e){arguments[0]=b.event.fix(e);arguments[0].type=c;return b.event.handle.apply(this,arguments)}}});b.extend(b.fn,{validateDelegate:function(a,
c,d){return this.bind(c,function(e){var h=b(e.target);if(h.is(a))return d.apply(h,arguments)})}})})(jQuery);
(function(b,a){var c,d;var e=function(f){return new e.prototype.init(f)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=e:b.Globalize=e;e.cultures={};e.prototype={constructor:e,init:function(f){this.cultures=e.cultures;this.cultureSelector=f;return this}};e.prototype.init.prototype=e.prototype;e.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",
groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},
months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};
e.cultures["default"].calendar=e.cultures["default"].calendars.standard;e.cultures.en=e.cultures["default"];e.cultureSelector="en";var h=/^0x[a-f0-9]+$/i;var q=/^[+\-]?infinity$/i;var v=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;var r=/^\s+|\s+$/g;var m=function(f,g){if(f.indexOf)return f.indexOf(g);for(var l=0,n=f.length;l<n;l++)if(f[l]===g)return l;return-1};var y=function(f,g){return f.substr(f.length-g.length)===g};var E=function(){var f,g,l,n=arguments[0]||{},x=1,G=arguments.length,D=!1;"boolean"===typeof n&&
(D=n,n=arguments[1]||{},x=2);for("object"===typeof n||p(n)||(n={});x<G;x++)if(null!=(f=arguments[x]))for(g in f){var k=n[g];var C=f[g];n!==C&&(D&&C&&(u(C)||(l=t(C)))?(l?(l=!1,k=k&&t(k)?k:[]):k=k&&u(k)?k:{},n[g]=E(D,k,C)):C!==a&&(n[g]=C))}return n};var t=Array.isArray||function(f){return"[object Array]"===Object.prototype.toString.call(f)};var p=function(f){return"[object Function]"===Object.prototype.toString.call(f)};var u=function(f){return"[object Object]"===Object.prototype.toString.call(f)};
var A=function(f,g){return 0===f.indexOf(g)};var H=function(f){return(f+"").replace(r,"")};var B=function(f){return isNaN(f)?NaN:Math[0>f?"ceil":"floor"](f)};var w=function(f,g,l){var n;for(n=f.length;n<g;n+=1)f=l?"0"+f:f+"0";return f};var F=function(f,g){for(var l=0,n=!1,x=0,G=f.length;x<G;x++){var D=f.charAt(x);switch(D){case "'":n?g.push("'"):l++;n=!1;break;case "\\":n&&g.push("\\");n=!n;break;default:g.push(D),n=!1}}return l};var M=function(f,g){g=g||"F";f=f.patterns;var l=g.length;if(1===l){f=
f[g];if(!f)throw"Invalid date format string '"+g+"'.";g=f}else 2===l&&"%"===g.charAt(0)&&(g=g.charAt(1));return g};var N=function(f,g,l){function n(V,R){V+="";return 1<R&&V.length<R?(V=K[R-2]+V,V.substr(V.length-R,R)):V}function x(V,R){if(X)return X[R];switch(R){case 0:return V.getFullYear();case 1:return V.getMonth();case 2:return V.getDate();default:throw"Invalid part value "+R;}}var G=l.calendar,D=G.convert;if(!g||!g.length||"i"===g){if(l&&l.name.length)if(D)l=N(f,G.patterns.F,l);else{g=new Date(f.getTime());
var k=O(f,G.eras);g.setFullYear(z(f,G,k));l=g.toLocaleString()}else l=f.toString();return l}var C=G.eras,I="s"===g;g=M(G,g);l=[];var K=["0","00","000"],S=/([^d]|^)(d|dd)([^d]|$)/g,Q=0,T=Y(),X;for(!I&&D&&(X=D.fromGregorian(f));;){var L=T.lastIndex;D=T.exec(g);L=g.slice(L,D?D.index:g.length);Q+=F(L,l);if(!D)break;if(Q%2)l.push(D[0]);else switch(L=D[0],D=L.length,L){case "ddd":case "dddd":l.push((3===D?G.days.namesAbbr:G.days.names)[f.getDay()]);break;case "d":case "dd":k=!0;l.push(n(x(f,2),D));break;
case "MMM":case "MMMM":L=x(f,1);var P=l,ba=P.push,ca;if(ca=G.monthsGenitive){if(!k&&!Z){k=S.test(g);var Z=!0}ca=k}ba.call(P,ca?G.monthsGenitive[3===D?"namesAbbr":"names"][L]:G.months[3===D?"namesAbbr":"names"][L]);break;case "M":case "MM":l.push(n(x(f,1)+1,D));break;case "y":case "yy":case "yyyy":L=X?X[0]:z(f,G,O(f,C),I);4>D&&(L%=100);l.push(n(L,D));break;case "h":case "hh":L=f.getHours()%12;0===L&&(L=12);l.push(n(L,D));break;case "H":case "HH":l.push(n(f.getHours(),D));break;case "m":case "mm":l.push(n(f.getMinutes(),
D));break;case "s":case "ss":l.push(n(f.getSeconds(),D));break;case "t":case "tt":L=12>f.getHours()?G.AM?G.AM[0]:" ":G.PM?G.PM[0]:" ";l.push(1===D?L.charAt(0):L);break;case "f":case "ff":case "fff":l.push(n(f.getMilliseconds(),3).substr(0,D));break;case "z":case "zz":L=f.getTimezoneOffset()/60;l.push((0>=L?"+":"-")+n(Math.floor(Math.abs(L)),D));break;case "zzz":L=f.getTimezoneOffset()/60;l.push((0>=L?"+":"-")+n(Math.floor(Math.abs(L)),2)+":"+n(Math.abs(f.getTimezoneOffset()%60),2));break;case "g":case "gg":G.eras&&
l.push(G.eras[O(f,C)].name);break;case "/":l.push(G["/"]);break;default:throw"Invalid date format pattern '"+L+"'.";}}return l.join("")};(function(){var f=function(g,l,n){var x=n.groupSizes,G=x[0],D=1,k=Math.pow(10,l);k=Math.round(g*k)/k;isFinite(k)||(k=g);g=k;k=(g+"").split(/e/i);var C=1<k.length?parseInt(k[1],10):0;g=k[0];k=g.split(".");g=k[0];k=1<k.length?k[1]:"";0<C?(k=w(k,C,!1),g+=k.slice(0,C),k=k.substr(C)):0>C&&(C=-C,g=w(g,C+1,!0),k=g.slice(-C,g.length)+k,g=g.slice(0,-C));k=0<l?n["."]+(k.length>
l?k.slice(0,l):w(k,l)):"";l=g.length-1;n=n[","];for(C="";0<=l;){if(0===G||G>l)return g.slice(0,l+1)+(C.length?n+C+k:k);C=g.slice(l-G+1,l+1)+(C.length?n+C:"");l-=G;D<x.length&&(G=x[D],D++)}return g.slice(0,l+1)+n+C+k};c=function(g,l,n){if(!isFinite(g))return Infinity===g?n.numberFormat.positiveInfinity:-Infinity===g?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!l||"i"===l)return n.name.length?g.toLocaleString():g.toString();l=l||"D";n=n.numberFormat;var x=Math.abs(g),G=-1;1<l.length&&(G=parseInt(l.slice(1),
10));var D=l.charAt(0).toUpperCase();switch(D){case "D":l="n";x=B(x);-1!==G&&(x=w(""+x,G,!0));0>g&&(x="-"+x);break;case "N":var k=n;case "C":k=k||n.currency;case "P":k=k||n.percent;l=0>g?k.pattern[0]:k.pattern[1]||"n";-1===G&&(G=k.decimals);x=f(x*("P"===D?100:1),G,k);break;default:throw"Bad number format specifier: "+D;}g=/n|\$|-|%/g;for(k="";;){G=g.lastIndex;D=g.exec(l);k+=l.slice(G,D?D.index:l.length);if(!D)break;switch(D[0]){case "n":k+=x;break;case "$":k+=n.currency.symbol;break;case "-":/[1-9]/.test(x)&&
(k+=n["-"]);break;case "%":k+=n.percent.symbol}}return k}})();var Y=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};var O=function(f,g){if(!g)return 0;for(var l=f.getTime(),n=0,x=g.length;n<x;n++)if(f=g[n].start,null===f||l>=f)return n;return 0};var z=function(f,g,l,n){f=f.getFullYear();!n&&g.eras&&(f-=g.eras[l].offset);return f};(function(){var f=function(k,C){if(100>C){var I=new Date,K=O(I);I=z(I,k,K);k=k.twoDigitYearMax;k="string"===
typeof k?(new Date).getFullYear()%100+parseInt(k,10):k;C+=I-I%100;C>k&&(C-=100)}return C};var g=function(k,C,I){var K=k.days,S=k._upperDays;S||(k._upperDays=S=[D(K.names),D(K.namesAbbr),D(K.namesShort)]);C=G(C);I?(k=m(S[1],C),-1===k&&(k=m(S[2],C))):k=m(S[0],C);return k};var l=function(k,C,I){var K=k.months,S=k.monthsGenitive||k.months,Q=k._upperMonths,T=k._upperMonthsGen;Q||(k._upperMonths=Q=[D(K.names),D(K.namesAbbr)],k._upperMonthsGen=T=[D(S.names),D(S.namesAbbr)]);C=G(C);k=m(I?Q[1]:Q[0],C);0>k&&
(k=m(I?T[1]:T[0],C));return k};var n=function(k,C){var I=k._parseRegExp;if(I){var K=I[C];if(K)return K}else k._parseRegExp=I={};k=M(k,C).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");K=["^"];for(var S=[],Q=0,T=0,X=Y(),L;null!==(L=X.exec(k));){var P=k.slice(Q,L.index);Q=X.lastIndex;T+=F(P,K);if(T%2)K.push(L[0]);else{P=L[0];var ba=P.length;switch(P){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":P="(\\D+)";break;case "tt":case "t":P="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":P=
"(\\d{"+ba+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":P="(\\d\\d?)";break;case "zzz":P="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":P="([+-]?\\d\\d?)";break;case "/":P="(\\/)";break;default:throw"Invalid date format pattern '"+P+"'.";}P&&K.push(P);S.push(L[0])}}F(k.slice(Q),K);K.push("$");k={regExp:K.join("").replace(/\s+/g,"\\s+"),groups:S};return I[C]=k};var x=function(k,C,I){return k<C||k>I};
var G=function(k){return k.split("\u00a0").join(" ").toUpperCase()};var D=function(k){for(var C=[],I=0,K=k.length;I<K;I++)C[I]=G(k[I]);return C};d=function(k,C,I){k=H(k);I=I.calendar;C=n(I,C);var K=(new RegExp(C.regExp)).exec(k);if(null===K)return null;var S=C.groups,Q=C=k=null,T=null,X=null,L=0,P=0,ba=0,ca=0;var Z=null;for(var V=!1,R=0,ea=S.length;R<ea;R++){var U=K[R+1];if(U){var W=S[R],da=W.length,aa=parseInt(U,10);switch(W){case "dd":case "d":T=aa;if(x(T,1,31))return null;break;case "MMM":case "MMMM":Q=
l(I,U,3===da);if(x(Q,0,11))return null;break;case "M":case "MM":Q=aa-1;if(x(Q,0,11))return null;break;case "y":case "yy":case "yyyy":C=4>da?f(I,aa):aa;if(x(C,0,9999))return null;break;case "h":case "hh":L=aa;12===L&&(L=0);if(x(L,0,11))return null;break;case "H":case "HH":L=aa;if(x(L,0,23))return null;break;case "m":case "mm":P=aa;if(x(P,0,59))return null;break;case "s":case "ss":ba=aa;if(x(ba,0,59))return null;break;case "tt":case "t":V=I.PM&&(U===I.PM[0]||U===I.PM[1]||U===I.PM[2]);if(!V&&(!I.AM||
U!==I.AM[0]&&U!==I.AM[1]&&U!==I.AM[2]))return null;break;case "f":case "ff":case "fff":ca=aa*Math.pow(10,3-da);if(x(ca,0,999))return null;break;case "ddd":case "dddd":X=g(I,U,3===da);if(x(X,0,6))return null;break;case "zzz":W=U.split(/:/);if(2!==W.length)return null;Z=parseInt(W[0],10);if(x(Z,-12,13))return null;W=parseInt(W[1],10);if(x(W,0,59))return null;Z=60*Z+(A(U,"-")?-W:W);break;case "z":case "zz":Z=aa;if(x(Z,-12,13))return null;Z*=60;break;case "g":case "gg":if(!U||!I.eras)return null;U=H(U.toLowerCase());
W=0;for(da=I.eras.length;W<da;W++)if(U===I.eras[W].name.toLowerCase()){k=W;break}if(null===k)return null}}}K=new Date;S=(R=I.convert)?R.fromGregorian(K)[0]:K.getFullYear();null===C?C=S:I.eras&&(C+=I.eras[k||0].offset);null===Q&&(Q=0);null===T&&(T=1);if(R){if(K=R.toGregorian(C,Q,T),null===K)return null}else if(K.setFullYear(C,Q,T),K.getDate()!==T||null!==X&&K.getDay()!==X)return null;V&&12>L&&(L+=12);K.setHours(L,P,ba,ca);null!==Z&&(I=K.getMinutes()-(Z+K.getTimezoneOffset()),K.setHours(K.getHours()+
parseInt(I/60,10),I%60));return K}})();var J=function(f,g,l){var n=g["-"];g=g["+"];var x;switch(l){case "n -":n=" "+n,g=" "+g;case "n-":y(f,n)?x=["-",f.substr(0,f.length-n.length)]:y(f,g)&&(x=["+",f.substr(0,f.length-g.length)]);break;case "- n":n+=" ",g+=" ";case "-n":A(f,n)?x=["-",f.substr(n.length)]:A(f,g)&&(x=["+",f.substr(g.length)]);break;case "(n)":A(f,"(")&&y(f,")")&&(x=["-",f.substr(1,f.length-2)])}return x||["",f]};e.prototype.findClosestCulture=function(f){return e.findClosestCulture.call(this,
f)};e.prototype.format=function(f,g,l){return e.format.call(this,f,g,l)};e.prototype.localize=function(f,g){return e.localize.call(this,f,g)};e.prototype.parseInt=function(f,g,l){return e.parseInt.call(this,f,g,l)};e.prototype.parseFloat=function(f,g,l){return e.parseFloat.call(this,f,g,l)};e.prototype.culture=function(f){return e.culture.call(this,f)};e.addCultureInfo=function(f,g,l){var n=!1;"string"!==typeof f?(l=f,f=this.culture().name,g=this.cultures[f]):"string"!==typeof g?(l=g,n=null==this.cultures[f],
g=this.cultures[f]||this.cultures["default"]):(n=!0,g=this.cultures[g]);this.cultures[f]=E(!0,{},g,l);n&&(this.cultures[f].calendar=this.cultures[f].calendars.standard)};e.findClosestCulture=function(f){var g;if(!f)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof f&&(f=f.split(","));if(t(f)){var l=this.cultures,n=f,x,G=n.length,D=[];for(x=0;x<G;x++){f=H(n[x]);f=f.split(";");var k=H(f[0]);1===f.length?f=1:(f=H(f[1]),0===f.indexOf("q=")?(f=f.substr(2),
f=parseFloat(f),f=isNaN(f)?0:f):f=1);D.push({lang:k,pri:f})}D.sort(function(I,K){return I.pri<K.pri?1:I.pri>K.pri?-1:0});for(x=0;x<G;x++)if(k=D[x].lang,g=l[k])return g;for(x=0;x<G;x++){k=D[x].lang;do{n=k.lastIndexOf("-");if(-1===n)break;k=k.substr(0,n);if(g=l[k])return g}while(1)}for(x=0;x<G;x++){k=D[x].lang;for(var C in l)if(n=l[C],n.language==k)return n}}else if("object"===typeof f)return f;return g||null};e.format=function(f,g,l){l=this.findClosestCulture(l);f instanceof Date?f=N(f,g,l):"number"===
typeof f&&(f=c(f,g,l));return f};e.localize=function(f,g){return this.findClosestCulture(g).messages[f]||this.cultures["default"].messages[f]};e.parseDate=function(f,g,l){l=this.findClosestCulture(l);var n;if(g){if("string"===typeof g&&(g=[g]),g.length){var x=0;for(var G=g.length;x<G;x++){var D=g[x];if(D&&(n=d(f,D,l)))break}}}else for(x in g=l.calendar.patterns,g)if(n=d(f,g[x],l))break;return n||null};e.parseInt=function(f,g,l){return B(e.parseFloat(f,g,l))};e.parseFloat=function(f,g,l){"number"!==
typeof g&&(l=g,g=10);var n=this.findClosestCulture(l);l=NaN;var x=n.numberFormat;-1<f.indexOf(n.numberFormat.currency.symbol)&&(f=f.replace(n.numberFormat.currency.symbol,""),f=f.replace(n.numberFormat.currency["."],n.numberFormat["."]));f=H(f);if(q.test(f))l=parseFloat(f);else if(!g&&h.test(f))l=parseInt(f,16);else{n=J(f,x,x.pattern[0]);g=n[0];n=n[1];""===g&&"(n)"!==x.pattern[0]&&(n=J(f,x,"(n)"),g=n[0],n=n[1]);""===g&&"-n"!==x.pattern[0]&&(n=J(f,x,"-n"),g=n[0],n=n[1]);g=g||"+";f=n.indexOf("e");0>
f&&(f=n.indexOf("E"));if(0>f){var G=n;f=null}else G=n.substr(0,f),f=n.substr(f+1);var D=x["."],k=G.indexOf(D);0>k?(n=G,G=null):(n=G.substr(0,k),G=G.substr(k+D.length));D=x[","];n=n.split(D).join("");k=D.replace(/\u00A0/g," ");D!==k&&(n=n.split(k).join(""));g+=n;null!==G&&(g+="."+G);null!==f&&(x=J(f,x,"-n"),g+="e"+(x[0]||"+")+x[1]);v.test(g)&&(l=parseFloat(g))}return l};e.culture=function(f){"undefined"!==typeof f&&(this.cultureSelector=f);return this.findClosestCulture(f)||this.cultures["default"]}})(this);
(function(){var b=function(d){d=d.toLowerCase();d=d.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");d=d.replace(RegExp("\u00e6","g"),"ae");d=d.replace(RegExp("\u00e7","g"),"c");d=d.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");d=d.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");d=d.replace(RegExp("\u00f1","g"),"n");d=d.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");d=d.replace(RegExp("\u009c","g"),"oe");d=d.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return d=d.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=b;var a=function(d,e,h,q,v){h=h||"value";q=q||"";v=v||"";return function(r,m){if(e.term&&(new RegExp(q+d.ui.autocomplete.escapeRegex(e.term)+v,"i")).test(r.term)&&e.content&&13>e.content.length){var y=new RegExp(q+d.ui.autocomplete.escapeRegex(r.term)+v,"i");m(d.grep(e.content,function(E){return y.test(b(E[h]))}));return!0}return!1}};window.default_cache_search_fn=a;var c=function(d,e,h,q,v){h=h||{};v=v||a(d,h,q||"value");
return function(r,m,y){r.term=b(r.term);h.term===r.term&&h.content?m(h.content):v(r,m)||d.ajax({url:y||e,dataType:"json",data:r,cache:!1,success:function(E){h.term=r.term;h.content=E;m(E)}})}};window.create_caching_source_fn=c;window.init_community_autocomplete=function(d,e,h,q,v){var r={};v&&=d(v);v&&!v.length&&(v=null);var m=d("#"+e).autocomplete({focus:function(y,E){return!1},select:function(y,E){m.data({chkid:E.item.chkid,display:E.item.value})},source:c(d,h,r),minLength:q}).keypress(function(y){"13"==
y.keyCode&&(y.preventDefault(),m.autocomplete("close"))});v&&(m.parents("form").on("submit",function(){var y=m.val();if(m.data("display")===y)v.val(m.data("chkid"));else{if(r.content){var E=b(y);y=d.grep(r.content,function(t){return b(t.value)===E});if(1===y.length){v.val(y[0].chkid);m.data({chkid:y[0].chkid,display:y[0].value}).val(y[0].value);return}}v.val("")}}),cache_register_onbeforerestorevalues(function(y){m.length&&(y=y["autocomplete_data_"+m[0].id])&&m.data(y)}),cache_register_onbeforeunload(function(y){if(m.length){var E=
m.data();E.display&&E.chkid&&(y["autocomplete_data_"+m[0].id]={display:E.display,chkid:E.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(c,d,e,h){cache_register_onbeforeunload(function(q){q[d+"_added"]=e});cache_register_onbeforerestorevalues(function(q){(q=q[d+"_added"])&&c.each(q,function(v,r){h(r.chkid,r.display,"")})})};window.basic_chk_add_html=function(c,d){return function(e,h){e=c("<tr>").append(c("<td>").append(c("<input>").prop({id:d+"_ID_"+e,type:"checkbox",checked:!0,defaultChecked:!0,name:d+"_ID",value:e})).append(document.createTextNode(" "+
h))).append(c("<td>").append(c("<input>").prop({id:d+"_NOTES_"+e,name:d+"_NOTES_"+e,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));c("#"+d+"_existing_add_table").append(e);return e.find('input[type="checkbox"]')[0]}};var b={},a=function(c){$("#NEW_"+c).autocomplete(b[c])};window.init_autocomplete_checklist=function(c,d){var e=d.field;if(!b[e]){var h=d.source;d.minLength=d.minLength||1;d.delay=d.delay||300;d.add_new_html=d.add_new_html||basic_chk_add_html(c,e);d.match_prop=
d.match_prop||"value";d.txt_not_found=d.txt_not_found||"Not Found";var q=c(d.delegate_root||document),v=d.added_values||[],r=function(p,u,A){var H=document.getElementById(e+"_ID_"+p);H?(H.checked=!0,d.after_add_new_value&&d.after_add_new_value.call(H)):(v.push({chkid:p,display:u,label:A}),p=d.add_new_html(p,u,A),d.after_add_new_value&&d.after_add_new_value.call(p))};create_checklist_onbefore_fns(c,e,v,r);var m={},y=function(p){c("#NEW_"+e).data({chkid:"",display:"",label:""}).prop("value","").focus();
c("#"+e+"_error").hide("slow",function(){c(this).remove()})},E=null,t=null;(function(p){c.isArray(p)?(t=function(u,A){var H=new RegExp(c.ui.autocomplete.escapeRegex(string_ci_ai(u.term)));A(c.grep(p,function(B){return H.test(string_ci_ai(B[d.match_prop]||B))}))},E=function(u,A){var H=string_ci_ai(u);u=c.grep(p,function(B){return string_ci_ai(string_ci_ai(B[d.match_prop]||B))===H});if(1===u.length)return A(u[0]),!0;A()}):"string"===typeof p?(t=create_caching_source_fn(c,p,m,d.match_prop),E=function(u,
A,H){var B=string_ci_ai(u);if(m.content){var w=c.grep(m.content,function(F){return string_ci_ai(F[d.match_prop])===B});if(1===w.length){A(w[0]);return}}H||string_ci_ai(m.term||"")===B?A():t({term:B},function(F){E(u,A,!0)})}):(t=p,E=d.look_for_fn)})(h);q.on("click","#add_"+e,function(p){p=c("#NEW_"+e);var u=p.data("chkid"),A=p.data("display"),H=p.data("label"),B=p[0].value;if(u&&A&&A==B)return r(u,A,H),y(),!1;E(p[0].value,function(w){w?(r(w.chkid,w.value,w.label),y()):0===c("#"+e+"_error").length&&
(c("#"+e+"_new_input_table").before(c("<p>").hide().addClass("Alert").prop("id",e+"_error").append(document.createTextNode(d.txt_not_found))),c("#"+e+"_error").show("slow"))});return!1});b[e]={focus:function(p,u){return!1},source:t,minLength:d.minLength,delay:d.delay,select:function(p,u){c("#NEW_"+e).data({chkid:u.item.chkid,display:u.item.value,label:u.item.label})}};q.on("keypress","#NEW_"+e,function(p){"13"==p.keyCode&&(p.preventDefault(),c("#NEW_"+e).autocomplete("close"),c("#add_"+e).trigger("click"))})}a(e)};
window.init_languages=function(c,d){var e=null,h=null,q=c("#LN_existing_add_table"),v=function(){var r=c(this).parents(".language-entry").find(".language-details-notes");this.checked?r.slideDown():r.slideUp()};init_autocomplete_checklist(c,{field:"LN",source:entryform.languages_source,txt_not_found:d,after_add_new_value:v,add_new_html:function(r,m){null===e&&(e=c("#add_LN"),h=e.data("newTemplate"));r=h.replace(/LANGNAMELANGNAME/g,m).replace(/IDIDID/g,r);q.append(r)}});q.on("change",".language-primary",
v).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+c(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(r,m){c(this).css(r);c("<div>").addClass("arrow").addClass(m.vertical).addClass(m.horizontal).appendTo(this)}}});window.languages_check_state=v}})();
(function(){var b=jQuery;window.configure_entry_form_button=function(){b("#SUBMIT_BUTTON").click(function(a){a=b("#SUBMIT_BUTTON");a.prop("disabled")||(a.prop("disabled",!0),setTimeout(function(){b("#EntryForm").submit()},1))});b(document).bind("keydown",function(a){if(a.ctrlKey&&"s"===String.fromCharCode(a.which).toLowerCase())return setTimeout(function(){b("#SUBMIT_BUTTON").click()},1),a.preventDefault(),a.stopPropagation(),!1});b("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var a=b("#SUBMIT_BUTTON").prop("value");b("#SUBMIT_BUTTON").replaceWith(b('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",a));b("#EntryForm").submit(function(){var c=validateForm();!1===c&&b("#SUBMIT_BUTTON").prop("disabled",!1);return c})}})();
(function(){window.only_items_chk_add_html=function(b,a,c){return function(d,e){c&&c();b("#"+a+"_existing_add_container").append(b("<label>").append(b("<input>").prop({id:a+"_ID_"+d,type:"checkbox",checked:!0,defaultChecked:!0,name:a+"_ID",value:d})).append("&nbsp;").append(document.createTextNode(e))).append(" ; ")}};window.init_check_for_autochecklist=function(b){var a=jQuery,c=function(){return a("<li>").append(a("<span>").data("jump_location",this.id).addClass("UnaddedChecklistJump SimulateLink").append(a(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},
d=a("input[id^=NEW_]");d.length&&(a("#EntryForm").submit(function(e){var h=d.map(function(){return this.value?this:null});if(h.length&&!e.isDefaultPrevented()){if(!confirm(b)){e.preventDefault();a("#SUBMIT_BUTTON").prop("disabled",!1);e=a("#unadded_checklist_error_box");var q=a("#unadded_checklist_error_list");var v=e.is(":visible");v&&q.children("ul:first").hide("slow",function(){a(this).remove()});var r=a("<ul>");v&&r.hide();q.append(r);a.each(h.map(c),function(){r.append(this)});v?r.show("slow"):
e.show("slow")}}else e.isDefaultPrevented()&&(e=a("#unadded_checklist_error_box"),q=a("#unadded_checklist_error_list"),e.hide("slow",function(){q.children().remove()}))}),a(document).on("click",".UnaddedChecklistJump",function(){var e=a(this).data("jump_location");(e=document.getElementById(e))&&e.scrollIntoView(!0)}))};window.init_entryform_items=function(b,a,c){var d=jQuery;b.each(function(){var e=null,h=this,q=d(h),v=1,r=q.find(".EntryFormItemContainerIds")[0];if(r){var m=q.data("maxAdd");m&&=
parseInt(m,10);var y=[];r.value&&(y=d.map(r.value.split(","),function(B){return 0===B.indexOf("NEW")&&0!==B.indexOf("NEWFB")?null:B}));var E={},t=function(){q.find(".EntryFormItemBox").each(function(B){d(this).find(".EntryFormItemCount").text(B+1)})},p=function(B){if(m){var w=q.find(".EntryFormItemContent:hidden").parent().find("button.EntryFormItemDelete").prop("disabled",!B);H.prop("disabled",!B);B?(w.removeClass("ui-state-disabled"),H.removeClass("ui-state-disabled")):(w.addClass("ui-state-disabled"),
H.addClass("ui-state-disabled"))}},u=function(){var B=0,w;for(w in E)B++;return y.length-B},A=function(B){var w=0;if(m&&!B&&(w=u(),w>=m)){alert("over");return}var F=q.data("addTmpl");y.push("NEW"+v++);r.value=y.join(",");F=d(F.replace(/\[COUNT\]/g,y.length).replace(/\[ID\]/g,y[y.length-1]));F.find(".DatePicker").autodatepicker();F.find(".Province").combobox({source:window.cioc_province_source});entryform.service_titles&&F.find(".ServiceTitleField").combobox({source:entryform.service_titles});q.append(F);
e&&(e.sortable("refresh"),t());m&&!B&&w+1===m&&p(!1)},H=q.parent().find(".EntryFormItemAdd").click(function(){A(!1)});q.on("click","button.EntryFormItemDelete",function(){var B=this,w=d(this).parents(".EntryFormItemBox").find(".EntryFormItemContent"),F=this.id.split("_");F=F[F.length-2];if(w.is(":visible"))w.hide("slow",function(){E[F]=get_form_values(w);d(B).text(c);w.find("input,select,textarea").each(function(){"input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?
"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(){this.selected=!1}):this.value="":this.checked=!1});p(!0)});else{var M=0;if(m&&(M=u(),M>=m)){alert("over");return}var N=E[F];N&&(delete E[F],restore_form_values(w,N),w.show("slow",function(){d(B).text(a)}),m&&M+1===m&&p(!1))}});q.hasClass("sortable")&&(e=q.sortable({items:".EntryFormItemBox"}),e.bind("sortstart",function(B,w){w.helper.bgiframe();q.addClass("sorting")}),e.bind("sortstop",function(){var B=e.sortable("toArray");
y=d.map(B,function(w){w=w.split("_");return w[w.length-2]});r.value=y.join(",");setTimeout(function(){q.removeClass("sorting");t()},1)}));cache_register_onbeforeunload(function(B){B[h.id+"_ids"]=y;B[h.id+"_deletes"]=E;e&&(B[h.id+"_order"]=e.sortable("toArray"))});cache_register_onbeforerestorevalues(function(B){B[h.id+"_ids"]&&d.each(B[h.id+"_ids"],function(w,F){0===F.indexOf("NEW")&&A(!0)});B[h.id+"_deletes"]&&(E=B[h.id+"_deletes"],q.find(".EntryFormItemContent").each(function(){var w=this.id.split("_");
w=w[w.length-2];E[w]&&d(this).hide().parent().find("button.EntryFormItemDelete").text(c)}));m&&u()>=m&&p(!1);e&&(B=B[h.id+"_order"])&&(B.reverse(),d.each(B,function(w,F){d("#"+F).detach().prependTo(q)}),e.sortable("refresh"),t())})}})};window.init_schedule=function(b){var a=function(){var c=b(this).parents(".EntryFormItemBox"),d=this.value;"0"===d?c.find(".recurs-ui").hide():"1"==d?(c.find(".repeat-every-ui, .repeats-on-ui, .recurs-week-label").show(),c.find(".repeat-week-of-month-ui, .repeat-day-of-month-ui, .recurs-month-label").hide()):
"2"==d?(c.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-month-label").show(),c.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-week-label").hide()):(c.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-month-label").show(),c.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-week-label").hide())};b("#ScheduleEditArea").on("change",".recur-type-selector",a).on("click",".schedule-ui-accept-feedback",function(c){var d=b(this);c=d.parents(".EntryFormItemBox");d=d.data("schedule");
var e=c.find(".recur-type-selector");restore_form_values(c,d);a.call(e[0]);return!1}).find(".recur-type-selector").each(a)}})();
(function(){var b=jQuery,a=function(c,d){var e=b("#CM_existing_add_container"),h=e.data("addonLabel");e.append(b("<div>").addClass("row-border-bottom").append(b("<div>").addClass("row form-group").append(b("<label>").addClass("control-label control-label-left col-md-4").prop({for:"CM_ID_"+c}).append(b("<input>").prop({id:"CM_ID_"+c,type:"checkbox",checked:!0,defaultChecked:!0,name:"CM_ID",value:c})).append(document.createTextNode(" "+d))).append(b("<div>").addClass("col-md-8 form-inline").append(b("<div>").addClass("input-group").append(b("<input>").addClass("form-control").prop({id:"CM_NUM_NEEDED_"+
c,name:"CM_NUM_NEEDED_"+c,size:3,maxlength:3})).append(b("<span>").addClass("input-group-addon").text(h))))))};window.init_num_needed=function(c){init_autocomplete_checklist(b,{field:"CM",source:entryform.community_complete_url,add_new_html:a,minLength:3,txt_not_found:c})};window.init_interests=function(c){var d=[],e=only_items_chk_add_html(b,"AI");init_autocomplete_checklist(b,{field:"AI",source:entryform.interest_complete_url,add_new_html:e,added_values:d,txt_not_found:c});var h=function(v){var r=
b("#AreaOfInterestList");r.length&&r.prop("id","AreaOfInterestListOld");b("<ul>").hide().insertAfter(q).prop("id","AreaOfInterestList").append(b(b.map(v,function(m,y){return b("<li>").append(b("<label>").append(b("<input>").prop({type:"checkbox",value:m.chkid}).data("cioc_chk_display",m.value)).append(document.createTextNode(" "+m.value)))[0]}))).show("slow");r.length&&r.hide("slow",function(){r.remove()})};var q=b("#InterestGroup").change(function(){b.getJSON(entryform.interest_complete_url,{IGID:q.prop("value")},
h)});b("#FIELD_INTERESTS").next().on("click","#AreaOfInterestList input:checkbox",{added_values:d,add_item_fn:e},function(v){var r=b(this),m=document.getElementById("AI_ID_"+this.value);m?m.checked=!0:(m=r.data("cioc_chk_display"),v.data.added_values.push({chkid:this.value,display:m}),v.data.add_item_fn(this.value,m));r.parent().parent().hide("slow",function(){r.remove()})})}})();
(function(){window.init_entryform_notes=function(b,a,c){var d=jQuery;b.each(function(){var e=this,h=d(e),q=h.parent(),v=1,r=h.find(".EntryFormNotesUpdateIds")[0];if(r){var m=h.find(".EntryFormNotesDeleteIds")[0],y=h.find(".EntryFormNotesCancelIds")[0],E=h.find(".EntryFormNotesRestoreIds")[0],t=[],p=[],u=[],A={},H=[],B=function(z,J){t.push(z.id);r.value=t.join(",");var f=h.find(".EntryFormItemBox").length+1;template=h.data("addTmpl");new_item=d(template.replace(/\[COUNT\]/g,f).replace(/\[ID\]/g,z.id).replace(/\[MODIFIED_DATE\]/g,
z.modified_date||"").replace(/\[MODIFIED_BY\]/g,z.modified_by||"").replace(/\[CREATED_DATE\]/g,z.created_date||"").replace(/\[CREATED_BY\]/g,z.created_by||"").replace(/\[NOTE_VALUE\]/g,z.note_value||""));z.note_type&&new_item.find("option[value='"+z.note_type+"']").prop("selected",!0);z.created_date&&new_item.find("tr.CreatedField").show();!z.modified_date||z.modified_date===z.created_date&&z.modified_by===z.created_by||new_item.find("tr.ModifiedField").show();J&&new_item.find(".NewFlag").show();
h.append(new_item)};q.find(".EntryFormItemAdd").click(function(){var z="NEW"+v++;B({id:z},!0)});var w=function(z){var J=z.id.split("_");z=d(z);var f=z.parents(".EntryFormNotesItem");f.find(".EntryFormItemContent").css("text-decoration","line-through");p.push(J[J.length-2]);m.value=p.join(",");f.data("actionToRestore","delete");z.parent().hide().prev().show()},F=function(z,J){var f=z.id.split("_"),g=d(z),l=g.parents(".EntryFormNotesItem"),n=l.find(".EntryFormItemContent"),x=z.id.lastIndexOf("_");z=
z.id.substring(0,x)+"_CANCEL_REASON";f=f[f.length-2];n.prepend(J.data("cancelTemplate"));u.push(f);y.value=u.join(",");A[f]=J.data("cancelType");h.append(d("<input>").prop({type:"hidden",id:z,name:z,value:J.data("cancelType")}));l.data("actionToRestore","cancel");g.parent().hide().prev().show()},M={update:function(z){z=d(z).parents(".EntryFormNotesItem");var J=z.find(".EntryFormItemContent");B(J.data("formValues"));z.hide()},"delete":w,cancel:F},N=q.find(".EntryFormItemActionMenu").menu({select:function(z,
J){d(this).hide();M[J.item.data("action")](N.data("activeButton"),J.item)}}).hide().css({position:"absolute",zIndex:1});q.on("click",".EntryFormItemAction",function(z){N.data("activeButton",this);if(N.is(":visible"))return N.hide(),!1;N.menu("blur").show();N.position({my:"right top",at:"right bottom",of:this});d(document).one("click",function(){N.hide()});return!1});q.find(".EntryFormItemViewHidden").click(function(z){z=d(this);var J=z.next();J.is(":visible")?(z.text(a),J.hide()):(z.text(c),J.show())});
var Y={"delete":function(z,J,f,g){g.css("text-decoration","none");p=d.grep(p,function(l){return l!==z});m.value=p.join(",");J.parent().hide().next().show()},cancel:function(z,J,f,g){f=J[0];var l=f.id.lastIndexOf("_");f=f.id.substring(0,l)+"_CANCEL_REASON";g.find(".EntryFormItemCancelledDetails").remove();u=d.grep(u,function(n){return n!==z});y.value=u.join(",");delete A[z];d("#"+f).remove();J.parent().hide().next().show()}};q.on("click",".EntryFormItemRestoreAction",function(z){z=this.id.split("_");
var J=d(this),f=J.parents(".EntryFormNotesItem"),g=f.find(".EntryFormItemContent");Y[f.data("actionToRestore")](z[z.length-2],J,f,g)});var O=function(z){z=this.id.split("_");var J=d(this);J.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","line-through");J.parent().hide().prev().show();H.push(z[z.length-2]);E.value=H.join(",")};q.on("click",".EntryFormItemRestoreCancel",O);q.on("click",".EntryFormItemDontRestoreCancel",function(z){var J=this.id.split("_");
z=d(this);z.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","none");z.parent().hide().next().show();J=J[J.length-2];H=d.grep(H,function(f){return f!==J});E.value=H.join(",")});cache_register_onbeforeunload(function(z){z[e.id+"_updates"]=t;z[e.id+"_deletes"]=p;z[e.id+"_restores"]=H;z[e.id+"_cancels"]=u;z[e.id+"_cancel_reason"]=A});cache_register_onbeforerestorevalues(function(z){var J=e.id.substring(0,e.id.lastIndexOf("_"))+"_";z[e.id+"_updates"]&&d.each(z[e.id+
"_updates"],function(g,l){0===l.indexOf("NEW")?(v++,B({id:l},!0)):(g=d("#"+J+l+"_DISPLAY"),B(g.data("formValues")),d("#"+J+l+"_CONTAINER").hide())});z[e.id+"_deletes"]&&d.each(z[e.id+"_deletes"],function(g,l){w(document.getElementById(J+l+"_ACTION"))});z[e.id+"_restores"]&&(d.each(z[e.id+"_restores"],function(g,l){O.call(document.getElementById(J+l+"_RESTORECANCEL"))}),q.find(".EntryFormItemViewHidden").click());if(z[e.id+"_cancels"]){var f=z[e.id+"_cancel_reason"];d.each(z[e.id+"_cancels"],function(g,
l){F(document.getElementById(J+l+"_ACTION"),N.find("li[data-cancel-type='"+f[l]+"']"))})}})}})}})();
(function(){window.init_history_dialog=function(b,a){var c=!1,d=null,e=null,h=null,q=function(t){t.fail?b("#HistoryFieldContent").html("<em>"+t.errinfo+"</em>"):t.compare?(null===d&&(d=new diff_match_patch),t=d.diff_main(t.text2,t.text1),d.diff_cleanupSemantic(t),t=d.diff_prettyHtml(t),b("#HistoryFieldContent").html(t)):b("#HistoryFieldContent").html(t.text1)},v=function(t,p,u){return function(){var A=b("#HistoryLanguage").prop("value"),H=b("#HistoryRevision").prop("value"),B=b("#HistoryCompare").prop("value");
if(B===h||!(""===h&&B===H||""===B&&h===e)){var w=B;if(""===B||B===H)w="";b.getJSON(a.fielddiff_url.replace("[ID]",u).replace("[LANG]",A).replace("[FIELD]",t).replace("[REV]",H).replace("[COMP]",w),q)}e=H;h=B}},r=null,m=function(t,p,u,A){b("select.HistorySelect").unbind("change");b("#HistoryLanguage").unbind("change");b("#field_history").html('<p class="Info">'+a.txt_loading+"</p>").dialog("close").dialog("open").dialog("option","title",a.txt_fielddifftitle+u+" ("+p+")").load(a.fielddiffui_url.replace("[ID]",
u).replace("[FIELD]",t).replace("[LANG]",A),r(t,p,u))},y=function(t,p,u){return function(){var A=b(this).prop("value");m(t,p,u,A)}};r=function(t,p,u){return function(){b("select.HistorySelect").change(v(t,p,u));b("#HistoryLanguage").change(y(t,p,u));e=b("#HistoryRevision").prop("value");h=b("#HistoryCompare").prop("value")}};b(".ShowVersions").click(function(){var t=b(this).data("ciocfield"),p=b(this).data("ciocfielddisplay"),u=b(this).data("ciocid");c||(c=!0,b.getScript(a.path_to_start+"scripts/diff_match_patch.min.js"));
m(t,p,u,"")});b(document).on("click",".FieldHistoryJump",function(t){t=b(t.currentTarget).data("fieldname");(t=document.getElementById("FIELD_"+t))&&t.scrollIntoView(!0)});b(document).on("click",".HistoryFieldsToggle",function(t){b(t.currentTarget).parent().children("ul").toggle("fast")});var E=function(){b(".HistoryFieldsToggle").parent().children("ul").hide()};b(".HistorySummary").click(function(){var t=b(this).data("cioclang"),p=b(this).data("ciocid");b("#revision_history").html("Loading...").load(a.revhistory_url.replace("[ID]",
p).replace("[LANG]",t),E).dialog("open")});b("#revision_history").dialog({autoOpen:!1,width:330,height:280,position:["right","top"],resizable:!1,dialogClass:"RevHistory"});b("#field_history").dialog({autoOpen:!1,width:620,height:280,position:["right","bottom"]});b(".RevHistory.ui-dialog").css({position:"fixed"})}})();
(function(){window.changeAutoAssign=function(h,q,v){h.checked?(q.value="",q.disabled=!0,v.disabled=!0):(q.disabled=!1,v.disabled=!1)};var b=jQuery,a=function(h){h.find(":input").not('input[type="hidden"]').filter("[name]").addClass("require-group")},c=function(h){h.find(":input").not('input[type="hidden"]').filter("[name]").removeClass("require-group")};window.make_required_group=a;window.remove_required_group=c;var d=function(h,q){var v=h.parent().find("td[data-field-display-name]"),r=v.data("fieldDisplayName");
q?(h.text(r).append(' <span class="Alert">*</span>'),a(v)):(h.text(r),c(v))},e=function(){var h=b("#FIELD_ORG_LEVEL_2");if(h.length){var q=b("#RECORD_TYPE").find(":selected").data("progorbranch");d(h,q)}};window.update_form_make_required_org_level=function(){for(var h,q=0;6>q;q++)if(h=b("#FIELD_ORG_LEVEL_"+q),h.length){d(h,!0);break}};window.init_client_validation=function(h,q){var v=b(h),r=v.prop("lang")||v.parents("[lang]").first().prop("lang")||"en-CA",m=function(w){var F=!1;try{w.each(function(){if(this.name)if(/radio|checkbox/i.test(this.type)){if(this.checked&&
this.value)throw F=!0,{name:"StopIteration",message:"StopIteration"};}else if(b.trim(this.value))throw F=!0,{name:"StopIteration",message:"StopIteration"};})}catch(M){if("StopIteration"!==M.name)throw M;}return F},y=null;b.validator.addMethod("email",function(w,F){y||=RegExp("^((([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)(\\s*,*\\s*))*)$");return this.optional(F)||y.test(w)});
var E=null;b.validator.addMethod("url",function(w,F){E||=/^((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/;return this.optional(F)||E.test(w)});var t=null;b.validator.addMethod("protourl",function(w,F){t||=/^(https?:\/\/)?((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/;return this.optional(F)||t.test(w)});var p=null;b.validator.addMethod("posint",function(w,F){p||=/^\d+$/;return this.optional(F)||p.test(w)});var u=null;b.validator.addMethod("posdbl",
function(w,F){if(!u){var M="\\.";"fr-CA"===r&&(M=",");u=new RegExp("^((\\d+)|(\\d*"+M+"\\d+))$")}return this.optional(F)||u.test(w)});var A=null;b.validator.addMethod("record-num",function(w,F){A||=/^[A-Z]{3}[0-9]{4,5}$/;return this.optional(F)||A.test(w)});b.validator.addMethod("unique",function(w,F,M){if(!w)return!0;w=string_ci_ai(w);F=jQuery.validator.format("[name!='{0}'][unique='{1}']",F.name,M);var N=[];b(F).each(function(Y,O){w==string_ci_ai(b(O).val())&&N.push(O)});return 0==N.length},"A unique value is required.");
b.validator.addMethod("require-group",function(w,F){w=b(F).parents("td[data-field-display-name]");F=w.parent().children("td:first").prop("id");F=F.slice(-(F.length-6));var M=w.find(":input").not("[type=hidden]").not("button");if(window.tinymce){var N=w.find(".WYSIWYG").prop("id");N&&(N=window.tinymce.get(N))&&N.save()}switch(F){case "ACCESSIBILITY":case "AREAS_SERVED":case "LANGUAGES":case "FUNDING":case "SCHOOL_ESCORT":case "SCHOOLS_IN_AREA":case "TYPE_OF_CARE":M=M.not("input:text");break;case "ALT_ORG":case "LEGAL_ORG":M=
M.not("input:checkbox");break;case "FORMER_ORG":M=M.not("input:checkbox").not("[name^=FORMER_ORG_DATE]");break;case "FEES":M=M.not("input:text").add("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM");break;case "VACANCY_INFO":M=M.filter("[name!=VUT_ID]")}(F=m(M))&&w.children("div.required-notice").hide();return F},"Field Required");var H=b('<div id="a_test"></div>').dialog({autoOpen:!1,title:q,closeOnEscape:!1,position:["right","bottom"],resizable:!1,dialogClass:"ValidationErrors"}),B=b("#validation_error_box");
b(document).on("click",".FieldErrorJump",function(w){w=b(w.currentTarget).prop("fieldname");(w=document.getElementById(w))&&w.scrollIntoView(!0)});b(".ValidationErrors.ui-dialog").css({position:"fixed"}).position({my:"right bottom",at:"right bottom",of:window});a(b(h).find("td[data-field-required]"));h=b(h).validate({ignore:"input[type=hidden]",ignoreTitle:!0,errorPlacement:function(w,F){var M=[],N=F[0];if(F.hasClass("require-group")){var Y=F.parents("td[data-field-display-name]");M=Y.children("div.required-notice");
var O=!1;/radio|checkbox/i.test(N.type)?N.checked&&N.value||(O=!0):b.trim(N.value)||(O=!0);if(O){M.length?(M.empty(),M.show(),M.append(w)):(w.removeAttr("for"),Y.prepend(b('<div class="required-notice"></div>').append(w)));return}}M.length&&M.hide();w.insertAfter(F)},showErrors:function(w,F){this.defaultShowErrors();if(0===F.length)H.dialog("close"),B.hide("slow");else{var M={},N=b("<ul>");jQuery.each(F,function(Y,O){O=O.element;Y=b(O).parents("td[data-field-display-name]");O=Y.parent().children("td:first").prop("id");
M[O]||(M[O]=!0,N.append(b("<li>").append(b("<span>").prop({fieldname:O,className:"FieldErrorJump SimulateLink"}).text(Y.data("fieldDisplayName")))))});H.empty().append(N);H.dialog("open");B.show("slow");b("#SUBMIT_BUTTON").prop("disabled",!1)}},focusInvalid:!1,onfocusout:!1,onkeyup:!1,onclick:!1});"fr-CA"===r?jQuery.extend(jQuery.validator.messages,{required:"Ce champ est requis.",remote:"Veuillez remplir ce champ pour continuer.",email:"Veuillez entrer une adresse email valide.",url:"Veuillez entrer une URL valide.",
date:"Veuillez entrer une date valide.",dateISO:"Veuillez entrer une date valide (ISO).",number:"Veuillez entrer un nombre valide.",digits:"Veuillez entrer (seulement) une valeur num\u00e9rique.",creditcard:"Veuillez entrer un num\u00e9ro de carte de cr\u00e9dit valide.",equalTo:"Veuillez entrer une nouvelle fois la m\u00eame valeur.",accept:"Veuillez entrer une valeur avec une extension valide.",maxlength:jQuery.validator.format("Veuillez ne pas entrer plus de {0} caract\u00e8res."),minlength:jQuery.validator.format("Veuillez entrer au moins {0} caract\u00e8res."),
rangelength:jQuery.validator.format("Veuillez entrer entre {0} et {1} caract\u00e8res."),range:jQuery.validator.format("Veuillez entrer une valeur entre {0} et {1}."),max:jQuery.validator.format("Veuillez entrer une valeur inf\u00e9rieure ou \u00e9gale \u00e0 {0}."),min:jQuery.validator.format("Veuillez entrer une valeur sup\u00e9rieure ou \u00e9gale \u00e0 {0}."),protourl:"Veuillez entrer une URL valide.",posint:"Veuillez entrer un nombre positif.",posdbl:"Veuillez entrer un nombre positif.","record-num":"Please enter a valid record number.",
"require-group":"Ce champ est requis.",unique:"Une valeur unique est requise."}):jQuery.extend(jQuery.validator.messages,{protourl:"Please enter a valid URL.",posint:"Please enter a positive number.",posdbl:"Please enter a positive number.","record-num":"Please enter a valid record number.","require-group":"Field Required.",unique:"A unique value is required."});return h};window.init_record_type_form=function(h,q,v){var r=null,m=null,y={},E="ORG_LEVEL_1 ORG_LEVEL_2 ORG_LEVEL_3 ORG_LEVEL_4 ORG_LEVEL_5 LOCATION_NAME SERVICE_NAME_LEVEL_1 SERVICE_NAME_LEVEL_2".split(" "),
t=function(){b("#RecordTypeName").html(m);b.each(E,function(u){var A=v[u],H=b("#"+u);H.length&&(H[0].value=A)&&(b("#"+u+"_DISPLAY").text(A),b("#HIDDEN_"+H).prop("value",A))});b("#RECORD_TYPE").prop("value",r[0].value);e()},p=function(){var u=r[0].value;r.data("hasform")||(u=null);r=b(this).find("option:selected");var A=r[0].value;r.data("hasform")||(A=null);A!==u?(y[u]=b("#copyFieldsForm").contents().detach(),y[A]?(b("#copyFieldsForm").append(y[A]),b("#RECORD_TYPE").prop("value",r[0].value)):b("#copyFieldsForm").load(q+
" #copyFieldsInner",{NUM:h,RT:A||r[0].value},t)):e()};jQuery(function(){m=b("#RecordTypeName").html();var u=b("#RECORD_TYPE");b(document).on("change","#RECORD_TYPE",p);r=u.find("option:selected");e()})};window.init_validate_duplicate_org_names=function(h){var q=b.extend({selector:"#EntryForm",fields:"#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5,#LOCATION_NAME,#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2,#OLS_SELECT input,#ORG_NUM",only_warn:!0,num:null,org_levels:[],url:null},h),
v=[],r=null!==q.num,m=[],y=b(q.selector).submit(function(E){var t,p=!1,u=b(q.fields).serializeArray();q.num&&u.push({name:"NUM",value:q.num});if(u.length!==v.length)p=!0;else for(t=0;t<u.length;t++){var A=u[t];if(A.name!==v[t].name||A.value!==v[t].value){p=!0;break}}if(!p&&r)return!0;var H=function(){q.only_warn&&confirm(q.confirm_string)?(r=!0,b("#duplicate_name_error_box").hide(),y.submit()):(b("#SUBMIT_BUTTON").prop("disabled",!1),b("#duplicate_name_error_box").show())};E.stopPropagation();E.preventDefault();
if(!p)return H(),!1;b.ajax({url:q.url,dataType:"json",method:"get",data:u,success:function(B){r=!0;m=[];for(var w=0;w<B.length;w++)r&=0===B[w].count,0!==B[w].count&&m.push(B[w].type);v=u;r?(b("#duplicate_name_error_box").hide(),y.submit()):H()}});return!1})}})();
