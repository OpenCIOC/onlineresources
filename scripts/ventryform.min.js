window.CIOC={};
(function(a,d){d.do_drop_down_navigation=function(){for(var e=a.getElementById("ActionList").options,b=0;b<e.length;b++)if(e[b].selected){var c=e[b].getAttribute("href");c&&("undefined"!=typeof e[b].attributes.newwindow?d.open(c):d.location.href=c);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var b=a(this),c=a(b.data("target")),d={autoOpen:!1,title:c.data("title"),modal:c.data("modal")};c.dialog(d);b.click(function(){c.dialog("isOpen")?c.dialog("close"):c.dialog("open")})})})})(document,window);
function CheckAll(a,d){a||(a="IDList");var e=d;d||(e=document.RecordList);for(var b=e.elements.length,c=0;c<b;c++){var f=e.elements[c];f.name===a&&(f.checked=!0)}}function ClearAll(a,d){a||(a="IDList");var e=d;d||(e=document.RecordList);for(var b=e.elements.length,c=0;c<b;c++){var f=e.elements[c];f.name===a&&(f.checked=!1)}}function add_class(a,d){a&&!(new RegExp("\\b"+d+"\\b")).test(a.className)&&(a.className&&(d=" "+d),a.className+=d)}
function remove_class(a,d){if(a){for(var e=a.className.split(" "),b=[],c=0;c<e.length;c++){var f=e[c];f!==d&&b.push(f)}a.className=b.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,d){window.open(a,d,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,d){window.open(a,d,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,d){window.open(a,d,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var d={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var e=a(this).data("popargs");(d[e.size||"sm"]||openWin)(this.href,e.name||"popwin");return!1})});
(function(){var a=jQuery,d={},e=function(b){null!==b&&"undefined"!==typeof b?a("#myListCount").text(b):(b=a("#myListCount").text())&&(b=parseInt(b,10));b?d.myListLink.show():d.myListLink.hide()},b=function(b){a.each(b,function(b,e){a("#added_to_list_"+e).show();a("#add_to_list_"+e).hide()})},c=function(c){return function(f){f.fail?alert(f.errinfo):(f.ids?e(a.grep(f.ids,l[d.domain]).length):f.count?e(f.count):e(0),b([c]))}},f=function(b){b=a(b.currentTarget).data("id");a.ajax({success:c(b),dataType:"json",
error:function(){alert("Error")},data:{id:b},type:"POST",url:d.current_list_url})},k=function(b){return function(e){if(e.fail)alert(e.errinfo);else{e=!0;if(b){var c=a("#results_table #remove_from_list_"+b);c.length?c.parent().parent().remove():(e=!1,c=a("#results_container #remove_from_list_"+b),c.parents(".dlist-result").remove())}c=!1;if((c=e?1===a("#results_table tr").length:0===a("#results_container .dlist-result").length)||!b)a("#records_ui").hide(),a("#no_records_message").show()}}},h=function(b){b=
a(b.currentTarget).data("id");a.ajax({success:k(b),dataType:"json",error:function(){alert("Error")},data:{ID:b,RemoveItem:d.domain},type:"POST",url:d.current_list_url})},g=function(b){a.ajax({success:k(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:d.domain},type:"POST",url:d.current_list_url})},l={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},m=function(c){if(c.fail)q();else if(c.inrequest){var f=a.grep(c.ids,
l[d.domain]);b(f);e(f.length);(c=c.previous_ids)&&a.each(c,function(b,e){a("#ct_added_to_previous_request_"+e).show()});a(".ListUI img").prop("src",function(a,b){return b.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();d.current_list_url=d.ct_update_url;p()}else q()},q=function(){var c=function(){d.list_view_mode||b(d.already_added||[]);d.current_list_url=d.list_view_mode&&"ct"===d.list_view_mode?d.ct_update_url:d.list_update_url;e((d.already_added||[]).length);
p()};d.list_view_mode||d.has_session?c():a.ajax({dataType:"json",error:null,url:d.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&c()}})},p=function(){a(".HideListUI").delegate(".add_to_list","click",f).delegate(".remove_from_list","click",h).removeClass("HideListUI");a("#remove_all_from_list").click(g);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(b){d=b;d.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
b.in_request?a.ajax({success:m,dataType:"json",error:null,type:"POST",url:b.in_request}):q()}})();this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function d(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function e(a,b){var c,p,h,s,t=f,r,n=b[a];n&&"object"===typeof n&&"function"===typeof n.toJSON&&(n=n.toJSON(a));"function"===typeof g&&(n=g.call(b,a,n));switch(typeof n){case "string":return d(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";f+=k;r=[];if("[object Array]"===Object.prototype.toString.apply(n)){s=n.length;for(c=0;c<s;c+=1)r[c]=e(c,n)||"null";h=0===r.length?"[]":f?"[\n"+f+r.join(",\n"+f)+"\n"+t+"]":"["+r.join(",")+"]";f=t;return h}if(g&&"object"===typeof g)for(s=g.length,c=0;c<s;c+=1)p=g[c],"string"===typeof p&&(h=e(p,n))&&r.push(d(p)+(f?": ":":")+h);else for(p in n)Object.hasOwnProperty.call(n,p)&&(h=e(p,n))&&r.push(d(p)+(f?": ":":")+h);h=0===r.length?"{}":f?"{\n"+f+r.join(",\n"+f)+"\n"+
t+"}":"{"+r.join(",")+"}";f=t;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,k,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;k=f="";if("number"===typeof c)for(d=0;d<c;d+=1)k+=" ";else"string"===typeof c&&(k=c);if((g=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return e("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,c){function e(a,b){var d,f,g=a[b];if(g&&"object"===typeof g)for(d in g)Object.hasOwnProperty.call(g,d)&&(f=e(g,d),void 0!==f?g[d]=f:delete g[d]);return c.call(a,b,g)}var d;a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof c?e({"":d},""):d;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var d={};jQuery(a).find("input,select,textarea").each(function(a){if(this.name)if(d[this.name]||(d[this.name]=[]),"select"===this.nodeName.toLowerCase()){var b=d[this.name];$(this).find("option").each(function(a){this.selected&&b.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&d[this.name].push(this.value||"")});return d};window.restore_form_values=function(a,d){var e=jQuery;e(a).find("input,select,textarea").each(function(a){if(this.name){var c=
d[this.name];"undefined"!=typeof c&&null!==c&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?e(this).find("option").each(function(a){this.selected=1<c.length?0<=e.inArray(this.value,c):0===c.length?!1:this.value===c[0]}):this.value=c.length?c[0]:"":this.checked=1<c.length?0<=e.inArray(this.value,c):0===c.length?!1:this.value===c[0])}})};window.init_cached_state=function(a){var d=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];d(window).on("beforeunload",function(){var e={form_values:get_form_values(a)};d.each(onbeforeunload_fns,function(a,c){c(e)});document.getElementById("cache_form_values").value=JSON.stringify(e)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var e=document.getElementById("cache_form_values");if(e&&e.value){var b=
JSON.parse(e.value);d.each(onbeforerestorevalues_fns,function(a,e){e(b)});restore_form_values(a,b.form_values)}}}})();
(function(){var a=jQuery,d={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},e={"en-CA":!0,"":!0},b={},c={"fr-CA":"fr","es-MX":"es"},f=function(){var b=a(this),c=b.data("culture"),e=d[c]||a.datepicker.regional[c].dateFormat,f={};b.hasClass("NoYear")&&(e=e.replace(/[\- .\/]*yy[\/]?/,""),f={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});f.dateFormat=e;b.datepicker(a.extend({},a.datepicker.regional[c],f)).prop("autocomplete","off")},k=function(c){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+c+".min.js",function(){e[c]=!0;a.each(b[c],function(){f.call(this)});delete b[c]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var d=
a(this),g;g=d.parents("[lang]").first().prop("lang")||"en-CA";g=c[g]||g;d.data("culture",g);e[g]?f.call(this):(d=b[g],d||(d=b[g]=[],k(g)),d.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
(function(a){function d(a){return a&&a.constructor===Number?a+"px":a}a.fn.bgiframe=a.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(e){e=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},e);var b='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+e.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==e.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==e.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
d(e.top))+";left:"+("auto"==e.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":d(e.left))+";width:"+("auto"==e.width?"expression(this.parentNode.offsetWidth+'px')":d(e.width))+";height:"+("auto"==e.height?"expression(this.parentNode.offsetHeight+'px')":d(e.height))+';"/>';return this.each(function(){0===a(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(b),this.firstChild)})}:function(){return this};a.fn.bgIframe=a.fn.bgiframe})(jQuery);
(function(){window.init_history_dialog=function(a,d){var e=!1,b=null,c=null,f=null,k=function(c){c.fail?a("#HistoryFieldContent").html("<em>"+c.errinfo+"</em>"):c.compare?(null===b&&(b=new diff_match_patch),c=b.diff_main(c.text2,c.text1),b.diff_cleanupSemantic(c),c=b.diff_prettyHtml(c),a("#HistoryFieldContent").html(c)):a("#HistoryFieldContent").html(c.text1)},h=function(b,e,g){return function(){var e=a("#HistoryLanguage").prop("value"),h=a("#HistoryRevision").prop("value"),n=a("#HistoryCompare").prop("value");
if(n===f||!(""===f&&n===h||""===n&&f===c)){var w=n;if(""===n||n===h)w="";a.getJSON(d.fielddiff_url.replace("[ID]",g).replace("[LANG]",e).replace("[FIELD]",b).replace("[REV]",h).replace("[COMP]",w),k)}c=h;f=n}},g=null,l=function(b,c,e,f){a("select.HistorySelect").unbind("change");a("#HistoryLanguage").unbind("change");a("#field_history").html('<p class="Info">'+d.txt_loading+"</p>").dialog("close").dialog("open").dialog("option","title",d.txt_fielddifftitle+e+" ("+c+")").load(d.fielddiffui_url.replace("[ID]",
e).replace("[FIELD]",b).replace("[LANG]",f),g(b,c,e))},m=function(b,c,e){return function(){var d=a(this).prop("value");l(b,c,e,d)}},g=function(b,e,d){return function(){a("select.HistorySelect").change(h(b,e,d));a("#HistoryLanguage").change(m(b,e,d));c=a("#HistoryRevision").prop("value");f=a("#HistoryCompare").prop("value")}};a(".ShowVersions").click(function(){var b=a(this).data("ciocfield"),c=a(this).data("ciocfielddisplay"),f=a(this).data("ciocid");e||(e=!0,a.getScript(d.path_to_start+"scripts/diff_match_patch.min.js"));
l(b,c,f,"")});a(document).on("click",".FieldHistoryJump",function(b){b=a(b.currentTarget).data("fieldname");(b=document.getElementById("FIELD_"+b))&&b.scrollIntoView(!0)});a(document).on("click",".HistoryFieldsToggle",function(b){a(b.currentTarget).parent().children("ul").toggle("fast")});var q=function(){a(".HistoryFieldsToggle").parent().children("ul").hide()};a(".HistorySummary").click(function(){var b=a(this).data("cioclang"),c=a(this).data("ciocid");a("#revision_history").html("Loading...").load(d.revhistory_url.replace("[ID]",
c).replace("[LANG]",b),q).dialog("open")});a("#revision_history").dialog({autoOpen:!1,width:330,height:280,position:["right","top"],resizable:!1,dialogClass:"RevHistory"});a("#field_history").dialog({autoOpen:!1,width:620,height:280,position:["right","bottom"]});a(".RevHistory.ui-dialog").css({position:"fixed"})}})();
(function(){var a=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;var d=function(b,c,e,d,h){e=e||"value";d=d||"";h=h||"";return function(g,l){if(c.term&&(new RegExp(d+b.ui.autocomplete.escapeRegex(c.term)+h,"i")).test(g.term)&&c.content&&13>c.content.length){var m=new RegExp(d+b.ui.autocomplete.escapeRegex(g.term)+h,"i");l(b.grep(c.content,function(b){return m.test(a(b[e]))}));return!0}return!1}};window.default_cache_search_fn=d;var e=function(b,c,e,k,h){e=e||{};h=h||d(b,e,k||"value");
return function(d,k,m){d.term=a(d.term);e.term===d.term&&e.content?k(e.content):h(d,k)||b.ajax({url:m||c,dataType:"json",data:d,cache:!1,success:function(a){e.term=d.term;e.content=a;k(a)}})}};window.create_caching_source_fn=e;window.init_community_autocomplete=function(b,c,d,k,h){var g={};h&&(h=b(h));h&&!h.length&&(h=null);var l=b("#"+c).autocomplete({focus:function(a,b){return!1},select:function(a,b){l.data({chkid:b.item.chkid,display:b.item.value})},source:e(b,d,g),minLength:k}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),l.autocomplete("close"))});h&&(l.parents("form").on("submit",function(){var c=l.val();if(l.data("display")===c)h.val(l.data("chkid"));else{if(g.content){var e=a(c),c=b.grep(g.content,function(b){return a(b.value)===e});if(1===c.length){h.val(c[0].chkid);l.data({chkid:c[0].chkid,display:c[0].value}).val(c[0].value);return}}h.val("")}}),cache_register_onbeforerestorevalues(function(a){l.length&&(a=a["autocomplete_data_"+l[0].id])&&l.data(a)}),cache_register_onbeforeunload(function(a){if(l.length){var b=
l.data();b.display&&b.chkid&&(a["autocomplete_data_"+l[0].id]={display:b.display,chkid:b.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(a,b,c,d){cache_register_onbeforeunload(function(a){a[b+"_added"]=c});cache_register_onbeforerestorevalues(function(c){(c=c[b+"_added"])&&a.each(c,function(a,b){d(b.chkid,b.display,"")})})};window.basic_chk_add_html=function(a,b){return function(c,d){var k=a("<tr>").append(a("<td>").append(a("<input>").prop({id:b+"_ID_"+c,type:"checkbox",checked:!0,defaultChecked:!0,name:b+"_ID",value:c})).append(document.createTextNode(" "+
d))).append(a("<td>").append(a("<input>").prop({id:b+"_NOTES_"+c,name:b+"_NOTES_"+c,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));a("#"+b+"_existing_add_table").append(k);return k.find('input[type="checkbox"]')[0]}};var a={},d=function(d){$("#NEW_"+d).autocomplete(a[d])};window.init_autocomplete_checklist=function(e,b){var c=b.field;if(!a[c]){var f=b.source;b.minLength=b.minLength||1;b.delay=b.delay||300;b.add_new_html=b.add_new_html||basic_chk_add_html(e,c);b.match_prop=
b.match_prop||"value";b.txt_not_found=b.txt_not_found||"Not Found";var k=e(b.delegate_root||document),h=b.added_values||[],g=function(a,d,e){var f=document.getElementById(c+"_ID_"+a);f?(f.checked=!0,b.after_add_new_value&&b.after_add_new_value.call(f)):(h.push({chkid:a,display:d,label:e}),a=b.add_new_html(a,d,e),b.after_add_new_value&&b.after_add_new_value.call(a))};create_checklist_onbefore_fns(e,c,h,g);var l={},m=function(a){e("#NEW_"+c).data({chkid:"",display:"",label:""}).prop("value","").focus();
e("#"+c+"_error").hide("slow",function(){e(this).remove()})},q=null,p=null;(function(a){e.isArray(a)?(p=function(c,d){var f=new RegExp(e.ui.autocomplete.escapeRegex(string_ci_ai(c.term)));d(e.grep(a,function(a){return f.test(string_ci_ai(a[b.match_prop]||a))}))},q=function(c,d){var f=string_ci_ai(c),g=e.grep(a,function(a){return string_ci_ai(string_ci_ai(a[b.match_prop]||a))===f});if(1===g.length)return d(g[0]),!0;d()}):"string"===typeof a?(p=create_caching_source_fn(e,a,l,b.match_prop),q=function(a,
c,d){var f=string_ci_ai(a);if(l.content){var g=e.grep(l.content,function(a){return string_ci_ai(a[b.match_prop])===f});if(1===g.length){c(g[0]);return}}d||string_ci_ai(l.term||"")===f?c():p({term:f},function(b){q(a,c,!0)})}):(p=a,q=b.look_for_fn)})(f);k.on("click","#add_"+c,function(a){a=e("#NEW_"+c);var d=a.data("chkid"),f=a.data("display"),k=a.data("label"),h=a[0].value;if(d&&f&&f==h)return g(d,f,k),m(),!1;q(a[0].value,function(a){a?(g(a.chkid,a.value,a.label),m()):0===e("#"+c+"_error").length&&
(e("#"+c+"_new_input_table").before(e("<p>").hide().addClass("Alert").prop("id",c+"_error").append(document.createTextNode(b.txt_not_found))),e("#"+c+"_error").show("slow"))});return!1});a[c]={focus:function(a,b){return!1},source:p,minLength:b.minLength,delay:b.delay,select:function(a,b){e("#NEW_"+c).data({chkid:b.item.chkid,display:b.item.value,label:b.item.label})}};k.on("keypress","#NEW_"+c,function(a){"13"==a.keyCode&&(a.preventDefault(),e("#NEW_"+c).autocomplete("close"),e("#add_"+c).trigger("click"))})}d(c)};
window.init_languages=function(a,b){var c=null,d=null,k=a("#LN_existing_add_table"),h=function(){var b=a(this).parents(".language-entry").find(".language-details-notes");this.checked?b.slideDown():b.slideUp()};init_autocomplete_checklist(a,{field:"LN",source:entryform.languages_source,txt_not_found:b,after_add_new_value:h,add_new_html:function(b,h){null===c&&(c=a("#add_LN"),d=c.data("newTemplate"));var m=d.replace(/LANGNAMELANGNAME/g,h).replace(/IDIDID/g,b);k.append(m)}});k.on("change",".language-primary",
h).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+a(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(b,c){a(this).css(b);a("<div>").addClass("arrow").addClass(c.vertical).addClass(c.horizontal).appendTo(this)}}});window.languages_check_state=h}})();
(function(){var a=jQuery;window.configure_entry_form_button=function(){a("#SUBMIT_BUTTON").click(function(d){d=a("#SUBMIT_BUTTON");d.prop("disabled")||(d.prop("disabled",!0),setTimeout(function(){a("#EntryForm").submit()},1))});a(document).bind("keydown",function(d){if(d.ctrlKey&&"s"===String.fromCharCode(d.which).toLowerCase())return setTimeout(function(){a("#SUBMIT_BUTTON").click()},1),d.preventDefault(),d.stopPropagation(),!1});a("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var d=a("#SUBMIT_BUTTON").prop("value");a("#SUBMIT_BUTTON").replaceWith(a('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",d));a("#EntryForm").submit(function(){var d=validateForm();!1===d&&a("#SUBMIT_BUTTON").prop("disabled",!1);return d})}})();
(function(){window.only_items_chk_add_html=function(a,d,e){return function(b,c){e&&e();a("#"+d+"_existing_add_container").append(a("<label>").append(a("<input>").prop({id:d+"_ID_"+b,type:"checkbox",checked:!0,defaultChecked:!0,name:d+"_ID",value:b})).append("&nbsp;").append(document.createTextNode(c))).append(" ; ")}};window.init_check_for_autochecklist=function(a){var d=jQuery,e=function(){var a=d(this).data("jump_location");(a=document.getElementById(a))&&a.scrollIntoView(!0)},b=function(){return d("<li>").append(d("<span>").data("jump_location",
this.id).addClass("UnaddedChecklistJump SimulateLink").append(d(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},c=d("input[id^=NEW_]");c.length&&(d("#EntryForm").submit(function(e){var k=c.map(function(){return this.value?this:null}),h;if(k.length&&!e.isDefaultPrevented()){if(!confirm(a)){e.preventDefault();d("#SUBMIT_BUTTON").prop("disabled",!1);e=d("#unadded_checklist_error_box");h=d("#unadded_checklist_error_list");var g=e.is(":visible");g&&h.children("ul:first").hide("slow",
function(){d(this).remove()});var l=d("<ul>");g&&l.hide();h.append(l);d.each(k.map(b),function(){l.append(this)});g?l.show("slow"):e.show("slow")}}else e.isDefaultPrevented()&&(e=d("#unadded_checklist_error_box"),h=d("#unadded_checklist_error_list"),e.hide("slow",function(){h.children().remove()}))}),d(document).on("click",".UnaddedChecklistJump",e))};window.init_entryform_items=function(a,d,e){var b=jQuery;a.each(function(){var a=null,f=this,k=b(f),h=1,g=k.find(".EntryFormItemContainerIds")[0];if(g){var l=
k.data("maxAdd");l&&(l=parseInt(l,10));var m=[];g.value&&(m=b.map(g.value.split(","),function(a){return 0===a.indexOf("NEW")?null:a}));var q={},p=function(){k.find(".EntryFormItemBox").each(function(a){b(this).find(".EntryFormItemCount").text(a+1)})},u=function(a){if(l){var b=k.find(".EntryFormItemContent:hidden").parent().find("button.EntryFormItemDelete").prop("disabled",!a);r.prop("disabled",!a);a?(b.removeClass("ui-state-disabled"),r.removeClass("ui-state-disabled")):(b.addClass("ui-state-disabled"),
r.addClass("ui-state-disabled"))}},s=function(){var a=0,b;for(b in q)a++;return m.length-a},t=function(d){var e=0;if(l&&!d&&(e=s(),e>=l)){alert("over");return}var f=k.data("addTmpl");m.push("NEW"+h++);g.value=m.join(",");f=b(f.replace(/\[COUNT\]/g,m.length).replace(/\[ID\]/g,m[m.length-1]));f.find(".DatePicker").autodatepicker();f.find(".Province").combobox({source:window.cioc_province_source});entryform.service_titles&&f.find(".ServiceTitleField").combobox({source:entryform.service_titles});k.append(f);
a&&(a.sortable("refresh"),p());l&&!d&&e+1===l&&u(!1)},r=k.parent().find(".EntryFormItemAdd").click(function(){t(!1)});k.on("click","button.EntryFormItemDelete",function(){var a=this,c=b(this).parents(".EntryFormItemBox").find(".EntryFormItemContent"),f=this.id.split("_"),f=f[f.length-2];if(c.is(":visible"))c.hide("slow",function(){q[f]=get_form_values(c);b(a).text(e);c.find("input,select,textarea").each(function(){"input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?
"select"===this.nodeName.toLowerCase()?b(this).find("option").each(function(){this.selected=!1}):this.value="":this.checked=!1});u(!0)});else{var g=0;if(l&&(g=s(),g>=l)){alert("over");return}var k=q[f];k&&(delete q[f],restore_form_values(c,k),c.show("slow",function(){b(a).text(d)}),l&&g+1===l&&u(!1))}});k.hasClass("sortable")&&(a=k.sortable({items:".EntryFormItemBox"}),a.bind("sortstart",function(a,b){b.helper.bgiframe();k.addClass("sorting")}),a.bind("sortstop",function(){var d=a.sortable("toArray");
m=b.map(d,function(a){a=a.split("_");return a[a.length-2]});g.value=m.join(",");setTimeout(function(){k.removeClass("sorting");p()},1)}));cache_register_onbeforeunload(function(b){b[f.id+"_ids"]=m;b[f.id+"_deletes"]=q;a&&(b[f.id+"_order"]=a.sortable("toArray"))});cache_register_onbeforerestorevalues(function(d){d[f.id+"_ids"]&&b.each(d[f.id+"_ids"],function(a,b){0===b.indexOf("NEW")&&t(!0)});d[f.id+"_deletes"]&&(q=d[f.id+"_deletes"],k.find(".EntryFormItemContent").each(function(){var a=this.id.split("_"),
a=a[a.length-2];q[a]&&b(this).hide().parent().find("button.EntryFormItemDelete").text(e)}));l&&s()>=l&&u(!1);a&&(d=d[f.id+"_order"])&&(d.reverse(),b.each(d,function(a,c){b("#"+c).detach().prependTo(k)}),a.sortable("refresh"),p())})}})};window.init_schedule=function(a){var d=function(){var d=a(this).parents(".EntryFormItemBox"),b=this.value;"0"===b?d.find(".recurs-ui").hide():"1"==b?(d.find(".repeat-every-ui, .repeats-on-ui, .recurs-week-label").show(),d.find(".repeat-week-of-month-ui, .repeat-day-of-month-ui, .recurs-month-label").hide()):
"2"==b?(d.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-month-label").show(),d.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-week-label").hide()):(d.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-month-label").show(),d.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-week-label").hide())};a("#ScheduleEditArea").on("change",".recur-type-selector",d).find(".recur-type-selector").each(d)}})();
(function(){window.changeAutoAssign=function(a,b,c){a.checked?(b.value="",b.disabled=!0,c.disabled=!0):(b.disabled=!1,c.disabled=!1)};var a=jQuery,d=function(a){a.find(":input").not('input[type="hidden"]').filter("[name]").addClass("require-group")},e=function(a){a.find(":input").not('input[type="hidden"]').filter("[name]").removeClass("require-group")};window.make_required_group=d;window.remove_required_group=e;var b=function(a,b){var c=a.parent().find("td[data-field-display-name]"),g=c.data("fieldDisplayName");
b?(a.text(g).append(' <span class="Alert">*</span>'),d(c)):(a.text(g),e(c))},c=function(){var c=a("#FIELD_ORG_LEVEL_2");if(c.length){var d=a("#RECORD_TYPE").find(":selected").data("progorbranch");b(c,d)}};window.update_form_make_required_org_level=function(){for(var c,d=0;6>d;d++)if(c=a("#FIELD_ORG_LEVEL_"+d),c.length){b(c,!0);break}};window.init_client_validation=function(b,c){var e=a(b),g=e.prop("lang")||e.parents("[lang]").first().prop("lang")||"en-CA",l=function(b){var c=!1;try{b.each(function(){if(this.name)if(/radio|checkbox/i.test(this.type)){if(this.checked&&
this.value)throw c=!0,{name:"StopIteration",message:"StopIteration"};}else if(a.trim(this.value))throw c=!0,{name:"StopIteration",message:"StopIteration"};})}catch(d){if("StopIteration"!==d.name)throw d;}return c},m=null;a.validator.addMethod("email",function(a,b){m||(m=RegExp("^((([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)(\\s*,*\\s*))*)$"));return this.optional(b)||
m.test(a)});var q=null;a.validator.addMethod("url",function(a,b){q||(q=/^((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/);return this.optional(b)||q.test(a)});var p=null;a.validator.addMethod("protourl",function(a,b){p||(p=/^(https?:\/\/)?((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/);return this.optional(b)||p.test(a)});var u=null;a.validator.addMethod("posint",function(a,b){u||(u=/^\d+$/);return this.optional(b)||u.test(a)});var s=
null;a.validator.addMethod("posdbl",function(a,b){if(!s){var c="\\.";"fr-CA"===g&&(c=",");s=new RegExp("^((\\d+)|(\\d*"+c+"\\d+))$")}return this.optional(b)||s.test(a)});var t=null;a.validator.addMethod("record-num",function(a,b){t||(t=/^[A-Z]{3}[0-9]{4,5}$/);return this.optional(b)||t.test(a)});a.validator.addMethod("unique",function(b,c,d){if(!b)return!0;b=string_ci_ai(b);c=jQuery.validator.format("[name!='{0}'][unique='{1}']",c.name,d);var e=[];a(c).each(function(c,d){b==string_ci_ai(a(d).val())&&
e.push(d)});return 0==e.length},"A unique value is required.");a.validator.addMethod("require-group",function(b,c){var d=a(c).parents("td[data-field-display-name]"),e=d.parent().children("td:first").prop("id"),e=e.slice(-(e.length-6)),f=d.find(":input").not("[type=hidden]").not("button");switch(e){case "ACCESSIBILITY":case "AREAS_SERVED":case "LANGUAGES":case "FUNDING":case "SCHOOL_ESCORT":case "SCHOOLS_IN_AREA":case "TYPE_OF_CARE":f=f.not("input:text");break;case "ALT_ORG":case "LEGAL_ORG":f=f.not("input:checkbox");
break;case "FORMER_ORG":f=f.not("input:checkbox").not("[name^=FORMER_ORG_DATE]");break;case "FEES":f=f.not("input:text").add("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM");break;case "VACANCY_INFO":f=f.filter("[name!=VUT_ID]")}(e=l(f))&&d.children("div.required-notice").hide();return e},"Field Required");var r=a('<div id="a_test"></div>').dialog({autoOpen:!1,title:c,closeOnEscape:!1,position:["right","bottom"],resizable:!1,dialogClass:"ValidationErrors"}),n=a("#validation_error_box");a(document).on("click",
".FieldErrorJump",function(b){b=a(b.currentTarget).prop("fieldname");(b=document.getElementById(b))&&b.scrollIntoView(!0)});a(".ValidationErrors.ui-dialog").css({position:"fixed"}).position({my:"right bottom",at:"right bottom",of:window});d(a(b).find("td[data-field-required]"));e=a(b).validate({ignore:"input[type=hidden]",ignoreTitle:!0,errorPlacement:function(b,c){var d=[],e=c[0],f=null;if(c.hasClass("require-group")){var f=c.parents("td[data-field-display-name]"),d=f.children("div.required-notice"),
g=!1;/radio|checkbox/i.test(e.type)?e.checked&&e.value||(g=!0):a.trim(e.value)||(g=!0);if(g){d.length?(d.empty(),d.show(),d.append(b)):(b.removeAttr("for"),f.prepend(a('<div class="required-notice"></div>').append(b)));return}}d.length&&d.hide();b.insertAfter(c)},showErrors:function(b,c){this.defaultShowErrors();if(0===c.length)r.dialog("close"),n.hide("slow");else{var d={},e=a("<ul>");jQuery.each(c,function(b,c){c=c.element;var f=a(c).parents("td[data-field-display-name]"),g=f.parent().children("td:first").prop("id");
d[g]||(d[g]=!0,e.append(a("<li>").append(a("<span>").prop({fieldname:g,className:"FieldErrorJump SimulateLink"}).text(f.data("fieldDisplayName")))))});r.empty().append(e);r.dialog("open");n.show("slow");a("#SUBMIT_BUTTON").prop("disabled",!1)}},focusInvalid:!1,onfocusout:!1,onkeyup:!1,onclick:!1});"fr-CA"===g?jQuery.extend(jQuery.validator.messages,{required:"Ce champ est requis.",remote:"Veuillez remplir ce champ pour continuer.",email:"Veuillez entrer une adresse email valide.",url:"Veuillez entrer une URL valide.",
date:"Veuillez entrer une date valide.",dateISO:"Veuillez entrer une date valide (ISO).",number:"Veuillez entrer un nombre valide.",digits:"Veuillez entrer (seulement) une valeur num\u00e9rique.",creditcard:"Veuillez entrer un num\u00e9ro de carte de cr\u00e9dit valide.",equalTo:"Veuillez entrer une nouvelle fois la m\u00eame valeur.",accept:"Veuillez entrer une valeur avec une extension valide.",maxlength:jQuery.validator.format("Veuillez ne pas entrer plus de {0} caract\u00e8res."),minlength:jQuery.validator.format("Veuillez entrer au moins {0} caract\u00e8res."),
rangelength:jQuery.validator.format("Veuillez entrer entre {0} et {1} caract\u00e8res."),range:jQuery.validator.format("Veuillez entrer une valeur entre {0} et {1}."),max:jQuery.validator.format("Veuillez entrer une valeur inf\u00e9rieure ou \u00e9gale \u00e0 {0}."),min:jQuery.validator.format("Veuillez entrer une valeur sup\u00e9rieure ou \u00e9gale \u00e0 {0}."),protourl:"Veuillez entrer une URL valide.",posint:"Veuillez entrer un nombre positif.",posdbl:"Veuillez entrer un nombre positif.","record-num":"Please enter a valid record number.",
"require-group":"Ce champ est requis.",unique:"Une valeur unique est requise."}):jQuery.extend(jQuery.validator.messages,{protourl:"Please enter a valid URL.",posint:"Please enter a positive number.",posdbl:"Please enter a positive number.","record-num":"Please enter a valid record number.","require-group":"Field Required.",unique:"A unique value is required."});return e};window.init_record_type_form=function(b,d,e){var g=null,l=null,m={},q="ORG_LEVEL_1 ORG_LEVEL_2 ORG_LEVEL_3 ORG_LEVEL_4 ORG_LEVEL_5 LOCATION_NAME SERVICE_NAME_LEVEL_1 SERVICE_NAME_LEVEL_2".split(" "),
p=function(){a("#RecordTypeName").html(l);a.each(q,function(b){var c=e[b],d=a("#"+b);d.length&&(d[0].value=c)&&(a("#"+b+"_DISPLAY").text(c),a("#HIDDEN_"+d).prop("value",c))});a("#RECORD_TYPE").prop("value",g[0].value);c()},u=function(){var e=g[0].value;g.data("hasform")||(e=null);g=a(this).find("option:selected");var h=g[0].value;g.data("hasform")||(h=null);h!==e?(m[e]=a("#copyFieldsForm").contents().detach(),m[h]?(a("#copyFieldsForm").append(m[h]),a("#RECORD_TYPE").prop("value",g[0].value)):a("#copyFieldsForm").load(d+
" #copyFieldsInner",{NUM:b,RT:h||g[0].value},p)):c()};jQuery(function(){l=a("#RecordTypeName").html();var b=a("#RECORD_TYPE");a(document).on("change","#RECORD_TYPE",u);g=b.find("option:selected");c()})};window.init_validate_duplicate_org_names=function(b){var c=a.extend({selector:"#EntryForm",fields:"#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5,#LOCATION_NAME,#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2,#OLS_SELECT input,#ORG_NUM",only_warn:!0,num:null,org_levels:[],url:null},b),
d=[],e=null!==c.num,l=[],m=a(c.selector).submit(function(b){var f,u,s=!1,t=a(c.fields).serializeArray();c.num&&t.push({name:"NUM",value:c.num});if(t.length!==d.length)s=!0;else for(f=0;f<t.length;f++)if(u=t[f],u.name!==d[f].name||u.value!==d[f].value){s=!0;break}if(!s&&e)return!0;var r=function(){c.only_warn&&confirm(c.confirm_string)?(e=!0,a("#duplicate_name_error_box").hide(),m.submit()):(a("#SUBMIT_BUTTON").prop("disabled",!1),a("#duplicate_name_error_box").show())};b.stopPropagation();b.preventDefault();
if(!s)return r(),!1;a.ajax({url:c.url,dataType:"json",method:"get",data:t,success:function(b){e=!0;l=[];for(var c=0;c<b.length;c++)e&=0===b[c].count,0!==b[c].count&&l.push(b[c].type);d=t;e?(a("#duplicate_name_error_box").hide(),m.submit()):r()}});return!1})}})();
(function(){var a=jQuery,d=function(d,b){a("#CM_existing_add_table").removeClass("NotVisible").append(a("<tr>").append(a("<td>").append(a("<input>").prop({id:"CM_ID_"+d,type:"checkbox",checked:!0,defaultChecked:!0,name:"CM_ID",value:d}))).append(a("<td>").addClass("FieldLabelLeftClr").append(document.createTextNode(" "+b))).append(a("<td>").prop("align","center").append(a("<input>").prop({id:"CM_NUM_NEEDED_"+d,name:"CM_NUM_NEEDED_"+d,size:3,maxlength:3}))))};window.init_num_needed=function(e){init_autocomplete_checklist(a,
{field:"CM",source:entryform.community_complete_url,add_new_html:d,minLength:3,txt_not_found:e})};window.init_interests=function(d){var b=[],c=only_items_chk_add_html(a,"AI");init_autocomplete_checklist(a,{field:"AI",source:entryform.interest_complete_url,add_new_html:c,added_values:b,txt_not_found:d});var f,k=function(b){var c=a("#AreaOfInterestList");c.length&&c.prop("id","AreaOfInterestListOld");a("<ul>").hide().insertAfter(f).prop("id","AreaOfInterestList").append(a(a.map(b,function(b,c){return a("<li>").append(a("<input>").prop({type:"checkbox",
value:b.chkid}).data("cioc_chk_display",b.value)).append(document.createTextNode(" "+b.value))[0]}))).show("slow");c.length&&c.hide("slow",function(){c.remove()})};f=a("#InterestGroup").change(function(){a.getJSON(entryform.interest_complete_url,{IGID:f.prop("value")},k)});a("#FIELD_INTERESTS").next().on("click","#AreaOfInterestList input:checkbox",{added_values:b,add_item_fn:c},function(b){var c=a(this),d=document.getElementById("AI_ID_"+this.value);d?d.checked=!0:(d=c.data("cioc_chk_display"),b.data.added_values.push({chkid:this.value,
display:d}),b.data.add_item_fn(this.value,d));c.parent().hide("slow",function(){c.remove()})})}})();
(function(){window.init_entryform_notes=function(a,d,e){var b=jQuery;a.each(function(){var a=this,f=b(a),k=f.parent(),h=1,g=f.find(".EntryFormNotesUpdateIds")[0];if(g){var l=f.find(".EntryFormNotesDeleteIds")[0],m=f.find(".EntryFormNotesCancelIds")[0],q=f.find(".EntryFormNotesRestoreIds")[0],p=[],u=[],s=[],t={},r=[],n=function(a,c){p.push(a.id);g.value=p.join(",");var d=f.find(".EntryFormItemBox").length+1;template=f.data("addTmpl");new_item=b(template.replace(/\[COUNT\]/g,d).replace(/\[ID\]/g,a.id).replace(/\[MODIFIED_DATE\]/g,
a.modified_date||"").replace(/\[MODIFIED_BY\]/g,a.modified_by||"").replace(/\[CREATED_DATE\]/g,a.created_date||"").replace(/\[CREATED_BY\]/g,a.created_by||"").replace(/\[NOTE_VALUE\]/g,a.note_value||""));a.note_type&&new_item.find("option[value='"+a.note_type+"']").prop("selected",!0);a.created_date&&new_item.find("tr.CreatedField").show();!a.modified_date||a.modified_date===a.created_date&&a.modified_by===a.created_by||new_item.find("tr.ModifiedField").show();c&&new_item.find(".NewFlag").show();
f.append(new_item)};k.find(".EntryFormItemAdd").click(function(){var a="NEW"+h++;n({id:a},!0)});var w=function(a){var c=a.id.split("_");a=b(a);var d=a.parents(".EntryFormNotesItem");d.find(".EntryFormItemContent").css("text-decoration","line-through");u.push(c[c.length-2]);l.value=u.join(",");d.data("actionToRestore","delete");a.parent().hide().prev().show()},x=function(a,c){var d=a.id.split("_"),e=b(a),g=e.parents(".EntryFormNotesItem"),h=g.find(".EntryFormItemContent"),k=a.id.lastIndexOf("_"),k=
a.id.substring(0,k)+"_CANCEL_REASON",d=d[d.length-2];h.prepend(c.data("cancelTemplate"));s.push(d);m.value=s.join(",");t[d]=c.data("cancelType");f.append(b("<input>").prop({type:"hidden",id:k,name:k,value:c.data("cancelType")}));g.data("actionToRestore","cancel");e.parent().hide().prev().show()},z={update:function(a){a=b(a).parents(".EntryFormNotesItem");var c=a.find(".EntryFormItemContent");n(c.data("formValues"));a.hide()},"delete":w,cancel:x},v=k.find(".EntryFormItemActionMenu").menu({select:function(a,
c){b(this).hide();z[c.item.data("action")](v.data("activeButton"),c.item)}}).hide().css({position:"absolute",zIndex:1});k.on("click",".EntryFormItemAction",function(a){v.data("activeButton",this);if(v.is(":visible"))return v.hide(),!1;v.menu("blur").show();v.position({my:"right top",at:"right bottom",of:this});b(document).one("click",function(){v.hide()});return!1});k.find(".EntryFormItemViewHidden").click(function(a){a=b(this);var c=a.next();c.is(":visible")?(a.text(d),c.hide()):(a.text(e),c.show())});
var A={"delete":function(a,c,d,e){e.css("text-decoration","none");u=b.grep(u,function(b){return b!==a});l.value=u.join(",");c.parent().hide().next().show()},cancel:function(a,c,d,e){d=c[0];var f=d.id.lastIndexOf("_");d=d.id.substring(0,f)+"_CANCEL_REASON";e.find(".EntryFormItemCancelledDetails").remove();s=b.grep(s,function(b){return b!==a});m.value=s.join(",");delete t[a];b("#"+d).remove();c.parent().hide().next().show()}};k.on("click",".EntryFormItemRestoreAction",function(a){a=this.id.split("_");
var c=b(this),d=c.parents(".EntryFormNotesItem"),e=d.find(".EntryFormItemContent");A[d.data("actionToRestore")](a[a.length-2],c,d,e)});var y=function(a){a=this.id.split("_");var c=b(this);c.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","line-through");c.parent().hide().prev().show();r.push(a[a.length-2]);q.value=r.join(",")};k.on("click",".EntryFormItemRestoreCancel",y);k.on("click",".EntryFormItemDontRestoreCancel",function(a){var c=this.id.split("_");
a=b(this);a.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","none");a.parent().hide().next().show();c=c[c.length-2];r=b.grep(r,function(a){return a!==c});q.value=r.join(",")});cache_register_onbeforeunload(function(b){b[a.id+"_updates"]=p;b[a.id+"_deletes"]=u;b[a.id+"_restores"]=r;b[a.id+"_cancels"]=s;b[a.id+"_cancel_reason"]=t});cache_register_onbeforerestorevalues(function(d){var e=a.id.substring(0,a.id.lastIndexOf("_"))+"_";d[a.id+"_updates"]&&b.each(d[a.id+
"_updates"],function(a,c){if(0===c.indexOf("NEW"))h++,n({id:c},!0);else{var d=b("#"+e+c+"_DISPLAY");n(d.data("formValues"));b("#"+e+c+"_CONTAINER").hide()}});d[a.id+"_deletes"]&&b.each(d[a.id+"_deletes"],function(a,b){w(document.getElementById(e+b+"_ACTION"))});d[a.id+"_restores"]&&(b.each(d[a.id+"_restores"],function(a,b){y.call(document.getElementById(e+b+"_RESTORECANCEL"))}),k.find(".EntryFormItemViewHidden").click());if(d[a.id+"_cancels"]){var f=d[a.id+"_cancel_reason"];b.each(d[a.id+"_cancels"],
function(a,b){x(document.getElementById(e+b+"_ACTION"),v.find("li[data-cancel-type='"+f[b]+"']"))})}})}})}})();
