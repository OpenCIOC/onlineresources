window.CIOC={};
(function(a,b){b.do_drop_down_navigation=function(){for(var d=a.getElementById("ActionList").options,c=0;c<d.length;c++)if(d[c].selected){var e=d[c].getAttribute("href");e&&("undefined"!=typeof d[c].attributes.newwindow?b.open(e):b.location.href=e);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var c=a(this),b=a(c.data("target")),f={autoOpen:!1,title:b.data("title"),modal:b.data("modal")};b.dialog(f);c.click(function(){b.dialog("isOpen")?b.dialog("close"):b.dialog("open")})})})})(document,window);
function CheckAll(a,b){a||(a="IDList");var d=b;b||(d=document.RecordList);for(var c=d.elements.length,e=0;e<c;e++){var f=d.elements[e];f.name===a&&(f.checked=!0)}}function ClearAll(a,b){a||(a="IDList");var d=b;b||(d=document.RecordList);for(var c=d.elements.length,e=0;e<c;e++){var f=d.elements[e];f.name===a&&(f.checked=!1)}}function add_class(a,b){a&&!(new RegExp("\\b"+b+"\\b")).test(a.className)&&(a.className&&(b=" "+b),a.className+=b)}
function remove_class(a,b){if(a){for(var d=a.className.split(" "),c=[],e=0;e<d.length;e++){var f=d[e];f!==b&&c.push(f)}a.className=c.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,b){window.open(a,b,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,b){window.open(a,b,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,b){window.open(a,b,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var b={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var d=a(this).data("popargs");(b[d.size||"sm"]||openWin)(this.href,d.name||"popwin");return!1})});
(function(){var a=jQuery,b={},d=function(c){null!==c&&"undefined"!==typeof c?a("#myListCount").text(c):(c=a("#myListCount").text())&&(c=parseInt(c,10));c?b.myListLink.show():b.myListLink.hide()},c=function(c){a.each(c,function(c,d){a("#added_to_list_"+d).show();a("#add_to_list_"+d).hide()})},e=function(e){return function(f){f.fail?alert(f.errinfo):(f.ids?d(a.grep(f.ids,l[b.domain]).length):f.count?d(f.count):d(0),c([e]))}},f=function(c){c=a(c.currentTarget).data("id");a.ajax({success:e(c),dataType:"json",
error:function(){alert("Error")},data:{id:c},type:"POST",url:b.current_list_url})},k=function(c){return function(d){if(d.fail)alert(d.errinfo);else{d=!0;if(c){var b=a("#results_table #remove_from_list_"+c);b.length?b.parent().parent().remove():(d=!1,b=a("#results_container #remove_from_list_"+c),b.parents(".dlist-result").remove())}b=!1;if((b=d?1===a("#results_table tr").length:0===a("#results_container .dlist-result").length)||!c)a("#records_ui").hide(),a("#no_records_message").show()}}},h=function(c){c=
a(c.currentTarget).data("id");a.ajax({success:k(c),dataType:"json",error:function(){alert("Error")},data:{ID:c,RemoveItem:b.domain},type:"POST",url:b.current_list_url})},g=function(c){a.ajax({success:k(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:b.domain},type:"POST",url:b.current_list_url})},l={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},m=function(f){if(f.fail)q();else if(f.inrequest){var e=a.grep(f.ids,
l[b.domain]);c(e);d(e.length);(f=f.previous_ids)&&a.each(f,function(c,d){a("#ct_added_to_previous_request_"+d).show()});a(".ListUI img").prop("src",function(a,c){return c.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();b.current_list_url=b.ct_update_url;p()}else q()},q=function(){var f=function(){b.list_view_mode||c(b.already_added||[]);b.current_list_url=b.list_view_mode&&"ct"===b.list_view_mode?b.ct_update_url:b.list_update_url;d((b.already_added||[]).length);
p()};b.list_view_mode||b.has_session?f():a.ajax({dataType:"json",error:null,url:b.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&f()}})},p=function(){a(".HideListUI").delegate(".add_to_list","click",f).delegate(".remove_from_list","click",h).removeClass("HideListUI");a("#remove_all_from_list").click(g);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(c){b=c;b.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
c.in_request?a.ajax({success:m,dataType:"json",error:null,type:"POST",url:c.in_request}):q()}})();this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var c=h[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,c){var e,p,h,s,t=f,r,n=c[a];n&&"object"===typeof n&&"function"===typeof n.toJSON&&(n=n.toJSON(a));"function"===typeof g&&(n=g.call(c,a,n));switch(typeof n){case "string":return b(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";f+=k;r=[];if("[object Array]"===Object.prototype.toString.apply(n)){s=n.length;for(e=0;e<s;e+=1)r[e]=d(e,n)||"null";h=0===r.length?"[]":f?"[\n"+f+r.join(",\n"+f)+"\n"+t+"]":"["+r.join(",")+"]";f=t;return h}if(g&&"object"===typeof g)for(s=g.length,e=0;e<s;e+=1)p=g[e],"string"===typeof p&&(h=d(p,n))&&r.push(b(p)+(f?": ":":")+h);else for(p in n)Object.hasOwnProperty.call(n,p)&&(h=d(p,n))&&r.push(b(p)+(f?": ":":")+h);h=0===r.length?"{}":f?"{\n"+f+r.join(",\n"+f)+"\n"+
t+"}":"{"+r.join(",")+"}";f=t;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(c){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,k,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,b){var e;k=f="";if("number"===typeof b)for(e=0;e<b;e+=1)k+=" ";else"string"===typeof b&&(k=b);if((g=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return d("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,d){function b(a,c){var e,f,g=a[c];if(g&&"object"===typeof g)for(e in g)Object.hasOwnProperty.call(g,e)&&(f=b(g,e),void 0!==f?g[e]=f:delete g[e]);return d.call(a,c,g)}var e;a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof d?b({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var b={};jQuery(a).find("input,select,textarea").each(function(a){if(this.name)if(b[this.name]||(b[this.name]=[]),"select"===this.nodeName.toLowerCase()){var c=b[this.name];$(this).find("option").each(function(a){this.selected&&c.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&b[this.name].push(this.value||"")});return b};window.restore_form_values=function(a,b){var d=jQuery;d(a).find("input,select,textarea").each(function(a){if(this.name){var e=
b[this.name];"undefined"!=typeof e&&null!==e&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(a){this.selected=1<e.length?0<=d.inArray(this.value,e):0===e.length?!1:this.value===e[0]}):this.value=e.length?e[0]:"":this.checked=1<e.length?0<=d.inArray(this.value,e):0===e.length?!1:this.value===e[0])}})};window.init_cached_state=function(a){var b=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];b(window).on("beforeunload",function(){var d={form_values:get_form_values(a)};b.each(onbeforeunload_fns,function(a,b){b(d)});document.getElementById("cache_form_values").value=JSON.stringify(d)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var d=document.getElementById("cache_form_values");if(d&&d.value){var c=
JSON.parse(d.value);b.each(onbeforerestorevalues_fns,function(a,d){d(c)});restore_form_values(a,c.form_values)}}}})();
(function(){var a=jQuery,b={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},d={"en-CA":!0,"":!0},c={},e={"fr-CA":"fr","es-MX":"es"},f=function(){var c=a(this),d=c.data("culture"),e=b[d]||a.datepicker.regional[d].dateFormat,f={};c.hasClass("NoYear")&&(e=e.replace(/[\- .\/]*yy[\/]?/,""),f={beforeShow:function(a,
c){c.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,c){c.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});f.dateFormat=e;c.datepicker(a.extend({},a.datepicker.regional[d],f)).prop("autocomplete","off")},k=function(b){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+b+".min.js",function(){d[b]=!0;a.each(c[b],function(){f.call(this)});delete c[b]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var b=
a(this),g;g=b.parents("[lang]").first().prop("lang")||"en-CA";g=e[g]||g;b.data("culture",g);d[g]?f.call(this):(b=c[g],b||(b=c[g]=[],k(g)),b.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
(function(a){function b(a){return a&&a.constructor===Number?a+"px":a}a.fn.bgiframe=a.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(d){d=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},d);var c='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+d.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==d.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==d.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
b(d.top))+";left:"+("auto"==d.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(d.left))+";width:"+("auto"==d.width?"expression(this.parentNode.offsetWidth+'px')":b(d.width))+";height:"+("auto"==d.height?"expression(this.parentNode.offsetHeight+'px')":b(d.height))+';"/>';return this.each(function(){0===a(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(c),this.firstChild)})}:function(){return this};a.fn.bgIframe=a.fn.bgiframe})(jQuery);
(function(a){a.widget("ui.combobox",{options:{source:null},_create:function(){var b=this.element;this.options.source&&(a(b).autocomplete({focus:function(a,c){return!1},source:this.options.source,delay:0,minLength:0}),a("<span>").insertAfter(b).addClass("SmallButton DownButton").css("margin-left","1px").click(function(a){b.autocomplete("widget").is(":visible")?b.autocomplete("close"):(b.autocomplete("search",""),b.focus())}))}})})(jQuery);
(function(){window.init_history_dialog=function(a,b){var d=!1,c=null,e=null,f=null,k=function(b){b.fail?a("#HistoryFieldContent").html("<em>"+b.errinfo+"</em>"):b.compare?(null===c&&(c=new diff_match_patch),b=c.diff_main(b.text2,b.text1),c.diff_cleanupSemantic(b),b=c.diff_prettyHtml(b),a("#HistoryFieldContent").html(b)):a("#HistoryFieldContent").html(b.text1)},h=function(c,d,g){return function(){var d=a("#HistoryLanguage").prop("value"),h=a("#HistoryRevision").prop("value"),n=a("#HistoryCompare").prop("value");
if(n===f||!(""===f&&n===h||""===n&&f===e)){var w=n;if(""===n||n===h)w="";a.getJSON(b.fielddiff_url.replace("[ID]",g).replace("[LANG]",d).replace("[FIELD]",c).replace("[REV]",h).replace("[COMP]",w),k)}e=h;f=n}},g=null,l=function(c,d,e,f){a("select.HistorySelect").unbind("change");a("#HistoryLanguage").unbind("change");a("#field_history").html('<p class="Info">'+b.txt_loading+"</p>").dialog("close").dialog("open").dialog("option","title",b.txt_fielddifftitle+e+" ("+d+")").load(b.fielddiffui_url.replace("[ID]",
e).replace("[FIELD]",c).replace("[LANG]",f),g(c,d,e))},m=function(c,b,d){return function(){var e=a(this).prop("value");l(c,b,d,e)}},g=function(c,b,d){return function(){a("select.HistorySelect").change(h(c,b,d));a("#HistoryLanguage").change(m(c,b,d));e=a("#HistoryRevision").prop("value");f=a("#HistoryCompare").prop("value")}};a(".ShowVersions").click(function(){var c=a(this).data("ciocfield"),e=a(this).data("ciocfielddisplay"),f=a(this).data("ciocid");d||(d=!0,a.getScript(b.path_to_start+"scripts/diff_match_patch.min.js"));
l(c,e,f,"")});a(document).on("click",".FieldHistoryJump",function(c){c=a(c.currentTarget).data("fieldname");(c=document.getElementById("FIELD_"+c))&&c.scrollIntoView(!0)});a(document).on("click",".HistoryFieldsToggle",function(c){a(c.currentTarget).parent().children("ul").toggle("fast")});var q=function(){a(".HistoryFieldsToggle").parent().children("ul").hide()};a(".HistorySummary").click(function(){var c=a(this).data("cioclang"),d=a(this).data("ciocid");a("#revision_history").html("Loading...").load(b.revhistory_url.replace("[ID]",
d).replace("[LANG]",c),q).dialog("open")});a("#revision_history").dialog({autoOpen:!1,width:330,height:280,position:["right","top"],resizable:!1,dialogClass:"RevHistory"});a("#field_history").dialog({autoOpen:!1,width:620,height:280,position:["right","bottom"]});a(".RevHistory.ui-dialog").css({position:"fixed"})}})();
(function(){var a=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;var b=function(c,b,d,k,h){d=d||"value";k=k||"";h=h||"";return function(g,l){if(b.term&&(new RegExp(k+c.ui.autocomplete.escapeRegex(b.term)+h,"i")).test(g.term)&&b.content&&13>b.content.length){var m=new RegExp(k+c.ui.autocomplete.escapeRegex(g.term)+h,"i");l(c.grep(b.content,function(c){return m.test(a(c[d]))}));return!0}return!1}};window.default_cache_search_fn=b;var d=function(c,d,f,k,h){f=f||{};h=h||b(c,f,k||"value");
return function(b,k,m){b.term=a(b.term);f.term===b.term&&f.content?k(f.content):h(b,k)||c.ajax({url:m||d,dataType:"json",data:b,cache:!1,success:function(a){f.term=b.term;f.content=a;k(a)}})}};window.create_caching_source_fn=d;window.init_community_autocomplete=function(c,b,f,k,h){var g={};h&&(h=c(h));h&&!h.length&&(h=null);var l=c("#"+b).autocomplete({focus:function(a,c){return!1},select:function(a,c){l.data({chkid:c.item.chkid,display:c.item.value})},source:d(c,f,g),minLength:k}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),l.autocomplete("close"))});h&&(l.parents("form").on("submit",function(){var b=l.val();if(l.data("display")===b)h.val(l.data("chkid"));else{if(g.content){var d=a(b),b=c.grep(g.content,function(c){return a(c.value)===d});if(1===b.length){h.val(b[0].chkid);l.data({chkid:b[0].chkid,display:b[0].value}).val(b[0].value);return}}h.val("")}}),cache_register_onbeforerestorevalues(function(a){l.length&&(a=a["autocomplete_data_"+l[0].id])&&l.data(a)}),cache_register_onbeforeunload(function(a){if(l.length){var c=
l.data();c.display&&c.chkid&&(a["autocomplete_data_"+l[0].id]={display:c.display,chkid:c.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(a,c,b,f){cache_register_onbeforeunload(function(a){a[c+"_added"]=b});cache_register_onbeforerestorevalues(function(b){(b=b[c+"_added"])&&a.each(b,function(a,c){f(c.chkid,c.display,"")})})};window.basic_chk_add_html=function(a,c){return function(b,f){var k=a("<tr>").append(a("<td>").append(a("<input>").prop({id:c+"_ID_"+b,type:"checkbox",checked:!0,defaultChecked:!0,name:c+"_ID",value:b})).append(document.createTextNode(" "+
f))).append(a("<td>").append(a("<input>").prop({id:c+"_NOTES_"+b,name:c+"_NOTES_"+b,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));a("#"+c+"_existing_add_table").append(k);return k.find('input[type="checkbox"]')[0]}};var a={},b=function(b){$("#NEW_"+b).autocomplete(a[b])};window.init_autocomplete_checklist=function(d,c){var e=c.field;if(!a[e]){var f=c.source;c.minLength=c.minLength||1;c.delay=c.delay||300;c.add_new_html=c.add_new_html||basic_chk_add_html(d,e);c.match_prop=
c.match_prop||"value";c.txt_not_found=c.txt_not_found||"Not Found";var k=d(c.delegate_root||document),h=c.added_values||[],g=function(a,b,d){var f=document.getElementById(e+"_ID_"+a);f?(f.checked=!0,c.after_add_new_value&&c.after_add_new_value.call(f)):(h.push({chkid:a,display:b,label:d}),a=c.add_new_html(a,b,d),c.after_add_new_value&&c.after_add_new_value.call(a))};create_checklist_onbefore_fns(d,e,h,g);var l={},m=function(a){d("#NEW_"+e).data({chkid:"",display:"",label:""}).prop("value","").focus();
d("#"+e+"_error").hide("slow",function(){d(this).remove()})},q=null,p=null;(function(a){d.isArray(a)?(p=function(b,f){var e=new RegExp(d.ui.autocomplete.escapeRegex(string_ci_ai(b.term)));f(d.grep(a,function(a){return e.test(string_ci_ai(a[c.match_prop]||a))}))},q=function(b,f){var e=string_ci_ai(b),g=d.grep(a,function(a){return string_ci_ai(string_ci_ai(a[c.match_prop]||a))===e});if(1===g.length)return f(g[0]),!0;f()}):"string"===typeof a?(p=create_caching_source_fn(d,a,l,c.match_prop),q=function(a,
b,f){var e=string_ci_ai(a);if(l.content){var g=d.grep(l.content,function(a){return string_ci_ai(a[c.match_prop])===e});if(1===g.length){b(g[0]);return}}f||string_ci_ai(l.term||"")===e?b():p({term:e},function(c){q(a,b,!0)})}):(p=a,q=c.look_for_fn)})(f);k.on("click","#add_"+e,function(a){a=d("#NEW_"+e);var b=a.data("chkid"),f=a.data("display"),k=a.data("label"),h=a[0].value;if(b&&f&&f==h)return g(b,f,k),m(),!1;q(a[0].value,function(a){a?(g(a.chkid,a.value,a.label),m()):0===d("#"+e+"_error").length&&
(d("#"+e+"_new_input_table").before(d("<p>").hide().addClass("Alert").prop("id",e+"_error").append(document.createTextNode(c.txt_not_found))),d("#"+e+"_error").show("slow"))});return!1});a[e]={focus:function(a,c){return!1},source:p,minLength:c.minLength,delay:c.delay,select:function(a,c){d("#NEW_"+e).data({chkid:c.item.chkid,display:c.item.value,label:c.item.label})}};k.on("keypress","#NEW_"+e,function(a){"13"==a.keyCode&&(a.preventDefault(),d("#NEW_"+e).autocomplete("close"),d("#add_"+e).trigger("click"))})}b(e)};
window.init_languages=function(a,c){var b=null,f=null,k=a("#LN_existing_add_table"),h=function(){var c=a(this).parents(".language-entry").find(".language-details-notes");this.checked?c.slideDown():c.slideUp()};init_autocomplete_checklist(a,{field:"LN",source:entryform.languages_source,txt_not_found:c,after_add_new_value:h,add_new_html:function(c,h){null===b&&(b=a("#add_LN"),f=b.data("newTemplate"));var m=f.replace(/LANGNAMELANGNAME/g,h).replace(/IDIDID/g,c);k.append(m)}});k.on("change",".language-primary",
h).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+a(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(c,b){a(this).css(c);a("<div>").addClass("arrow").addClass(b.vertical).addClass(b.horizontal).appendTo(this)}}});window.languages_check_state=h}})();
(function(){var a=jQuery;window.configure_entry_form_button=function(){a("#SUBMIT_BUTTON").click(function(b){b=a("#SUBMIT_BUTTON");b.prop("disabled")||(b.prop("disabled",!0),setTimeout(function(){a("#EntryForm").submit()},1))});a(document).bind("keydown",function(b){if(b.ctrlKey&&"s"===String.fromCharCode(b.which).toLowerCase())return setTimeout(function(){a("#SUBMIT_BUTTON").click()},1),b.preventDefault(),b.stopPropagation(),!1});a("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var b=a("#SUBMIT_BUTTON").prop("value");a("#SUBMIT_BUTTON").replaceWith(a('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",b));a("#EntryForm").submit(function(){var b=validateForm();!1===b&&a("#SUBMIT_BUTTON").prop("disabled",!1);return b})}})();
(function(){window.only_items_chk_add_html=function(a,b,d){return function(c,e){d&&d();a("#"+b+"_existing_add_container").append(a("<label>").append(a("<input>").prop({id:b+"_ID_"+c,type:"checkbox",checked:!0,defaultChecked:!0,name:b+"_ID",value:c})).append("&nbsp;").append(document.createTextNode(e))).append(" ; ")}};window.init_check_for_autochecklist=function(a){var b=jQuery,d=function(){var a=b(this).data("jump_location");(a=document.getElementById(a))&&a.scrollIntoView(!0)},c=function(){return b("<li>").append(b("<span>").data("jump_location",
this.id).addClass("UnaddedChecklistJump SimulateLink").append(b(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},e=b("input[id^=NEW_]");e.length&&(b("#EntryForm").submit(function(d){var k=e.map(function(){return this.value?this:null}),h;if(k.length&&!d.isDefaultPrevented()){if(!confirm(a)){d.preventDefault();b("#SUBMIT_BUTTON").prop("disabled",!1);d=b("#unadded_checklist_error_box");h=b("#unadded_checklist_error_list");var g=d.is(":visible");g&&h.children("ul:first").hide("slow",
function(){b(this).remove()});var l=b("<ul>");g&&l.hide();h.append(l);b.each(k.map(c),function(){l.append(this)});g?l.show("slow"):d.show("slow")}}else d.isDefaultPrevented()&&(d=b("#unadded_checklist_error_box"),h=b("#unadded_checklist_error_list"),d.hide("slow",function(){h.children().remove()}))}),b(document).on("click",".UnaddedChecklistJump",d))};window.init_entryform_items=function(a,b,d){var c=jQuery;a.each(function(){var a=null,f=this,k=c(f),h=1,g=k.find(".EntryFormItemContainerIds")[0];if(g){var l=
k.data("maxAdd");l&&(l=parseInt(l,10));var m=[];g.value&&(m=c.map(g.value.split(","),function(a){return 0===a.indexOf("NEW")&&0!==a.indexOf("NEWFB")?null:a}));var q={},p=function(){k.find(".EntryFormItemBox").each(function(a){c(this).find(".EntryFormItemCount").text(a+1)})},u=function(a){if(l){var c=k.find(".EntryFormItemContent:hidden").parent().find("button.EntryFormItemDelete").prop("disabled",!a);r.prop("disabled",!a);a?(c.removeClass("ui-state-disabled"),r.removeClass("ui-state-disabled")):(c.addClass("ui-state-disabled"),
r.addClass("ui-state-disabled"))}},s=function(){var a=0,c;for(c in q)a++;return m.length-a},t=function(b){var d=0;if(l&&!b&&(d=s(),d>=l)){alert("over");return}var f=k.data("addTmpl");m.push("NEW"+h++);g.value=m.join(",");f=c(f.replace(/\[COUNT\]/g,m.length).replace(/\[ID\]/g,m[m.length-1]));f.find(".DatePicker").autodatepicker();f.find(".Province").combobox({source:window.cioc_province_source});entryform.service_titles&&f.find(".ServiceTitleField").combobox({source:entryform.service_titles});k.append(f);
a&&(a.sortable("refresh"),p());l&&!b&&d+1===l&&u(!1)},r=k.parent().find(".EntryFormItemAdd").click(function(){t(!1)});k.on("click","button.EntryFormItemDelete",function(){var a=this,f=c(this).parents(".EntryFormItemBox").find(".EntryFormItemContent"),e=this.id.split("_"),e=e[e.length-2];if(f.is(":visible"))f.hide("slow",function(){q[e]=get_form_values(f);c(a).text(d);f.find("input,select,textarea").each(function(){"input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?
"select"===this.nodeName.toLowerCase()?c(this).find("option").each(function(){this.selected=!1}):this.value="":this.checked=!1});u(!0)});else{var g=0;if(l&&(g=s(),g>=l)){alert("over");return}var k=q[e];k&&(delete q[e],restore_form_values(f,k),f.show("slow",function(){c(a).text(b)}),l&&g+1===l&&u(!1))}});k.hasClass("sortable")&&(a=k.sortable({items:".EntryFormItemBox"}),a.bind("sortstart",function(a,c){c.helper.bgiframe();k.addClass("sorting")}),a.bind("sortstop",function(){var b=a.sortable("toArray");
m=c.map(b,function(a){a=a.split("_");return a[a.length-2]});g.value=m.join(",");setTimeout(function(){k.removeClass("sorting");p()},1)}));cache_register_onbeforeunload(function(c){c[f.id+"_ids"]=m;c[f.id+"_deletes"]=q;a&&(c[f.id+"_order"]=a.sortable("toArray"))});cache_register_onbeforerestorevalues(function(b){b[f.id+"_ids"]&&c.each(b[f.id+"_ids"],function(a,c){0===c.indexOf("NEW")&&t(!0)});b[f.id+"_deletes"]&&(q=b[f.id+"_deletes"],k.find(".EntryFormItemContent").each(function(){var a=this.id.split("_"),
a=a[a.length-2];q[a]&&c(this).hide().parent().find("button.EntryFormItemDelete").text(d)}));l&&s()>=l&&u(!1);a&&(b=b[f.id+"_order"])&&(b.reverse(),c.each(b,function(a,b){c("#"+b).detach().prependTo(k)}),a.sortable("refresh"),p())})}})};window.init_schedule=function(a){var b=function(){var b=a(this).parents(".EntryFormItemBox"),c=this.value;"0"===c?b.find(".recurs-ui").hide():"1"==c?(b.find(".repeat-every-ui, .repeats-on-ui, .recurs-week-label").show(),b.find(".repeat-week-of-month-ui, .repeat-day-of-month-ui, .recurs-month-label").hide()):
"2"==c?(b.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-month-label").show(),b.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-week-label").hide()):(b.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-month-label").show(),b.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-week-label").hide())};a("#ScheduleEditArea").on("change",".recur-type-selector",b).on("click",".schedule-ui-accept-feedback",function(d){var c=a(this);d=c.parents(".EntryFormItemBox");var c=c.data("schedule"),
e=d.find(".recur-type-selector");restore_form_values(d,c);b.call(e[0]);return!1}).find(".recur-type-selector").each(b)}})();
(function(){window.changeAutoAssign=function(a,b,c){a.checked?(b.value="",b.disabled=!0,c.disabled=!0):(b.disabled=!1,c.disabled=!1)};var a=jQuery,b=function(a){a.find(":input").not('input[type="hidden"]').filter("[name]").addClass("require-group")},d=function(a){a.find(":input").not('input[type="hidden"]').filter("[name]").removeClass("require-group")};window.make_required_group=b;window.remove_required_group=d;var c=function(a,c){var e=a.parent().find("td[data-field-display-name]"),g=e.data("fieldDisplayName");
c?(a.text(g).append(' <span class="Alert">*</span>'),b(e)):(a.text(g),d(e))},e=function(){var b=a("#FIELD_ORG_LEVEL_2");if(b.length){var d=a("#RECORD_TYPE").find(":selected").data("progorbranch");c(b,d)}};window.update_form_make_required_org_level=function(){for(var b,d=0;6>d;d++)if(b=a("#FIELD_ORG_LEVEL_"+d),b.length){c(b,!0);break}};window.init_client_validation=function(c,d){var e=a(c),g=e.prop("lang")||e.parents("[lang]").first().prop("lang")||"en-CA",l=function(b){var c=!1;try{b.each(function(){if(this.name)if(/radio|checkbox/i.test(this.type)){if(this.checked&&
this.value)throw c=!0,{name:"StopIteration",message:"StopIteration"};}else if(a.trim(this.value))throw c=!0,{name:"StopIteration",message:"StopIteration"};})}catch(d){if("StopIteration"!==d.name)throw d;}return c},m=null;a.validator.addMethod("email",function(a,b){m||(m=RegExp("^((([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)(\\s*,*\\s*))*)$"));return this.optional(b)||
m.test(a)});var q=null;a.validator.addMethod("url",function(a,b){q||(q=/^((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/);return this.optional(b)||q.test(a)});var p=null;a.validator.addMethod("protourl",function(a,b){p||(p=/^(https?:\/\/)?((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/);return this.optional(b)||p.test(a)});var u=null;a.validator.addMethod("posint",function(a,b){u||(u=/^\d+$/);return this.optional(b)||u.test(a)});var s=
null;a.validator.addMethod("posdbl",function(a,b){if(!s){var c="\\.";"fr-CA"===g&&(c=",");s=new RegExp("^((\\d+)|(\\d*"+c+"\\d+))$")}return this.optional(b)||s.test(a)});var t=null;a.validator.addMethod("record-num",function(a,b){t||(t=/^[A-Z]{3}[0-9]{4,5}$/);return this.optional(b)||t.test(a)});a.validator.addMethod("unique",function(b,c,d){if(!b)return!0;b=string_ci_ai(b);c=jQuery.validator.format("[name!='{0}'][unique='{1}']",c.name,d);var e=[];a(c).each(function(c,d){b==string_ci_ai(a(d).val())&&
e.push(d)});return 0==e.length},"A unique value is required.");a.validator.addMethod("require-group",function(b,c){var d=a(c).parents("td[data-field-display-name]"),e=d.parent().children("td:first").prop("id"),e=e.slice(-(e.length-6)),f=d.find(":input").not("[type=hidden]").not("button");switch(e){case "ACCESSIBILITY":case "AREAS_SERVED":case "LANGUAGES":case "FUNDING":case "SCHOOL_ESCORT":case "SCHOOLS_IN_AREA":case "TYPE_OF_CARE":f=f.not("input:text");break;case "ALT_ORG":case "LEGAL_ORG":f=f.not("input:checkbox");
break;case "FORMER_ORG":f=f.not("input:checkbox").not("[name^=FORMER_ORG_DATE]");break;case "FEES":f=f.not("input:text").add("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM");break;case "VACANCY_INFO":f=f.filter("[name!=VUT_ID]")}(e=l(f))&&d.children("div.required-notice").hide();return e},"Field Required");var r=a('<div id="a_test"></div>').dialog({autoOpen:!1,title:d,closeOnEscape:!1,position:["right","bottom"],resizable:!1,dialogClass:"ValidationErrors"}),n=a("#validation_error_box");a(document).on("click",
".FieldErrorJump",function(b){b=a(b.currentTarget).prop("fieldname");(b=document.getElementById(b))&&b.scrollIntoView(!0)});a(".ValidationErrors.ui-dialog").css({position:"fixed"}).position({my:"right bottom",at:"right bottom",of:window});b(a(c).find("td[data-field-required]"));e=a(c).validate({ignore:"input[type=hidden]",ignoreTitle:!0,errorPlacement:function(b,c){var d=[],e=c[0],f=null;if(c.hasClass("require-group")){var f=c.parents("td[data-field-display-name]"),d=f.children("div.required-notice"),
g=!1;/radio|checkbox/i.test(e.type)?e.checked&&e.value||(g=!0):a.trim(e.value)||(g=!0);if(g){d.length?(d.empty(),d.show(),d.append(b)):(b.removeAttr("for"),f.prepend(a('<div class="required-notice"></div>').append(b)));return}}d.length&&d.hide();b.insertAfter(c)},showErrors:function(b,c){this.defaultShowErrors();if(0===c.length)r.dialog("close"),n.hide("slow");else{var d={},e=a("<ul>");jQuery.each(c,function(b,c){c=c.element;var f=a(c).parents("td[data-field-display-name]"),g=f.parent().children("td:first").prop("id");
d[g]||(d[g]=!0,e.append(a("<li>").append(a("<span>").prop({fieldname:g,className:"FieldErrorJump SimulateLink"}).text(f.data("fieldDisplayName")))))});r.empty().append(e);r.dialog("open");n.show("slow");a("#SUBMIT_BUTTON").prop("disabled",!1)}},focusInvalid:!1,onfocusout:!1,onkeyup:!1,onclick:!1});"fr-CA"===g?jQuery.extend(jQuery.validator.messages,{required:"Ce champ est requis.",remote:"Veuillez remplir ce champ pour continuer.",email:"Veuillez entrer une adresse email valide.",url:"Veuillez entrer une URL valide.",
date:"Veuillez entrer une date valide.",dateISO:"Veuillez entrer une date valide (ISO).",number:"Veuillez entrer un nombre valide.",digits:"Veuillez entrer (seulement) une valeur num\u00e9rique.",creditcard:"Veuillez entrer un num\u00e9ro de carte de cr\u00e9dit valide.",equalTo:"Veuillez entrer une nouvelle fois la m\u00eame valeur.",accept:"Veuillez entrer une valeur avec une extension valide.",maxlength:jQuery.validator.format("Veuillez ne pas entrer plus de {0} caract\u00e8res."),minlength:jQuery.validator.format("Veuillez entrer au moins {0} caract\u00e8res."),
rangelength:jQuery.validator.format("Veuillez entrer entre {0} et {1} caract\u00e8res."),range:jQuery.validator.format("Veuillez entrer une valeur entre {0} et {1}."),max:jQuery.validator.format("Veuillez entrer une valeur inf\u00e9rieure ou \u00e9gale \u00e0 {0}."),min:jQuery.validator.format("Veuillez entrer une valeur sup\u00e9rieure ou \u00e9gale \u00e0 {0}."),protourl:"Veuillez entrer une URL valide.",posint:"Veuillez entrer un nombre positif.",posdbl:"Veuillez entrer un nombre positif.","record-num":"Please enter a valid record number.",
"require-group":"Ce champ est requis.",unique:"Une valeur unique est requise."}):jQuery.extend(jQuery.validator.messages,{protourl:"Please enter a valid URL.",posint:"Please enter a positive number.",posdbl:"Please enter a positive number.","record-num":"Please enter a valid record number.","require-group":"Field Required.",unique:"A unique value is required."});return e};window.init_record_type_form=function(b,c,d){var g=null,l=null,m={},q="ORG_LEVEL_1 ORG_LEVEL_2 ORG_LEVEL_3 ORG_LEVEL_4 ORG_LEVEL_5 LOCATION_NAME SERVICE_NAME_LEVEL_1 SERVICE_NAME_LEVEL_2".split(" "),
p=function(){a("#RecordTypeName").html(l);a.each(q,function(b){var c=d[b],e=a("#"+b);e.length&&(e[0].value=c)&&(a("#"+b+"_DISPLAY").text(c),a("#HIDDEN_"+e).prop("value",c))});a("#RECORD_TYPE").prop("value",g[0].value);e()},u=function(){var d=g[0].value;g.data("hasform")||(d=null);g=a(this).find("option:selected");var h=g[0].value;g.data("hasform")||(h=null);h!==d?(m[d]=a("#copyFieldsForm").contents().detach(),m[h]?(a("#copyFieldsForm").append(m[h]),a("#RECORD_TYPE").prop("value",g[0].value)):a("#copyFieldsForm").load(c+
" #copyFieldsInner",{NUM:b,RT:h||g[0].value},p)):e()};jQuery(function(){l=a("#RecordTypeName").html();var b=a("#RECORD_TYPE");a(document).on("change","#RECORD_TYPE",u);g=b.find("option:selected");e()})};window.init_validate_duplicate_org_names=function(b){var c=a.extend({selector:"#EntryForm",fields:"#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5,#LOCATION_NAME,#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2,#OLS_SELECT input,#ORG_NUM",only_warn:!0,num:null,org_levels:[],url:null},b),
d=[],e=null!==c.num,l=[],m=a(c.selector).submit(function(b){var f,u,s=!1,t=a(c.fields).serializeArray();c.num&&t.push({name:"NUM",value:c.num});if(t.length!==d.length)s=!0;else for(f=0;f<t.length;f++)if(u=t[f],u.name!==d[f].name||u.value!==d[f].value){s=!0;break}if(!s&&e)return!0;var r=function(){c.only_warn&&confirm(c.confirm_string)?(e=!0,a("#duplicate_name_error_box").hide(),m.submit()):(a("#SUBMIT_BUTTON").prop("disabled",!1),a("#duplicate_name_error_box").show())};b.stopPropagation();b.preventDefault();
if(!s)return r(),!1;a.ajax({url:c.url,dataType:"json",method:"get",data:t,success:function(b){e=!0;l=[];for(var c=0;c<b.length;c++)e&=0===b[c].count,0!==b[c].count&&l.push(b[c].type);d=t;e?(a("#duplicate_name_error_box").hide(),m.submit()):r()}});return!1})}})();
(function(){var a=jQuery,b=function(b,c){a("#CM_existing_add_table").removeClass("NotVisible").append(a("<tr>").append(a("<td>").append(a("<input>").prop({id:"CM_ID_"+b,type:"checkbox",checked:!0,defaultChecked:!0,name:"CM_ID",value:b}))).append(a("<td>").addClass("FieldLabelLeftClr").append(document.createTextNode(" "+c))).append(a("<td>").prop("align","center").append(a("<input>").prop({id:"CM_NUM_NEEDED_"+b,name:"CM_NUM_NEEDED_"+b,size:3,maxlength:3}))))};window.init_num_needed=function(d){init_autocomplete_checklist(a,
{field:"CM",source:entryform.community_complete_url,add_new_html:b,minLength:3,txt_not_found:d})};window.init_interests=function(b){var c=[],e=only_items_chk_add_html(a,"AI");init_autocomplete_checklist(a,{field:"AI",source:entryform.interest_complete_url,add_new_html:e,added_values:c,txt_not_found:b});var f,k=function(b){var c=a("#AreaOfInterestList");c.length&&c.prop("id","AreaOfInterestListOld");a("<ul>").hide().insertAfter(f).prop("id","AreaOfInterestList").append(a(a.map(b,function(b,c){return a("<li>").append(a("<input>").prop({type:"checkbox",
value:b.chkid}).data("cioc_chk_display",b.value)).append(document.createTextNode(" "+b.value))[0]}))).show("slow");c.length&&c.hide("slow",function(){c.remove()})};f=a("#InterestGroup").change(function(){a.getJSON(entryform.interest_complete_url,{IGID:f.prop("value")},k)});a("#FIELD_INTERESTS").next().on("click","#AreaOfInterestList input:checkbox",{added_values:c,add_item_fn:e},function(b){var c=a(this),d=document.getElementById("AI_ID_"+this.value);d?d.checked=!0:(d=c.data("cioc_chk_display"),b.data.added_values.push({chkid:this.value,
display:d}),b.data.add_item_fn(this.value,d));c.parent().hide("slow",function(){c.remove()})})}})();
(function(){window.init_entryform_notes=function(a,b,d){var c=jQuery;a.each(function(){var a=this,f=c(a),k=f.parent(),h=1,g=f.find(".EntryFormNotesUpdateIds")[0];if(g){var l=f.find(".EntryFormNotesDeleteIds")[0],m=f.find(".EntryFormNotesCancelIds")[0],q=f.find(".EntryFormNotesRestoreIds")[0],p=[],u=[],s=[],t={},r=[],n=function(a,b){p.push(a.id);g.value=p.join(",");var d=f.find(".EntryFormItemBox").length+1;template=f.data("addTmpl");new_item=c(template.replace(/\[COUNT\]/g,d).replace(/\[ID\]/g,a.id).replace(/\[MODIFIED_DATE\]/g,
a.modified_date||"").replace(/\[MODIFIED_BY\]/g,a.modified_by||"").replace(/\[CREATED_DATE\]/g,a.created_date||"").replace(/\[CREATED_BY\]/g,a.created_by||"").replace(/\[NOTE_VALUE\]/g,a.note_value||""));a.note_type&&new_item.find("option[value='"+a.note_type+"']").prop("selected",!0);a.created_date&&new_item.find("tr.CreatedField").show();!a.modified_date||a.modified_date===a.created_date&&a.modified_by===a.created_by||new_item.find("tr.ModifiedField").show();b&&new_item.find(".NewFlag").show();
f.append(new_item)};k.find(".EntryFormItemAdd").click(function(){var a="NEW"+h++;n({id:a},!0)});var w=function(a){var b=a.id.split("_");a=c(a);var d=a.parents(".EntryFormNotesItem");d.find(".EntryFormItemContent").css("text-decoration","line-through");u.push(b[b.length-2]);l.value=u.join(",");d.data("actionToRestore","delete");a.parent().hide().prev().show()},x=function(a,b){var d=a.id.split("_"),e=c(a),g=e.parents(".EntryFormNotesItem"),k=g.find(".EntryFormItemContent"),h=a.id.lastIndexOf("_"),h=
a.id.substring(0,h)+"_CANCEL_REASON",d=d[d.length-2];k.prepend(b.data("cancelTemplate"));s.push(d);m.value=s.join(",");t[d]=b.data("cancelType");f.append(c("<input>").prop({type:"hidden",id:h,name:h,value:b.data("cancelType")}));g.data("actionToRestore","cancel");e.parent().hide().prev().show()},z={update:function(a){a=c(a).parents(".EntryFormNotesItem");var b=a.find(".EntryFormItemContent");n(b.data("formValues"));a.hide()},"delete":w,cancel:x},v=k.find(".EntryFormItemActionMenu").menu({select:function(a,
b){c(this).hide();z[b.item.data("action")](v.data("activeButton"),b.item)}}).hide().css({position:"absolute",zIndex:1});k.on("click",".EntryFormItemAction",function(a){v.data("activeButton",this);if(v.is(":visible"))return v.hide(),!1;v.menu("blur").show();v.position({my:"right top",at:"right bottom",of:this});c(document).one("click",function(){v.hide()});return!1});k.find(".EntryFormItemViewHidden").click(function(a){a=c(this);var e=a.next();e.is(":visible")?(a.text(b),e.hide()):(a.text(d),e.show())});
var A={"delete":function(a,b,d,e){e.css("text-decoration","none");u=c.grep(u,function(b){return b!==a});l.value=u.join(",");b.parent().hide().next().show()},cancel:function(a,b,d,e){d=b[0];var f=d.id.lastIndexOf("_");d=d.id.substring(0,f)+"_CANCEL_REASON";e.find(".EntryFormItemCancelledDetails").remove();s=c.grep(s,function(b){return b!==a});m.value=s.join(",");delete t[a];c("#"+d).remove();b.parent().hide().next().show()}};k.on("click",".EntryFormItemRestoreAction",function(a){a=this.id.split("_");
var b=c(this),d=b.parents(".EntryFormNotesItem"),e=d.find(".EntryFormItemContent");A[d.data("actionToRestore")](a[a.length-2],b,d,e)});var y=function(a){a=this.id.split("_");var b=c(this);b.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","line-through");b.parent().hide().prev().show();r.push(a[a.length-2]);q.value=r.join(",")};k.on("click",".EntryFormItemRestoreCancel",y);k.on("click",".EntryFormItemDontRestoreCancel",function(a){var b=this.id.split("_");
a=c(this);a.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","none");a.parent().hide().next().show();b=b[b.length-2];r=c.grep(r,function(a){return a!==b});q.value=r.join(",")});cache_register_onbeforeunload(function(b){b[a.id+"_updates"]=p;b[a.id+"_deletes"]=u;b[a.id+"_restores"]=r;b[a.id+"_cancels"]=s;b[a.id+"_cancel_reason"]=t});cache_register_onbeforerestorevalues(function(b){var d=a.id.substring(0,a.id.lastIndexOf("_"))+"_";b[a.id+"_updates"]&&c.each(b[a.id+
"_updates"],function(a,b){if(0===b.indexOf("NEW"))h++,n({id:b},!0);else{var e=c("#"+d+b+"_DISPLAY");n(e.data("formValues"));c("#"+d+b+"_CONTAINER").hide()}});b[a.id+"_deletes"]&&c.each(b[a.id+"_deletes"],function(a,b){w(document.getElementById(d+b+"_ACTION"))});b[a.id+"_restores"]&&(c.each(b[a.id+"_restores"],function(a,b){y.call(document.getElementById(d+b+"_RESTORECANCEL"))}),k.find(".EntryFormItemViewHidden").click());if(b[a.id+"_cancels"]){var f=b[a.id+"_cancel_reason"];c.each(b[a.id+"_cancels"],
function(a,b){x(document.getElementById(d+b+"_ACTION"),v.find("li[data-cancel-type='"+f[b]+"']"))})}})}})}})();
