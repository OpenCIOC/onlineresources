window.CIOC={};
(function(a,b){b.do_drop_down_navigation=function(){for(var d=a.getElementById("ActionList").options,c=0;c<d.length;c++)if(d[c].selected){var e=d[c].getAttribute("href");e&&("undefined"!=typeof d[c].attributes.newwindow?b.open(e):b.location.href=e);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var c=a(this),b=a(c.data("target")),f={autoOpen:!1,title:b.data("title"),modal:b.data("modal")};b.dialog(f);c.click(function(){b.dialog("isOpen")?b.dialog("close"):b.dialog("open")})})})})(document,window);
function CheckAll(a,b){a||(a="IDList");var d=b;b||(d=document.RecordList);for(var c=d.elements.length,e=0;e<c;e++){var f=d.elements[e];f.name===a&&(f.checked=!0)}}function ClearAll(a,b){a||(a="IDList");var d=b;b||(d=document.RecordList);for(var c=d.elements.length,e=0;e<c;e++){var f=d.elements[e];f.name===a&&(f.checked=!1)}}function add_class(a,b){a&&!(new RegExp("\\b"+b+"\\b")).test(a.className)&&(a.className&&(b=" "+b),a.className+=b)}
function remove_class(a,b){if(a){for(var d=a.className.split(" "),c=[],e=0;e<d.length;e++){var f=d[e];f!==b&&c.push(f)}a.className=c.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,b){window.open(a,b,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,b){window.open(a,b,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,b){window.open(a,b,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var b={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var d=a(this).data("popargs");(b[d.size||"sm"]||openWin)(this.href,d.name||"popwin");return!1})});
(function(){var a=jQuery,b={},d=function(c){null!==c&&"undefined"!==typeof c?a("#myListCount").text(c):(c=a("#myListCount").text())&&(c=parseInt(c,10));c?b.myListLink.show():b.myListLink.hide()},c=function(c){a.each(c,function(c,d){a("#added_to_list_"+d).show();a("#add_to_list_"+d).hide()})},e=function(f){return function(e){e.fail?alert(e.errinfo):(e.ids?d(a.grep(e.ids,k[b.domain]).length):e.count?d(e.count):d(0),c([f]))}},f=function(c){c=a(c.currentTarget).data("id");a.ajax({success:e(c),dataType:"json",
error:function(){alert("Error")},data:{id:c},type:"POST",url:b.current_list_url})},l=function(c){return function(d){if(d.fail)alert(d.errinfo);else{d=!0;if(c){var b=a("#results_table #remove_from_list_"+c);b.length?b.parent().parent().remove():(d=!1,b=a("#results_container #remove_from_list_"+c),b.parents(".dlist-result").remove())}b=!1;if((b=d?1===a("#results_table tr").length:0===a("#results_container .dlist-result").length)||!c)a("#records_ui").hide(),a("#no_records_message").show()}}},h=function(c){c=
a(c.currentTarget).data("id");a.ajax({success:l(c),dataType:"json",error:function(){alert("Error")},data:{ID:c,RemoveItem:b.domain},type:"POST",url:b.current_list_url})},g=function(c){a.ajax({success:l(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:b.domain},type:"POST",url:b.current_list_url})},k={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},q=function(e){if(e.fail)s();else if(e.inrequest){var f=a.grep(e.ids,
k[b.domain]);c(f);d(f.length);(e=e.previous_ids)&&a.each(e,function(c,d){a("#ct_added_to_previous_request_"+d).show()});a(".ListUI img").prop("src",function(a,c){return c.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();b.current_list_url=b.ct_update_url;n()}else s()},s=function(){var e=function(){b.list_view_mode||c(b.already_added||[]);b.current_list_url=b.list_view_mode&&"ct"===b.list_view_mode?b.ct_update_url:b.list_update_url;d((b.already_added||[]).length);
n()};b.list_view_mode||b.has_session?e():a.ajax({dataType:"json",error:null,url:b.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&e()}})},n=function(){a(".HideListUI").delegate(".add_to_list","click",f).delegate(".remove_from_list","click",h).removeClass("HideListUI");a("#remove_all_from_list").click(g);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(c){b=c;b.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
c.in_request?a.ajax({success:q,dataType:"json",error:null,type:"POST",url:c.in_request}):s()}})();this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var c=h[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,c){var e,n,h,r,u=f,p,m=c[a];m&&"object"===typeof m&&"function"===typeof m.toJSON&&(m=m.toJSON(a));"function"===typeof g&&(m=g.call(c,a,m));switch(typeof m){case "string":return b(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);
case "object":if(!m)return"null";f+=l;p=[];if("[object Array]"===Object.prototype.toString.apply(m)){r=m.length;for(e=0;e<r;e+=1)p[e]=d(e,m)||"null";h=0===p.length?"[]":f?"[\n"+f+p.join(",\n"+f)+"\n"+u+"]":"["+p.join(",")+"]";f=u;return h}if(g&&"object"===typeof g)for(r=g.length,e=0;e<r;e+=1)n=g[e],"string"===typeof n&&(h=d(n,m))&&p.push(b(n)+(f?": ":":")+h);else for(n in m)Object.hasOwnProperty.call(m,n)&&(h=d(n,m))&&p.push(b(n)+(f?": ":":")+h);h=0===p.length?"{}":f?"{\n"+f+p.join(",\n"+f)+"\n"+
u+"}":"{"+p.join(",")+"}";f=u;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(c){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,l,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,e){var b;l=f="";if("number"===typeof e)for(b=0;b<e;b+=1)l+=" ";else"string"===typeof e&&(l=e);if((g=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return d("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,e){function d(a,c){var b,f,g=a[c];if(g&&"object"===typeof g)for(b in g)Object.hasOwnProperty.call(g,b)&&(f=d(g,b),void 0!==f?g[b]=f:delete g[b]);return e.call(a,c,g)}var b;a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=eval("("+a+")"),"function"===typeof e?d({"":b},""):b;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var b={};jQuery(a).find("input,select,textarea").each(function(a){if(this.name)if(b[this.name]||(b[this.name]=[]),"select"===this.nodeName.toLowerCase()){var c=b[this.name];$(this).find("option").each(function(a){this.selected&&c.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&b[this.name].push(this.value||"")});return b};window.restore_form_values=function(a,b){var d=jQuery;d(a).find("input,select,textarea").each(function(a){if(this.name){var e=
b[this.name];"undefined"!=typeof e&&null!==e&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(a){this.selected=1<e.length?0<=d.inArray(this.value,e):0===e.length?!1:this.value===e[0]}):this.value=e.length?e[0]:"":this.checked=1<e.length?0<=d.inArray(this.value,e):0===e.length?!1:this.value===e[0])}})};window.init_cached_state=function(a){var b=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];b(window).on("beforeunload",function(){var d={form_values:get_form_values(a)};b.each(onbeforeunload_fns,function(a,b){b(d)});document.getElementById("cache_form_values").value=JSON.stringify(d)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var d=document.getElementById("cache_form_values");if(d&&d.value){var c=
JSON.parse(d.value);b.each(onbeforerestorevalues_fns,function(a,b){b(c)});restore_form_values(a,c.form_values)}}}})();
(function(){var a=jQuery,b={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},d={"en-CA":!0,"":!0},c={},e={"fr-CA":"fr","es-MX":"es"},f=function(){var c=a(this),e=c.data("culture"),d=b[e]||a.datepicker.regional[e].dateFormat,f={};c.hasClass("NoYear")&&(d=d.replace(/[\- .\/]*yy[\/]?/,""),f={beforeShow:function(a,
c){c.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,c){c.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});f.dateFormat=d;c.datepicker(a.extend({},a.datepicker.regional[e],f)).prop("autocomplete","off")},l=function(b){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+b+".min.js",function(){d[b]=!0;a.each(c[b],function(){f.call(this)});delete c[b]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var b=
a(this),g;g=b.parents("[lang]").first().prop("lang")||"en-CA";g=e[g]||g;b.data("culture",g);d[g]?f.call(this):(b=c[g],b||(b=c[g]=[],l(g)),b.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
(function(a){function b(a){return a&&a.constructor===Number?a+"px":a}a.fn.bgiframe=a.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(d){d=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},d);var c='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+d.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==d.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==d.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
b(d.top))+";left:"+("auto"==d.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(d.left))+";width:"+("auto"==d.width?"expression(this.parentNode.offsetWidth+'px')":b(d.width))+";height:"+("auto"==d.height?"expression(this.parentNode.offsetHeight+'px')":b(d.height))+';"/>';return this.each(function(){0===a(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(c),this.firstChild)})}:function(){return this};a.fn.bgIframe=a.fn.bgiframe})(jQuery);
(function(){window.init_history_dialog=function(a,b){var d=!1,c=null,e=null,f=null,l=function(b){b.fail?a("#HistoryFieldContent").html("<em>"+b.errinfo+"</em>"):b.compare?(null===c&&(c=new diff_match_patch),b=c.diff_main(b.text2,b.text1),c.diff_cleanupSemantic(b),b=c.diff_prettyHtml(b),a("#HistoryFieldContent").html(b)):a("#HistoryFieldContent").html(b.text1)},h=function(c,d,g){return function(){var d=a("#HistoryLanguage").prop("value"),h=a("#HistoryRevision").prop("value"),k=a("#HistoryCompare").prop("value");
if(k===f||!(""===f&&k===h||""===k&&f===e)){var t=k;if(""===k||k===h)t="";a.getJSON(b.fielddiff_url.replace("[ID]",g).replace("[LANG]",d).replace("[FIELD]",c).replace("[REV]",h).replace("[COMP]",t),l)}e=h;f=k}},g=null,k=function(c,e,d,f){a("select.HistorySelect").unbind("change");a("#HistoryLanguage").unbind("change");a("#field_history").html('<p class="Info">'+b.txt_loading+"</p>").dialog("close").dialog("open").dialog("option","title",b.txt_fielddifftitle+d+" ("+e+")").load(b.fielddiffui_url.replace("[ID]",
d).replace("[FIELD]",c).replace("[LANG]",f),g(c,e,d))},q=function(c,b,e){return function(){var d=a(this).prop("value");k(c,b,e,d)}},g=function(c,b,d){return function(){a("select.HistorySelect").change(h(c,b,d));a("#HistoryLanguage").change(q(c,b,d));e=a("#HistoryRevision").prop("value");f=a("#HistoryCompare").prop("value")}};a(".ShowVersions").click(function(){var c=a(this).data("ciocfield"),e=a(this).data("ciocfielddisplay"),f=a(this).data("ciocid");d||(d=!0,a.getScript(b.path_to_start+"scripts/diff_match_patch.min.js"));
k(c,e,f,"")});a(document).on("click",".FieldHistoryJump",function(c){c=a(c.currentTarget).data("fieldname");(c=document.getElementById("FIELD_"+c))&&c.scrollIntoView(!0)});a(document).on("click",".HistoryFieldsToggle",function(c){a(c.currentTarget).parent().children("ul").toggle("fast")});var s=function(){a(".HistoryFieldsToggle").parent().children("ul").hide()};a(".HistorySummary").click(function(){var c=a(this).data("cioclang"),e=a(this).data("ciocid");a("#revision_history").html("Loading...").load(b.revhistory_url.replace("[ID]",
e).replace("[LANG]",c),s).dialog("open")});a("#revision_history").dialog({autoOpen:!1,width:330,height:280,position:["right","top"],resizable:!1,dialogClass:"RevHistory"});a("#field_history").dialog({autoOpen:!1,width:620,height:280,position:["right","bottom"]});a(".RevHistory.ui-dialog").css({position:"fixed"})}})();
(function(){var a=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;var b=function(c,b,d,l,h){d=d||"value";l=l||"";h=h||"";return function(g,k){if(b.term&&(new RegExp(l+c.ui.autocomplete.escapeRegex(b.term)+h,"i")).test(g.term)&&b.content&&13>b.content.length){var q=new RegExp(l+c.ui.autocomplete.escapeRegex(g.term)+h,"i");k(c.grep(b.content,function(c){return q.test(a(c[d]))}));return!0}return!1}};window.default_cache_search_fn=b;var d=function(c,d,f,l,h){f=f||{};h=h||b(c,f,l||"value");
return function(b,l,q){b.term=a(b.term);f.term===b.term&&f.content?l(f.content):h(b,l)||c.ajax({url:q||d,dataType:"json",data:b,cache:!1,success:function(a){f.term=b.term;f.content=a;l(a)}})}};window.create_caching_source_fn=d;window.init_community_autocomplete=function(c,b,f,l,h){var g={};h&&(h=c(h));h&&!h.length&&(h=null);var k=c("#"+b).autocomplete({focus:function(a,c){return!1},select:function(a,c){k.data({chkid:c.item.chkid,display:c.item.value})},source:d(c,f,g),minLength:l}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),k.autocomplete("close"))});h&&(k.parents("form").on("submit",function(){var b=k.val();if(k.data("display")===b)h.val(k.data("chkid"));else{if(g.content){var d=a(b),b=c.grep(g.content,function(c){return a(c.value)===d});if(1===b.length){h.val(b[0].chkid);k.data({chkid:b[0].chkid,display:b[0].value}).val(b[0].value);return}}h.val("")}}),cache_register_onbeforerestorevalues(function(a){k.length&&(a=a["autocomplete_data_"+k[0].id])&&k.data(a)}),cache_register_onbeforeunload(function(a){if(k.length){var c=
k.data();c.display&&c.chkid&&(a["autocomplete_data_"+k[0].id]={display:c.display,chkid:c.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(a,c,b,f){cache_register_onbeforeunload(function(a){a[c+"_added"]=b});cache_register_onbeforerestorevalues(function(b){(b=b[c+"_added"])&&a.each(b,function(a,c){f(c.chkid,c.display,"")})})};window.basic_chk_add_html=function(a,c){return function(b,f){var l=a("<tr>").append(a("<td>").append(a("<input>").prop({id:c+"_ID_"+b,type:"checkbox",checked:!0,defaultChecked:!0,name:c+"_ID",value:b})).append(document.createTextNode(" "+
f))).append(a("<td>").append(a("<input>").prop({id:c+"_NOTES_"+b,name:c+"_NOTES_"+b,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));a("#"+c+"_existing_add_table").append(l);return l.find('input[type="checkbox"]')[0]}};var a={},b=function(b){$("#NEW_"+b).autocomplete(a[b])};window.init_autocomplete_checklist=function(d,c){var e=c.field;if(!a[e]){var f=c.source;c.minLength=c.minLength||1;c.delay=c.delay||300;c.add_new_html=c.add_new_html||basic_chk_add_html(d,e);c.match_prop=
c.match_prop||"value";c.txt_not_found=c.txt_not_found||"Not Found";var l=d(c.delegate_root||document),h=c.added_values||[],g=function(a,b,d){var f=document.getElementById(e+"_ID_"+a);f?(f.checked=!0,c.after_add_new_value&&c.after_add_new_value.call(f)):(h.push({chkid:a,display:b,label:d}),a=c.add_new_html(a,b,d),c.after_add_new_value&&c.after_add_new_value.call(a))};create_checklist_onbefore_fns(d,e,h,g);var k={},q=function(a){d("#NEW_"+e).data({chkid:"",display:"",label:""}).prop("value","").focus();
d("#"+e+"_error").hide("slow",function(){d(this).remove()})},s=null,n=null;(function(a){d.isArray(a)?(n=function(b,e){var f=new RegExp(d.ui.autocomplete.escapeRegex(string_ci_ai(b.term)));e(d.grep(a,function(a){return f.test(string_ci_ai(a[c.match_prop]||a))}))},s=function(b,e){var f=string_ci_ai(b),g=d.grep(a,function(a){return string_ci_ai(string_ci_ai(a[c.match_prop]||a))===f});if(1===g.length)return e(g[0]),!0;e()}):"string"===typeof a?(n=create_caching_source_fn(d,a,k,c.match_prop),s=function(a,
b,e){var f=string_ci_ai(a);if(k.content){var g=d.grep(k.content,function(a){return string_ci_ai(a[c.match_prop])===f});if(1===g.length){b(g[0]);return}}e||string_ci_ai(k.term||"")===f?b():n({term:f},function(c){s(a,b,!0)})}):(n=a,s=c.look_for_fn)})(f);l.on("click","#add_"+e,function(a){a=d("#NEW_"+e);var b=a.data("chkid"),f=a.data("display"),h=a.data("label"),l=a[0].value;if(b&&f&&f==l)return g(b,f,h),q(),!1;s(a[0].value,function(a){a?(g(a.chkid,a.value,a.label),q()):0===d("#"+e+"_error").length&&
(d("#"+e+"_new_input_table").before(d("<p>").hide().addClass("Alert").prop("id",e+"_error").append(document.createTextNode(c.txt_not_found))),d("#"+e+"_error").show("slow"))});return!1});a[e]={focus:function(a,b){return!1},source:n,minLength:c.minLength,delay:c.delay,select:function(a,b){d("#NEW_"+e).data({chkid:b.item.chkid,display:b.item.value,label:b.item.label})}};l.on("keypress","#NEW_"+e,function(a){"13"==a.keyCode&&(a.preventDefault(),d("#NEW_"+e).autocomplete("close"),d("#add_"+e).trigger("click"))})}b(e)};
window.init_languages=function(a,b){var e=null,f=null,l=a("#LN_existing_add_table"),h=function(){var b=a(this).parents(".language-entry").find(".language-details-notes");this.checked?b.slideDown():b.slideUp()};init_autocomplete_checklist(a,{field:"LN",source:entryform.languages_source,txt_not_found:b,after_add_new_value:h,add_new_html:function(b,c){null===e&&(e=a("#add_LN"),f=e.data("newTemplate"));var h=f.replace(/LANGNAMELANGNAME/g,c).replace(/IDIDID/g,b);l.append(h)}});l.on("change",".language-primary",
h).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+a(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(b,c){a(this).css(b);a("<div>").addClass("arrow").addClass(c.vertical).addClass(c.horizontal).appendTo(this)}}});window.languages_check_state=h}})();
(function(){var a=jQuery;window.configure_entry_form_button=function(){a("#SUBMIT_BUTTON").click(function(b){b=a("#SUBMIT_BUTTON");b.prop("disabled")||(b.prop("disabled",!0),setTimeout(function(){a("#EntryForm").submit()},1))});a(document).bind("keydown",function(b){if(b.ctrlKey&&"s"===String.fromCharCode(b.which).toLowerCase())return setTimeout(function(){a("#SUBMIT_BUTTON").click()},1),b.preventDefault(),b.stopPropagation(),!1});a("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var b=a("#SUBMIT_BUTTON").prop("value");a("#SUBMIT_BUTTON").replaceWith(a('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",b));a("#EntryForm").submit(function(){var b=validateForm();!1===b&&a("#SUBMIT_BUTTON").prop("disabled",!1);return b})}})();
(function(){window.only_items_chk_add_html=function(a,b,d){return function(c,e){d&&d();a("#"+b+"_existing_add_container").append(a("<label>").append(a("<input>").prop({id:b+"_ID_"+c,type:"checkbox",checked:!0,defaultChecked:!0,name:b+"_ID",value:c})).append("&nbsp;").append(document.createTextNode(e))).append(" ; ")}};window.init_check_for_autochecklist=function(a){var b=jQuery,d=function(){var a=b(this).data("jump_location");(a=document.getElementById(a))&&a.scrollIntoView(!0)},c=function(){return b("<li>").append(b("<span>").data("jump_location",
this.id).addClass("UnaddedChecklistJump SimulateLink").append(b(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},e=b("input[id^=NEW_]");e.length&&(b("#EntryForm").submit(function(d){var l=e.map(function(){return this.value?this:null}),h;if(l.length&&!d.isDefaultPrevented()){if(!confirm(a)){d.preventDefault();b("#SUBMIT_BUTTON").prop("disabled",!1);d=b("#unadded_checklist_error_box");h=b("#unadded_checklist_error_list");var g=d.is(":visible");g&&h.children("ul:first").hide("slow",
function(){b(this).remove()});var k=b("<ul>");g&&k.hide();h.append(k);b.each(l.map(c),function(){k.append(this)});g?k.show("slow"):d.show("slow")}}else d.isDefaultPrevented()&&(d=b("#unadded_checklist_error_box"),h=b("#unadded_checklist_error_list"),d.hide("slow",function(){h.children().remove()}))}),b(document).on("click",".UnaddedChecklistJump",d))}})();
(function(){window.changeAutoAssign=function(a,b,c){a.checked?(b.value="",b.disabled=!0,c.disabled=!0):(b.disabled=!1,c.disabled=!1)};var a=jQuery,b=function(a){a.find(":input").not('input[type="hidden"]').filter("[name]").addClass("require-group")},d=function(a){a.find(":input").not('input[type="hidden"]').filter("[name]").removeClass("require-group")};window.make_required_group=b;window.remove_required_group=d;var c=function(a,c){var e=a.parent().find("td[data-field-display-name]"),g=e.data("fieldDisplayName");
c?(a.text(g).append(' <span class="Alert">*</span>'),b(e)):(a.text(g),d(e))},e=function(){var b=a("#FIELD_ORG_LEVEL_2");if(b.length){var e=a("#RECORD_TYPE").find(":selected").data("progorbranch");c(b,e)}};window.update_form_make_required_org_level=function(){for(var b,e=0;6>e;e++)if(b=a("#FIELD_ORG_LEVEL_"+e),b.length){c(b,!0);break}};window.init_client_validation=function(c,e){var d=a(c),g=d.prop("lang")||d.parents("[lang]").first().prop("lang")||"en-CA",k=function(b){var c=!1;try{b.each(function(){if(this.name)if(/radio|checkbox/i.test(this.type)){if(this.checked&&
this.value)throw c=!0,{name:"StopIteration",message:"StopIteration"};}else if(a.trim(this.value))throw c=!0,{name:"StopIteration",message:"StopIteration"};})}catch(e){if("StopIteration"!==e.name)throw e;}return c},q=null;a.validator.addMethod("email",function(a,b){q||(q=RegExp("^((([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)(\\s*,*\\s*))*)$"));return this.optional(b)||
q.test(a)});var s=null;a.validator.addMethod("url",function(a,b){s||(s=/^((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/);return this.optional(b)||s.test(a)});var n=null;a.validator.addMethod("protourl",function(a,b){n||(n=/^(https?:\/\/)?((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/);return this.optional(b)||n.test(a)});var t=null;a.validator.addMethod("posint",function(a,b){t||(t=/^\d+$/);return this.optional(b)||t.test(a)});var r=
null;a.validator.addMethod("posdbl",function(a,b){if(!r){var c="\\.";"fr-CA"===g&&(c=",");r=new RegExp("^((\\d+)|(\\d*"+c+"\\d+))$")}return this.optional(b)||r.test(a)});var u=null;a.validator.addMethod("record-num",function(a,b){u||(u=/^[A-Z]{3}[0-9]{4,5}$/);return this.optional(b)||u.test(a)});a.validator.addMethod("unique",function(b,c,e){if(!b)return!0;b=string_ci_ai(b);c=jQuery.validator.format("[name!='{0}'][unique='{1}']",c.name,e);var d=[];a(c).each(function(c,e){b==string_ci_ai(a(e).val())&&
d.push(e)});return 0==d.length},"A unique value is required.");a.validator.addMethod("require-group",function(b,c){var e=a(c).parents("td[data-field-display-name]"),d=e.parent().children("td:first").prop("id"),d=d.slice(-(d.length-6)),f=e.find(":input").not("[type=hidden]").not("button");switch(d){case "ACCESSIBILITY":case "AREAS_SERVED":case "LANGUAGES":case "FUNDING":case "SCHOOL_ESCORT":case "SCHOOLS_IN_AREA":case "TYPE_OF_CARE":f=f.not("input:text");break;case "ALT_ORG":case "LEGAL_ORG":f=f.not("input:checkbox");
break;case "FORMER_ORG":f=f.not("input:checkbox").not("[name^=FORMER_ORG_DATE]");break;case "FEES":f=f.not("input:text").add("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM");break;case "VACANCY_INFO":f=f.filter("[name!=VUT_ID]")}(d=k(f))&&e.children("div.required-notice").hide();return d},"Field Required");var p=a('<div id="a_test"></div>').dialog({autoOpen:!1,title:e,closeOnEscape:!1,position:["right","bottom"],resizable:!1,dialogClass:"ValidationErrors"}),m=a("#validation_error_box");a(document).on("click",
".FieldErrorJump",function(b){b=a(b.currentTarget).prop("fieldname");(b=document.getElementById(b))&&b.scrollIntoView(!0)});a(".ValidationErrors.ui-dialog").css({position:"fixed"}).position({my:"right bottom",at:"right bottom",of:window});b(a(c).find("td[data-field-required]"));d=a(c).validate({ignore:"input[type=hidden]",ignoreTitle:!0,errorPlacement:function(b,c){var e=[],d=c[0],f=null;if(c.hasClass("require-group")){var f=c.parents("td[data-field-display-name]"),e=f.children("div.required-notice"),
g=!1;/radio|checkbox/i.test(d.type)?d.checked&&d.value||(g=!0):a.trim(d.value)||(g=!0);if(g){e.length?(e.empty(),e.show(),e.append(b)):(b.removeAttr("for"),f.prepend(a('<div class="required-notice"></div>').append(b)));return}}e.length&&e.hide();b.insertAfter(c)},showErrors:function(b,c){this.defaultShowErrors();if(0===c.length)p.dialog("close"),m.hide("slow");else{var e={},d=a("<ul>");jQuery.each(c,function(b,c){c=c.element;var f=a(c).parents("td[data-field-display-name]"),g=f.parent().children("td:first").prop("id");
e[g]||(e[g]=!0,d.append(a("<li>").append(a("<span>").prop({fieldname:g,className:"FieldErrorJump SimulateLink"}).text(f.data("fieldDisplayName")))))});p.empty().append(d);p.dialog("open");m.show("slow");a("#SUBMIT_BUTTON").prop("disabled",!1)}},focusInvalid:!1,onfocusout:!1,onkeyup:!1,onclick:!1});"fr-CA"===g?jQuery.extend(jQuery.validator.messages,{required:"Ce champ est requis.",remote:"Veuillez remplir ce champ pour continuer.",email:"Veuillez entrer une adresse email valide.",url:"Veuillez entrer une URL valide.",
date:"Veuillez entrer une date valide.",dateISO:"Veuillez entrer une date valide (ISO).",number:"Veuillez entrer un nombre valide.",digits:"Veuillez entrer (seulement) une valeur num\u00e9rique.",creditcard:"Veuillez entrer un num\u00e9ro de carte de cr\u00e9dit valide.",equalTo:"Veuillez entrer une nouvelle fois la m\u00eame valeur.",accept:"Veuillez entrer une valeur avec une extension valide.",maxlength:jQuery.validator.format("Veuillez ne pas entrer plus de {0} caract\u00e8res."),minlength:jQuery.validator.format("Veuillez entrer au moins {0} caract\u00e8res."),
rangelength:jQuery.validator.format("Veuillez entrer entre {0} et {1} caract\u00e8res."),range:jQuery.validator.format("Veuillez entrer une valeur entre {0} et {1}."),max:jQuery.validator.format("Veuillez entrer une valeur inf\u00e9rieure ou \u00e9gale \u00e0 {0}."),min:jQuery.validator.format("Veuillez entrer une valeur sup\u00e9rieure ou \u00e9gale \u00e0 {0}."),protourl:"Veuillez entrer une URL valide.",posint:"Veuillez entrer un nombre positif.",posdbl:"Veuillez entrer un nombre positif.","record-num":"Please enter a valid record number.",
"require-group":"Ce champ est requis.",unique:"Une valeur unique est requise."}):jQuery.extend(jQuery.validator.messages,{protourl:"Please enter a valid URL.",posint:"Please enter a positive number.",posdbl:"Please enter a positive number.","record-num":"Please enter a valid record number.","require-group":"Field Required.",unique:"A unique value is required."});return d};window.init_record_type_form=function(b,c,d){var g=null,k=null,q={},s="ORG_LEVEL_1 ORG_LEVEL_2 ORG_LEVEL_3 ORG_LEVEL_4 ORG_LEVEL_5 LOCATION_NAME SERVICE_NAME_LEVEL_1 SERVICE_NAME_LEVEL_2".split(" "),
n=function(){a("#RecordTypeName").html(k);a.each(s,function(b){var c=d[b],e=a("#"+b);e.length&&(e[0].value=c)&&(a("#"+b+"_DISPLAY").text(c),a("#HIDDEN_"+e).prop("value",c))});a("#RECORD_TYPE").prop("value",g[0].value);e()},t=function(){var d=g[0].value;g.data("hasform")||(d=null);g=a(this).find("option:selected");var h=g[0].value;g.data("hasform")||(h=null);h!==d?(q[d]=a("#copyFieldsForm").contents().detach(),q[h]?(a("#copyFieldsForm").append(q[h]),a("#RECORD_TYPE").prop("value",g[0].value)):a("#copyFieldsForm").load(c+
" #copyFieldsInner",{NUM:b,RT:h||g[0].value},n)):e()};jQuery(function(){k=a("#RecordTypeName").html();var b=a("#RECORD_TYPE");a(document).on("change","#RECORD_TYPE",t);g=b.find("option:selected");e()})};window.init_validate_duplicate_org_names=function(b){var c=a.extend({selector:"#EntryForm",fields:"#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5,#LOCATION_NAME,#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2,#OLS_SELECT input,#ORG_NUM",only_warn:!0,num:null,org_levels:[],url:null},b),
e=[],d=null!==c.num,k=[],q=a(c.selector).submit(function(b){var f,t,r=!1,u=a(c.fields).serializeArray();c.num&&u.push({name:"NUM",value:c.num});if(u.length!==e.length)r=!0;else for(f=0;f<u.length;f++)if(t=u[f],t.name!==e[f].name||t.value!==e[f].value){r=!0;break}if(!r&&d)return!0;var p=function(){c.only_warn&&confirm(c.confirm_string)?(d=!0,a("#duplicate_name_error_box").hide(),q.submit()):(a("#SUBMIT_BUTTON").prop("disabled",!1),a("#duplicate_name_error_box").show())};b.stopPropagation();b.preventDefault();
if(!r)return p(),!1;a.ajax({url:c.url,dataType:"json",method:"get",data:u,success:function(b){d=!0;k=[];for(var c=0;c<b.length;c++)d&=0===b[c].count,0!==b[c].count&&k.push(b[c].type);e=u;d?(a("#duplicate_name_error_box").hide(),q.submit()):p()}});return!1})}})();
(function(){var a=jQuery,b=function(b,c){a("#CM_existing_add_table").removeClass("NotVisible").append(a("<tr>").append(a("<td>").append(a("<input>").prop({id:"CM_ID_"+b,type:"checkbox",checked:!0,defaultChecked:!0,name:"CM_ID",value:b}))).append(a("<td>").addClass("FieldLabelLeftClr").append(document.createTextNode(" "+c))).append(a("<td>").prop("align","center").append(a("<input>").prop({id:"CM_NUM_NEEDED_"+b,name:"CM_NUM_NEEDED_"+b,size:3,maxlength:3}))))};window.init_num_needed=function(d){init_autocomplete_checklist(a,
{field:"CM",source:entryform.community_complete_url,add_new_html:b,minLength:3,txt_not_found:d})};window.init_interests=function(b){var c=[],e=only_items_chk_add_html(a,"AI");init_autocomplete_checklist(a,{field:"AI",source:entryform.interest_complete_url,add_new_html:e,added_values:c,txt_not_found:b});var f,l=function(b){var c=a("#AreaOfInterestList");c.length&&c.prop("id","AreaOfInterestListOld");a("<ul>").hide().insertAfter(f).prop("id","AreaOfInterestList").append(a(a.map(b,function(b,c){return a("<li>").append(a("<input>").prop({type:"checkbox",
value:b.chkid}).data("cioc_chk_display",b.value)).append(document.createTextNode(" "+b.value))[0]}))).show("slow");c.length&&c.hide("slow",function(){c.remove()})};f=a("#InterestGroup").change(function(){a.getJSON(entryform.interest_complete_url,{IGID:f.prop("value")},l)});a("#FIELD_INTERESTS").next().on("click","#AreaOfInterestList input:checkbox",{added_values:c,add_item_fn:e},function(b){var c=a(this),e=document.getElementById("AI_ID_"+this.value);e?e.checked=!0:(e=c.data("cioc_chk_display"),b.data.added_values.push({chkid:this.value,
display:e}),b.data.add_item_fn(this.value,e));c.parent().hide("slow",function(){c.remove()})})}})();
(function(){window.init_entryform_notes=function(a,b,d){var c=jQuery;a.each(function(){var a=this,f=c(a),l=f.parent(),h=1,g=f.find(".EntryFormNotesUpdateIds")[0];if(g){var k=f.find(".EntryFormNotesDeleteIds")[0],q=f.find(".EntryFormNotesCancelIds")[0],s=f.find(".EntryFormNotesRestoreIds")[0],n=[],t=[],r=[],u={},p=[],m=function(a,b){n.push(a.id);g.value=n.join(",");var d=f.find(".EntryFormItemBox").length+1;template=f.data("addTmpl");new_item=c(template.replace(/\[COUNT\]/g,d).replace(/\[ID\]/g,a.id).replace(/\[MODIFIED_DATE\]/g,
a.modified_date||"").replace(/\[MODIFIED_BY\]/g,a.modified_by||"").replace(/\[CREATED_DATE\]/g,a.created_date||"").replace(/\[CREATED_BY\]/g,a.created_by||"").replace(/\[NOTE_VALUE\]/g,a.note_value||""));a.note_type&&new_item.find("option[value='"+a.note_type+"']").prop("selected",!0);a.created_date&&new_item.find("tr.CreatedField").show();!a.modified_date||a.modified_date===a.created_date&&a.modified_by===a.created_by||new_item.find("tr.ModifiedField").show();b&&new_item.find(".NewFlag").show();
f.append(new_item)};l.find(".EntryFormItemAdd").click(function(){var a="NEW"+h++;m({id:a},!0)});var w=function(a){var b=a.id.split("_");a=c(a);var d=a.parents(".EntryFormNotesItem");d.find(".EntryFormItemContent").css("text-decoration","line-through");t.push(b[b.length-2]);k.value=t.join(",");d.data("actionToRestore","delete");a.parent().hide().prev().show()},x=function(a,b){var d=a.id.split("_"),e=c(a),g=e.parents(".EntryFormNotesItem"),h=g.find(".EntryFormItemContent"),k=a.id.lastIndexOf("_"),k=
a.id.substring(0,k)+"_CANCEL_REASON",d=d[d.length-2];h.prepend(b.data("cancelTemplate"));r.push(d);q.value=r.join(",");u[d]=b.data("cancelType");f.append(c("<input>").prop({type:"hidden",id:k,name:k,value:b.data("cancelType")}));g.data("actionToRestore","cancel");e.parent().hide().prev().show()},z={update:function(a){a=c(a).parents(".EntryFormNotesItem");var b=a.find(".EntryFormItemContent");m(b.data("formValues"));a.hide()},"delete":w,cancel:x},v=l.find(".EntryFormItemActionMenu").menu({select:function(a,
b){c(this).hide();z[b.item.data("action")](v.data("activeButton"),b.item)}}).hide().css({position:"absolute",zIndex:1});l.on("click",".EntryFormItemAction",function(a){v.data("activeButton",this);if(v.is(":visible"))return v.hide(),!1;v.menu("blur").show();v.position({my:"right top",at:"right bottom",of:this});c(document).one("click",function(){v.hide()});return!1});l.find(".EntryFormItemViewHidden").click(function(a){a=c(this);var e=a.next();e.is(":visible")?(a.text(b),e.hide()):(a.text(d),e.show())});
var A={"delete":function(a,b,d,e){e.css("text-decoration","none");t=c.grep(t,function(b){return b!==a});k.value=t.join(",");b.parent().hide().next().show()},cancel:function(a,b,d,e){d=b[0];var f=d.id.lastIndexOf("_");d=d.id.substring(0,f)+"_CANCEL_REASON";e.find(".EntryFormItemCancelledDetails").remove();r=c.grep(r,function(b){return b!==a});q.value=r.join(",");delete u[a];c("#"+d).remove();b.parent().hide().next().show()}};l.on("click",".EntryFormItemRestoreAction",function(a){a=this.id.split("_");
var b=c(this),d=b.parents(".EntryFormNotesItem"),e=d.find(".EntryFormItemContent");A[d.data("actionToRestore")](a[a.length-2],b,d,e)});var y=function(a){a=this.id.split("_");var b=c(this);b.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","line-through");b.parent().hide().prev().show();p.push(a[a.length-2]);s.value=p.join(",")};l.on("click",".EntryFormItemRestoreCancel",y);l.on("click",".EntryFormItemDontRestoreCancel",function(a){var b=this.id.split("_");
a=c(this);a.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","none");a.parent().hide().next().show();b=b[b.length-2];p=c.grep(p,function(a){return a!==b});s.value=p.join(",")});cache_register_onbeforeunload(function(b){b[a.id+"_updates"]=n;b[a.id+"_deletes"]=t;b[a.id+"_restores"]=p;b[a.id+"_cancels"]=r;b[a.id+"_cancel_reason"]=u});cache_register_onbeforerestorevalues(function(b){var d=a.id.substring(0,a.id.lastIndexOf("_"))+"_";b[a.id+"_updates"]&&c.each(b[a.id+
"_updates"],function(a,b){if(0===b.indexOf("NEW"))h++,m({id:b},!0);else{var e=c("#"+d+b+"_DISPLAY");m(e.data("formValues"));c("#"+d+b+"_CONTAINER").hide()}});b[a.id+"_deletes"]&&c.each(b[a.id+"_deletes"],function(a,b){w(document.getElementById(d+b+"_ACTION"))});b[a.id+"_restores"]&&(c.each(b[a.id+"_restores"],function(a,b){y.call(document.getElementById(d+b+"_RESTORECANCEL"))}),l.find(".EntryFormItemViewHidden").click());if(b[a.id+"_cancels"]){var f=b[a.id+"_cancel_reason"];c.each(b[a.id+"_cancels"],
function(a,b){x(document.getElementById(d+b+"_ACTION"),v.find("li[data-cancel-type='"+f[b]+"']"))})}})}})}})();
