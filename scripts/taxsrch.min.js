window.CIOC={};
(function(a,c){c.do_drop_down_navigation=function(){for(var e=a.getElementById("ActionList").options,b=0;b<e.length;b++)if(e[b].selected){var d=e[b].getAttribute("href");d&&("undefined"!=typeof e[b].attributes.newwindow?c.open(d):c.location.href=d);break}};jQuery(function(e){e("[data-toggle=dialog]").each(function(){var b=e(this),d=e(b.data("target")),h={autoOpen:!1,title:d.data("title"),modal:d.data("modal")};d.dialog(h);b.click(function(){d.dialog("isOpen")?d.dialog("close"):d.dialog("open")})})})})(document,window);
function CheckAll(a,c){a||="IDList";var e=c;c||(e=document.RecordList);c=e.elements.length;for(var b=0;b<c;b++){var d=e.elements[b];d.name===a&&(d.checked=!0)}}function ClearAll(a,c){a||="IDList";var e=c;c||(e=document.RecordList);c=e.elements.length;for(var b=0;b<c;b++){var d=e.elements[b];d.name===a&&(d.checked=!1)}}function add_class(a,c){a&&!(new RegExp("\\b"+c+"\\b")).test(a.className)&&(a.className&&(c=" "+c),a.className+=c)}
function remove_class(a,c){if(a){for(var e=a.className.split(" "),b=[],d=0;d<e.length;d++){var h=e[d];h!==c&&b.push(h)}a.className=b.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,c){window.open(a,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,c){window.open(a,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,c){window.open(a,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var c={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var e=a(this).data("popargs");(c[e.size||"sm"]||openWin)(this.href,e.name||"popwin");return!1})});
(function(){var a=jQuery,c={},e=function(g){null!==g&&"undefined"!==typeof g?a("#myListCount").text(g):(g=a("#myListCount").text())&&(g=parseInt(g,10));g?c.myListLink.show():c.myListLink.hide()},b=function(g){a.each(g,function(q,r){a("#added_to_list_"+r).show();a("#add_to_list_"+r).hide()})},d=function(g){return function(q){q.fail?alert(q.errinfo):(q.ids?e(a.grep(q.ids,f[c.domain]).length):q.count?e(q.count):e(0),b([g]))}},h=function(g){g=a(g.currentTarget).data("id");a.ajax({success:d(g),dataType:"json",
error:function(){alert("Error")},data:{id:g},type:"POST",url:c.current_list_url})},t=function(g){return function(q){if(q.fail)alert(q.errinfo);else{q=!0;if(g){var r=a("#results_table #remove_from_list_"+g);r.length?r.parent().parent().remove():(q=!1,r=a("#results_container #remove_from_list_"+g),r.parents(".dlist-result").remove())}(q?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&g||(a("#records_ui").hide(),a("#no_records_message").show())}}},l=function(g){g=
a(g.currentTarget).data("id");a.ajax({success:t(g),dataType:"json",error:function(){alert("Error")},data:{ID:g,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},n=function(g){a.ajax({success:t(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},f={CIC:function(g){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(g)},VOL:function(g){return/^[1-9][0-9]*$/.test(g)}},k=function(g){if(g.fail)m();else if(g.inrequest){var q=a.grep(g.ids,
f[c.domain]);b(q);e(q.length);(g=g.previous_ids)&&a.each(g,function(r,u){a("#ct_added_to_previous_request_"+u).show()});a(".ListUI img").prop("src",function(r,u){return u.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();c.current_list_url=c.ct_update_url;p()}else m()},m=function(){var g=function(){c.list_view_mode||b(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;e((c.already_added||[]).length);
p()};c.list_view_mode||c.has_session?g():a.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(q){q.has_session&&g()}})},p=function(){a(".HideListUI").delegate(".add_to_list","click",h).delegate(".remove_from_list","click",l).removeClass("HideListUI");a("#remove_all_from_list").click(n);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(g){c=g;c.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
g.in_request?a.ajax({success:k,dataType:"json",error:null,type:"POST",url:g.in_request}):m()}})();this.JSON||(this.JSON={});
(function(){function a(f){return 10>f?"0"+f:f}function c(f){d.lastIndex=0;return d.test(f)?'"'+f.replace(d,function(k){var m=l[k];return"string"===typeof m?m:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function e(f,k){var m=h,p=k[f];p&&"object"===typeof p&&"function"===typeof p.toJSON&&(p=p.toJSON(f));"function"===typeof n&&(p=n.call(k,f,p));switch(typeof p){case "string":return c(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";h+=t;var g=[];if("[object Array]"===Object.prototype.toString.apply(p)){var q=p.length;for(f=0;f<q;f+=1)g[f]=e(f,p)||"null";k=0===g.length?"[]":h?"[\n"+h+g.join(",\n"+h)+"\n"+m+"]":"["+g.join(",")+"]";h=m;return k}if(n&&"object"===typeof n)for(q=n.length,f=0;f<q;f+=1){var r=n[f];"string"===typeof r&&(k=e(r,p))&&g.push(c(r)+(h?": ":":")+k)}else for(r in p)Object.hasOwnProperty.call(p,r)&&(k=e(r,p))&&g.push(c(r)+(h?": ":":")+k);k=0===g.length?"{}":h?"{\n"+h+g.join(",\n"+
h)+"\n"+m+"}":"{"+g.join(",")+"}";h=m;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(f){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(f){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,t,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof JSON.stringify&&(JSON.stringify=function(f,k,m){var p;t=h="";if("number"===typeof m)for(p=0;p<m;p+=1)t+=" ";else"string"===typeof m&&(t=m);if((n=k)&&"function"!==typeof k&&("object"!==typeof k||"number"!==typeof k.length))throw Error("JSON.stringify");return e("",{"":f})});
"function"!==typeof JSON.parse&&(JSON.parse=function(f,k){function m(p,g){var q,r=p[g];if(r&&"object"===typeof r)for(q in r)if(Object.hasOwnProperty.call(r,q)){var u=m(r,q);void 0!==u?r[q]=u:delete r[q]}return k.call(p,g,r)}f=String(f);b.lastIndex=0;b.test(f)&&(f=f.replace(b,function(p){return"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+f+")"),"function"===typeof k?m({"":f},""):f;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var c={};jQuery(a).find("input,select,textarea").each(function(e){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var b=c[this.name];$(this).find("option").each(function(d){this.selected&&b.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(a,c){var e=jQuery;e(a).find("input,select,textarea").each(function(b){if(this.name){var d=
c[this.name];"undefined"!=typeof d&&null!==d&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?e(this).find("option").each(function(h){this.selected=1<d.length?0<=e.inArray(this.value,d):0===d.length?!1:this.value===d[0]}):this.value=d.length?d[0]:"":this.checked=1<d.length?0<=e.inArray(this.value,d):0===d.length?!1:this.value===d[0])}})};window.init_cached_state=function(a){var c=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];c(window).on("beforeunload",function(){var e={form_values:get_form_values(a)};c.each(onbeforeunload_fns,function(b,d){d(e)});document.getElementById("cache_form_values").value=JSON.stringify(e)});window.cache_register_onbeforeunload=function(e){onbeforeunload_fns.push(e)};window.cache_register_onbeforerestorevalues=function(e){onbeforerestorevalues_fns.push(e)};window.restore_cached_state=function(){var e=document.getElementById("cache_form_values");if(e&&e.value){var b=
JSON.parse(e.value);c.each(onbeforerestorevalues_fns,function(d,h){h(b)});restore_form_values(a,b.form_values)}}}})();
(function(){var a=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},e={"en-CA":!0,"":!0},b={},d={"fr-CA":"fr","es-MX":"es"},h=function(){var l=a(this),n=l.data("culture"),f=c[n]||a.datepicker.regional[n].dateFormat,k={};l.hasClass("NoYear")&&(f=f.replace(/[\- .\/]*yy[\/]?/,""),k={beforeShow:function(m,
p){p.dpDiv.addClass("NoYearDatePicker")},onClose:function(m,p){p.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});k.dateFormat=f;l.datepicker(a.extend({},a.datepicker.regional[n],k)).prop("autocomplete","off")},t=function(l){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+l+".min.js",function(){e[l]=!0;a.each(b[l],function(){h.call(this)});delete b[l]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var l=
a(this);var n=l.parents("[lang]").first().prop("lang")||"en-CA";n=d[n]||n;l.data("culture",n);e[n]?h.call(this):(l=b[n],l||(l=b[n]=[],t(n)),l.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
(function(){var a=function(b){b=b.toLowerCase();b=b.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");b=b.replace(RegExp("\u00e6","g"),"ae");b=b.replace(RegExp("\u00e7","g"),"c");b=b.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");b=b.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");b=b.replace(RegExp("\u00f1","g"),"n");b=b.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");b=b.replace(RegExp("\u009c","g"),"oe");b=b.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return b=b.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;window.slugify=function(b){b=a(b);b=b.replace(/-/g," ").replace(/[^a-z0-9\s]/g,"");b=b.trim();return b.replace(/\s+/g,"-")};var c=function(b,d,h,t,l){h=h||"value";t=t||"";l=l||"";return function(n,f){if(d.term&&(new RegExp(t+b.ui.autocomplete.escapeRegex(d.term)+l,"i")).test(n.term)&&d.content&&13>d.content.length){var k=new RegExp(t+b.ui.autocomplete.escapeRegex(n.term)+l,"i");f(b.grep(d.content,function(m){return k.test(a(m[h]))}));
return!0}return!1}};window.default_cache_search_fn=c;var e=function(b,d,h,t,l){h=h||{};l=l||c(b,h,t||"value");return function(n,f,k){n.term=a(n.term);h.term===n.term&&h.content?f(h.content):l(n,f)||b.ajax({url:k||d,dataType:"json",data:n,cache:!1,success:function(m){h.term=n.term;h.content=m;f(m)}})}};window.create_caching_source_fn=e;window.init_community_autocomplete=function(b,d,h,t,l){var n={};l&&=b(l);l&&!l.length&&(l=null);var f=b("#"+d).autocomplete({focus:function(k,m){return!1},select:function(k,
m){f.data({chkid:m.item.chkid,display:m.item.value})},source:e(b,h,n),minLength:t}).keypress(function(k){"13"==k.keyCode&&(k.preventDefault(),f.autocomplete("close"))});l&&(f.parents("form").on("submit",function(){var k=f.val();if(f.data("display")===k)l.val(f.data("chkid"));else{if(n.content){var m=a(k);k=b.grep(n.content,function(p){return a(p.value)===m});if(1===k.length){l.val(k[0].chkid);f.data({chkid:k[0].chkid,display:k[0].value}).val(k[0].value);return}}l.val("")}}),cache_register_onbeforerestorevalues(function(k){f.length&&
(k=k["autocomplete_data_"+f[0].id])&&f.data(k)}),cache_register_onbeforeunload(function(k){if(f.length){var m=f.data();m.display&&m.chkid&&(k["autocomplete_data_"+f[0].id]={display:m.display,chkid:m.chkid})}}))}})();
(function(){var a;(function(){var c,e=/\+/g,b=/([^&=]+)=?([^&]*)/g,d=window.location.search.substring(1);for(a={};null!==(c=b.exec(d));){var h=decodeURIComponent(c[1].replace(e," "));a[h]||(a[h]=[]);a[h].push(decodeURIComponent(c[2].replace(e," ")))}})();a.SearchParameterKey&&jQuery(function(c){var e=function(d){var h=d.find(".HighLight.SearchParamKey");h.length||(h=c('<div class="HighLight SearchParamKey"></div>').prependTo(d));d=d.find("input[name],textarea[name],select[name]").not(function(){return!this.value}).serialize()||
"";h.text(d)},b=function(){c("form > table > tbody > tr > td, .field-data-cell").has("input[name],textarea[name],select[name]").each(function(){e(c(this))})};c("form > table, .form-table").on("change keyup click","input[name],textarea[name],select[name]",function(){e(c(this).parents("form > table > tbody > tr > td, .field-data-cell"))});c(document).on("click","input[type=reset]",function(){setTimeout(b,1)});b()});window.init_pre_fill_search_parameters=function(c,e,b){var d=jQuery,h=document.getElementById("cache_form_values"),
t,l;if(!h||!h.value)if(h=function(){d("form").has("> table, .auto-fill-table").each(function(){restore_form_values(this,a)});e&&b&&(e=d(e),b=d(b),e.length&&b.length&&(t=a[e[0].name],l=a[b[0].name],t&&l&&e.data({chkid:l[0],display:t[0]})))},a){var n=[],f=d("#CheckListSource");a.CHKLOAD&&f.length&&window.get_advsrch_checklist?(d.each(a.CHKLOAD,function(k,m){d("#Chk"+m).length&&n.push(get_advsrch_checklist(c,m,f))}),d.when.apply(null,n).then(h)):h()}}})();
