window.CIOC={};
(function(a,c){c.do_drop_down_navigation=function(){for(var b=a.getElementById("ActionList").options,f=0;f<b.length;f++)if(b[f].selected){var d=b[f].getAttribute("href");d&&("undefined"!=typeof b[f].attributes.newwindow?c.open(d):c.location.href=d);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var c=a(this),d=a(c.data("target")),e={autoOpen:!1,title:d.data("title"),modal:d.data("modal")};d.dialog(e);c.click(function(){d.dialog("isOpen")?d.dialog("close"):d.dialog("open")})})})})(document,window);
function CheckAll(a,c){a||(a="IDList");var b=c;c||(b=document.RecordList);for(var f=b.elements.length,d=0;d<f;d++){var e=b.elements[d];e.name===a&&(e.checked=!0)}}function ClearAll(a,c){a||(a="IDList");var b=c;c||(b=document.RecordList);for(var f=b.elements.length,d=0;d<f;d++){var e=b.elements[d];e.name===a&&(e.checked=!1)}}function add_class(a,c){a&&!(new RegExp("\\b"+c+"\\b")).test(a.className)&&(a.className&&(c=" "+c),a.className+=c)}
function remove_class(a,c){if(a){for(var b=a.className.split(" "),f=[],d=0;d<b.length;d++){var e=b[d];e!==c&&f.push(e)}a.className=f.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,c){window.open(a,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,c){window.open(a,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,c){window.open(a,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var c={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var b=a(this).data("popargs");(c[b.size||"sm"]||openWin)(this.href,b.name||"popwin");return!1})});
(function(){var a=jQuery,c={},b=function(b){null!==b&&"undefined"!==typeof b?a("#myListCount").text(b):(b=a("#myListCount").text())&&(b=parseInt(b,10));b?c.myListLink.show():c.myListLink.hide()},f=function(c){a.each(c,function(c,b){a("#added_to_list_"+b).show();a("#add_to_list_"+b).hide()})},d=function(d){return function(e){e.fail?alert(e.errinfo):(e.ids?b(a.grep(e.ids,k[c.domain]).length):e.count?b(e.count):b(0),f([d]))}},e=function(b){b=a(b.currentTarget).data("id");a.ajax({success:d(b),dataType:"json",
error:function(){alert("Error")},data:{id:b},type:"POST",url:c.current_list_url})},l=function(b){return function(c){if(c.fail)alert(c.errinfo);else{c=!0;if(b){var f=a("#results_table #remove_from_list_"+b);f.length?f.parent().parent().remove():(c=!1,f=a("#results_container #remove_from_list_"+b),f.parents(".dlist-result").remove())}f=!1;if((f=c?1===a("#results_table tr").length:0===a("#results_container .dlist-result").length)||!b)a("#records_ui").hide(),a("#no_records_message").show()}}},g=function(b){b=
a(b.currentTarget).data("id");a.ajax({success:l(b),dataType:"json",error:function(){alert("Error")},data:{ID:b,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},h=function(b){a.ajax({success:l(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},k={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},q=function(d){if(d.fail)t();else if(d.inrequest){var e=a.grep(d.ids,
k[c.domain]);f(e);b(e.length);(d=d.previous_ids)&&a.each(d,function(b,c){a("#ct_added_to_previous_request_"+c).show()});a(".ListUI img").prop("src",function(a,b){return b.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();c.current_list_url=c.ct_update_url;u()}else t()},t=function(){var d=function(){c.list_view_mode||f(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;b((c.already_added||[]).length);
u()};c.list_view_mode||c.has_session?d():a.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&d()}})},u=function(){a(".HideListUI").delegate(".add_to_list","click",e).delegate(".remove_from_list","click",g).removeClass("HideListUI");a("#remove_all_from_list").click(h);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(b){c=b;c.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
b.in_request?a.ajax({success:q,dataType:"json",error:null,type:"POST",url:b.in_request}):t()}})();this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=g[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(a,f){var d,g,p,r,s=e,n,m=f[a];m&&"object"===typeof m&&"function"===typeof m.toJSON&&(m=m.toJSON(a));"function"===typeof h&&(m=h.call(f,a,m));switch(typeof m){case "string":return c(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);
case "object":if(!m)return"null";e+=l;n=[];if("[object Array]"===Object.prototype.toString.apply(m)){r=m.length;for(d=0;d<r;d+=1)n[d]=b(d,m)||"null";p=0===n.length?"[]":e?"[\n"+e+n.join(",\n"+e)+"\n"+s+"]":"["+n.join(",")+"]";e=s;return p}if(h&&"object"===typeof h)for(r=h.length,d=0;d<r;d+=1)g=h[d],"string"===typeof g&&(p=b(g,m))&&n.push(c(g)+(e?": ":":")+p);else for(g in m)Object.hasOwnProperty.call(m,g)&&(p=b(g,m))&&n.push(c(g)+(e?": ":":")+p);p=0===n.length?"{}":e?"{\n"+e+n.join(",\n"+e)+"\n"+
s+"}":"{"+n.join(",")+"}";e=s;return p}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var f;l=e="";if("number"===typeof d)for(f=0;f<d;f+=1)l+=" ";else"string"===typeof d&&(l=d);if((h=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var f,e,g=a[d];if(g&&"object"===typeof g)for(f in g)Object.hasOwnProperty.call(g,f)&&(e=c(g,f),void 0!==e?g[f]=e:delete g[f]);return b.call(a,d,g)}var d;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var c={};jQuery(a).find("input,select,textarea").each(function(a){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var f=c[this.name];$(this).find("option").each(function(a){this.selected&&f.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(a,c){var b=jQuery;b(a).find("input,select,textarea").each(function(a){if(this.name){var d=
c[this.name];"undefined"!=typeof d&&null!==d&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?b(this).find("option").each(function(a){this.selected=1<d.length?0<=b.inArray(this.value,d):0===d.length?!1:this.value===d[0]}):this.value=d.length?d[0]:"":this.checked=1<d.length?0<=b.inArray(this.value,d):0===d.length?!1:this.value===d[0])}})};window.init_cached_state=function(a){var c=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];c(window).on("beforeunload",function(){var b={form_values:get_form_values(a)};c.each(onbeforeunload_fns,function(a,c){c(b)});document.getElementById("cache_form_values").value=JSON.stringify(b)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var b=document.getElementById("cache_form_values");if(b&&b.value){var f=
JSON.parse(b.value);c.each(onbeforerestorevalues_fns,function(a,b){b(f)});restore_form_values(a,f.form_values)}}}})();
(function(){var a=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},b={"en-CA":!0,"":!0},f={},d={"fr-CA":"fr","es-MX":"es"},e=function(){var b=a(this),d=b.data("culture"),f=c[d]||a.datepicker.regional[d].dateFormat,e={};b.hasClass("NoYear")&&(f=f.replace(/[\- .\/]*yy[\/]?/,""),e={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});e.dateFormat=f;b.datepicker(a.extend({},a.datepicker.regional[d],e)).prop("autocomplete","off")},l=function(c){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+c+".min.js",function(){b[c]=!0;a.each(f[c],function(){e.call(this)});delete f[c]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var c=
a(this),h;h=c.parents("[lang]").first().prop("lang")||"en-CA";h=d[h]||h;c.data("culture",h);b[h]?e.call(this):(c=f[h],c||(c=f[h]=[],l(h)),c.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
(function(a){function c(a){return a&&a.constructor===Number?a+"px":a}a.fn.bgiframe=a.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(b){b=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},b);var f='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+b.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==b.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==b.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
c(b.top))+";left:"+("auto"==b.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":c(b.left))+";width:"+("auto"==b.width?"expression(this.parentNode.offsetWidth+'px')":c(b.width))+";height:"+("auto"==b.height?"expression(this.parentNode.offsetHeight+'px')":c(b.height))+';"/>';return this.each(function(){0===a(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(f),this.firstChild)})}:function(){return this};a.fn.bgIframe=a.fn.bgiframe})(jQuery);
(function(){var a=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;var c=function(c,b,e,l,g){e=e||"value";l=l||"";g=g||"";return function(h,k){if(b.term&&(new RegExp(l+c.ui.autocomplete.escapeRegex(b.term)+g,"i")).test(h.term)&&b.content&&13>b.content.length){var q=new RegExp(l+c.ui.autocomplete.escapeRegex(h.term)+g,"i");k(c.grep(b.content,function(b){return q.test(a(b[e]))}));return!0}return!1}};window.default_cache_search_fn=c;var b=function(b,d,e,l,g){e=e||{};g=g||c(b,e,l||"value");
return function(c,k,q){c.term=a(c.term);e.term===c.term&&e.content?k(e.content):g(c,k)||b.ajax({url:q||d,dataType:"json",data:c,cache:!1,success:function(a){e.term=c.term;e.content=a;k(a)}})}};window.create_caching_source_fn=b;window.init_community_autocomplete=function(c,d,e,l,g){var h={};g&&(g=c(g));g&&!g.length&&(g=null);var k=c("#"+d).autocomplete({focus:function(a,c){return!1},select:function(a,c){k.data({chkid:c.item.chkid,display:c.item.value})},source:b(c,e,h),minLength:l}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),k.autocomplete("close"))});g&&(k.parents("form").on("submit",function(){var b=k.val();if(k.data("display")===b)g.val(k.data("chkid"));else{if(h.content){var d=a(b),b=c.grep(h.content,function(c){return a(c.value)===d});if(1===b.length){g.val(b[0].chkid);k.data({chkid:b[0].chkid,display:b[0].value}).val(b[0].value);return}}g.val("")}}),cache_register_onbeforerestorevalues(function(a){k.length&&(a=a["autocomplete_data_"+k[0].id])&&k.data(a)}),cache_register_onbeforeunload(function(a){if(k.length){var c=
k.data();c.display&&c.chkid&&(a["autocomplete_data_"+k[0].id]={display:c.display,chkid:c.chkid})}}))}})();
(function(){var a;(function(){var c,b=/\+/g,f=/([^&=]+)=?([^&]*)/g,d=window.location.search.substring(1);for(a={};null!==(c=f.exec(d));){var e=decodeURIComponent(c[1].replace(b," "));a[e]||(a[e]=[]);a[e].push(decodeURIComponent(c[2].replace(b," ")))}})();a.SearchParameterKey&&jQuery(function(a){var b=function(b){var e=b.find(".HighLight.SearchParamKey");e.length||(e=a('<div class="HighLight SearchParamKey"></div>').prependTo(b));b=b.find("input[name],textarea[name],select[name]").not(function(){return!this.value}).serialize()||
"";e.text(b)},f=function(){a("form > table > tbody > tr > td, .field-data-cell").has("input[name],textarea[name],select[name]").each(function(){b(a(this))})};a("form > table, .form-table").on("change keyup click","input[name],textarea[name],select[name]",function(){b(a(this).parents("form > table > tbody > tr > td, .field-data-cell"))});a(document).on("click","input[type=reset]",function(){setTimeout(f,1)});f()});window.init_pre_fill_search_parameters=function(c,b,f){var d=jQuery,e=document.getElementById("cache_form_values"),
l,g;if(!e||!e.value)if(e=function(){d("form").has("> table, .auto-fill-table").each(function(){restore_form_values(this,a)});b&&f&&(b=d(b),f=d(f),b.length&&f.length&&(l=a[b[0].name],g=a[f[0].name],l&&g&&b.data({chkid:g[0],display:l[0]})))},a){var h=[],k=d("#CheckListSource");a.CHKLOAD&&k.length&&window.get_advsrch_checklist?(d.each(a.CHKLOAD,function(a,b){d("#Chk"+b).length&&h.push(get_advsrch_checklist(c,b,k))}),d.when.apply(null,h).then(e)):e()}}})();
