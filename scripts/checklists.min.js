window.CIOC={};
(function(a,e){e.do_drop_down_navigation=function(){for(var m=a.getElementById("ActionList").options,c=0;c<m.length;c++)if(m[c].selected){var h=m[c].getAttribute("href");h&&("undefined"!=typeof m[c].attributes.newwindow?e.open(h):e.location.href=h);break}};jQuery(function(m){m("[data-toggle=dialog]").each(function(){var c=m(this),h=m(c.data("target")),l={autoOpen:!1,title:h.data("title"),modal:h.data("modal")};h.dialog(l);c.click(function(){h.dialog("isOpen")?h.dialog("close"):h.dialog("open")})})})})(document,window);
function CheckAll(a,e){a||="IDList";var m=e;e||(m=document.RecordList);e=m.elements.length;for(var c=0;c<e;c++){var h=m.elements[c];h.name===a&&(h.checked=!0)}}function ClearAll(a,e){a||="IDList";var m=e;e||(m=document.RecordList);e=m.elements.length;for(var c=0;c<e;c++){var h=m.elements[c];h.name===a&&(h.checked=!1)}}function add_class(a,e){a&&!(new RegExp("\\b"+e+"\\b")).test(a.className)&&(a.className&&(e=" "+e),a.className+=e)}
function remove_class(a,e){if(a){for(var m=a.className.split(" "),c=[],h=0;h<m.length;h++){var l=m[h];l!==e&&c.push(l)}a.className=c.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,e){window.open(a,e,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,e){window.open(a,e,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,e){window.open(a,e,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var e={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var m=a(this).data("popargs");(e[m.size||"sm"]||openWin)(this.href,m.name||"popwin");return!1})});
(function(){var a=jQuery,e={},m=function(f){null!==f&&"undefined"!==typeof f?a("#myListCount").text(f):(f=a("#myListCount").text())&&(f=parseInt(f,10));f?e.myListLink.show():e.myListLink.hide()},c=function(f){a.each(f,function(r,q){a("#added_to_list_"+q).show();a("#add_to_list_"+q).hide()})},h=function(f){return function(r){r.fail?alert(r.errinfo):(r.ids?m(a.grep(r.ids,b[e.domain]).length):r.count?m(r.count):m(0),c([f]))}},l=function(f){f=a(f.currentTarget).data("id");a.ajax({success:h(f),dataType:"json",
error:function(){alert("Error")},data:{id:f},type:"POST",url:e.current_list_url})},t=function(f){return function(r){if(r.fail)alert(r.errinfo);else{r=!0;if(f){var q=a("#results_table #remove_from_list_"+f);q.length?q.parent().parent().remove():(r=!1,q=a("#results_container #remove_from_list_"+f),q.parents(".dlist-result").remove())}(r?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&f||(a("#records_ui").hide(),a("#no_records_message").show())}}},p=function(f){f=
a(f.currentTarget).data("id");a.ajax({success:t(f),dataType:"json",error:function(){alert("Error")},data:{ID:f,RemoveItem:e.domain},type:"POST",url:e.current_list_url})},n=function(f){a.ajax({success:t(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:e.domain},type:"POST",url:e.current_list_url})},b={CIC:function(f){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(f)},VOL:function(f){return/^[1-9][0-9]*$/.test(f)}},d=function(f){if(f.fail)k();else if(f.inrequest){var r=a.grep(f.ids,
b[e.domain]);c(r);m(r.length);(f=f.previous_ids)&&a.each(f,function(q,u){a("#ct_added_to_previous_request_"+u).show()});a(".ListUI img").prop("src",function(q,u){return u.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();e.current_list_url=e.ct_update_url;g()}else k()},k=function(){var f=function(){e.list_view_mode||c(e.already_added||[]);e.current_list_url=e.list_view_mode&&"ct"===e.list_view_mode?e.ct_update_url:e.list_update_url;m((e.already_added||[]).length);
g()};e.list_view_mode||e.has_session?f():a.ajax({dataType:"json",error:null,url:e.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(r){r.has_session&&f()}})},g=function(){a(".HideListUI").delegate(".add_to_list","click",l).delegate(".remove_from_list","click",p).removeClass("HideListUI");a("#remove_all_from_list").click(n);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(f){e=f;e.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
f.in_request?a.ajax({success:d,dataType:"json",error:null,type:"POST",url:f.in_request}):k()}})();this.JSON||(this.JSON={});
(function(){function a(b){return 10>b?"0"+b:b}function e(b){h.lastIndex=0;return h.test(b)?'"'+b.replace(h,function(d){var k=p[d];return"string"===typeof k?k:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function m(b,d){var k=l,g=d[b];g&&"object"===typeof g&&"function"===typeof g.toJSON&&(g=g.toJSON(b));"function"===typeof n&&(g=n.call(d,b,g));switch(typeof g){case "string":return e(g);case "number":return isFinite(g)?String(g):"null";case "boolean":case "null":return String(g);
case "object":if(!g)return"null";l+=t;var f=[];if("[object Array]"===Object.prototype.toString.apply(g)){var r=g.length;for(b=0;b<r;b+=1)f[b]=m(b,g)||"null";d=0===f.length?"[]":l?"[\n"+l+f.join(",\n"+l)+"\n"+k+"]":"["+f.join(",")+"]";l=k;return d}if(n&&"object"===typeof n)for(r=n.length,b=0;b<r;b+=1){var q=n[b];"string"===typeof q&&(d=m(q,g))&&f.push(e(q)+(l?": ":":")+d)}else for(q in g)Object.hasOwnProperty.call(g,q)&&(d=m(q,g))&&f.push(e(q)+(l?": ":":")+d);d=0===f.length?"{}":l?"{\n"+l+f.join(",\n"+
l)+"\n"+k+"}":"{"+f.join(",")+"}";l=k;return d}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,t,p={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,d,k){var g;t=l="";if("number"===typeof k)for(g=0;g<k;g+=1)t+=" ";else"string"===typeof k&&(t=k);if((n=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return m("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(b,d){function k(g,f){var r,q=g[f];if(q&&"object"===typeof q)for(r in q)if(Object.hasOwnProperty.call(q,r)){var u=k(q,r);void 0!==u?q[r]=u:delete q[r]}return d.call(g,f,q)}b=String(b);c.lastIndex=0;c.test(b)&&(b=b.replace(c,function(g){return"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=eval("("+b+")"),"function"===typeof d?k({"":b},""):b;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var e={};jQuery(a).find("input,select,textarea").each(function(m){if(this.name)if(e[this.name]||(e[this.name]=[]),"select"===this.nodeName.toLowerCase()){var c=e[this.name];$(this).find("option").each(function(h){this.selected&&c.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&e[this.name].push(this.value||"")});return e};window.restore_form_values=function(a,e){var m=jQuery;m(a).find("input,select,textarea").each(function(c){if(this.name){var h=
e[this.name];"undefined"!=typeof h&&null!==h&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?m(this).find("option").each(function(l){this.selected=1<h.length?0<=m.inArray(this.value,h):0===h.length?!1:this.value===h[0]}):this.value=h.length?h[0]:"":this.checked=1<h.length?0<=m.inArray(this.value,h):0===h.length?!1:this.value===h[0])}})};window.init_cached_state=function(a){var e=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];var m=function(){var c=document.getElementById("cache_form_values");if(c){var h={form_values:get_form_values(a)};e.each(onbeforeunload_fns,function(l,t){t(h)});c.value=JSON.stringify(h)}};document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&m()});document.addEventListener("freeze",m);window.addEventListener("pagehide",m);window.cache_register_onbeforeunload=function(c){onbeforeunload_fns.push(c)};window.cache_register_onbeforerestorevalues=
function(c){onbeforerestorevalues_fns.push(c)};window.restore_cached_state=function(){e(window).on("pageshow",function(c){if(!c.originalEvent.persisted&&(c=document.getElementById("cache_form_values"))&&c.value){var h=JSON.parse(c.value);e.each(onbeforerestorevalues_fns,function(l,t){t(h)});restore_form_values(a,h.form_values)}})}}})();
(function(){var a=jQuery,e={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},m={"en-CA":!0,"":!0},c={},h={"fr-CA":"fr","es-MX":"es"},l=function(){var p=a(this),n=p.data("culture"),b=e[n]||a.datepicker.regional[n].dateFormat,d={};p.hasClass("NoYear")&&(b=b.replace(/[\- .\/]*yy[\/]?/,""),d={beforeShow:function(k,
g){g.dpDiv.addClass("NoYearDatePicker")},onClose:function(k,g){g.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});d.dateFormat=b;p.datepicker(a.extend({},a.datepicker.regional[n],d)).prop("autocomplete","off")},t=function(p){a.getScript("https://ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+p+".min.js",function(){m[p]=!0;a.each(c[p],function(){l.call(this)});delete c[p]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var p=
a(this);var n=p.parents("[lang]").first().prop("lang")||"en-CA";n=h[n]||n;p.data("culture",n);m[n]?l.call(this):(p=c[n],p||(p=c[n]=[],t(n)),p.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();this.JSON||(this.JSON={});
(function(){function a(b){return 10>b?"0"+b:b}function e(b){h.lastIndex=0;return h.test(b)?'"'+b.replace(h,function(d){var k=p[d];return"string"===typeof k?k:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function m(b,d){var k=l,g=d[b];g&&"object"===typeof g&&"function"===typeof g.toJSON&&(g=g.toJSON(b));"function"===typeof n&&(g=n.call(d,b,g));switch(typeof g){case "string":return e(g);case "number":return isFinite(g)?String(g):"null";case "boolean":case "null":return String(g);
case "object":if(!g)return"null";l+=t;var f=[];if("[object Array]"===Object.prototype.toString.apply(g)){var r=g.length;for(b=0;b<r;b+=1)f[b]=m(b,g)||"null";d=0===f.length?"[]":l?"[\n"+l+f.join(",\n"+l)+"\n"+k+"]":"["+f.join(",")+"]";l=k;return d}if(n&&"object"===typeof n)for(r=n.length,b=0;b<r;b+=1){var q=n[b];"string"===typeof q&&(d=m(q,g))&&f.push(e(q)+(l?": ":":")+d)}else for(q in g)Object.hasOwnProperty.call(g,q)&&(d=m(q,g))&&f.push(e(q)+(l?": ":":")+d);d=0===f.length?"{}":l?"{\n"+l+f.join(",\n"+
l)+"\n"+k+"}":"{"+f.join(",")+"}";l=k;return d}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(b){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,t,p={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,d,k){var g;t=l="";if("number"===typeof k)for(g=0;g<k;g+=1)t+=" ";else"string"===typeof k&&(t=k);if((n=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return m("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(b,d){function k(g,f){var r,q=g[f];if(q&&"object"===typeof q)for(r in q)if(Object.hasOwnProperty.call(q,r)){var u=k(q,r);void 0!==u?q[r]=u:delete q[r]}return d.call(g,f,q)}b=String(b);c.lastIndex=0;c.test(b)&&(b=b.replace(c,function(g){return"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=eval("("+b+")"),"function"===typeof d?k({"":b},""):b;throw new SyntaxError("JSON.parse");})})();
(function(){var a=function(c){c=c.toLowerCase();c=c.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");c=c.replace(RegExp("\u00e6","g"),"ae");c=c.replace(RegExp("\u00e7","g"),"c");c=c.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");c=c.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");c=c.replace(RegExp("\u00f1","g"),"n");c=c.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");c=c.replace(RegExp("\u009c","g"),"oe");c=c.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return c=c.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;window.slugify=function(c){c=a(c);c=c.replace(/-/g," ").replace(/[^a-z0-9\s]/g,"");c=c.trim();return c.replace(/\s+/g,"-")};var e=function(c,h,l,t,p){l=l||"value";t=t||"";p=p||"";return function(n,b){if(h.term&&(new RegExp(t+c.ui.autocomplete.escapeRegex(h.term)+p,"i")).test(n.term)&&h.content&&13>h.content.length){var d=new RegExp(t+c.ui.autocomplete.escapeRegex(n.term)+p,"i");b(c.grep(h.content,function(k){return d.test(a(k[l]))}));
return!0}return!1}};window.default_cache_search_fn=e;var m=function(c,h,l,t,p){l=l||{};p=p||e(c,l,t||"value");return function(n,b,d){n.term=a(n.term);l.term===n.term&&l.content?b(l.content):p(n,b)||c.ajax({url:d||h,dataType:"json",data:n,cache:!1,success:function(k){l.term=n.term;l.content=k;b(k)}})}};window.create_caching_source_fn=m;window.init_community_autocomplete=function(c,h,l,t,p){var n={};p&&=c(p);p&&!p.length&&(p=null);var b=c("#"+h).autocomplete({focus:function(d,k){return!1},select:function(d,
k){b.data({chkid:k.item.chkid,display:k.item.value})},source:m(c,l,n),minLength:t}).keypress(function(d){"13"==d.keyCode&&(d.preventDefault(),b.autocomplete("close"))});p&&(b.parents("form").on("submit",function(){var d=b.val();if(b.data("display")===d)p.val(b.data("chkid"));else{if(n.content){var k=a(d);d=c.grep(n.content,function(g){return a(g.value)===k});if(1===d.length){p.val(d[0].chkid);b.data({chkid:d[0].chkid,display:d[0].value}).val(d[0].value);return}}p.val("")}}),cache_register_onbeforerestorevalues(function(d){b.length&&
(d=d["autocomplete_data_"+b[0].id])&&b.data(d)}),cache_register_onbeforeunload(function(d){if(b.length){var k=b.data();k.display&&k.chkid&&(d["autocomplete_data_"+b[0].id]={display:k.display,chkid:k.chkid})}}))}})();
(function(){var a=jQuery;window.init_municipality_autocomplete=function(e,m,c){e.each(function(){var h={},l=this,t=this.id.replace("Web",""),p=a("#"+t),n=a(this).data("cm_info",{value:this.value,chkid:p[0].value}).autocomplete({focus:function(d,k){return!1},source:create_caching_source_fn(a,m,h),minLength:1,close:function(){n.is(":focus")||b()}}).keypress(function(d){"13"==d.keyCode&&(d.preventDefault(),n.autocomplete("close"))}),b=function(){var d=n.data("cm_info"),k=l.value;if(k)if(d&&d.chkid&&
d.value&&d.value===k)p[0].value=d.chkid;else{var g=string_ci_ai(k);if(h.content&&(d=a.grep(h.content,function(f){return string_ci_ai(f.value)===g}),1===d.length)){p[0].value=d[0].chkid;n.data("cm_info",d[0]);return}setTimeout(function(){n[0].focus()},1);alert(c)}else p[0].value=""};n.blur(function(){n.autocomplete("widget").is(":visible")||b()})})}})();
