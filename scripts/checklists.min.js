window.CIOC={};
(function(a,b){b.do_drop_down_navigation=function(){for(var d=a.getElementById("ActionList").options,f=0;f<d.length;f++)if(d[f].selected){var c=d[f].getAttribute("href");c&&("undefined"!=typeof d[f].attributes.newwindow?b.open(c):b.location.href=c);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var b=a(this),c=a(b.data("target")),e={autoOpen:!1,title:c.data("title"),modal:c.data("modal")};c.dialog(e);b.click(function(){c.dialog("isOpen")?c.dialog("close"):c.dialog("open")})})})})(document,window);
function CheckAll(a,b){a||(a="IDList");var d=b;b||(d=document.RecordList);for(var f=d.elements.length,c=0;c<f;c++){var e=d.elements[c];e.name===a&&(e.checked=!0)}}function ClearAll(a,b){a||(a="IDList");var d=b;b||(d=document.RecordList);for(var f=d.elements.length,c=0;c<f;c++){var e=d.elements[c];e.name===a&&(e.checked=!1)}}function add_class(a,b){a&&!(new RegExp("\\b"+b+"\\b")).test(a.className)&&(a.className&&(b=" "+b),a.className+=b)}
function remove_class(a,b){if(a){for(var d=a.className.split(" "),f=[],c=0;c<d.length;c++){var e=d[c];e!==b&&f.push(e)}a.className=f.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,b){window.open(a,b,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,b){window.open(a,b,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,b){window.open(a,b,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var b={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var d=a(this).data("popargs");(b[d.size||"sm"]||openWin)(this.href,d.name||"popwin");return!1})});
(function(){var a=jQuery,b={},d=function(g){null!==g&&"undefined"!==typeof g?a("#myListCount").text(g):(g=a("#myListCount").text())&&(g=parseInt(g,10));g?b.myListLink.show():b.myListLink.hide()},f=function(g){a.each(g,function(g,b){a("#added_to_list_"+b).show();a("#add_to_list_"+b).hide()})},c=function(t){return function(m){m.fail?alert(m.errinfo):(m.ids?d(a.grep(m.ids,g[b.domain]).length):m.count?d(m.count):d(0),f([t]))}},e=function(g){g=a(g.currentTarget).data("id");a.ajax({success:c(g),dataType:"json",
error:function(){alert("Error")},data:{id:g},type:"POST",url:b.current_list_url})},n=function(g){return function(b){if(b.fail)alert(b.errinfo);else{b=!0;if(g){var m=a("#results_table #remove_from_list_"+g);m.length?m.parent().parent().remove():(b=!1,m=a("#results_container #remove_from_list_"+g),m.parents(".dlist-result").remove())}m=!1;if((m=b?1===a("#results_table tr").length:0===a("#results_container .dlist-result").length)||!g)a("#records_ui").hide(),a("#no_records_message").show()}}},h=function(g){g=
a(g.currentTarget).data("id");a.ajax({success:n(g),dataType:"json",error:function(){alert("Error")},data:{ID:g,RemoveItem:b.domain},type:"POST",url:b.current_list_url})},k=function(g){a.ajax({success:n(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:b.domain},type:"POST",url:b.current_list_url})},g={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},m=function(m){if(m.fail)t();else if(m.inrequest){var c=a.grep(m.ids,
g[b.domain]);f(c);d(c.length);(m=m.previous_ids)&&a.each(m,function(g,m){a("#ct_added_to_previous_request_"+m).show()});a(".ListUI img").prop("src",function(a,g){return g.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();b.current_list_url=b.ct_update_url;u()}else t()},t=function(){var g=function(){b.list_view_mode||f(b.already_added||[]);b.current_list_url=b.list_view_mode&&"ct"===b.list_view_mode?b.ct_update_url:b.list_update_url;d((b.already_added||[]).length);
u()};b.list_view_mode||b.has_session?g():a.ajax({dataType:"json",error:null,url:b.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&g()}})},u=function(){a(".HideListUI").delegate(".add_to_list","click",e).delegate(".remove_from_list","click",h).removeClass("HideListUI");a("#remove_all_from_list").click(k);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(g){b=g;b.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
g.in_request?a.ajax({success:m,dataType:"json",error:null,type:"POST",url:g.in_request}):t()}})();this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var g=h[a];return"string"===typeof g?g:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,m){var f,c,h,q,r=e,p,l=m[a];l&&"object"===typeof l&&"function"===typeof l.toJSON&&(l=l.toJSON(a));"function"===typeof k&&(l=k.call(m,a,l));switch(typeof l){case "string":return b(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);
case "object":if(!l)return"null";e+=n;p=[];if("[object Array]"===Object.prototype.toString.apply(l)){q=l.length;for(f=0;f<q;f+=1)p[f]=d(f,l)||"null";h=0===p.length?"[]":e?"[\n"+e+p.join(",\n"+e)+"\n"+r+"]":"["+p.join(",")+"]";e=r;return h}if(k&&"object"===typeof k)for(q=k.length,f=0;f<q;f+=1)c=k[f],"string"===typeof c&&(h=d(c,l))&&p.push(b(c)+(e?": ":":")+h);else for(c in l)Object.hasOwnProperty.call(l,c)&&(h=d(c,l))&&p.push(b(c)+(e?": ":":")+h);h=0===p.length?"{}":e?"{\n"+e+p.join(",\n"+e)+"\n"+
r+"}":"{"+p.join(",")+"}";e=r;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(g){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,m,b){var f;n=e="";if("number"===typeof b)for(f=0;f<b;f+=1)n+=" ";else"string"===typeof b&&(n=b);if((k=m)&&"function"!==typeof m&&("object"!==typeof m||"number"!==typeof m.length))throw Error("JSON.stringify");return d("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,g){var f,e,d=a[g];if(d&&"object"===typeof d)for(f in d)Object.hasOwnProperty.call(d,f)&&(e=c(d,f),void 0!==e?d[f]=e:delete d[f]);return b.call(a,g,d)}var e;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var b={};jQuery(a).find("input,select,textarea").each(function(a){if(this.name)if(b[this.name]||(b[this.name]=[]),"select"===this.nodeName.toLowerCase()){var f=b[this.name];$(this).find("option").each(function(a){this.selected&&f.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&b[this.name].push(this.value||"")});return b};window.restore_form_values=function(a,b){var d=jQuery;d(a).find("input,select,textarea").each(function(a){if(this.name){var c=
b[this.name];"undefined"!=typeof c&&null!==c&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(a){this.selected=1<c.length?0<=d.inArray(this.value,c):0===c.length?!1:this.value===c[0]}):this.value=c.length?c[0]:"":this.checked=1<c.length?0<=d.inArray(this.value,c):0===c.length?!1:this.value===c[0])}})};window.init_cached_state=function(a){var b=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];b(window).on("beforeunload",function(){var d={form_values:get_form_values(a)};b.each(onbeforeunload_fns,function(a,b){b(d)});document.getElementById("cache_form_values").value=JSON.stringify(d)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var d=document.getElementById("cache_form_values");if(d&&d.value){var f=
JSON.parse(d.value);b.each(onbeforerestorevalues_fns,function(a,b){b(f)});restore_form_values(a,f.form_values)}}}})();
(function(){var a=jQuery,b={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},d={"en-CA":!0,"":!0},f={},c={"fr-CA":"fr","es-MX":"es"},e=function(){var f=a(this),c=f.data("culture"),g=b[c]||a.datepicker.regional[c].dateFormat,m={};f.hasClass("NoYear")&&(g=g.replace(/[\- .\/]*yy[\/]?/,""),m={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});m.dateFormat=g;f.datepicker(a.extend({},a.datepicker.regional[c],m)).prop("autocomplete","off")},n=function(b){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+b+".min.js",function(){d[b]=!0;a.each(f[b],function(){e.call(this)});delete f[b]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var b=
a(this),k;k=b.parents("[lang]").first().prop("lang")||"en-CA";k=c[k]||k;b.data("culture",k);d[k]?e.call(this):(b=f[k],b||(b=f[k]=[],n(k)),b.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,f){var c,h,s,q,r=e,p,l=f[a];l&&"object"===typeof l&&"function"===typeof l.toJSON&&(l=l.toJSON(a));"function"===typeof k&&(l=k.call(f,a,l));switch(typeof l){case "string":return b(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);
case "object":if(!l)return"null";e+=n;p=[];if("[object Array]"===Object.prototype.toString.apply(l)){q=l.length;for(c=0;c<q;c+=1)p[c]=d(c,l)||"null";s=0===p.length?"[]":e?"[\n"+e+p.join(",\n"+e)+"\n"+r+"]":"["+p.join(",")+"]";e=r;return s}if(k&&"object"===typeof k)for(q=k.length,c=0;c<q;c+=1)h=k[c],"string"===typeof h&&(s=d(h,l))&&p.push(b(h)+(e?": ":":")+s);else for(h in l)Object.hasOwnProperty.call(l,h)&&(s=d(h,l))&&p.push(b(h)+(e?": ":":")+s);s=0===p.length?"{}":e?"{\n"+e+p.join(",\n"+e)+"\n"+
r+"}":"{"+p.join(",")+"}";e=r;return s}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,f){var c;n=e="";if("number"===typeof f)for(c=0;c<f;c+=1)n+=" ";else"string"===typeof f&&(n=f);if((k=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return d("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,f){var e,g,d=a[f];if(d&&"object"===typeof d)for(e in d)Object.hasOwnProperty.call(d,e)&&(g=c(d,e),void 0!==g?d[e]=g:delete d[e]);return b.call(a,f,d)}var e;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){var a=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;var b=function(b,c,e,d,h){e=e||"value";d=d||"";h=h||"";return function(k,g){if(c.term&&(new RegExp(d+b.ui.autocomplete.escapeRegex(c.term)+h,"i")).test(k.term)&&c.content&&13>c.content.length){var m=new RegExp(d+b.ui.autocomplete.escapeRegex(k.term)+h,"i");g(b.grep(c.content,function(b){return m.test(a(b[e]))}));return!0}return!1}};window.default_cache_search_fn=b;var d=function(f,c,e,d,h){e=e||{};h=h||b(f,e,d||"value");
return function(b,d,m){b.term=a(b.term);e.term===b.term&&e.content?d(e.content):h(b,d)||f.ajax({url:m||c,dataType:"json",data:b,cache:!1,success:function(a){e.term=b.term;e.content=a;d(a)}})}};window.create_caching_source_fn=d;window.init_community_autocomplete=function(b,c,e,n,h){var k={};h&&(h=b(h));h&&!h.length&&(h=null);var g=b("#"+c).autocomplete({focus:function(a,b){return!1},select:function(a,b){g.data({chkid:b.item.chkid,display:b.item.value})},source:d(b,e,k),minLength:n}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),g.autocomplete("close"))});h&&(g.parents("form").on("submit",function(){var c=g.val();if(g.data("display")===c)h.val(g.data("chkid"));else{if(k.content){var d=a(c),c=b.grep(k.content,function(b){return a(b.value)===d});if(1===c.length){h.val(c[0].chkid);g.data({chkid:c[0].chkid,display:c[0].value}).val(c[0].value);return}}h.val("")}}),cache_register_onbeforerestorevalues(function(a){g.length&&(a=a["autocomplete_data_"+g[0].id])&&g.data(a)}),cache_register_onbeforeunload(function(a){if(g.length){var b=
g.data();b.display&&b.chkid&&(a["autocomplete_data_"+g[0].id]={display:b.display,chkid:b.chkid})}}))}})();
(function(){var a=jQuery;window.init_municipality_autocomplete=function(b,d,f){b.each(function(){var b={},e=this,n=this.id.replace("Web",""),h=a("#"+n),k=a(this).data("cm_info",{value:this.value,chkid:h[0].value}).autocomplete({focus:function(a,b){return!1},source:create_caching_source_fn(a,d,b),minLength:1,close:function(){k.is(":focus")||g()}}).keypress(function(a){"13"==a.keyCode&&(a.preventDefault(),k.autocomplete("close"))}),g=function(){var d=k.data("cm_info"),g=e.value,n;if(g)if(d&&d.chkid&&
d.value&&d.value===g)h[0].value=d.chkid;else{n=string_ci_ai(g);if(b.content&&(d=a.grep(b.content,function(a){return string_ci_ai(a.value)===n}),1===d.length)){h[0].value=d[0].chkid;k.data("cm_info",d[0]);return}setTimeout(function(){k[0].focus()},1);alert(f)}else h[0].value=""};k.blur(function(){k.autocomplete("widget").is(":visible")||g()})})}})();
