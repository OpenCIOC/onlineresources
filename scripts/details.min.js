window.CIOC={};
(function(c,a){a.do_drop_down_navigation=function(){for(var b=c.getElementById("ActionList").options,e=0;e<b.length;e++)if(b[e].selected){var d=b[e].getAttribute("href");d&&("undefined"!=typeof b[e].attributes.newwindow?a.open(d):a.location.href=d);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var c=a(this),d=a(c.data("target")),f={autoOpen:!1,title:d.data("title"),modal:d.data("modal")};d.dialog(f);c.click(function(){d.dialog("isOpen")?d.dialog("close"):d.dialog("open")})})})})(document,window);
function CheckAll(c,a){c||(c="IDList");var b=a;a||(b=document.RecordList);for(var e=b.elements.length,d=0;d<e;d++){var f=b.elements[d];f.name===c&&(f.checked=!0)}}function ClearAll(c,a){c||(c="IDList");var b=a;a||(b=document.RecordList);for(var e=b.elements.length,d=0;d<e;d++){var f=b.elements[d];f.name===c&&(f.checked=!1)}}function add_class(c,a){c&&!(new RegExp("\\b"+a+"\\b")).test(c.className)&&(c.className&&(a=" "+a),c.className+=a)}
function remove_class(c,a){if(c){for(var b=c.className.split(" "),e=[],d=0;d<b.length;d++){var f=b[d];f!==a&&e.push(f)}c.className=e.join(" ")}}function hide(c){add_class(c,"NotVisible")}function show(c){remove_class(c,"NotVisible")}function openWin(c,a){window.open(c,a,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(c,a){window.open(c,a,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(c,a){window.open(c,a,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(c){var a={sm:openWin,lg:openWinL,xl:openWinXL};c(document).on("click","a.poplink",function(){var b=c(this).data("popargs");(a[b.size||"sm"]||openWin)(this.href,b.name||"popwin");return!1})});
(function(){var c=jQuery,a={},b=function(b){null!==b&&"undefined"!==typeof b?c("#myListCount").text(b):(b=c("#myListCount").text())&&(b=parseInt(b,10));b?a.myListLink.show():a.myListLink.hide()},e=function(a){c.each(a,function(a,b){c("#added_to_list_"+b).show();c("#add_to_list_"+b).hide()})},d=function(d){return function(f){f.fail?alert(f.errinfo):(f.ids?b(c.grep(f.ids,m[a.domain]).length):f.count?b(f.count):b(0),e([d]))}},f=function(b){b=c(b.currentTarget).data("id");c.ajax({success:d(b),dataType:"json",
error:function(){alert("Error")},data:{id:b},type:"POST",url:a.current_list_url})},g=function(a){return function(b){if(b.fail)alert(b.errinfo);else{b=!0;if(a){var e=c("#results_table #remove_from_list_"+a);e.length?e.parent().parent().remove():(b=!1,e=c("#results_container #remove_from_list_"+a),e.parents(".dlist-result").remove())}e=!1;if((e=b?1===c("#results_table tr").length:0===c("#results_container .dlist-result").length)||!a)c("#records_ui").hide(),c("#no_records_message").show()}}},h=function(b){b=
c(b.currentTarget).data("id");c.ajax({success:g(b),dataType:"json",error:function(){alert("Error")},data:{ID:b,RemoveItem:a.domain},type:"POST",url:a.current_list_url})},k=function(b){c.ajax({success:g(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:a.domain},type:"POST",url:a.current_list_url})},m={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},n=function(d){if(d.fail)u();else if(d.inrequest){var f=c.grep(d.ids,
m[a.domain]);e(f);b(f.length);(d=d.previous_ids)&&c.each(d,function(a,b){c("#ct_added_to_previous_request_"+b).show()});c(".ListUI img").prop("src",function(a,b){return b.replace("list","referral")});c("#list_header_text").hide();c("#ct_header_text").show();a.current_list_url=a.ct_update_url;t()}else u()},u=function(){var d=function(){a.list_view_mode||e(a.already_added||[]);a.current_list_url=a.list_view_mode&&"ct"===a.list_view_mode?a.ct_update_url:a.list_update_url;b((a.already_added||[]).length);
t()};a.list_view_mode||a.has_session?d():c.ajax({dataType:"json",error:null,url:a.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&d()}})},t=function(){c(".HideListUI").delegate(".add_to_list","click",f).delegate(".remove_from_list","click",h).removeClass("HideListUI");c("#remove_all_from_list").click(k);c.browser.msie&&"8.0">c.browser.msie&&c(".ListUI").removeClass("FixIE")};window.init_list_adder=function(b){a=b;a.myListLink=c("#myListLink").parent(":hidden").add("#myListLink");
b.in_request?c.ajax({success:n,dataType:"json",error:null,type:"POST",url:b.in_request}):u()}})();this.JSON||(this.JSON={});
(function(){function c(a){return 10>a?"0"+a:a}function a(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(c,e){var d,h,s,w,v=f,y,p=e[c];p&&"object"===typeof p&&"function"===typeof p.toJSON&&(p=p.toJSON(c));"function"===typeof k&&(p=k.call(e,c,p));switch(typeof p){case "string":return a(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";f+=g;y=[];if("[object Array]"===Object.prototype.toString.apply(p)){w=p.length;for(d=0;d<w;d+=1)y[d]=b(d,p)||"null";s=0===y.length?"[]":f?"[\n"+f+y.join(",\n"+f)+"\n"+v+"]":"["+y.join(",")+"]";f=v;return s}if(k&&"object"===typeof k)for(w=k.length,d=0;d<w;d+=1)h=k[d],"string"===typeof h&&(s=b(h,p))&&y.push(a(h)+(f?": ":":")+s);else for(h in p)Object.hasOwnProperty.call(p,h)&&(s=b(h,p))&&y.push(a(h)+(f?": ":":")+s);s=0===y.length?"{}":f?"{\n"+f+y.join(",\n"+f)+"\n"+
v+"}":"{"+y.join(",")+"}";f=v;return s}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,e){var d;g=f="";if("number"===typeof e)for(d=0;d<e;d+=1)g+=" ";else"string"===typeof e&&(g=e);if((k=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,e){var d,f,h=a[e];if(h&&"object"===typeof h)for(d in h)Object.hasOwnProperty.call(h,d)&&(f=c(h,d),void 0!==f?h[d]=f:delete h[d]);return b.call(a,e,h)}var d;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(c){var a={};jQuery(c).find("input,select,textarea").each(function(b){if(this.name)if(a[this.name]||(a[this.name]=[]),"select"===this.nodeName.toLowerCase()){var c=a[this.name];$(this).find("option").each(function(a){this.selected&&c.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&a[this.name].push(this.value||"")});return a};window.restore_form_values=function(c,a){var b=jQuery;b(c).find("input,select,textarea").each(function(c){if(this.name){var d=
a[this.name];"undefined"!=typeof d&&null!==d&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?b(this).find("option").each(function(a){this.selected=1<d.length?0<=b.inArray(this.value,d):0===d.length?!1:this.value===d[0]}):this.value=d.length?d[0]:"":this.checked=1<d.length?0<=b.inArray(this.value,d):0===d.length?!1:this.value===d[0])}})};window.init_cached_state=function(c){var a=jQuery;c=c||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];a(window).on("beforeunload",function(){var b={form_values:get_form_values(c)};a.each(onbeforeunload_fns,function(a,c){c(b)});document.getElementById("cache_form_values").value=JSON.stringify(b)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var b=document.getElementById("cache_form_values");if(b&&b.value){var e=
JSON.parse(b.value);a.each(onbeforerestorevalues_fns,function(a,b){b(e)});restore_form_values(c,e.form_values)}}}})();
(function(){var c=jQuery,a={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},b={"en-CA":!0,"":!0},e={},d={"fr-CA":"fr","es-MX":"es"},f=function(){var b=c(this),e=b.data("culture"),d=a[e]||c.datepicker.regional[e].dateFormat,f={};b.hasClass("NoYear")&&(d=d.replace(/[\- .\/]*yy[\/]?/,""),f={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});f.dateFormat=d;b.datepicker(c.extend({},c.datepicker.regional[e],f)).prop("autocomplete","off")},g=function(a){c.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+c.ui.version+"/i18n/jquery.ui.datepicker-"+a+".min.js",function(){b[a]=!0;c.each(e[a],function(){f.call(this)});delete e[a]})};c.datepicker.regional["en-CA"]=c.extend({},c.datepicker.regional[""]);c.fn.extend({autodatepicker:function(){return this.each(function(){var a=
c(this),k;k=a.parents("[lang]").first().prop("lang")||"en-CA";k=d[k]||k;a.data("culture",k);b[k]?f.call(this):(a=e[k],a||(a=e[k]=[],g(k)),a.push(this))})}});jQuery(function(){c("input.DatePicker").autodatepicker()})})();
(function(c){function a(a){return a&&a.constructor===Number?a+"px":a}c.fn.bgiframe=c.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(b){b=c.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},b);var e='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+b.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==b.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==b.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
a(b.top))+";left:"+("auto"==b.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":a(b.left))+";width:"+("auto"==b.width?"expression(this.parentNode.offsetWidth+'px')":a(b.width))+";height:"+("auto"==b.height?"expression(this.parentNode.offsetHeight+'px')":a(b.height))+';"/>';return this.each(function(){0===c(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(e),this.firstChild)})}:function(){return this};c.fn.bgIframe=c.fn.bgiframe})(jQuery);
(function(c){c.extend(c.fn,{validate:function(a){if(this.length){var b=c.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new c.validator(a,this[0]);c.data(this[0],"validator",b);b.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){b.cancelSubmit=!0}),b.settings.submitHandler&&a.filter(":submit").click(function(){b.submitButton=this}),this.submit(function(a){function d(){if(b.settings.submitHandler){if(b.submitButton)var a=c("<input type='hidden'/>").attr("name",
b.submitButton.name).val(b.submitButton.value).appendTo(b.currentForm);b.settings.submitHandler.call(b,b.currentForm);b.submitButton&&a.remove();return!1}return!0}b.settings.debug&&a.preventDefault();if(b.cancelSubmit)return b.cancelSubmit=!1,d();if(b.form())return b.pendingRequest?(b.formSubmitted=!0,!1):d();b.focusInvalid();return!1}));return b}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(c(this[0]).is("form"))return this.validate().form();
var a=!0,b=c(this[0].form).validate();this.each(function(){a&=b.element(this)});return a},removeAttrs:function(a){var b={},e=this;c.each(a.split(/\s/),function(a,c){b[c]=e.attr(c);e.removeAttr(c)});return b},rules:function(a,b){var e=this[0];if(a){var d=c.data(e.form,"validator").settings,f=d.rules,g=c.validator.staticRules(e);switch(a){case "add":c.extend(g,c.validator.normalizeRule(b));f[e.name]=g;b.messages&&(d.messages[e.name]=c.extend(d.messages[e.name],b.messages));break;case "remove":if(!b)return delete f[e.name],
g;var h={};c.each(b.split(/\s/),function(a,b){h[b]=g[b];delete g[b]});return h}}e=c.validator.normalizeRules(c.extend({},c.validator.metadataRules(e),c.validator.classRules(e),c.validator.attributeRules(e),c.validator.staticRules(e)),e);e.required&&(d=e.required,delete e.required,e=c.extend({required:d},e));return e}});c.extend(c.expr[":"],{blank:function(a){return!c.trim(""+a.value)},filled:function(a){return!!c.trim(""+a.value)},unchecked:function(a){return!a.checked}});c.validator=function(a,b){this.settings=
c.extend(!0,{},c.validator.defaults,a);this.currentForm=b;this.init()};c.validator.format=function(a,b){if(1==arguments.length)return function(){var b=c.makeArray(arguments);b.unshift(a);return c.validator.format.apply(this,b)};2<arguments.length&&b.constructor!=Array&&(b=c.makeArray(arguments).slice(1));b.constructor!=Array&&(b=[b]);c.each(b,function(b,c){a=a.replace(new RegExp("\\{"+b+"\\}","g"),c)});return a};c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a,b){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,b){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,
b){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a,b){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,b,e){"radio"===a.type?this.findByName(a.name).addClass(b).removeClass(e):c(a).addClass(b).removeClass(e)},unhighlight:function(a,b,e){"radio"===a.type?this.findByName(a.name).removeClass(b).addClass(e):c(a).removeClass(b).addClass(e)}},setDefaults:function(a){c.extend(c.validator.defaults,
a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:c.validator.format("Please enter no more than {0} characters."),
minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(a){var b=c.data(this[0].form,"validator"),e="on"+a.type.replace(/^validate/,
"");b.settings[e]&&b.settings[e].call(b,this[0],a)}this.labelContainer=c(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm);this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.groups={};c.each(this.settings.groups,function(a,e){c.each(e.split(/\s/),function(c,e){b[e]=a})});var e=
this.settings.rules;c.each(e,function(a,b){e[a]=c.validator.normalizeRule(b)});c(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",
a);this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();c.extend(this.submitted,this.errorMap);this.invalid=c.extend({},this.errorMap);this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=
a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=c(a);var b=this.check(a);b?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return b},showErrors:function(a){if(a){c.extend(this.errorMap,a);this.errorList=[];for(var b in a)this.errorList.push({message:a[b],element:this.findByName(b)[0]});this.successList=c.grep(this.successList,function(b){return!(b.name in a)})}this.settings.showErrors?
this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,c;for(c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==c.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=this,b={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in b||!a.objectLength(c(this).rules())?!1:b[this.name]=!0})},clean:function(a){return c(a)[0]},errors:function(){return c(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=c([]);this.toHide=c([]);this.currentElements=c([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var b=c(a).rules(),e=!1,d;for(d in b){var f={method:d,parameters:b[d]};try{var g=c.validator.methods[d].call(this,a.value.replace(/\r/g,""),a,f.parameters);if("dependency-mismatch"==g)e=!0;else{e=!1;if("pending"==g){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!g)return this.formatAndAdd(a,f),!1}}catch(h){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+
a.id+", check the '"+f.method+"' method",h),h;}}if(!e)return this.objectLength(b)&&this.successList.push(a),!0},customMetaMessage:function(a,b){if(c.metadata){var e=this.settings.meta?c(a).metadata()[this.settings.meta]:c(a).metadata();return e&&e.messages&&e.messages[b]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,
b){return this.findDefined(this.customMessage(a.name,b),this.customMetaMessage(a,b),!this.settings.ignoreTitle&&a.title||void 0,c.validator.messages[b],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters));this.errorList.push({message:c,element:a});this.errorMap[a.name]=c;this.submitted[a.name]=
c},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);
if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(a,b){var e=this.errorsFor(a);e.length?(e.removeClass(this.settings.validClass).addClass(this.settings.errorClass),
e.attr("generated")&&e.html(b)):(e=c("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(b||""),this.settings.wrapper&&(e=e.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(e).length||(this.settings.errorPlacement?this.settings.errorPlacement(e,c(a)):e.insertAfter(a)));!b&&this.settings.success&&(e.text(""),"string"==typeof this.settings.success?e.addClass(this.settings.success):this.settings.success(e));
this.toShow=this.toShow.add(e)},errorsFor:function(a){var b=this.idOrName(a);return this.errors().filter(function(){return c(this).attr("for")==b})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var b=this.currentForm;return c(document.getElementsByName(a)).map(function(c,
d){return d.form==b&&d.name==a&&d||null})},getLength:function(a,b){switch(b.nodeName.toLowerCase()){case "select":return c("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a,b){return a},string:function(a,b){return!!c(a,b.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!c.validator.methods.required.call(this,
c.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,b){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];b&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!b&&0==this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(a){return c.data(a,"previousValue")||c.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,b){a.constructor==String?this.classRuleSettings[a]=b:c.extend(this.classRuleSettings,a)},classRules:function(a){var b=
{};(a=c(a).attr("class"))&&c.each(a.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(b,c.validator.classRuleSettings[this])});return b},attributeRules:function(a){var b={};a=c(a);for(var e in c.validator.methods){var d;(d="required"===e&&"function"===typeof c.fn.prop?a.prop(e):a.attr(e))?b[e]=d:a[0].getAttribute("type")===e&&(b[e]=!0)}b.maxlength&&/-1|2147483647|524288/.test(b.maxlength)&&delete b.maxlength;return b},metadataRules:function(a){if(!c.metadata)return{};var b=c.data(a.form,
"validator").settings.meta;return b?c(a).metadata()[b]:c(a).metadata()},staticRules:function(a){var b={},e=c.data(a.form,"validator");e.settings.rules&&(b=c.validator.normalizeRule(e.settings.rules[a.name])||{});return b},normalizeRules:function(a,b){c.each(a,function(e,d){if(!1===d)delete a[e];else if(d.param||d.depends){var f=!0;switch(typeof d.depends){case "string":f=!!c(d.depends,b.form).length;break;case "function":f=d.depends.call(b,b)}f?a[e]=void 0!==d.param?d.param:!0:delete a[e]}});c.each(a,
function(e,d){a[e]=c.isFunction(d)?d(b):d});c.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});c.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});c.validator.autoCreateRanges&&(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==
typeof a){var b={};c.each(a.split(/\s/),function(){b[this]=!0});a=b}return a},addMethod:function(a,b,e){c.validator.methods[a]=b;c.validator.messages[a]=void 0!=e?e:c.validator.messages[a];3>b.length&&c.validator.addClassRules(a,c.validator.normalizeRule(a))},methods:{required:function(a,b,e){if(!this.depend(e,b))return"dependency-mismatch";switch(b.nodeName.toLowerCase()){case "select":return(a=c(b).val())&&0<a.length;case "input":if(this.checkable(b))return 0<this.getLength(a,b);default:return 0<
c.trim(a).length}},remote:function(a,b,e){if(this.optional(b))return"dependency-mismatch";var d=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});d.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=d.message;e="string"==typeof e&&{url:e}||e;if(this.pending[b.name])return"pending";if(d.old===a)return d.valid;d.old=a;var f=this;this.startRequest(b);var g={};g[b.name]=a;c.ajax(c.extend(!0,{url:e,mode:"abort",port:"validate"+
b.name,dataType:"json",data:g,success:function(e){f.settings.messages[b.name].remote=d.originalMessage;var g=!0===e;if(g){var m=f.formSubmitted;f.prepareElement(b);f.formSubmitted=m;f.successList.push(b);f.showErrors()}else m={},e=e||f.defaultMessage(b,"remote"),m[b.name]=d.message=c.isFunction(e)?e(a):e,f.showErrors(m);d.valid=g;f.stopRequest(b,g)}},e));return"pending"},minlength:function(a,b,e){return this.optional(b)||this.getLength(c.trim(a),b)>=e},maxlength:function(a,b,e){return this.optional(b)||
this.getLength(c.trim(a),b)<=e},rangelength:function(a,b,e){a=this.getLength(c.trim(a),b);return this.optional(b)||a>=e[0]&&a<=e[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;var c=0,d=0,f=!1;a=a.replace(/\D/g,"");for(var g=a.length-1;0<=g;g--)d=
a.charAt(g),d=parseInt(d,10),f&&9<(d*=2)&&(d-=9),c+=d,f=!f;return 0==c%10},accept:function(a,b,c){c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},equalTo:function(a,b,e){e=c(e).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(b).valid()});return a==e.val()}}});c.format=c.validator.format})(jQuery);
(function(c){var a={};if(c.ajaxPrefilter)c.ajaxPrefilter(function(b,c,f){c=b.port;"abort"==b.mode&&(a[c]&&a[c].abort(),a[c]=f)});else{var b=c.ajax;c.ajax=function(e){var d=("port"in e?e:c.ajaxSettings).port;return"abort"==("mode"in e?e:c.ajaxSettings).mode?(a[d]&&a[d].abort(),a[d]=b.apply(this,arguments)):b.apply(this,arguments)}}})(jQuery);
(function(c){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||c.each({focus:"focusin",blur:"focusout"},function(a,b){function e(a){a=c.event.fix(a);a.type=b;return c.event.handle.call(this,a)}c.event.special[b]={setup:function(){this.addEventListener(a,e,!0)},teardown:function(){this.removeEventListener(a,e,!0)},handler:function(a){arguments[0]=c.event.fix(a);arguments[0].type=b;return c.event.handle.apply(this,arguments)}}});c.extend(c.fn,{validateDelegate:function(a,
b,e){return this.bind(b,function(b){var f=c(b.target);if(f.is(a))return e.apply(f,arguments)})}})})(jQuery);
(function(c,a){"$:nomunge";var b=c.jQuery||c.Cowboy||(c.Cowboy={}),e;b.throttle=e=function(c,e,g,h){function k(){function b(){n=+new Date;g.apply(s,v)}function k(){m=a}var s=this,w=+new Date-n,v=arguments;h&&!m&&b();m&&clearTimeout(m);h===a&&w>c?b():!0!==e&&(m=setTimeout(h?k:b,h===a?c-w:c))}var m,n=0;"boolean"!==typeof e&&(h=g,g=e,e=a);b.guid&&(k.guid=g.guid=g.guid||b.guid++);return k};b.debounce=function(b,c,g){return g===a?e(b,c,!1):e(b,g,!1!==c)}})(this);
(function(){function c(a){function b(b,d){var g,q,x=b==window,r=d&&void 0!==d.message?d.message:void 0;d=a.extend({},a.blockUI.defaults,d||{});if(!d.ignoreIfBlocked||!a(b).data("blockUI.isBlocked")){d.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,d.overlayCSS||{});g=a.extend({},a.blockUI.defaults.css,d.css||{});d.onOverlayClick&&(d.overlayCSS.cursor="pointer");q=a.extend({},a.blockUI.defaults.themedCSS,d.themedCSS||{});r=void 0===r?d.message:r;x&&s&&c(window,{fadeOut:0});if(r&&"string"!=typeof r&&
(r.parentNode||r.jquery)){var z=r.jquery?r[0]:r,l={};a(b).data("blockUI.history",l);l.el=z;l.parent=z.parentNode;l.display=z.style.display;l.position=z.style.position;l.parent&&l.parent.removeChild(z)}a(b).data("blockUI.onUnblock",d.onUnblock);var l=d.baseZ,A;A=n||d.forceIframe?a('<iframe class="blockUI" style="z-index:'+l++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+d.iframeSrc+'"></iframe>'):a('<div class="blockUI" style="display:none"></div>');
z=d.theme?a('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+l++ +';display:none"></div>'):a('<div class="blockUI blockOverlay" style="z-index:'+l++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');d.theme&&x?(l='<div class="blockUI '+d.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:fixed">',d.title&&(l+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+
(d.title||"&nbsp;")+"</div>"),l+='<div class="ui-widget-content ui-dialog-content"></div></div>'):d.theme?(l='<div class="blockUI '+d.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(l+10)+';display:none;position:absolute">',d.title&&(l+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+"</div>"),l+='<div class="ui-widget-content ui-dialog-content"></div>',l+="</div>"):l=x?'<div class="blockUI '+d.blockMsgClass+' blockPage" style="z-index:'+
(l+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+d.blockMsgClass+' blockElement" style="z-index:'+(l+10)+';display:none;position:absolute"></div>';l=a(l);r&&(d.theme?(l.css(q),l.addClass("ui-widget-content")):l.css(g));d.theme||z.css(d.overlayCSS);z.css("position",x?"fixed":"absolute");(n||d.forceIframe)&&A.css("opacity",0);g=[A,z,l];var E=x?a("body"):a(b);a.each(g,function(){this.appendTo(E)});d.theme&&d.draggable&&a.fn.draggable&&l.draggable({handle:".ui-dialog-titlebar",cancel:"li"});
q=t&&(!a.support.boxModel||0<a("object,embed",x?null:b).length);if(u||q){x&&d.allowBodyStretch&&a.support.boxModel&&a("html,body").css("height","100%");if((u||!a.support.boxModel)&&!x){q=parseInt(a.css(b,"borderTopWidth"),10)||0;var B=parseInt(a.css(b,"borderLeftWidth"),10)||0,C=q?"(0 - "+q+")":0,D=B?"(0 - "+B+")":0}a.each(g,function(a,b){var c=b[0].style;c.position="absolute";if(2>a)x?c.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+
d.quirksmodeOffsetHack+') + "px"'):c.setExpression("height",'this.parentNode.offsetHeight + "px"'),x?c.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):c.setExpression("width",'this.parentNode.offsetWidth + "px"'),D&&c.setExpression("left",D),C&&c.setExpression("top",C);else if(d.centerY)x&&c.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),
c.marginTop=0;else if(!d.centerY&&x){var e="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(d.css&&d.css.top?parseInt(d.css.top,10):0)+') + "px"';c.setExpression("top",e)}})}r&&(d.theme?l.find(".ui-widget-content").append(r):l.append(r),(r.jquery||r.nodeType)&&a(r).show());(n||d.forceIframe)&&d.showOverlay&&A.show();d.fadeIn?(g=d.onBlock?d.onBlock:m,A=d.showOverlay&&!r?g:m,g=r?g:m,d.showOverlay&&z._fadeIn(d.fadeIn,A),r&&l._fadeIn(d.fadeIn,
g)):(d.showOverlay&&z.show(),r&&l.show(),d.onBlock&&d.onBlock.bind(l)());f(1,b,d);x?(s=l[0],w=a(d.focusableElements,s),d.focusInput&&setTimeout(h,20)):k(l[0],d.centerX,d.centerY);d.timeout&&(r=setTimeout(function(){x?a.unblockUI(d):a(b).unblock(d)},d.timeout),a(b).data("blockUI.timeout",r))}}function c(b,e){var g,h=b==window,k=a(b),m=k.data("blockUI.history"),n=k.data("blockUI.timeout");n&&(clearTimeout(n),k.removeData("blockUI.timeout"));e=a.extend({},a.blockUI.defaults,e||{});f(0,b,e);null===e.onUnblock&&
(e.onUnblock=k.data("blockUI.onUnblock"),k.removeData("blockUI.onUnblock"));var l;l=h?a("body").children().filter(".blockUI").add("body > .blockUI"):k.find(">.blockUI");e.cursorReset&&(1<l.length&&(l[1].style.cursor=e.cursorReset),2<l.length&&(l[2].style.cursor=e.cursorReset));h&&(s=w=null);e.fadeOut?(g=l.length,l.stop().fadeOut(e.fadeOut,function(){0===--g&&d(l,m,e,b)})):d(l,m,e,b)}function d(b,c,e,d){var f=a(d);if(!f.data("blockUI.isBlocked")){b.each(function(a,b){this.parentNode&&this.parentNode.removeChild(this)});
c&&c.el&&(c.el.style.display=c.display,c.el.style.position=c.position,c.el.style.cursor="default",c.parent&&c.parent.appendChild(c.el),f.removeData("blockUI.history"));f.data("blockUI.static")&&f.css("position","static");if("function"==typeof e.onUnblock)e.onUnblock(d,e);b=a(document.body);c=b.width();e=b[0].style.width;b.width(c-1).width(c);b[0].style.width=e}}function f(b,c,e){var d=c==window;c=a(c);if(b||(!d||s)&&(d||c.data("blockUI.isBlocked")))c.data("blockUI.isBlocked",b),d&&e.bindEvents&&(!b||
e.showOverlay)&&(b?a(document).bind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",e,g):a(document).unbind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",g))}function g(b){if("keydown"===b.type&&b.keyCode&&9==b.keyCode&&s&&b.data.constrainTabKey){var c=w,e=b.shiftKey&&b.target===c[0];if(!b.shiftKey&&b.target===c[c.length-1]||e)return setTimeout(function(){h(e)},10),!1}var c=b.data,d=a(b.target);if(d.hasClass("blockOverlay")&&c.onOverlayClick)c.onOverlayClick(b);
return 0<d.parents("div."+c.blockMsgClass).length?!0:0===d.parents().children().filter("div.blockUI").length}function h(a){w&&(a=w[!0===a?w.length-1:0])&&a.focus()}function k(b,c,e){var d=b.parentNode,f=b.style,g=(d.offsetWidth-b.offsetWidth)/2-(parseInt(a.css(d,"borderLeftWidth"),10)||0);b=(d.offsetHeight-b.offsetHeight)/2-(parseInt(a.css(d,"borderTopWidth"),10)||0);c&&(f.left=0<g?g+"px":"0");e&&(f.top=0<b?b+"px":"0")}a.fn._fadeIn=a.fn.fadeIn;var m=a.noop||function(){},n=/MSIE/.test(navigator.userAgent),
u=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),t=a.isFunction(document.createElement("div").style.setExpression);a.blockUI=function(a){b(window,a)};a.unblockUI=function(a){c(window,a)};a.growlUI=function(b,c,e,d){var f=a('<div class="growlUI"></div>');b&&f.append("<h1>"+b+"</h1>");c&&f.append("<h2>"+c+"</h2>");void 0===e&&(e=3E3);var g=function(b){b=b||{};a.blockUI({message:f,fadeIn:"undefined"!==typeof b.fadeIn?b.fadeIn:700,fadeOut:"undefined"!==typeof b.fadeOut?b.fadeOut:
1E3,timeout:"undefined"!==typeof b.timeout?b.timeout:e,centerY:!1,showOverlay:!1,onUnblock:d,css:a.blockUI.defaults.growlCSS})};g();f.css("opacity");f.mouseover(function(){g({fadeIn:0,timeout:3E4});var b=a(".blockMsg");b.stop();b.fadeTo(300,1)}).mouseout(function(){a(".blockMsg").fadeOut(1E3)})};a.fn.block=function(c){if(this[0]===window)return a.blockUI(c),this;var e=a.extend({},a.blockUI.defaults,c||{});this.each(function(){var b=a(this);e.ignoreIfBlocked&&b.data("blockUI.isBlocked")||b.unblock({fadeOut:0})});
return this.each(function(){"static"==a.css(this,"position")&&(this.style.position="relative",a(this).data("blockUI.static",!0));this.style.zoom=1;b(this,c)})};a.fn.unblock=function(b){return this[0]===window?(a.unblockUI(b),this):this.each(function(){c(this,b)})};a.blockUI.version=2.7;a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",
cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1E3,centerX:!0,centerY:!0,
allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var s=null,w=[]}"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],c):c(jQuery)})();
(function(){var c=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=c;var a=function(a,b,f,g,h){f=f||"value";g=g||"";h=h||"";return function(k,m){if(b.term&&(new RegExp(g+a.ui.autocomplete.escapeRegex(b.term)+h,"i")).test(k.term)&&b.content&&13>b.content.length){var n=new RegExp(g+a.ui.autocomplete.escapeRegex(k.term)+h,"i");m(a.grep(b.content,function(a){return n.test(c(a[f]))}));return!0}return!1}};window.default_cache_search_fn=a;var b=function(b,d,f,g,h){f=f||{};h=h||a(b,f,g||"value");
return function(a,g,n){a.term=c(a.term);f.term===a.term&&f.content?g(f.content):h(a,g)||b.ajax({url:n||d,dataType:"json",data:a,cache:!1,success:function(b){f.term=a.term;f.content=b;g(b)}})}};window.create_caching_source_fn=b;window.init_community_autocomplete=function(a,d,f,g,h){var k={};h&&(h=a(h));h&&!h.length&&(h=null);var m=a("#"+d).autocomplete({focus:function(a,b){return!1},select:function(a,b){m.data({chkid:b.item.chkid,display:b.item.value})},source:b(a,f,k),minLength:g}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),m.autocomplete("close"))});h&&(m.parents("form").on("submit",function(){var b=m.val();if(m.data("display")===b)h.val(m.data("chkid"));else{if(k.content){var d=c(b),b=a.grep(k.content,function(a){return c(a.value)===d});if(1===b.length){h.val(b[0].chkid);m.data({chkid:b[0].chkid,display:b[0].value}).val(b[0].value);return}}h.val("")}}),cache_register_onbeforerestorevalues(function(a){m.length&&(a=a["autocomplete_data_"+m[0].id])&&m.data(a)}),cache_register_onbeforeunload(function(a){if(m.length){var b=
m.data();b.display&&b.chkid&&(a["autocomplete_data_"+m[0].id]={display:b.display,chkid:b.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(a,c,d,f){cache_register_onbeforeunload(function(a){a[c+"_added"]=d});cache_register_onbeforerestorevalues(function(d){(d=d[c+"_added"])&&a.each(d,function(a,b){f(b.chkid,b.display,"")})})};window.basic_chk_add_html=function(a,c){return function(d,f){var g=a("<tr>").append(a("<td>").append(a("<input>").prop({id:c+"_ID_"+d,type:"checkbox",checked:!0,defaultChecked:!0,name:c+"_ID",value:d})).append(document.createTextNode(" "+
f))).append(a("<td>").append(a("<input>").prop({id:c+"_NOTES_"+d,name:c+"_NOTES_"+d,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));a("#"+c+"_existing_add_table").append(g);return g.find('input[type="checkbox"]')[0]}};var c={},a=function(a){$("#NEW_"+a).autocomplete(c[a])};window.init_autocomplete_checklist=function(b,e){var d=e.field;if(!c[d]){var f=e.source;e.minLength=e.minLength||1;e.delay=e.delay||300;e.add_new_html=e.add_new_html||basic_chk_add_html(b,d);e.match_prop=
e.match_prop||"value";e.txt_not_found=e.txt_not_found||"Not Found";var g=b(e.delegate_root||document),h=e.added_values||[],k=function(a,b,c){var f=document.getElementById(d+"_ID_"+a);f?(f.checked=!0,e.after_add_new_value&&e.after_add_new_value.call(f)):(h.push({chkid:a,display:b,label:c}),a=e.add_new_html(a,b,c),e.after_add_new_value&&e.after_add_new_value.call(a))};create_checklist_onbefore_fns(b,d,h,k);var m={},n=function(a){b("#NEW_"+d).data({chkid:"",display:"",label:""}).prop("value","").focus();
b("#"+d+"_error").hide("slow",function(){b(this).remove()})},u=null,t=null;(function(a){b.isArray(a)?(t=function(c,d){var f=new RegExp(b.ui.autocomplete.escapeRegex(string_ci_ai(c.term)));d(b.grep(a,function(a){return f.test(string_ci_ai(a[e.match_prop]||a))}))},u=function(c,d){var f=string_ci_ai(c),g=b.grep(a,function(a){return string_ci_ai(string_ci_ai(a[e.match_prop]||a))===f});if(1===g.length)return d(g[0]),!0;d()}):"string"===typeof a?(t=create_caching_source_fn(b,a,m,e.match_prop),u=function(a,
c,d){var f=string_ci_ai(a);if(m.content){var g=b.grep(m.content,function(a){return string_ci_ai(a[e.match_prop])===f});if(1===g.length){c(g[0]);return}}d||string_ci_ai(m.term||"")===f?c():t({term:f},function(b){u(a,c,!0)})}):(t=a,u=e.look_for_fn)})(f);g.on("click","#add_"+d,function(a){a=b("#NEW_"+d);var c=a.data("chkid"),f=a.data("display"),g=a.data("label"),h=a[0].value;if(c&&f&&f==h)return k(c,f,g),n(),!1;u(a[0].value,function(a){a?(k(a.chkid,a.value,a.label),n()):0===b("#"+d+"_error").length&&
(b("#"+d+"_new_input_table").before(b("<p>").hide().addClass("Alert").prop("id",d+"_error").append(document.createTextNode(e.txt_not_found))),b("#"+d+"_error").show("slow"))});return!1});c[d]={focus:function(a,b){return!1},source:t,minLength:e.minLength,delay:e.delay,select:function(a,c){b("#NEW_"+d).data({chkid:c.item.chkid,display:c.item.value,label:c.item.label})}};g.on("keypress","#NEW_"+d,function(a){"13"==a.keyCode&&(a.preventDefault(),b("#NEW_"+d).autocomplete("close"),b("#add_"+d).trigger("click"))})}a(d)};
window.init_languages=function(a,c){var d=null,f=null,g=a("#LN_existing_add_table"),h=function(){var c=a(this).parents(".language-entry").find(".language-details-notes");this.checked?c.slideDown():c.slideUp()};init_autocomplete_checklist(a,{field:"LN",source:entryform.languages_source,txt_not_found:c,after_add_new_value:h,add_new_html:function(c,e){null===d&&(d=a("#add_LN"),f=d.data("newTemplate"));var h=f.replace(/LANGNAMELANGNAME/g,e).replace(/IDIDID/g,c);g.append(h)}});g.on("change",".language-primary",
h).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+a(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(c,d){a(this).css(c);a("<div>").addClass("arrow").addClass(d.vertical).addClass(d.horizontal).appendTo(this)}}});window.languages_check_state=h}})();
(function(){jQuery.fn.autoShorten=function(a,b,c){return this.each(function(){a=a||350;b=b||"[read more]";c=c||"[less]";var d=$(this),e=d.html();if(e.length>a){var n=e.substring(0,a).split(" "),n=$("<div>").html(n.slice(0,n.length-1).join(" ")+" ").append('<span class="ellipse-toggle SimulateLink">&hellip; '+b+"</span>").html();$(this).data("replacementText",e+' <span class="ellipse-toggle SimulateLink">'+c+"</span>").html(n).on("click","span.ellipse-toggle",function(){var a=d.html();d.html(d.data("replacementText"));
d.data("replacementText",a)})}})};var c=function(a,b,c){c=c||b+"_ID";return function(d,e){var n=a("#add_"+b).parent(),u=n.parent(),t=u.prev("tr"),n=parseInt(n.prop("colspan"),10),s=t.find("td").length;t.length&&n!==s||(t=a("<tr>").insertBefore(u));t.append(a("<td>").append(a("<label>").text(" "+e).prepend(a('<input type="checkbox" checked>').prop({id:b+"_ID_"+d,value:d,name:c}))))}},a=function(a,b){init_autocomplete_checklist($,{source:a,field:"reminder_user",add_new_html:c($,"reminder_user"),txt_not_found:b})},
b=function(){$(document).on("click","#add_reminder_agency",function(a){a.preventDefault();a=$("#NEW_reminder_agency");var b=c($,"reminder_agency"),d=a[0].value;if(d){var e=$("#reminder_agency_ID_"+d);e.length?e.prop("checked",!0):b(d,d);a.find("option").first().prop({selected:!0})}return!1});$.each(["NUM","VNUM"],function(a,b){$(document).on("click","#add_"+b,function(a){a.preventDefault();a=$("#NEW_"+b);var d=c($,b,b),e=a[0].value;if(e){var f=$("#"+b+"_ID_"+e);f.length?f.prop("checked",!0):d(e,e)}a[0].value=
"";return!1}).on("keypress","#NEW_"+b,function(a){13===a.keyCode&&(a.preventDefault(),$("#add_"+b).trigger("click"))})})},e=function(){$(".reminder-section").each(function(){$(this).find(".reminder-item:not(.dismissed)").length||$(this).hide()})},d=function(a,b,c){$("#reminder-items-inactive").hide();e();$("#reminder-header-inactive").addClass("SimulateLink").prepend($('<span class="ui-icon ui-icon-triangle-1-e" style="display: inline-block">'));$("#reminder-add-link, #reminder-show-dismissed, #show-closed-notices").uibutton();
$("#existing-reminders-page").addClass("hide-dismissed").find(".dismissed").length||$("#reminder-dismiss-ui").hide();a.find(".AutoShorten").autoShorten(null,b,c)};window.initialize_reminders=function(c,g,h,k,m,n,u,t,s,w){var v=null;a(g,w);b();d($("#existing-reminders-page"),n,u);var y=$("#existing-reminders-page").on("click","#reminder-header-inactive",function(){var a=$("#reminder-items-inactive"),b=$(this).find("span.ui-icon");a.is(":hidden")?(a.slideDown("slow"),b.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s")):
(a.slideUp("slow"),b.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e"))}).on("click","#reminder-show-dismissed",function(){this.checked?(y.removeClass("hide-dismissed"),$(".reminder-section").show()):(y.addClass("hide-dismissed"),e())}).uitooltip({items:"span.details-link",content:function(){return $(this).data("tooltip")}}).on("click",".dismiss-reminder,.restore-reminder",function(){var a=$(this),b=a.is(".dismiss-reminder"),c=a.data("reminderId");$.when($.ajax(k.replace("IDIDID",
c),{dataType:"json",type:"post",cache:!1,data:{dismiss:b?"on":null,json_api:"on"}})).done(function(b){if(b.success){var c=a.parents("tr").first();b.dismissed?(c.addClass("dismissed"),$("#reminder-dismiss-ui").show()):(c.removeClass("dismissed"),$("#existing-reminders-page .dismissed").length||$("#reminder-dismiss-ui").hide())}})}),p=$("#reminders").click(function(){var a=$("#existing-reminders-page").empty().text(t);$.when($.ajax(h,{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(b){b.success?
(a[0].innerHTML=b.reminders,d(a,n,u),v.height()>$(window).height()-10&&v.dialog("option","height",$(window).height()-10),v.dialog("option","position","center")):v.empty().append($('<p class="Alert"></p>').text(b.ErrMsg))});v?(v.dialog("option","height","auto"),v.dialog("open")):(v=$("#reminder-dialog").dialog({title:c,width:500,maxHeight:$(window).height()-10,open:function(){$(this).dialog({position:"center"})}}),$(window).resize($.throttle(250,function(){v.dialog("option","maxHeight",$(this).height()-
10)})))}),q=null;$("#reminder-dialog").on("click",".edit-link",function(b){b.preventDefault();$("#reminder-edit-dialog").empty().text(t);$.when($.ajax(this.href,{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(b){b.success?(q[0].innerHTML=b.form,q.find(".DatePicker").autodatepicker(),a(g),q.dialog("option","position","center")):q.empty().append($('<p class="Alert"></p>').text(b.ErrMsg))});q?q.dialog("open"):q=$("#reminder-edit-dialog").dialog({width:"auto",height:"auto"});
return!1});$("#reminder-edit-dialog").on("submit","form",function(b){b.preventDefault();b=$(this);$.when($.ajax(b.prop("action"),{dataType:"json",data:b.serialize(),type:b.prop("method")})).done(function(b){b.success?(p.trigger("click"),q.dialog("close")):(q[0].innerHTML=b.form,q.find(".DatePicker").autodatepicker(),a(g))});return!1}).on("click","#delete-reminder",function(a){a.preventDefault();$("#reminder-edit-dialog").empty().text(t);$.when($.ajax(s.replace("IDIDID",$(this).data("reminderId")),
{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(a){a.success?(q[0].innerHTML=a.form,q.dialog("option","position","center")):q.empty().append($('<p class="Alert"></p>').text(a.ErrMsg))});return!1})}})();
(function(){var c=null,a=null,b=function(){var b=new google.maps.LatLng(a.attr("latitude"),a.attr("longitude")),d={center:b,zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP},b=new google.maps.Marker({position:b});a.show();c=new google.maps.Map(a[0],d);b.setMap(c)};window.initialize_record_maps=function(c,d){window.draw_map=b;a=$("#map_canvas");a.length&&$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+c+"&sensor=false&callback=draw_map&language="+d)}})();
(function(){var c={},a=jQuery,b=null,e={},d={},f="",g=function(){var b=a(this);b.uibutton({icons:{primary:b.data("icon")},text:!1})},h=function(d){b=b.map(function(){return 0<=d.indexOf(a(this).data("vutId"))?this:null});b.each(function(){var b=a(this),d=b.data("vutId");b.data("uiAdded")||(b.data("uiAdded",!0),a('<span class="vacancy-ui vacancy-buttonset"><button class="vacancy-edit" id="vacancy-edit-'+d+'" data-vut-id="'+d+'" title="'+c.edit_txt+'" data-icon="ui-icon-pencil">'+c.edit_txt+'</button><button class="vacancy-history" data-icon="ui-icon-note" data-vut-id="'+
d+'" title="'+c.history_txt+'">'+c.history_txt+"</button></span>").buttonset().insertAfter(b).find("button").each(g))})},k=function(b,c,d){c=a('<div class="alert alert-dismissable '+c+'" style="display: none"></div>').text(d).append('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');d=b.children().first();d.length?d.before(c):b.append(c);c.slideDown("slow")},m=function(b){a.each(b,function(b,c){a("#vacancy-count-"+c.bt_vut_id).text(c.text)})},
n=function(a,b,c,d){return function(a){c.unblock();a.updates&&m(a.updates);k(d,(a.success?"alert-highlight":"alert-error")+" vacancy-notification",a.msg)}},u=function(a,b,d,e){return function(a,b){d.unblock();k(e,"alert-error vacancy-notification",c.server_error_txt+("error"!==b?b:a.statusText))}},t,s=function(){f&&(t&&clearTimeout(t),t=setTimeout(w,15E3))},w=function(){t=null;a.ajax({dataType:"json",url:c.refresh_url,cache:!1,data:{ids:f}}).done(function(a){a.success&&m(a.updates)}).always(s)},v=
function(b,d){var e=d.parent().block({message:null}),f=d.data("vutId"),g=e.find(".vacancy-count"),h=e.find(".vacancy-notify-area");h.length||(h=a('<div class="vacancy-notify-area alert-stack"></div>'),h.appendTo(e));a.ajax({dataType:"json",url:c.increment_url,type:"POST",data:{BT_VUT_ID:f,Value:b}}).done(n(f,g,e,h)).fail(u(f,g,e,h))},y=function(){if(c.permission_url){b=a(".vacancy-count");var d=b.map(function(){return a(this).data("vutId")}).get();if(f=d=d.join())a.ajax({dataType:"json",url:c.permission_url,
cache:!1,data:{ids:d}}).done(h),s()}},p=null,q=function(){p||(p=a('<div id="vacancy-dialog" style="display:none;"></div>').appendTo(a("body")).dialog({autoOpen:!1,closeText:c.close_txt,title:c.history_title_txt,minWidth:500}));return p},x=function(b,c){var d=a('<p class="Alert"></p>').text(c);b.empty().append(d)},r=function(a){var b=q();a.success?b.empty().html(a.content):x(b,a.content);b.dialog("option","title",a.title)},z=function(a,b){var d=q();x(d,c.server_error_txt+("error"!==b?b:a.statusText))},
l=function(){a(document).on("click",".vacancy-edit",function(b){b.preventDefault();b.stopPropagation();b=a(this);var f=b.data("vutId"),h=b.parent(),k=e[f];k||(k=a('<span class="vacancy-incrementer-ui vacancy-buttonset" style="display: none;" id="vacancy-incrementer-'+f+'" data-vut-id="'+f+'"><button class="vacancy-incrementer-up" data-icon="ui-icon-plusthick">'+c.up_txt+'</button><button class="vacancy-incrementer-down" data-icon="ui-icon-minusthick">'+c.down_txt+'</button><button class="vacancy-incrementer-done" data-icon="ui-icon-check">'+
c.done_txt+"</button></span>").buttonset().insertAfter(h),k.find("button").each(g),d[f]=h);b.parent().hide();k.show()}).on("click",".vacancy-incrementer-done",function(b){b.preventDefault();b.stopPropagation();b=a(this).parent();var c=b.data("vutId"),c=d[c];b.hide();c.show();var e=b.parent().parent().find(".vacancy-notify-area");e.slideUp("fast",function(){e.remove()})}).on("click",".vacancy-incrementer-up",function(b){b.preventDefault();b.stopPropagation();v(1,a(this).parent())}).on("click",".vacancy-incrementer-down",
function(b){b.preventDefault();b.stopPropagation();v(-1,a(this).parent())}).on("click",".vacancy-history",function(b){b.preventDefault();b.stopPropagation();b=a(this).data("vutId");q().html('<p class="Info">'+c.loading_txt+"</p>").dialog("close").dialog("open").dialog("option","title",c.history_title_txt);a.ajax({dataType:"json",url:c.history_url,cache:!1,data:{BT_VUT_ID:b}}).done(r).fail(z)}).on("click",".close",function(b){b.preventDefault();b.stopPropagation();b=a(this);var c=b.parents("."+b.data("dismiss")).first();
c.slideUp("slow",function(){c.remove()})})};window.initialize_vacancy=function(a){c=a;y();l()};window.initialize_vacancy_options=function(a){c=a};window.initialize_vacancy_ui=y;window.initialize_vacancy_events=l})();
(function(){var c=function(){$(".agency-overview").each(function(){$(this).find(".related-row:visible").last().addClass("last-visible")})};window.initialize_listing_toggle=function(a,b,e,d){$(document).on("click",".show-toggle",function(){var c=$(this),d=c.parents(".related-records"),e=d.find(".details"),k=d.parents(".agency-overview");if(e.is(":visible"))e.slideUp(function(){c.text(a);k.find(".related-row").removeClass("last-visible").filter(":visible").last().addClass("last-visible")});else{var m=
k.find(".related-row").removeClass("last-visible");e.slideDown(function(){c.text(b);m.filter(":visible").last().addClass("last-visible")})}return!1}).on("click",".deleted-toggle",function(){var a=$(this),b=a.parents(".related-records"),c=b.find(".deleted-records"),k=b.parents(".agency-overview");if(c.is(":visible"))c.slideUp(function(){a.text(e);k.find(".related-row").removeClass("last-visible").filter(":visible").last().addClass("last-visible")});else{var m=k.find(".related-row").removeClass("last-visible");
c.slideDown(function(){a.text(d);m.filter(":visible").last().addClass("last-visible")})}return!1});c()};window.add_details_last_visible_class=c})();
