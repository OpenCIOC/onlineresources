/*
 jQuery throttle / debounce - v1.1 - 3/7/2010
 http://benalman.com/projects/jquery-throttle-debounce-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery blockUI plugin
 Version 2.70.0-2014.11.23
 Requires jQuery v1.7 or later

 Examples at: http://malsup.com/jquery/block/
 Copyright (c) 2007-2013 M. Alsup
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html

 Thanks to Amir-Hossein Sobhi for some excellent contributions!
*/
window.CIOC={};
(function(c,a){a.do_drop_down_navigation=function(){for(var b=c.getElementById("ActionList").options,d=0;d<b.length;d++)if(b[d].selected){var e=b[d].getAttribute("href");e&&("undefined"!=typeof b[d].attributes.newwindow?a.open(e):a.location.href=e);break}};jQuery(function(b){b("[data-toggle=dialog]").each(function(){var d=b(this),e=b(d.data("target")),f={autoOpen:!1,title:e.data("title"),modal:e.data("modal")};e.dialog(f);d.click(function(){e.dialog("isOpen")?e.dialog("close"):e.dialog("open")})})})})(document,window);
function CheckAll(c,a){c||="IDList";var b=a;a||(b=document.RecordList);a=b.elements.length;for(var d=0;d<a;d++){var e=b.elements[d];e.name===c&&(e.checked=!0)}}function ClearAll(c,a){c||="IDList";var b=a;a||(b=document.RecordList);a=b.elements.length;for(var d=0;d<a;d++){var e=b.elements[d];e.name===c&&(e.checked=!1)}}function add_class(c,a){c&&!(new RegExp("\\b"+a+"\\b")).test(c.className)&&(c.className&&(a=" "+a),c.className+=a)}
function remove_class(c,a){if(c){for(var b=c.className.split(" "),d=[],e=0;e<b.length;e++){var f=b[e];f!==a&&d.push(f)}c.className=d.join(" ")}}function hide(c){add_class(c,"NotVisible")}function show(c){remove_class(c,"NotVisible")}function openWin(c,a){window.open(c,a,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(c,a){window.open(c,a,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(c,a){window.open(c,a,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(c){var a={sm:openWin,lg:openWinL,xl:openWinXL};c(document).on("click","a.poplink",function(){var b=c(this).data("popargs");(a[b.size||"sm"]||openWin)(this.href,b.name||"popwin");return!1})});
(function(){var c=jQuery,a={},b=function(m){null!==m&&"undefined"!==typeof m?c("#myListCount").text(m):(m=c("#myListCount").text())&&(m=parseInt(m,10));m?a.myListLink.show():a.myListLink.hide()},d=function(m){c.each(m,function(u,h){c("#added_to_list_"+h).show();c("#add_to_list_"+h).hide()})},e=function(m){return function(u){u.fail?alert(u.errinfo):(u.ids?b(c.grep(u.ids,k[a.domain]).length):u.count?b(u.count):b(0),d([m]))}},f=function(m){m=c(m.currentTarget).data("id");c.ajax({success:e(m),dataType:"json",
error:function(){alert("Error")},data:{id:m},type:"POST",url:a.current_list_url})},n=function(m){return function(u){if(u.fail)alert(u.errinfo);else{u=!0;if(m){var h=c("#results_table #remove_from_list_"+m);h.length?h.parent().parent().remove():(u=!1,h=c("#results_container #remove_from_list_"+m),h.parents(".dlist-result").remove())}(u?1!==c("#results_table tr").length:0!==c("#results_container .dlist-result").length)&&m||(c("#records_ui").hide(),c("#no_records_message").show())}}},l=function(m){m=
c(m.currentTarget).data("id");c.ajax({success:n(m),dataType:"json",error:function(){alert("Error")},data:{ID:m,RemoveItem:a.domain},type:"POST",url:a.current_list_url})},p=function(m){c.ajax({success:n(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:a.domain},type:"POST",url:a.current_list_url})},k={CIC:function(m){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(m)},VOL:function(m){return/^[1-9][0-9]*$/.test(m)}},q=function(m){if(m.fail)w();else if(m.inrequest){var u=c.grep(m.ids,
k[a.domain]);d(u);b(u.length);(m=m.previous_ids)&&c.each(m,function(h,g){c("#ct_added_to_previous_request_"+g).show()});c(".ListUI img").prop("src",function(h,g){return g.replace("list","referral")});c("#list_header_text").hide();c("#ct_header_text").show();a.current_list_url=a.ct_update_url;v()}else w()},w=function(){var m=function(){a.list_view_mode||d(a.already_added||[]);a.current_list_url=a.list_view_mode&&"ct"===a.list_view_mode?a.ct_update_url:a.list_update_url;b((a.already_added||[]).length);
v()};a.list_view_mode||a.has_session?m():c.ajax({dataType:"json",error:null,url:a.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(u){u.has_session&&m()}})},v=function(){c(".HideListUI").delegate(".add_to_list","click",f).delegate(".remove_from_list","click",l).removeClass("HideListUI");c("#remove_all_from_list").click(p);c.browser.msie&&"8.0">c.browser.msie&&c(".ListUI").removeClass("FixIE")};window.init_list_adder=function(m){a=m;a.myListLink=c("#myListLink").parent(":hidden").add("#myListLink");
m.in_request?c.ajax({success:q,dataType:"json",error:null,type:"POST",url:m.in_request}):w()}})();this.JSON||(this.JSON={});
(function(){function c(k){return 10>k?"0"+k:k}function a(k){e.lastIndex=0;return e.test(k)?'"'+k.replace(e,function(q){var w=l[q];return"string"===typeof w?w:"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+k+'"'}function b(k,q){var w=f,v=q[k];v&&"object"===typeof v&&"function"===typeof v.toJSON&&(v=v.toJSON(k));"function"===typeof p&&(v=p.call(q,k,v));switch(typeof v){case "string":return a(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);
case "object":if(!v)return"null";f+=n;var m=[];if("[object Array]"===Object.prototype.toString.apply(v)){var u=v.length;for(k=0;k<u;k+=1)m[k]=b(k,v)||"null";q=0===m.length?"[]":f?"[\n"+f+m.join(",\n"+f)+"\n"+w+"]":"["+m.join(",")+"]";f=w;return q}if(p&&"object"===typeof p)for(u=p.length,k=0;k<u;k+=1){var h=p[k];"string"===typeof h&&(q=b(h,v))&&m.push(a(h)+(f?": ":":")+q)}else for(h in v)Object.hasOwnProperty.call(v,h)&&(q=b(h,v))&&m.push(a(h)+(f?": ":":")+q);q=0===m.length?"{}":f?"{\n"+f+m.join(",\n"+
f)+"\n"+w+"}":"{"+m.join(",")+"}";f=w;return q}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(k){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(k){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,n,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(k,q,w){var v;n=f="";if("number"===typeof w)for(v=0;v<w;v+=1)n+=" ";else"string"===typeof w&&(n=w);if((p=q)&&"function"!==typeof q&&("object"!==typeof q||"number"!==typeof q.length))throw Error("JSON.stringify");return b("",{"":k})});
"function"!==typeof JSON.parse&&(JSON.parse=function(k,q){function w(v,m){var u,h=v[m];if(h&&"object"===typeof h)for(u in h)if(Object.hasOwnProperty.call(h,u)){var g=w(h,u);void 0!==g?h[u]=g:delete h[u]}return q.call(v,m,h)}k=String(k);d.lastIndex=0;d.test(k)&&(k=k.replace(d,function(v){return"\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(k.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return k=eval("("+k+")"),"function"===typeof q?w({"":k},""):k;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(c){var a={};jQuery(c).find("input,select,textarea").each(function(b){if(this.name)if(a[this.name]||(a[this.name]=[]),"select"===this.nodeName.toLowerCase()){var d=a[this.name];$(this).find("option").each(function(e){this.selected&&d.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&a[this.name].push(this.value||"")});return a};window.restore_form_values=function(c,a){var b=jQuery;b(c).find("input,select,textarea").each(function(d){if(this.name){var e=
a[this.name];"undefined"!=typeof e&&null!==e&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?b(this).find("option").each(function(f){this.selected=1<e.length?0<=b.inArray(this.value,e):0===e.length?!1:this.value===e[0]}):this.value=e.length?e[0]:"":this.checked=1<e.length?0<=b.inArray(this.value,e):0===e.length?!1:this.value===e[0])}})};window.init_cached_state=function(c){var a=jQuery;c=c||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];a(window).on("beforeunload",function(){var b={form_values:get_form_values(c)};a.each(onbeforeunload_fns,function(d,e){e(b)});document.getElementById("cache_form_values").value=JSON.stringify(b)});window.cache_register_onbeforeunload=function(b){onbeforeunload_fns.push(b)};window.cache_register_onbeforerestorevalues=function(b){onbeforerestorevalues_fns.push(b)};window.restore_cached_state=function(){var b=document.getElementById("cache_form_values");if(b&&b.value){var d=
JSON.parse(b.value);a.each(onbeforerestorevalues_fns,function(e,f){f(d)});restore_form_values(c,d.form_values)}}}})();
(function(){var c=jQuery,a={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},b={"en-CA":!0,"":!0},d={},e={"fr-CA":"fr","es-MX":"es"},f=function(){var l=c(this),p=l.data("culture"),k=a[p]||c.datepicker.regional[p].dateFormat,q={};l.hasClass("NoYear")&&(k=k.replace(/[\- .\/]*yy[\/]?/,""),q={beforeShow:function(w,
v){v.dpDiv.addClass("NoYearDatePicker")},onClose:function(w,v){v.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});q.dateFormat=k;l.datepicker(c.extend({},c.datepicker.regional[p],q)).prop("autocomplete","off")},n=function(l){c.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+c.ui.version+"/i18n/jquery.ui.datepicker-"+l+".min.js",function(){b[l]=!0;c.each(d[l],function(){f.call(this)});delete d[l]})};c.datepicker.regional["en-CA"]=c.extend({},c.datepicker.regional[""]);c.fn.extend({autodatepicker:function(){return this.each(function(){var l=
c(this);var p=l.parents("[lang]").first().prop("lang")||"en-CA";p=e[p]||p;l.data("culture",p);b[p]?f.call(this):(l=d[p],l||(l=d[p]=[],n(p)),l.push(this))})}});jQuery(function(){c("input.DatePicker").autodatepicker()})})();
(function(c){c.extend(c.fn,{validate:function(a){if(this.length){var b=c.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new c.validator(a,this[0]);c.data(this[0],"validator",b);b.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){b.cancelSubmit=!0}),b.settings.submitHandler&&a.filter(":submit").click(function(){b.submitButton=this}),this.submit(function(d){function e(){if(b.settings.submitHandler){if(b.submitButton)var f=c("<input type='hidden'/>").attr("name",
b.submitButton.name).val(b.submitButton.value).appendTo(b.currentForm);b.settings.submitHandler.call(b,b.currentForm);b.submitButton&&f.remove();return!1}return!0}b.settings.debug&&d.preventDefault();if(b.cancelSubmit)return b.cancelSubmit=!1,e();if(b.form())return b.pendingRequest?(b.formSubmitted=!0,!1):e();b.focusInvalid();return!1}));return b}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(c(this[0]).is("form"))return this.validate().form();
var a=!0,b=c(this[0].form).validate();this.each(function(){a&=b.element(this)});return a},removeAttrs:function(a){var b={},d=this;c.each(a.split(/\s/),function(e,f){b[f]=d.attr(f);d.removeAttr(f)});return b},rules:function(a,b){var d=this[0];if(a){var e=c.data(d.form,"validator").settings,f=e.rules,n=c.validator.staticRules(d);switch(a){case "add":c.extend(n,c.validator.normalizeRule(b));f[d.name]=n;b.messages&&(e.messages[d.name]=c.extend(e.messages[d.name],b.messages));break;case "remove":if(!b)return delete f[d.name],
n;var l={};c.each(b.split(/\s/),function(p,k){l[k]=n[k];delete n[k]});return l}}a=c.validator.normalizeRules(c.extend({},c.validator.metadataRules(d),c.validator.classRules(d),c.validator.attributeRules(d),c.validator.staticRules(d)),d);a.required&&(b=a.required,delete a.required,a=c.extend({required:b},a));return a}});c.extend(c.expr[":"],{blank:function(a){return!c.trim(""+a.value)},filled:function(a){return!!c.trim(""+a.value)},unchecked:function(a){return!a.checked}});c.validator=function(a,b){this.settings=
c.extend(!0,{},c.validator.defaults,a);this.currentForm=b;this.init()};c.validator.format=function(a,b){if(1==arguments.length)return function(){var d=c.makeArray(arguments);d.unshift(a);return c.validator.format.apply(this,d)};2<arguments.length&&b.constructor!=Array&&(b=c.makeArray(arguments).slice(1));b.constructor!=Array&&(b=[b]);c.each(b,function(d,e){a=a.replace(new RegExp("\\{"+d+"\\}","g"),e)});return a};c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a,b){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,b){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,
b){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a,b){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).addClass(b).removeClass(d):c(a).addClass(b).removeClass(d)},unhighlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).removeClass(b).addClass(d):c(a).removeClass(b).addClass(d)}},setDefaults:function(a){c.extend(c.validator.defaults,
a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:c.validator.format("Please enter no more than {0} characters."),
minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(e){var f=c.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,
"");f.settings[n]&&f.settings[n].call(f,this[0],e)}this.labelContainer=c(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm);this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.groups={};c.each(this.settings.groups,function(e,f){c.each(f.split(/\s/),function(n,l){b[l]=e})});var d=
this.settings.rules;c.each(d,function(e,f){d[e]=c.validator.normalizeRule(f)});c(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",
a);this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();c.extend(this.submitted,this.errorMap);this.invalid=c.extend({},this.errorMap);this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=
a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=c(a);var b=this.check(a);b?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return b},showErrors:function(a){if(a){c.extend(this.errorMap,a);this.errorList=[];for(var b in a)this.errorList.push({message:a[b],element:this.findByName(b)[0]});this.successList=c.grep(this.successList,function(d){return!(d.name in a)})}this.settings.showErrors?
this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==c.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=this,b={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in b||!a.objectLength(c(this).rules())?!1:b[this.name]=!0})},clean:function(a){return c(a)[0]},errors:function(){return c(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=c([]);this.toHide=c([]);this.currentElements=c([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var b=c(a).rules(),d=!1,e;for(e in b){var f={method:e,parameters:b[e]};try{var n=c.validator.methods[e].call(this,a.value.replace(/\r/g,""),a,f.parameters);if("dependency-mismatch"==n)d=!0;else{d=!1;if("pending"==n){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!n)return this.formatAndAdd(a,f),!1}}catch(l){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+
a.id+", check the '"+f.method+"' method",l),l;}}if(!d)return this.objectLength(b)&&this.successList.push(a),!0},customMetaMessage:function(a,b){if(c.metadata)return(a=this.settings.meta?c(a).metadata()[this.settings.meta]:c(a).metadata())&&a.messages&&a.messages[b]},customMessage:function(a,b){return(a=this.settings.messages[a])&&(a.constructor==String?a:a[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,b){return this.findDefined(this.customMessage(a.name,
b),this.customMetaMessage(a,b),!this.settings.ignoreTitle&&a.title||void 0,c.validator.messages[b],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,b.parameters,a):e.test(d)&&(d=jQuery.format(d.replace(e,"{$1}"),b.parameters));this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=
a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,
b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(a,b){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(b)):(d=c("<"+this.settings.errorElement+
"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(b||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,c(a)):d.insertAfter(a)));!b&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(a){var b=
this.idOrName(a);return this.errors().filter(function(){return c(this).attr("for")==b})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var b=this.currentForm;return c(document.getElementsByName(a)).map(function(d,e){return e.form==b&&e.name==a&&e||null})},
getLength:function(a,b){switch(b.nodeName.toLowerCase()){case "select":return c("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a,b){return a},string:function(a,b){return!!c(a,b.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!c.validator.methods.required.call(this,
c.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,b){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];b&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!b&&0==this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(a){return c.data(a,"previousValue")||c.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,b){a.constructor==String?this.classRuleSettings[a]=b:c.extend(this.classRuleSettings,a)},classRules:function(a){var b=
{};(a=c(a).attr("class"))&&c.each(a.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(b,c.validator.classRuleSettings[this])});return b},attributeRules:function(a){var b={};a=c(a);for(var d in c.validator.methods){var e;(e="required"===d&&"function"===typeof c.fn.prop?a.prop(d):a.attr(d))?b[d]=e:a[0].getAttribute("type")===d&&(b[d]=!0)}b.maxlength&&/-1|2147483647|524288/.test(b.maxlength)&&delete b.maxlength;return b},metadataRules:function(a){if(!c.metadata)return{};var b=c.data(a.form,
"validator").settings.meta;return b?c(a).metadata()[b]:c(a).metadata()},staticRules:function(a){var b={},d=c.data(a.form,"validator");d.settings.rules&&(b=c.validator.normalizeRule(d.settings.rules[a.name])||{});return b},normalizeRules:function(a,b){c.each(a,function(d,e){if(!1===e)delete a[d];else if(e.param||e.depends){var f=!0;switch(typeof e.depends){case "string":f=!!c(e.depends,b.form).length;break;case "function":f=e.depends.call(b,b)}f?a[d]=void 0!==e.param?e.param:!0:delete a[d]}});c.each(a,
function(d,e){a[d]=c.isFunction(e)?e(b):e});c.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});c.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});c.validator.autoCreateRanges&&(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==
typeof a){var b={};c.each(a.split(/\s/),function(){b[this]=!0});a=b}return a},addMethod:function(a,b,d){c.validator.methods[a]=b;c.validator.messages[a]=void 0!=d?d:c.validator.messages[a];3>b.length&&c.validator.addClassRules(a,c.validator.normalizeRule(a))},methods:{required:function(a,b,d){if(!this.depend(d,b))return"dependency-mismatch";switch(b.nodeName.toLowerCase()){case "select":return(a=c(b).val())&&0<a.length;case "input":if(this.checkable(b))return 0<this.getLength(a,b);default:return 0<
c.trim(a).length}},remote:function(a,b,d){if(this.optional(b))return"dependency-mismatch";var e=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});e.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=e.message;d="string"==typeof d&&{url:d}||d;if(this.pending[b.name])return"pending";if(e.old===a)return e.valid;e.old=a;var f=this;this.startRequest(b);var n={};n[b.name]=a;c.ajax(c.extend(!0,{url:d,mode:"abort",port:"validate"+
b.name,dataType:"json",data:n,success:function(l){f.settings.messages[b.name].remote=e.originalMessage;var p=!0===l;if(p){var k=f.formSubmitted;f.prepareElement(b);f.formSubmitted=k;f.successList.push(b);f.showErrors()}else k={},l=l||f.defaultMessage(b,"remote"),k[b.name]=e.message=c.isFunction(l)?l(a):l,f.showErrors(k);e.valid=p;f.stopRequest(b,p)}},d));return"pending"},minlength:function(a,b,d){return this.optional(b)||this.getLength(c.trim(a),b)>=d},maxlength:function(a,b,d){return this.optional(b)||
this.getLength(c.trim(a),b)<=d},rangelength:function(a,b,d){a=this.getLength(c.trim(a),b);return this.optional(b)||a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||a>=d[0]&&a<=d[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;b=0;var d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;0<=e;e--){var f=
a.charAt(e);f=parseInt(f,10);d&&9<(f*=2)&&(f-=9);b+=f;d=!d}return 0==b%10},accept:function(a,b,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(new RegExp(".("+d+")$","i"))},equalTo:function(a,b,d){d=c(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(b).valid()});return a==d.val()}}});c.format=c.validator.format})(jQuery);
(function(c){var a={};if(c.ajaxPrefilter)c.ajaxPrefilter(function(d,e,f){e=d.port;"abort"==d.mode&&(a[e]&&a[e].abort(),a[e]=f)});else{var b=c.ajax;c.ajax=function(d){var e=("port"in d?d:c.ajaxSettings).port;return"abort"==("mode"in d?d:c.ajaxSettings).mode?(a[e]&&a[e].abort(),a[e]=b.apply(this,arguments)):b.apply(this,arguments)}}})(jQuery);
(function(c){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(e){e=c.event.fix(e);e.type=b;return c.event.handle.call(this,e)}c.event.special[b]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(e){arguments[0]=c.event.fix(e);arguments[0].type=b;return c.event.handle.apply(this,arguments)}}});c.extend(c.fn,{validateDelegate:function(a,
b,d){return this.bind(b,function(e){var f=c(e.target);if(f.is(a))return d.apply(f,arguments)})}})})(jQuery);
(function(c,a){"$:nomunge";var b=c.jQuery||c.Cowboy||(c.Cowboy={}),d;b.throttle=d=function(e,f,n,l){function p(){function w(){q=+new Date;n.apply(m,h)}function v(){k=a}var m=this,u=+new Date-q,h=arguments;l&&!k&&w();k&&clearTimeout(k);l===a&&u>e?w():!0!==f&&(k=setTimeout(l?v:w,l===a?e-u:e))}var k,q=0;"boolean"!==typeof f&&(l=n,n=f,f=a);b.guid&&(p.guid=n.guid=n.guid||b.guid++);return p};b.debounce=function(e,f,n){return n===a?d(e,f,!1):d(e,n,!1!==f)}})(this);
(function(){function c(a){function b(h,g){var x=h==window,r=g&&void 0!==g.message?g.message:void 0;g=a.extend({},a.blockUI.defaults,g||{});if(!g.ignoreIfBlocked||!a(h).data("blockUI.isBlocked")){g.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,g.overlayCSS||{});var y=a.extend({},a.blockUI.defaults.css,g.css||{});g.onOverlayClick&&(g.overlayCSS.cursor="pointer");var B=a.extend({},a.blockUI.defaults.themedCSS,g.themedCSS||{});r=void 0===r?g.message:r;x&&m&&d(window,{fadeOut:0});if(r&&"string"!=
typeof r&&(r.parentNode||r.jquery)){var C=r.jquery?r[0]:r,A={};a(h).data("blockUI.history",A);A.el=C;A.parent=C.parentNode;A.display=C.style.display;A.position=C.style.position;A.parent&&A.parent.removeChild(C)}a(h).data("blockUI.onUnblock",g.onUnblock);A=g.baseZ;var t=q||g.forceIframe?a('<iframe class="blockUI" style="z-index:'+A++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+g.iframeSrc+'"></iframe>'):a('<div class="blockUI" style="display:none"></div>');
C=g.theme?a('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+A++ +';display:none"></div>'):a('<div class="blockUI blockOverlay" style="z-index:'+A++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');g.theme&&x?(A='<div class="blockUI '+g.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(A+10)+';display:none;position:fixed">',g.title&&(A+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+
(g.title||"&nbsp;")+"</div>"),A+='<div class="ui-widget-content ui-dialog-content"></div></div>'):g.theme?(A='<div class="blockUI '+g.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(A+10)+';display:none;position:absolute">',g.title&&(A+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(g.title||"&nbsp;")+"</div>"),A+='<div class="ui-widget-content ui-dialog-content"></div></div>'):A=x?'<div class="blockUI '+g.blockMsgClass+' blockPage" style="z-index:'+
(A+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+g.blockMsgClass+' blockElement" style="z-index:'+(A+10)+';display:none;position:absolute"></div>';A=a(A);r&&(g.theme?(A.css(B),A.addClass("ui-widget-content")):A.css(y));g.theme||C.css(g.overlayCSS);C.css("position",x?"fixed":"absolute");(q||g.forceIframe)&&t.css("opacity",0);y=[t,C,A];var z=x?a("body"):a(h);a.each(y,function(){this.appendTo(z)});g.theme&&g.draggable&&a.fn.draggable&&A.draggable({handle:".ui-dialog-titlebar",cancel:"li"});
B=v&&(!a.support.boxModel||0<a("object,embed",x?null:h).length);if(w||B){x&&g.allowBodyStretch&&a.support.boxModel&&a("html,body").css("height","100%");if((w||!a.support.boxModel)&&!x){B=parseInt(a.css(h,"borderTopWidth"),10)||0;var D=parseInt(a.css(h,"borderLeftWidth"),10)||0,F=B?"(0 - "+B+")":0,E=D?"(0 - "+D+")":0}a.each(y,function(H,G){G=G[0].style;G.position="absolute";2>H?(x?G.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+
g.quirksmodeOffsetHack+') + "px"'):G.setExpression("height",'this.parentNode.offsetHeight + "px"'),x?G.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):G.setExpression("width",'this.parentNode.offsetWidth + "px"'),E&&G.setExpression("left",E),F&&G.setExpression("top",F)):g.centerY?(x&&G.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),
G.marginTop=0):!g.centerY&&x&&(H=g.css&&g.css.top?parseInt(g.css.top,10):0,G.setExpression("top","((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+H+') + "px"'))})}r&&(g.theme?A.find(".ui-widget-content").append(r):A.append(r),(r.jquery||r.nodeType)&&a(r).show());(q||g.forceIframe)&&g.showOverlay&&t.show();g.fadeIn?(y=g.onBlock?g.onBlock:k,t=g.showOverlay&&!r?y:k,y=r?y:k,g.showOverlay&&C._fadeIn(g.fadeIn,t),r&&A._fadeIn(g.fadeIn,y)):(g.showOverlay&&
C.show(),r&&A.show(),g.onBlock&&g.onBlock.bind(A)());f(1,h,g);x?(m=A[0],u=a(g.focusableElements,m),g.focusInput&&setTimeout(l,20)):p(A[0],g.centerX,g.centerY);g.timeout&&(r=setTimeout(function(){x?a.unblockUI(g):a(h).unblock(g)},g.timeout),a(h).data("blockUI.timeout",r))}}function d(h,g){var x=h==window,r=a(h),y=r.data("blockUI.history"),B=r.data("blockUI.timeout");B&&(clearTimeout(B),r.removeData("blockUI.timeout"));g=a.extend({},a.blockUI.defaults,g||{});f(0,h,g);null===g.onUnblock&&(g.onUnblock=
r.data("blockUI.onUnblock"),r.removeData("blockUI.onUnblock"));var C=x?a("body").children().filter(".blockUI").add("body > .blockUI"):r.find(">.blockUI");g.cursorReset&&(1<C.length&&(C[1].style.cursor=g.cursorReset),2<C.length&&(C[2].style.cursor=g.cursorReset));x&&(m=u=null);if(g.fadeOut){var A=C.length;C.stop().fadeOut(g.fadeOut,function(){0===--A&&e(C,y,g,h)})}else e(C,y,g,h)}function e(h,g,x,r){var y=a(r);if(!y.data("blockUI.isBlocked")){h.each(function(B,C){this.parentNode&&this.parentNode.removeChild(this)});
g&&g.el&&(g.el.style.display=g.display,g.el.style.position=g.position,g.el.style.cursor="default",g.parent&&g.parent.appendChild(g.el),y.removeData("blockUI.history"));y.data("blockUI.static")&&y.css("position","static");if("function"==typeof x.onUnblock)x.onUnblock(r,x);h=a(document.body);g=h.width();x=h[0].style.width;h.width(g-1).width(g);h[0].style.width=x}}function f(h,g,x){var r=g==window;g=a(g);if(h||(!r||m)&&(r||g.data("blockUI.isBlocked")))g.data("blockUI.isBlocked",h),r&&x.bindEvents&&(!h||
x.showOverlay)&&(h?a(document).bind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",x,n):a(document).unbind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",n))}function n(h){if("keydown"===h.type&&h.keyCode&&9==h.keyCode&&m&&h.data.constrainTabKey){var g=u,x=h.shiftKey&&h.target===g[0];if(!h.shiftKey&&h.target===g[g.length-1]||x)return setTimeout(function(){l(x)},10),!1}g=h.data;var r=a(h.target);if(r.hasClass("blockOverlay")&&g.onOverlayClick)g.onOverlayClick(h);
return 0<r.parents("div."+g.blockMsgClass).length?!0:0===r.parents().children().filter("div.blockUI").length}function l(h){u&&(h=u[!0===h?u.length-1:0])&&h.focus()}function p(h,g,x){var r=h.parentNode,y=h.style,B=(r.offsetWidth-h.offsetWidth)/2-(parseInt(a.css(r,"borderLeftWidth"),10)||0);h=(r.offsetHeight-h.offsetHeight)/2-(parseInt(a.css(r,"borderTopWidth"),10)||0);g&&(y.left=0<B?B+"px":"0");x&&(y.top=0<h?h+"px":"0")}a.fn._fadeIn=a.fn.fadeIn;var k=a.noop||function(){},q=/MSIE/.test(navigator.userAgent),
w=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),v=a.isFunction(document.createElement("div").style.setExpression);a.blockUI=function(h){b(window,h)};a.unblockUI=function(h){d(window,h)};a.growlUI=function(h,g,x,r){var y=a('<div class="growlUI"></div>');h&&y.append("<h1>"+h+"</h1>");g&&y.append("<h2>"+g+"</h2>");void 0===x&&(x=3E3);var B=function(C){C=C||{};a.blockUI({message:y,fadeIn:"undefined"!==typeof C.fadeIn?C.fadeIn:700,fadeOut:"undefined"!==typeof C.fadeOut?C.fadeOut:
1E3,timeout:"undefined"!==typeof C.timeout?C.timeout:x,centerY:!1,showOverlay:!1,onUnblock:r,css:a.blockUI.defaults.growlCSS})};B();y.css("opacity");y.mouseover(function(){B({fadeIn:0,timeout:3E4});var C=a(".blockMsg");C.stop();C.fadeTo(300,1)}).mouseout(function(){a(".blockMsg").fadeOut(1E3)})};a.fn.block=function(h){if(this[0]===window)return a.blockUI(h),this;var g=a.extend({},a.blockUI.defaults,h||{});this.each(function(){var x=a(this);g.ignoreIfBlocked&&x.data("blockUI.isBlocked")||x.unblock({fadeOut:0})});
return this.each(function(){"static"==a.css(this,"position")&&(this.style.position="relative",a(this).data("blockUI.static",!0));this.style.zoom=1;b(this,h)})};a.fn.unblock=function(h){return this[0]===window?(a.unblockUI(h),this):this.each(function(){d(this,h)})};a.blockUI.version=2.7;a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",
cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1E3,centerX:!0,centerY:!0,
allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var m=null,u=[]}"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],c):c(jQuery)})();
(function(){var c=function(d){d=d.toLowerCase();d=d.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");d=d.replace(RegExp("\u00e6","g"),"ae");d=d.replace(RegExp("\u00e7","g"),"c");d=d.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");d=d.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");d=d.replace(RegExp("\u00f1","g"),"n");d=d.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");d=d.replace(RegExp("\u009c","g"),"oe");d=d.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return d=d.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=c;var a=function(d,e,f,n,l){f=f||"value";n=n||"";l=l||"";return function(p,k){if(e.term&&(new RegExp(n+d.ui.autocomplete.escapeRegex(e.term)+l,"i")).test(p.term)&&e.content&&13>e.content.length){var q=new RegExp(n+d.ui.autocomplete.escapeRegex(p.term)+l,"i");k(d.grep(e.content,function(w){return q.test(c(w[f]))}));return!0}return!1}};window.default_cache_search_fn=a;var b=function(d,e,f,n,l){f=f||{};l=l||a(d,f,n||"value");
return function(p,k,q){p.term=c(p.term);f.term===p.term&&f.content?k(f.content):l(p,k)||d.ajax({url:q||e,dataType:"json",data:p,cache:!1,success:function(w){f.term=p.term;f.content=w;k(w)}})}};window.create_caching_source_fn=b;window.init_community_autocomplete=function(d,e,f,n,l){var p={};l&&=d(l);l&&!l.length&&(l=null);var k=d("#"+e).autocomplete({focus:function(q,w){return!1},select:function(q,w){k.data({chkid:w.item.chkid,display:w.item.value})},source:b(d,f,p),minLength:n}).keypress(function(q){"13"==
q.keyCode&&(q.preventDefault(),k.autocomplete("close"))});l&&(k.parents("form").on("submit",function(){var q=k.val();if(k.data("display")===q)l.val(k.data("chkid"));else{if(p.content){var w=c(q);q=d.grep(p.content,function(v){return c(v.value)===w});if(1===q.length){l.val(q[0].chkid);k.data({chkid:q[0].chkid,display:q[0].value}).val(q[0].value);return}}l.val("")}}),cache_register_onbeforerestorevalues(function(q){k.length&&(q=q["autocomplete_data_"+k[0].id])&&k.data(q)}),cache_register_onbeforeunload(function(q){if(k.length){var w=
k.data();w.display&&w.chkid&&(q["autocomplete_data_"+k[0].id]={display:w.display,chkid:w.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(b,d,e,f){cache_register_onbeforeunload(function(n){n[d+"_added"]=e});cache_register_onbeforerestorevalues(function(n){(n=n[d+"_added"])&&b.each(n,function(l,p){f(p.chkid,p.display,"")})})};window.basic_chk_add_html=function(b,d){return function(e,f){e=b("<tr>").append(b("<td>").append(b("<input>").prop({id:d+"_ID_"+e,type:"checkbox",checked:!0,defaultChecked:!0,name:d+"_ID",value:e})).append(document.createTextNode(" "+
f))).append(b("<td>").append(b("<input>").prop({id:d+"_NOTES_"+e,name:d+"_NOTES_"+e,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));b("#"+d+"_existing_add_table").append(e);return e.find('input[type="checkbox"]')[0]}};var c={},a=function(b){$("#NEW_"+b).autocomplete(c[b])};window.init_autocomplete_checklist=function(b,d){var e=d.field;if(!c[e]){var f=d.source;d.minLength=d.minLength||1;d.delay=d.delay||300;d.add_new_html=d.add_new_html||basic_chk_add_html(b,e);d.match_prop=
d.match_prop||"value";d.txt_not_found=d.txt_not_found||"Not Found";var n=b(d.delegate_root||document),l=d.added_values||[],p=function(m,u,h){var g=document.getElementById(e+"_ID_"+m);g?(g.checked=!0,d.after_add_new_value&&d.after_add_new_value.call(g)):(l.push({chkid:m,display:u,label:h}),m=d.add_new_html(m,u,h),d.after_add_new_value&&d.after_add_new_value.call(m))};create_checklist_onbefore_fns(b,e,l,p);var k={},q=function(m){b("#NEW_"+e).data({chkid:"",display:"",label:""}).prop("value","").focus();
b("#"+e+"_error").hide("slow",function(){b(this).remove()})},w=null,v=null;(function(m){b.isArray(m)?(v=function(u,h){var g=new RegExp(b.ui.autocomplete.escapeRegex(string_ci_ai(u.term)));h(b.grep(m,function(x){return g.test(string_ci_ai(x[d.match_prop]||x))}))},w=function(u,h){var g=string_ci_ai(u);u=b.grep(m,function(x){return string_ci_ai(string_ci_ai(x[d.match_prop]||x))===g});if(1===u.length)return h(u[0]),!0;h()}):"string"===typeof m?(v=create_caching_source_fn(b,m,k,d.match_prop),w=function(u,
h,g){var x=string_ci_ai(u);if(k.content){var r=b.grep(k.content,function(y){return string_ci_ai(y[d.match_prop])===x});if(1===r.length){h(r[0]);return}}g||string_ci_ai(k.term||"")===x?h():v({term:x},function(y){w(u,h,!0)})}):(v=m,w=d.look_for_fn)})(f);n.on("click","#add_"+e,function(m){m=b("#NEW_"+e);var u=m.data("chkid"),h=m.data("display"),g=m.data("label"),x=m[0].value;if(u&&h&&h==x)return p(u,h,g),q(),!1;w(m[0].value,function(r){r?(p(r.chkid,r.value,r.label),q()):0===b("#"+e+"_error").length&&
(b("#"+e+"_new_input_table").before(b("<p>").hide().addClass("Alert").prop("id",e+"_error").append(document.createTextNode(d.txt_not_found))),b("#"+e+"_error").show("slow"))});return!1});c[e]={focus:function(m,u){return!1},source:v,minLength:d.minLength,delay:d.delay,select:function(m,u){b("#NEW_"+e).data({chkid:u.item.chkid,display:u.item.value,label:u.item.label})}};n.on("keypress","#NEW_"+e,function(m){"13"==m.keyCode&&(m.preventDefault(),b("#NEW_"+e).autocomplete("close"),b("#add_"+e).trigger("click"))})}a(e)};
window.init_languages=function(b,d){var e=null,f=null,n=b("#LN_existing_add_table"),l=function(){var p=b(this).parents(".language-entry").find(".language-details-notes");this.checked?p.slideDown():p.slideUp()};init_autocomplete_checklist(b,{field:"LN",source:entryform.languages_source,txt_not_found:d,after_add_new_value:l,add_new_html:function(p,k){null===e&&(e=b("#add_LN"),f=e.data("newTemplate"));p=f.replace(/LANGNAMELANGNAME/g,k).replace(/IDIDID/g,p);n.append(p)}});n.on("change",".language-primary",
l).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+b(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(p,k){b(this).css(p);b("<div>").addClass("arrow").addClass(k.vertical).addClass(k.horizontal).appendTo(this)}}});window.languages_check_state=l}})();
(function(){jQuery.fn.autoShorten=function(f,n,l){return this.each(function(){f=f||350;n=n||"[read more]";l=l||"[less]";var p=$(this),k=p.html();if(k.length>f){var q=k.substring(0,f).split(" ");q=$("<div>").html(q.slice(0,q.length-1).join(" ")+" ").append('<span class="ellipse-toggle SimulateLink">&hellip; '+n+"</span>").html();$(this).data("replacementText",k+' <span class="ellipse-toggle SimulateLink">'+l+"</span>").html(q).on("click","span.ellipse-toggle",function(){var w=p.html();p.html(p.data("replacementText"));
p.data("replacementText",w)})}})};var c=function(f,n,l){l=l||n+"_ID";return function(p,k){var q=f("#add_"+n).parent(),w=q.parent(),v=w.prev("tr");q=parseInt(q.prop("colspan"),10);var m=v.find("td").length;v.length&&q!==m||(v=f("<tr>").insertBefore(w));v.append(f("<td>").append(f("<label>").text(" "+k).prepend(f('<input type="checkbox" checked>').prop({id:n+"_ID_"+p,value:p,name:l}))))}},a=function(f,n){init_autocomplete_checklist($,{source:f,field:"reminder_user",add_new_html:c($,"reminder_user"),
txt_not_found:n})},b=function(){$(document).on("click","#add_reminder_agency",function(f){f.preventDefault();f=$("#NEW_reminder_agency");var n=c($,"reminder_agency"),l=f[0].value;if(l){var p=$("#reminder_agency_ID_"+l);p.length?p.prop("checked",!0):n(l,l);f.find("option").first().prop({selected:!0})}return!1});$.each(["NUM","VNUM"],function(f,n){$(document).on("click","#add_"+n,function(l){l.preventDefault();l=$("#NEW_"+n);var p=c($,n,n),k=l[0].value;if(k){var q=$("#"+n+"_ID_"+k);q.length?q.prop("checked",
!0):p(k,k)}l[0].value="";return!1}).on("keypress","#NEW_"+n,function(l){13===l.keyCode&&(l.preventDefault(),$("#add_"+n).trigger("click"))})})},d=function(){$(".reminder-section").each(function(){$(this).find(".reminder-item:not(.dismissed)").length||$(this).hide()})},e=function(f,n,l){$("#reminder-items-inactive").hide();d();$("#reminder-header-inactive").addClass("SimulateLink").prepend($('<span class="ui-icon ui-icon-triangle-1-e" style="display: inline-block">'));$("#reminder-add-link, #reminder-show-dismissed, #show-closed-notices").uibutton();
$("#existing-reminders-page").addClass("hide-dismissed").find(".dismissed").length||$("#reminder-dismiss-ui").hide();f.find(".AutoShorten").autoShorten(null,n,l)};window.initialize_reminders=function(f,n,l,p,k,q,w,v,m,u){var h=null;a(n,u);b();e($("#existing-reminders-page"),q,w);var g=$("#existing-reminders-page").on("click","#reminder-header-inactive",function(){var y=$("#reminder-items-inactive"),B=$(this).find("span.ui-icon");y.is(":hidden")?(y.slideDown("slow"),B.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s")):
(y.slideUp("slow"),B.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e"))}).on("click","#reminder-show-dismissed",function(){this.checked?(g.removeClass("hide-dismissed"),$(".reminder-section").show()):(g.addClass("hide-dismissed"),d())}).uitooltip({items:"span.details-link",content:function(){return $(this).data("tooltip")}}).on("click",".dismiss-reminder,.restore-reminder",function(){var y=$(this),B=y.is(".dismiss-reminder"),C=y.data("reminderId");$.when($.ajax(p.replace("IDIDID",
C),{dataType:"json",type:"post",cache:!1,data:{dismiss:B?"on":null,json_api:"on"}})).done(function(A){if(A.success){var t=y.parents("tr").first();A.dismissed?(t.addClass("dismissed"),$("#reminder-dismiss-ui").show()):(t.removeClass("dismissed"),$("#existing-reminders-page .dismissed").length||$("#reminder-dismiss-ui").hide())}})}),x=$("#reminders").click(function(){var y=$("#existing-reminders-page").empty().text(v);$.when($.ajax(l,{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(B){B.success?
(y[0].innerHTML=B.reminders,e(y,q,w),h.height()>$(window).height()-10&&h.dialog("option","height",$(window).height()-10),h.dialog("option","position","center")):h.empty().append($('<p class="Alert"></p>').text(B.ErrMsg))});h?(h.dialog("option","height","auto"),h.dialog("open")):(h=$("#reminder-dialog").dialog({title:f,width:500,maxHeight:$(window).height()-10,open:function(){$(this).dialog({position:"center"})}}),$(window).resize($.throttle(250,function(){h.dialog("option","maxHeight",$(this).height()-
10)})))}),r=null;$("#reminder-dialog").on("click",".edit-link",function(y){y.preventDefault();$("#reminder-edit-dialog").empty().text(v);$.when($.ajax(this.href,{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(B){B.success?(r[0].innerHTML=B.form,r.find(".DatePicker").css("zIndex",r.css("zIndex")).autodatepicker(),a(n),r.dialog("option","position","center")):r.empty().append($('<p class="Alert"></p>').text(B.ErrMsg))});r?r.dialog("open"):r=$("#reminder-edit-dialog").dialog({width:"auto",
height:"auto"});return!1});$("#reminder-edit-dialog").on("submit","form",function(y){y.preventDefault();y=$(this);$.when($.ajax(y.prop("action"),{dataType:"json",data:y.serialize(),type:y.prop("method")})).done(function(B){B.success?(x.trigger("click"),r.dialog("close")):(r[0].innerHTML=B.form,r.find(".DatePicker").css("zIndex",r.css("zIndex")).autodatepicker(),a(n))});return!1}).on("click","#delete-reminder",function(y){y.preventDefault();$("#reminder-edit-dialog").empty().text(v);$.when($.ajax(m.replace("IDIDID",
$(this).data("reminderId")),{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(B){B.success?(r[0].innerHTML=B.form,r.dialog("option","position","center")):r.empty().append($('<p class="Alert"></p>').text(B.ErrMsg))});return!1})}})();
(function(){var c=null;window.initialize_record_maps=function(a,b){c=$("div#map_canvas");if(c.length){a="https://www.google.com/maps/embed/v1/place?"+a;var d=c.attr("latitude")+","+c.attr("longitude");a=a+"&"+$.param({center:d,zoom:13,q:d,maptype:"roadmap",language:b});c.show();c.append($("<iframe>").prop({src:a,frameborder:0}).css({border:0,height:"100%",width:"100%"}))}}})();
(function(){var c={},a=jQuery,b=null,d={},e={},f="",n=function(){var t=a(this);t.uibutton({icons:{primary:t.data("icon")},text:!1})},l=function(t){b=b.map(function(){return 0<=t.indexOf(a(this).data("vutId"))?this:null});b.each(function(){var z=a(this),D=z.data("vutId");z.data("uiAdded")||(z.data("uiAdded",!0),a('<span class="vacancy-ui vacancy-buttonset"><button class="vacancy-edit" id="vacancy-edit-'+D+'" data-vut-id="'+D+'" title="'+c.edit_txt+'" data-icon="ui-icon-pencil">'+c.edit_txt+'</button><button class="vacancy-history" data-icon="ui-icon-note" data-vut-id="'+
D+'" title="'+c.history_txt+'">'+c.history_txt+"</button></span>").buttonset().insertAfter(z).find("button").each(n))})},p=function(t,z,D){z=a('<div class="alert alert-dismissable '+z+'" style="display: none"></div>').text(D).append('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');D=t.children().first();D.length?D.before(z):t.append(z);z.slideDown("slow")},k=function(t){a.each(t,function(z,D){a("#vacancy-count-"+D.bt_vut_id).text(D.text)})},
q=function(t,z,D,F){return function(E){D.unblock();E.updates&&k(E.updates);p(F,(E.success?"alert-highlight":"alert-error")+" vacancy-notification",E.msg)}},w=function(t,z,D,F){return function(E,H){D.unblock();p(F,"alert-error vacancy-notification",c.server_error_txt+("error"!==H?H:E.statusText))}},v,m=function(){f&&(v&&clearTimeout(v),v=setTimeout(u,15E3))},u=function(){v=null;a.ajax({dataType:"json",url:c.refresh_url,cache:!1,data:{ids:f}}).done(function(t){t.success&&k(t.updates)}).always(m)},h=
function(t,z){var D=z.parent().block({message:null});z=z.data("vutId");var F=D.find(".vacancy-count"),E=D.find(".vacancy-notify-area");E.length||(E=a('<div class="vacancy-notify-area alert-stack"></div>'),E.appendTo(D));a.ajax({dataType:"json",url:c.increment_url,type:"POST",data:{BT_VUT_ID:z,Value:t}}).done(q(z,F,D,E)).fail(w(z,F,D,E))},g=function(){if(c.permission_url){b=a(".vacancy-count");var t=b.map(function(){return a(this).data("vutId")}).get();if(f=t=t.join())a.ajax({dataType:"json",url:c.permission_url,
cache:!1,data:{ids:t}}).done(l),m()}},x=null,r=function(){x||=a('<div id="vacancy-dialog" style="display:none;"></div>').appendTo(a("body")).dialog({autoOpen:!1,closeText:c.close_txt,title:c.history_title_txt,minWidth:500});return x},y=function(t,z){z=a('<p class="Alert"></p>').text(z);t.empty().append(z)},B=function(t){var z=r();t.success?z.empty().html(t.content):y(z,t.content);z.dialog("option","title",t.title)},C=function(t,z){var D=r();y(D,c.server_error_txt+("error"!==z?z:t.statusText))},A=
function(){a(document).on("click",".vacancy-edit",function(t){t.preventDefault();t.stopPropagation();t=a(this);var z=t.data("vutId"),D=t.parent(),F=d[z];F||(F=a('<span class="vacancy-incrementer-ui vacancy-buttonset" style="display: none;" id="vacancy-incrementer-'+z+'" data-vut-id="'+z+'"><button class="vacancy-incrementer-up" data-icon="ui-icon-plusthick">'+c.up_txt+'</button><button class="vacancy-incrementer-down" data-icon="ui-icon-minusthick">'+c.down_txt+'</button><button class="vacancy-incrementer-done" data-icon="ui-icon-check">'+
c.done_txt+"</button></span>").buttonset().insertAfter(D),F.find("button").each(n),e[z]=D);t.parent().hide();F.show()}).on("click",".vacancy-incrementer-done",function(t){t.preventDefault();t.stopPropagation();t=a(this).parent();var z=t.data("vutId");z=e[z];t.hide();z.show();var D=t.parent().parent().find(".vacancy-notify-area");D.slideUp("fast",function(){D.remove()})}).on("click",".vacancy-incrementer-up",function(t){t.preventDefault();t.stopPropagation();h(1,a(this).parent())}).on("click",".vacancy-incrementer-down",
function(t){t.preventDefault();t.stopPropagation();h(-1,a(this).parent())}).on("click",".vacancy-history",function(t){t.preventDefault();t.stopPropagation();t=a(this).data("vutId");r().html('<p class="Info">'+c.loading_txt+"</p>").dialog("close").dialog("open").dialog("option","title",c.history_title_txt);a.ajax({dataType:"json",url:c.history_url,cache:!1,data:{BT_VUT_ID:t}}).done(B).fail(C)}).on("click",".close",function(t){t.preventDefault();t.stopPropagation();t=a(this);var z=t.parents("."+t.data("dismiss")).first();
z.slideUp("slow",function(){z.remove()})})};window.initialize_vacancy=function(t){c=t;g();A()};window.initialize_vacancy_options=function(t){c=t};window.initialize_vacancy_ui=g;window.initialize_vacancy_events=A})();
(function(){var c=function(){$(".agency-overview").each(function(){$(this).find(".related-row:visible").last().addClass("last-visible")})};window.initialize_listing_toggle=function(a,b,d,e){$(document).on("click",".show-toggle",function(){var f=$(this),n=f.parents(".related-records"),l=n.find(".details"),p=n.parents(".agency-overview");if(l.is(":visible"))l.slideUp(function(){f.text(a);p.find(".related-row").removeClass("last-visible").filter(":visible").last().addClass("last-visible")});else{var k=
p.find(".related-row").removeClass("last-visible");l.slideDown(function(){f.text(b);k.filter(":visible").last().addClass("last-visible")})}return!1}).on("click",".deleted-toggle",function(){var f=$(this),n=f.parents(".related-records"),l=n.find(".deleted-records"),p=n.parents(".agency-overview");if(l.is(":visible"))l.slideUp(function(){f.text(d);p.find(".related-row").removeClass("last-visible").filter(":visible").last().addClass("last-visible")});else{var k=p.find(".related-row").removeClass("last-visible");
l.slideDown(function(){f.text(e);k.filter(":visible").last().addClass("last-visible")})}return!1});c()};window.add_details_last_visible_class=c})();
