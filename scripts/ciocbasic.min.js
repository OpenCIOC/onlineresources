window.CIOC={};
(function(a,b){b.do_drop_down_navigation=function(){for(var f=a.getElementById("ActionList").options,e=0;e<f.length;e++)if(f[e].selected){var d=f[e].getAttribute("href");d&&("undefined"!=typeof f[e].attributes.newwindow?b.open(d):b.location.href=d);break}};jQuery(function(f){f("[data-toggle=dialog]").each(function(){var e=f(this),d=f(e.data("target")),m={autoOpen:!1,title:d.data("title"),modal:d.data("modal")};d.dialog(m);e.click(function(){d.dialog("isOpen")?d.dialog("close"):d.dialog("open")})})})})(document,window);
function CheckAll(a,b){a||="IDList";var f=b;b||(f=document.RecordList);b=f.elements.length;for(var e=0;e<b;e++){var d=f.elements[e];d.name===a&&(d.checked=!0)}}function ClearAll(a,b){a||="IDList";var f=b;b||(f=document.RecordList);b=f.elements.length;for(var e=0;e<b;e++){var d=f.elements[e];d.name===a&&(d.checked=!1)}}function add_class(a,b){a&&!(new RegExp("\\b"+b+"\\b")).test(a.className)&&(a.className&&(b=" "+b),a.className+=b)}
function remove_class(a,b){if(a){for(var f=a.className.split(" "),e=[],d=0;d<f.length;d++){var m=f[d];m!==b&&e.push(m)}a.className=e.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,b){window.open(a,b,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,b){window.open(a,b,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,b){window.open(a,b,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var b={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var f=a(this).data("popargs");(b[f.size||"sm"]||openWin)(this.href,f.name||"popwin");return!1})});
(function(){var a=jQuery,b={},f=function(c){null!==c&&"undefined"!==typeof c?a("#myListCount").text(c):(c=a("#myListCount").text())&&(c=parseInt(c,10));c?b.myListLink.show():b.myListLink.hide()},e=function(c){a.each(c,function(k,n){a("#added_to_list_"+n).show();a("#add_to_list_"+n).hide()})},d=function(c){return function(k){k.fail?alert(k.errinfo):(k.ids?f(a.grep(k.ids,g[b.domain]).length):k.count?f(k.count):f(0),e([c]))}},m=function(c){c=a(c.currentTarget).data("id");a.ajax({success:d(c),dataType:"json",
error:function(){alert("Error")},data:{id:c},type:"POST",url:b.current_list_url})},t=function(c){return function(k){if(k.fail)alert(k.errinfo);else{k=!0;if(c){var n=a("#results_table #remove_from_list_"+c);n.length?n.parent().parent().remove():(k=!1,n=a("#results_container #remove_from_list_"+c),n.parents(".dlist-result").remove())}(k?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&c||(a("#records_ui").hide(),a("#no_records_message").show())}}},r=function(c){c=
a(c.currentTarget).data("id");a.ajax({success:t(c),dataType:"json",error:function(){alert("Error")},data:{ID:c,RemoveItem:b.domain},type:"POST",url:b.current_list_url})},p=function(c){a.ajax({success:t(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:b.domain},type:"POST",url:b.current_list_url})},g={CIC:function(c){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(c)},VOL:function(c){return/^[1-9][0-9]*$/.test(c)}},l=function(c){if(c.fail)q();else if(c.inrequest){var k=a.grep(c.ids,
g[b.domain]);e(k);f(k.length);(c=c.previous_ids)&&a.each(c,function(n,u){a("#ct_added_to_previous_request_"+u).show()});a(".ListUI img").prop("src",function(n,u){return u.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();b.current_list_url=b.ct_update_url;h()}else q()},q=function(){var c=function(){b.list_view_mode||e(b.already_added||[]);b.current_list_url=b.list_view_mode&&"ct"===b.list_view_mode?b.ct_update_url:b.list_update_url;f((b.already_added||[]).length);
h()};b.list_view_mode||b.has_session?c():a.ajax({dataType:"json",error:null,url:b.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(k){k.has_session&&c()}})},h=function(){a(".HideListUI").delegate(".add_to_list","click",m).delegate(".remove_from_list","click",r).removeClass("HideListUI");a("#remove_all_from_list").click(p);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(c){b=c;b.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
c.in_request?a.ajax({success:l,dataType:"json",error:null,type:"POST",url:c.in_request}):q()}})();this.JSON||(this.JSON={});
(function(){function a(g){return 10>g?"0"+g:g}function b(g){d.lastIndex=0;return d.test(g)?'"'+g.replace(d,function(l){var q=r[l];return"string"===typeof q?q:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+g+'"'}function f(g,l){var q=m,h=l[g];h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(g));"function"===typeof p&&(h=p.call(l,g,h));switch(typeof h){case "string":return b(h);case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);
case "object":if(!h)return"null";m+=t;var c=[];if("[object Array]"===Object.prototype.toString.apply(h)){var k=h.length;for(g=0;g<k;g+=1)c[g]=f(g,h)||"null";l=0===c.length?"[]":m?"[\n"+m+c.join(",\n"+m)+"\n"+q+"]":"["+c.join(",")+"]";m=q;return l}if(p&&"object"===typeof p)for(k=p.length,g=0;g<k;g+=1){var n=p[g];"string"===typeof n&&(l=f(n,h))&&c.push(b(n)+(m?": ":":")+l)}else for(n in h)Object.hasOwnProperty.call(h,n)&&(l=f(n,h))&&c.push(b(n)+(m?": ":":")+l);l=0===c.length?"{}":m?"{\n"+m+c.join(",\n"+
m)+"\n"+q+"}":"{"+c.join(",")+"}";m=q;return l}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(g){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(g){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m,t,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(g,l,q){var h;t=m="";if("number"===typeof q)for(h=0;h<q;h+=1)t+=" ";else"string"===typeof q&&(t=q);if((p=l)&&"function"!==typeof l&&("object"!==typeof l||"number"!==typeof l.length))throw Error("JSON.stringify");return f("",{"":g})});
"function"!==typeof JSON.parse&&(JSON.parse=function(g,l){function q(h,c){var k,n=h[c];if(n&&"object"===typeof n)for(k in n)if(Object.hasOwnProperty.call(n,k)){var u=q(n,k);void 0!==u?n[k]=u:delete n[k]}return l.call(h,c,n)}g=String(g);e.lastIndex=0;e.test(g)&&(g=g.replace(e,function(h){return"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(g.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+g+")"),"function"===typeof l?q({"":g},""):g;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var b={};jQuery(a).find("input,select,textarea").each(function(f){if(this.name)if(b[this.name]||(b[this.name]=[]),"select"===this.nodeName.toLowerCase()){var e=b[this.name];$(this).find("option").each(function(d){this.selected&&e.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&b[this.name].push(this.value||"")});return b};window.restore_form_values=function(a,b){var f=jQuery;f(a).find("input,select,textarea").each(function(e){if(this.name){var d=
b[this.name];"undefined"!=typeof d&&null!==d&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?f(this).find("option").each(function(m){this.selected=1<d.length?0<=f.inArray(this.value,d):0===d.length?!1:this.value===d[0]}):this.value=d.length?d[0]:"":this.checked=1<d.length?0<=f.inArray(this.value,d):0===d.length?!1:this.value===d[0])}})};window.init_cached_state=function(a){var b=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];var f=function(){var e=document.getElementById("cache_form_values");if(e){var d={form_values:get_form_values(a)};b.each(onbeforeunload_fns,function(m,t){t(d)});e.value=JSON.stringify(d)}};document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&f()});document.addEventListener("freeze",f);window.addEventListener("pagehide",f);window.cache_register_onbeforeunload=function(e){onbeforeunload_fns.push(e)};window.cache_register_onbeforerestorevalues=
function(e){onbeforerestorevalues_fns.push(e)};window.restore_cached_state=function(){b(window).on("pageshow",function(e){if(!e.originalEvent.persisted&&(e=document.getElementById("cache_form_values"))&&e.value){var d=JSON.parse(e.value);b.each(onbeforerestorevalues_fns,function(m,t){t(d)});restore_form_values(a,d.form_values)}})}}})();
(function(){var a=jQuery,b={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},f={"en-CA":!0,"":!0},e={},d={"fr-CA":"fr","es-MX":"es"},m=function(){var r=a(this),p=r.data("culture"),g=b[p]||a.datepicker.regional[p].dateFormat,l={};r.hasClass("NoYear")&&(g=g.replace(/[\- .\/]*yy[\/]?/,""),l={beforeShow:function(q,
h){h.dpDiv.addClass("NoYearDatePicker")},onClose:function(q,h){h.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});l.dateFormat=g;r.datepicker(a.extend({},a.datepicker.regional[p],l)).prop("autocomplete","off")},t=function(r){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+r+".min.js",function(){f[r]=!0;a.each(e[r],function(){m.call(this)});delete e[r]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var r=
a(this);var p=r.parents("[lang]").first().prop("lang")||"en-CA";p=d[p]||p;r.data("culture",p);f[p]?m.call(this):(r=e[p],r||(r=e[p]=[],t(p)),r.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
