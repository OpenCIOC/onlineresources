/*
 jQuery Validation Plugin v1.20.0

 https://jqueryvalidation.org/

 Copyright (c) 2023 J?rn Zaefferer
 Released under the MIT license
 jQuery throttle / debounce - v1.1 - 3/7/2010
 http://benalman.com/projects/jquery-throttle-debounce-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
*/
window.CIOC={};
(function(c,n){n.do_drop_down_navigation=function(){for(var l=c.getElementById("ActionList").options,g=0;g<l.length;g++)if(l[g].selected){var a=l[g].getAttribute("href");a&&("undefined"!=typeof l[g].attributes.newwindow?n.open(a):n.location.href=a);break}};jQuery(function(l){l("[data-toggle=dialog]").each(function(){var g=l(this),a=l(g.data("target")),b={autoOpen:!1,title:a.data("title"),modal:a.data("modal")};a.dialog(b);g.click(function(){a.dialog("isOpen")?a.dialog("close"):a.dialog("open")})})})})(document,window);
function CheckAll(c,n){c||="IDList";var l=n;n||(l=document.RecordList);n=l.elements.length;for(var g=0;g<n;g++){var a=l.elements[g];a.name===c&&(a.checked=!0)}}function ClearAll(c,n){c||="IDList";var l=n;n||(l=document.RecordList);n=l.elements.length;for(var g=0;g<n;g++){var a=l.elements[g];a.name===c&&(a.checked=!1)}}function add_class(c,n){c&&!(new RegExp("\\b"+n+"\\b")).test(c.className)&&(c.className&&(n=" "+n),c.className+=n)}
function remove_class(c,n){if(c){for(var l=c.className.split(" "),g=[],a=0;a<l.length;a++){var b=l[a];b!==n&&g.push(b)}c.className=g.join(" ")}}function hide(c){add_class(c,"NotVisible")}function show(c){remove_class(c,"NotVisible")}function openWin(c,n){window.open(c,n,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(c,n){window.open(c,n,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(c,n){window.open(c,n,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(c){var n={sm:openWin,lg:openWinL,xl:openWinXL};c(document).on("click","a.poplink",function(){var l=c(this).data("popargs");(n[l.size||"sm"]||openWin)(this.href,l.name||"popwin");return!1})});
(function(){var c=jQuery,n={},l=function(m){null!==m&&"undefined"!==typeof m?c("#myListCount").text(m):(m=c("#myListCount").text())&&(m=parseInt(m,10));m?n.myListLink.show():n.myListLink.hide()},g=function(m){c.each(m,function(r,t){c("#added_to_list_"+t).show();c("#add_to_list_"+t).hide()})},a=function(m){return function(r){r.fail?alert(r.errinfo):(r.ids?l(c.grep(r.ids,f[n.domain]).length):r.count?l(r.count):l(0),g([m]))}},b=function(m){m=c(m.currentTarget).data("id");c.ajax({success:a(m),dataType:"json",
error:function(){alert("Error")},data:{id:m},type:"POST",url:n.current_list_url})},d=function(m){return function(r){if(r.fail)alert(r.errinfo);else{r=!0;if(m){var t=c("#results_table #remove_from_list_"+m);t.length?t.parent().parent().remove():(r=!1,t=c("#results_container #remove_from_list_"+m),t.parents(".dlist-result").remove())}(r?1!==c("#results_table tr").length:0!==c("#results_container .dlist-result").length)&&m||(c("#records_ui").hide(),c("#no_records_message").show())}}},e=function(m){m=
c(m.currentTarget).data("id");c.ajax({success:d(m),dataType:"json",error:function(){alert("Error")},data:{ID:m,RemoveItem:n.domain},type:"POST",url:n.current_list_url})},h=function(m){c.ajax({success:d(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:n.domain},type:"POST",url:n.current_list_url})},f={CIC:function(m){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(m)},VOL:function(m){return/^[1-9][0-9]*$/.test(m)}},k=function(m){if(m.fail)p();else if(m.inrequest){var r=c.grep(m.ids,
f[n.domain]);g(r);l(r.length);(m=m.previous_ids)&&c.each(m,function(t,w){c("#ct_added_to_previous_request_"+w).show()});c(".ListUI img").prop("src",function(t,w){return w.replace("list","referral")});c("#list_header_text").hide();c("#ct_header_text").show();n.current_list_url=n.ct_update_url;q()}else p()},p=function(){var m=function(){n.list_view_mode||g(n.already_added||[]);n.current_list_url=n.list_view_mode&&"ct"===n.list_view_mode?n.ct_update_url:n.list_update_url;l((n.already_added||[]).length);
q()};n.list_view_mode||n.has_session?m():c.ajax({dataType:"json",error:null,url:n.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(r){r.has_session&&m()}})},q=function(){c(".HideListUI").delegate(".add_to_list","click",b).delegate(".remove_from_list","click",e).removeClass("HideListUI");c("#remove_all_from_list").click(h);c.browser.msie&&"8.0">c.browser.msie&&c(".ListUI").removeClass("FixIE")};window.init_list_adder=function(m){n=m;n.myListLink=c("#myListLink").parent(":hidden").add("#myListLink");
m.in_request?c.ajax({success:k,dataType:"json",error:null,type:"POST",url:m.in_request}):p()}})();this.JSON||(this.JSON={});
(function(){function c(f){return 10>f?"0"+f:f}function n(f){a.lastIndex=0;return a.test(f)?'"'+f.replace(a,function(k){var p=e[k];return"string"===typeof p?p:"\\u"+("0000"+k.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function l(f,k){var p=b,q=k[f];q&&"object"===typeof q&&"function"===typeof q.toJSON&&(q=q.toJSON(f));"function"===typeof h&&(q=h.call(k,f,q));switch(typeof q){case "string":return n(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);
case "object":if(!q)return"null";b+=d;var m=[];if("[object Array]"===Object.prototype.toString.apply(q)){var r=q.length;for(f=0;f<r;f+=1)m[f]=l(f,q)||"null";k=0===m.length?"[]":b?"[\n"+b+m.join(",\n"+b)+"\n"+p+"]":"["+m.join(",")+"]";b=p;return k}if(h&&"object"===typeof h)for(r=h.length,f=0;f<r;f+=1){var t=h[f];"string"===typeof t&&(k=l(t,q))&&m.push(n(t)+(b?": ":":")+k)}else for(t in q)Object.hasOwnProperty.call(q,t)&&(k=l(t,q))&&m.push(n(t)+(b?": ":":")+k);k=0===m.length?"{}":b?"{\n"+b+m.join(",\n"+
b)+"\n"+p+"}":"{"+m.join(",")+"}";b=p;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(f){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(f){return this.valueOf()});var g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
a=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b,d,e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof JSON.stringify&&(JSON.stringify=function(f,k,p){var q;d=b="";if("number"===typeof p)for(q=0;q<p;q+=1)d+=" ";else"string"===typeof p&&(d=p);if((h=k)&&"function"!==typeof k&&("object"!==typeof k||"number"!==typeof k.length))throw Error("JSON.stringify");return l("",{"":f})});
"function"!==typeof JSON.parse&&(JSON.parse=function(f,k){function p(q,m){var r,t=q[m];if(t&&"object"===typeof t)for(r in t)if(Object.hasOwnProperty.call(t,r)){var w=p(t,r);void 0!==w?t[r]=w:delete t[r]}return k.call(q,m,t)}f=String(f);g.lastIndex=0;g.test(f)&&(f=f.replace(g,function(q){return"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+f+")"),"function"===typeof k?p({"":f},""):f;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(c){var n={};jQuery(c).find("input,select,textarea").each(function(l){if(this.name)if(n[this.name]||(n[this.name]=[]),"select"===this.nodeName.toLowerCase()){var g=n[this.name];$(this).find("option").each(function(a){this.selected&&g.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&n[this.name].push(this.value||"")});return n};window.restore_form_values=function(c,n){var l=jQuery;l(c).find("input,select,textarea").each(function(g){if(this.name){var a=
n[this.name];"undefined"!=typeof a&&null!==a&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?l(this).find("option").each(function(b){this.selected=1<a.length?0<=l.inArray(this.value,a):0===a.length?!1:this.value===a[0]}):this.value=a.length?a[0]:"":this.checked=1<a.length?0<=l.inArray(this.value,a):0===a.length?!1:this.value===a[0])}})};window.init_cached_state=function(c){var n=jQuery;c=c||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];n(window).on("beforeunload",function(){var l={form_values:get_form_values(c)};n.each(onbeforeunload_fns,function(g,a){a(l)});document.getElementById("cache_form_values").value=JSON.stringify(l)});window.cache_register_onbeforeunload=function(l){onbeforeunload_fns.push(l)};window.cache_register_onbeforerestorevalues=function(l){onbeforerestorevalues_fns.push(l)};window.restore_cached_state=function(){var l=document.getElementById("cache_form_values");if(l&&l.value){var g=
JSON.parse(l.value);n.each(onbeforerestorevalues_fns,function(a,b){b(g)});restore_form_values(c,g.form_values)}}}})();
(function(){var c=jQuery,n={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},l={"en-CA":!0,"":!0},g={},a={"fr-CA":"fr","es-MX":"es"},b=function(){var e=c(this),h=e.data("culture"),f=n[h]||c.datepicker.regional[h].dateFormat,k={};e.hasClass("NoYear")&&(f=f.replace(/[\- .\/]*yy[\/]?/,""),k={beforeShow:function(p,
q){q.dpDiv.addClass("NoYearDatePicker")},onClose:function(p,q){q.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});k.dateFormat=f;e.datepicker(c.extend({},c.datepicker.regional[h],k)).prop("autocomplete","off")},d=function(e){c.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+c.ui.version+"/i18n/jquery.ui.datepicker-"+e+".min.js",function(){l[e]=!0;c.each(g[e],function(){b.call(this)});delete g[e]})};c.datepicker.regional["en-CA"]=c.extend({},c.datepicker.regional[""]);c.fn.extend({autodatepicker:function(){return this.each(function(){var e=
c(this);var h=e.parents("[lang]").first().prop("lang")||"en-CA";h=a[h]||h;e.data("culture",h);l[h]?b.call(this):(e=g[h],e||(e=g[h]=[],d(h)),e.push(this))})}});jQuery(function(){c("input.DatePicker").autodatepicker()})})();
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof module&&module.exports?module.exports=c(require("jquery")):c(jQuery)})(function(c){c.extend(c.fn,{validate:function(a){if(this.length){var b=c.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new c.validator(a,this[0]);c.data(this[0],"validator",b);b.settings.onsubmit&&(this.on("click.validate",":submit",function(d){b.submitButton=d.currentTarget;c(this).hasClass("cancel")&&(b.cancelSubmit=
!0);void 0!==c(this).attr("formnovalidate")&&(b.cancelSubmit=!0)}),this.on("submit.validate",function(d){function e(){var h;b.submitButton&&(b.settings.submitHandler||b.formSubmitted)&&(h=c("<input type='hidden'/>").attr("name",b.submitButton.name).val(c(b.submitButton).val()).appendTo(b.currentForm));if(b.settings.submitHandler&&!b.settings.debug){var f=b.settings.submitHandler.call(b,b.currentForm,d);h&&h.remove();return void 0!==f?f:!1}return!0}b.settings.debug&&d.preventDefault();if(b.cancelSubmit)return b.cancelSubmit=
!1,e();if(b.form())return b.pendingRequest?(b.formSubmitted=!0,!1):e();b.focusInvalid();return!1}));return b}a&&a.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if(c(this[0]).is("form"))var a=this.validate().form();else{var b=[];a=!0;var d=c(this[0].form).validate();this.each(function(){(a=d.element(this)&&a)||(b=b.concat(d.errorList))});d.errorList=b}return a},rules:function(a,b){var d=this[0],e="undefined"!==typeof this.attr("contenteditable")&&
"false"!==this.attr("contenteditable");if(null!=d&&(!d.form&&e&&(d.form=this.closest("form")[0],d.name=this.attr("name")),null!=d.form)){if(a){e=c.data(d.form,"validator").settings;var h=e.rules;var f=c.validator.staticRules(d);switch(a){case "add":c.extend(f,c.validator.normalizeRule(b));delete f.messages;h[d.name]=f;b.messages&&(e.messages[d.name]=c.extend(e.messages[d.name],b.messages));break;case "remove":if(!b)return delete h[d.name],f;var k={};c.each(b.split(/\s/),function(p,q){k[q]=f[q];delete f[q]});
return k}}a=c.validator.normalizeRules(c.extend({},c.validator.classRules(d),c.validator.attributeRules(d),c.validator.dataRules(d),c.validator.staticRules(d)),d);a.required&&(b=a.required,delete a.required,a=c.extend({required:b},a));a.remote&&(b=a.remote,delete a.remote,a=c.extend(a,{remote:b}));return a}}});var n=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};c.extend(c.expr.pseudos||c.expr[":"],{blank:function(a){return!n(""+c(a).val())},filled:function(a){a=c(a).val();
return null!==a&&!!n(""+a)},unchecked:function(a){return!c(a).prop("checked")}});c.validator=function(a,b){this.settings=c.extend(!0,{},c.validator.defaults,a);this.currentForm=b;this.init()};c.validator.format=function(a,b){if(1===arguments.length)return function(){var d=c.makeArray(arguments);d.unshift(a);return c.validator.format.apply(this,d)};if(void 0===b)return a;2<arguments.length&&b.constructor!==Array&&(b=c.makeArray(arguments).slice(1));b.constructor!==Array&&(b=[b]);c.each(b,function(d,
e){a=a.replace(new RegExp("\\{"+d+"\\}","g"),function(){return e})});return a};c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,
this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,b){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===b.which&&""===this.elementValue(a)||-1!==c.inArray(b.keyCode,d)||(a.name in this.submitted||a.name in this.invalid)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},
highlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).addClass(b).removeClass(d):c(a).addClass(b).removeClass(d)},unhighlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).removeClass(b).addClass(d):c(a).removeClass(b).addClass(d)}},setDefaults:function(a){c.extend(c.validator.defaults,a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",
dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:c.validator.format("Please enter no more than {0} characters."),minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),
min:c.validator.format("Please enter a value greater than or equal to {0}."),step:c.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(h){var f="undefined"!==typeof c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");!this.form&&f&&(this.form=c(this).closest("form")[0],this.name=c(this).attr("name"));if(b===this.form){f=c.data(this.form,"validator");var k="on"+h.type.replace(/^validate/,""),p=f.settings;p[k]&&!c(this).is(p.ignore)&&
p[k].call(f,this,h)}}this.labelContainer=c(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm);this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.currentForm,d=this.groups={};c.each(this.settings.groups,function(h,f){"string"===typeof f&&(f=f.split(/\s/));c.each(f,function(k,p){d[p]=
h})});var e=this.settings.rules;c.each(e,function(h,f){e[h]=c.validator.normalizeRule(f)});c(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",
a).on("click.validate","select, option, [type='radio'], [type='checkbox']",a);if(this.settings.invalidHandler)c(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();c.extend(this.submitted,this.errorMap);this.invalid=c.extend({},this.errorMap);this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);
return this.valid()},element:function(a){var b=this.clean(a),d=this.validationTargetFor(b),e=this,h=!0,f;if(void 0===d)delete this.invalid[b.name];else{this.prepareElement(d);this.currentElements=c(d);(f=this.groups[d.name])&&c.each(this.groups,function(p,q){q===f&&p!==d.name&&(b=e.validationTargetFor(e.clean(e.findByName(p))))&&b.name in e.invalid&&(e.currentElements.push(b),h=e.check(b)&&h)});var k=!1!==this.check(d);h=h&&k;this.invalid[d.name]=k?!1:!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));
this.showErrors();c(a).attr("aria-invalid",!k)}return h},showErrors:function(a){if(a){var b=this;c.extend(this.errorMap,a);this.errorList=c.map(this.errorMap,function(d,e){return{message:d,element:b.findByName(e)[0]}});this.successList=c.grep(this.successList,function(d){return!(d.name in a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm();this.invalid={};this.submitted=
{};this.prepareForm();this.hideErrors();var a=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(a)},resetElements:function(a){var b;if(this.settings.unhighlight)for(b=0;a[b];b++)this.settings.unhighlight.call(this,a[b],this.settings.errorClass,""),this.findByName(a[b].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},
objectLength:function(a){var b=0,d;for(d in a)void 0!==a[d]&&null!==a[d]&&!1!==a[d]&&b++;return b},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text("");this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(a){}},
findLastActive:function(){var a=this.lastActive;return a&&1===c.grep(this.errorList,function(b){return b.element.name===a.name}).length&&a},elements:function(){var a=this,b={};return c(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||c(this).attr("name"),e="undefined"!==typeof c(this).attr("contenteditable")&&"false"!==c(this).attr("contenteditable");!d&&a.settings.debug&&window.console&&
console.error("%o has no name assigned",this);e&&(this.form=c(this).closest("form")[0],this.name=d);return this.form!==a.currentForm||d in b||!a.objectLength(c(this).rules())?!1:b[d]=!0})},clean:function(a){return c(a)[0]},errors:function(){var a=this.settings.errorClass.split(" ").join(".");return c(this.settings.errorElement+"."+a,this.errorContext)},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=c([]);this.toHide=c([])},reset:function(){this.resetInternals();
this.currentElements=c([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(a){var b=c(a),d=a.type,e="undefined"!==typeof b.attr("contenteditable")&&"false"!==b.attr("contenteditable");if("radio"===d||"checkbox"===d)return this.findByName(a.name).filter(":checked").val();if("number"===d&&"undefined"!==typeof a.validity)return a.validity.badInput?"NaN":b.val();a=e?b.text():
b.val();if("file"===d){if("C:\\fakepath\\"===a.substr(0,12))return a.substr(12);d=a.lastIndexOf("/");if(0<=d)return a.substr(d+1);d=a.lastIndexOf("\\");return 0<=d?a.substr(d+1):a}return"string"===typeof a?a.replace(/\r/g,""):a},check:function(a){a=this.validationTargetFor(this.clean(a));var b=c(a).rules(),d=c.map(b,function(q,m){return m}).length,e=!1,h=this.elementValue(a),f;this.abortRequest(a);if("function"===typeof b.normalizer)var k=b.normalizer;else"function"===typeof this.settings.normalizer&&
(k=this.settings.normalizer);k&&(h=k.call(a,h),delete b.normalizer);for(f in b){k={method:f,parameters:b[f]};try{var p=c.validator.methods[f].call(this,h,a,k.parameters);if("dependency-mismatch"===p&&1===d)e=!0;else{e=!1;if("pending"===p){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!p)return this.formatAndAdd(a,k),!1}}catch(q){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+a.id+", check the '"+k.method+"' method.",q),q instanceof TypeError&&
(q.message+=".  Exception occurred when checking element "+a.id+", check the '"+k.method+"' method."),q;}}if(!e)return this.objectLength(b)&&this.successList.push(a),!0},customDataMessage:function(a,b){return c(a).data("msg"+b.charAt(0).toUpperCase()+b.substring(1).toLowerCase())||c(a).data("msg")},customMessage:function(a,b){return(a=this.settings.messages[a])&&(a.constructor===String?a:a[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},
defaultMessage:function(a,b){"string"===typeof b&&(b={method:b});var d=this.findDefined(this.customMessage(a.name,b.method),this.customDataMessage(a,b.method),!this.settings.ignoreTitle&&a.title||void 0,c.validator.messages[b.method],"<strong>Warning: No message defined for "+a.name+"</strong>"),e=/\$?\{(\d+)\}/g;"function"===typeof d?d=d.call(this,b.parameters,a):e.test(d)&&(d=c.validator.format(d.replace(e,"{$1}"),b.parameters));return d},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b);
this.errorList.push({message:d,element:a,method:b.method});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){var a;for(a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));
if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},
showLabel:function(a,b){var d,e=this.errorsFor(a),h=this.idOrName(a),f=c(a).attr("aria-describedby");if(e.length)e.removeClass(this.settings.validClass).addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?e.text(b||""):e.html(b||"");else{e=c("<"+this.settings.errorElement+">").attr("id",h+"-error").addClass(this.settings.errorClass);this.settings&&this.settings.escapeHtml?e.text(b||""):e.html(b||"");var k=e;this.settings.wrapper&&(k=e.hide().show().wrap("<"+this.settings.wrapper+
"/>").parent());this.labelContainer.length?this.labelContainer.append(k):this.settings.errorPlacement?this.settings.errorPlacement.call(this,k,c(a)):k.insertAfter(a);if(e.is("label"))e.attr("for",h);else if(0===e.parents("label[for='"+this.escapeCssMeta(h)+"']").length&&(k=e.attr("id"),f?f.match(new RegExp("\\b"+this.escapeCssMeta(k)+"\\b"))||(f+=" "+k):f=k,c(a).attr("aria-describedby",f),d=this.groups[a.name])){var p=this;c.each(p.groups,function(q,m){m===d&&c("[name='"+p.escapeCssMeta(q)+"']",p.currentForm).attr("aria-describedby",
e.attr("id"))})}}!b&&this.settings.success&&(e.text(""),"string"===typeof this.settings.success?e.addClass(this.settings.success):this.settings.success(e,a));this.toShow=this.toShow.add(e)},errorsFor:function(a){var b=this.escapeCssMeta(this.idOrName(a));a=c(a).attr("aria-describedby");b="label[for='"+b+"'], label[for='"+b+"'] *";a&&(b=b+", #"+this.escapeCssMeta(a).replace(/\s+/g,", #"));return this.errors().filter(b)},escapeCssMeta:function(a){return void 0===a?"":a.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,
"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name));return c(a).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){return c(this.currentForm).find("[name='"+this.escapeCssMeta(a)+"']")},getLength:function(a,b){switch(b.nodeName.toLowerCase()){case "select":return c("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},
depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(a,b){return!!c(a,b.form).length},"function":function(a,b){return a(b)}},optional:function(a){var b=this.elementValue(a);return!c.validator.methods.required.call(this,b,a)&&"dependency-mismatch"},elementAjaxPort:function(a){return"validate"+a.name},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,c(a).addClass(this.settings.pendingClass),
this.pending[a.name]=!0)},stopRequest:function(a,b){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];c(a).removeClass(this.settings.pendingClass);b&&0===this.pendingRequest&&this.formSubmitted&&this.form()&&0===this.pendingRequest?(c(this.currentForm).trigger("submit"),this.submitButton&&c("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!b&&0===this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",
[this]),this.formSubmitted=!1)},abortRequest:function(a){if(this.pending[a.name]){var b=this.elementAjaxPort(a);c.ajaxAbort(b);this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];c(a).removeClass(this.settings.pendingClass)}},previousValue:function(a,b){b="string"===typeof b&&b||"remote";return c.data(a,"previousValue")||c.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,{method:b})})},destroy:function(){this.resetForm();c(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},
classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,b){a.constructor===String?this.classRuleSettings[a]=b:c.extend(this.classRuleSettings,a)},classRules:function(a){var b={};(a=c(a).attr("class"))&&c.each(a.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(b,c.validator.classRuleSettings[this])});return b},normalizeAttributeRule:function(a,
b,d,e){/min|max|step/.test(d)&&(null===b||/number|range|text/.test(b))&&(e=Number(e),isNaN(e)&&(e=void 0));e||0===e?a[d]=e:b===d&&"range"!==b&&(a["date"===b?"dateISO":d]=!0)},attributeRules:function(a){var b={},d=c(a),e=a.getAttribute("type"),h;for(h in c.validator.methods){if("required"===h){var f=a.getAttribute(h);""===f&&(f=!0);f=!!f}else f=d.attr(h);this.normalizeAttributeRule(b,e,h,f)}b.maxlength&&/-1|2147483647|524288/.test(b.maxlength)&&delete b.maxlength;return b},dataRules:function(a){var b=
{},d=c(a);a=a.getAttribute("type");var e;for(e in c.validator.methods){var h=d.data("rule"+e.charAt(0).toUpperCase()+e.substring(1).toLowerCase());""===h&&(h=!0);this.normalizeAttributeRule(b,a,e,h)}return b},staticRules:function(a){var b={},d=c.data(a.form,"validator");d.settings.rules&&(b=c.validator.normalizeRule(d.settings.rules[a.name])||{});return b},normalizeRules:function(a,b){c.each(a,function(d,e){if(!1===e)delete a[d];else if(e.param||e.depends){var h=!0;switch(typeof e.depends){case "string":h=
!!c(e.depends,b.form).length;break;case "function":h=e.depends.call(b,b)}h?a[d]=void 0!==e.param?e.param:!0:(c.data(b.form,"validator").resetElements(c(b)),delete a[d])}});c.each(a,function(d,e){a[d]="function"===typeof e&&"normalizer"!==d?e(b):e});c.each(["minlength","maxlength"],function(){a[this]&&(a[this]=Number(a[this]))});c.each(["rangelength","range"],function(){if(a[this])if(Array.isArray(a[this]))a[this]=[Number(a[this][0]),Number(a[this][1])];else if("string"===typeof a[this]){var d=a[this].replace(/[\[\]]/g,
"").split(/[\s,]+/);a[this]=[Number(d[0]),Number(d[1])]}});c.validator.autoCreateRanges&&(null!=a.min&&null!=a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),null!=a.minlength&&null!=a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));return a},normalizeRule:function(a){if("string"===typeof a){var b={};c.each(a.split(/\s/),function(){b[this]=!0});a=b}return a},addMethod:function(a,b,d){c.validator.methods[a]=b;c.validator.messages[a]=void 0!==d?d:
c.validator.messages[a];3>b.length&&c.validator.addClassRules(a,c.validator.normalizeRule(a))},methods:{required:function(a,b,d){return this.depend(d,b)?"select"===b.nodeName.toLowerCase()?(a=c(b).val())&&0<a.length:this.checkable(b)?0<this.getLength(a,b):void 0!==a&&null!==a&&0<a.length:"dependency-mismatch"},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},
url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})+(?::(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(a)},
date:function(){var a=!1;return function(b,d){a||(a=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`."));return this.optional(d)||!/Invalid|NaN/.test((new Date(b)).toString())}}(),dateISO:function(a,
b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(a,b,d){a=Array.isArray(a)?a.length:this.getLength(a,b);return this.optional(b)||a>=d},maxlength:function(a,b,d){a=Array.isArray(a)?a.length:this.getLength(a,b);return this.optional(b)||a<=d},rangelength:function(a,b,d){a=
Array.isArray(a)?a.length:this.getLength(a,b);return this.optional(b)||a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||a>=d[0]&&a<=d[1]},step:function(a,b,d){var e=c(b).attr("type"),h="Step attribute on input type "+e+" is not supported.",f=["text","number","range"],k=new RegExp("\\b"+e+"\\b"),p=function(m){return(m=(""+m).match(/(?:\.(\d+))?$/))?m[1]?m[1].length:0:0},q=!0;if(e&&
!k.test(f.join()))throw Error(h);e=p(d);if(p(a)>e||0!==Math.round(a*Math.pow(10,e))%Math.round(d*Math.pow(10,e)))q=!1;return this.optional(b)||q},equalTo:function(a,b,d){d=c(d);if(this.settings.onfocusout&&d.not(".validate-equalTo-blur").length)d.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){c(b).valid()});return a===d.val()},remote:function(a,b,d,e){if(this.optional(b))return"dependency-mismatch";e="string"===typeof e&&e||"remote";var h=this.previousValue(b,e);this.settings.messages[b.name]||
(this.settings.messages[b.name]={});h.originalMessage=h.originalMessage||this.settings.messages[b.name][e];this.settings.messages[b.name][e]=h.message;d="string"===typeof d&&{url:d}||d;var f=c.param(c.extend({data:a},d.data));if(h.old===f)return h.valid;h.old=f;var k=this;this.startRequest(b);f={};f[b.name]=a;c.ajax(c.extend(!0,{mode:"abort",port:this.elementAjaxPort(b),dataType:"json",data:f,context:k.currentForm,success:function(p){var q=!0===p||"true"===p;k.settings.messages[b.name][e]=h.originalMessage;
if(q){var m=k.formSubmitted;k.toHide=k.errorsFor(b);k.formSubmitted=m;k.successList.push(b);k.invalid[b.name]=!1;k.showErrors()}else m={},p=p||k.defaultMessage(b,{method:e,parameters:a}),m[b.name]=h.message=p,k.invalid[b.name]=!0,k.showErrors(m);h.valid=q;k.stopRequest(b,q)}},d));return"pending"}}});var l={};if(c.ajaxPrefilter)c.ajaxPrefilter(function(a,b,d){b=a.port;"abort"===a.mode&&(c.ajaxAbort(b),l[b]=d)});else{var g=c.ajax;c.ajax=function(a){var b=("port"in a?a:c.ajaxSettings).port;return"abort"===
("mode"in a?a:c.ajaxSettings).mode?(c.ajaxAbort(b),l[b]=g.apply(this,arguments),l[b]):g.apply(this,arguments)}}c.ajaxAbort=function(a){l[a]&&(l[a].abort(),delete l[a])};return c});
(function(c,n){"$:nomunge";var l=c.jQuery||c.Cowboy||(c.Cowboy={}),g;l.throttle=g=function(a,b,d,e){function h(){function p(){k=+new Date;d.apply(m,t)}function q(){f=n}var m=this,r=+new Date-k,t=arguments;e&&!f&&p();f&&clearTimeout(f);e===n&&r>a?p():!0!==b&&(f=setTimeout(e?q:p,e===n?a-r:a))}var f,k=0;"boolean"!==typeof b&&(e=d,d=b,b=n);l.guid&&(h.guid=d.guid=d.guid||l.guid++);return h};l.debounce=function(a,b,d){return d===n?g(a,b,!1):g(a,d,!1!==b)}})(this);
(function(){var c=function(g){g=g.toLowerCase();g=g.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");g=g.replace(RegExp("\u00e6","g"),"ae");g=g.replace(RegExp("\u00e7","g"),"c");g=g.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");g=g.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");g=g.replace(RegExp("\u00f1","g"),"n");g=g.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");g=g.replace(RegExp("\u009c","g"),"oe");g=g.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return g=g.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=c;window.slugify=function(g){g=c(g);g=g.replace(/-/g," ").replace(/[^a-z0-9\s]/g,"");g=g.trim();return g.replace(/\s+/g,"-")};var n=function(g,a,b,d,e){b=b||"value";d=d||"";e=e||"";return function(h,f){if(a.term&&(new RegExp(d+g.ui.autocomplete.escapeRegex(a.term)+e,"i")).test(h.term)&&a.content&&13>a.content.length){var k=new RegExp(d+g.ui.autocomplete.escapeRegex(h.term)+e,"i");f(g.grep(a.content,function(p){return k.test(c(p[b]))}));
return!0}return!1}};window.default_cache_search_fn=n;var l=function(g,a,b,d,e){b=b||{};e=e||n(g,b,d||"value");return function(h,f,k){h.term=c(h.term);b.term===h.term&&b.content?f(b.content):e(h,f)||g.ajax({url:k||a,dataType:"json",data:h,cache:!1,success:function(p){b.term=h.term;b.content=p;f(p)}})}};window.create_caching_source_fn=l;window.init_community_autocomplete=function(g,a,b,d,e){var h={};e&&=g(e);e&&!e.length&&(e=null);var f=g("#"+a).autocomplete({focus:function(k,p){return!1},select:function(k,
p){f.data({chkid:p.item.chkid,display:p.item.value})},source:l(g,b,h),minLength:d}).keypress(function(k){"13"==k.keyCode&&(k.preventDefault(),f.autocomplete("close"))});e&&(f.parents("form").on("submit",function(){var k=f.val();if(f.data("display")===k)e.val(f.data("chkid"));else{if(h.content){var p=c(k);k=g.grep(h.content,function(q){return c(q.value)===p});if(1===k.length){e.val(k[0].chkid);f.data({chkid:k[0].chkid,display:k[0].value}).val(k[0].value);return}}e.val("")}}),cache_register_onbeforerestorevalues(function(k){f.length&&
(k=k["autocomplete_data_"+f[0].id])&&f.data(k)}),cache_register_onbeforeunload(function(k){if(f.length){var p=f.data();p.display&&p.chkid&&(k["autocomplete_data_"+f[0].id]={display:p.display,chkid:p.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(l,g,a,b){cache_register_onbeforeunload(function(d){d[g+"_added"]=a});cache_register_onbeforerestorevalues(function(d){(d=d[g+"_added"])&&l.each(d,function(e,h){b(h.chkid,h.display,"")})})};window.basic_chk_add_html=function(l,g){return function(a,b){a=l("<tr>").append(l("<td>").append(l("<input>").prop({id:g+"_ID_"+a,type:"checkbox",checked:!0,defaultChecked:!0,name:g+"_ID",value:a})).append(document.createTextNode(" "+
b))).append(l("<td>").append(l("<input>").prop({id:g+"_NOTES_"+a,name:g+"_NOTES_"+a,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));l("#"+g+"_existing_add_table").append(a);return a.find('input[type="checkbox"]')[0]}};var c={},n=function(l){$("#NEW_"+l).autocomplete(c[l])};window.init_autocomplete_checklist=function(l,g){var a=g.field;if(!c[a]){var b=g.source;g.minLength=g.minLength||1;g.delay=g.delay||300;g.add_new_html=g.add_new_html||basic_chk_add_html(l,a);g.match_prop=
g.match_prop||"value";g.txt_not_found=g.txt_not_found||"Not Found";var d=l(g.delegate_root||document),e=g.added_values||[],h=function(m,r,t){var w=document.getElementById(a+"_ID_"+m);w?(w.checked=!0,g.after_add_new_value&&g.after_add_new_value.call(w)):(e.push({chkid:m,display:r,label:t}),m=g.add_new_html(m,r,t),g.after_add_new_value&&g.after_add_new_value.call(m))};create_checklist_onbefore_fns(l,a,e,h);var f={},k=function(m){l("#NEW_"+a).data({chkid:"",display:"",label:""}).prop("value","").focus();
l("#"+a+"_error").hide("slow",function(){l(this).remove()})},p=null,q=null;(function(m){l.isArray(m)?(q=function(r,t){var w=new RegExp(l.ui.autocomplete.escapeRegex(string_ci_ai(r.term)));t(l.grep(m,function(y){return w.test(string_ci_ai(y[g.match_prop]||y))}))},p=function(r,t){var w=string_ci_ai(r);r=l.grep(m,function(y){return string_ci_ai(string_ci_ai(y[g.match_prop]||y))===w});if(1===r.length)return t(r[0]),!0;t()}):"string"===typeof m?(q=create_caching_source_fn(l,m,f,g.match_prop),p=function(r,
t,w){var y=string_ci_ai(r);if(f.content){var v=l.grep(f.content,function(u){return string_ci_ai(u[g.match_prop])===y});if(1===v.length){t(v[0]);return}}w||string_ci_ai(f.term||"")===y?t():q({term:y},function(u){p(r,t,!0)})}):(q=m,p=g.look_for_fn)})(b);d.on("click","#add_"+a,function(m){m=l("#NEW_"+a);var r=m.data("chkid"),t=m.data("display"),w=m.data("label"),y=m[0].value;if(r&&t&&t==y)return h(r,t,w),k(),!1;p(m[0].value,function(v){v?(h(v.chkid,v.value,v.label),k()):0===l("#"+a+"_error").length&&
(l("#"+a+"_new_input_table").before(l("<p>").hide().addClass("Alert").prop("id",a+"_error").append(document.createTextNode(g.txt_not_found))),l("#"+a+"_error").show("slow"))});return!1});c[a]={focus:function(m,r){return!1},source:q,minLength:g.minLength,delay:g.delay,select:function(m,r){l("#NEW_"+a).data({chkid:r.item.chkid,display:r.item.value,label:r.item.label})}};d.on("keypress","#NEW_"+a,function(m){"13"==m.keyCode&&(m.preventDefault(),l("#NEW_"+a).autocomplete("close"),l("#add_"+a).trigger("click"))})}n(a)};
window.init_languages=function(l,g){var a=null,b=null,d=l("#LN_existing_add_table"),e=function(){var h=l(this).parents(".language-entry").find(".language-details-notes");this.checked?h.slideDown():h.slideUp()};init_autocomplete_checklist(l,{field:"LN",source:entryform.languages_source,txt_not_found:g,after_add_new_value:e,add_new_html:function(h,f){null===a&&(a=l("#add_LN"),b=a.data("newTemplate"));h=b.replace(/LANGNAMELANGNAME/g,f).replace(/IDIDID/g,h);d.append(h)}});d.on("change",".language-primary",
e).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+l(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(h,f){l(this).css(h);l("<div>").addClass("arrow").addClass(f.vertical).addClass(f.horizontal).appendTo(this)}}});window.languages_check_state=e}})();
(function(){jQuery.fn.autoShorten=function(b,d,e){return this.each(function(){b=b||350;d=d||"[read more]";e=e||"[less]";var h=$(this),f=h.html();if(f.length>b){var k=f.substring(0,b).split(" ");k=$("<div>").html(k.slice(0,k.length-1).join(" ")+" ").append('<span class="ellipse-toggle SimulateLink">&hellip; '+d+"</span>").html();$(this).data("replacementText",f+' <span class="ellipse-toggle SimulateLink">'+e+"</span>").html(k).on("click","span.ellipse-toggle",function(){var p=h.html();h.html(h.data("replacementText"));
h.data("replacementText",p)})}})};var c=function(b,d,e){e=e||d+"_ID";return function(h,f){var k=b("#add_"+d).parent(),p=k.parent(),q=p.prev("tr");k=parseInt(k.prop("colspan"),10);var m=q.find("td").length;q.length&&k!==m||(q=b("<tr>").insertBefore(p));q.append(b("<td>").append(b("<label>").text(" "+f).prepend(b('<input type="checkbox" checked>').prop({id:d+"_ID_"+h,value:h,name:e}))))}},n=function(b,d){init_autocomplete_checklist($,{source:b,field:"reminder_user",add_new_html:c($,"reminder_user"),
txt_not_found:d})},l=function(){$(document).on("click","#add_reminder_agency",function(b){b.preventDefault();b=$("#NEW_reminder_agency");var d=c($,"reminder_agency"),e=b[0].value;if(e){var h=$("#reminder_agency_ID_"+e);h.length?h.prop("checked",!0):d(e,e);b.find("option").first().prop({selected:!0})}return!1});$.each(["NUM","VNUM"],function(b,d){$(document).on("click","#add_"+d,function(e){e.preventDefault();e=$("#NEW_"+d);var h=c($,d,d),f=e[0].value;if(f){var k=$("#"+d+"_ID_"+f);k.length?k.prop("checked",
!0):h(f,f)}e[0].value="";return!1}).on("keypress","#NEW_"+d,function(e){13===e.keyCode&&(e.preventDefault(),$("#add_"+d).trigger("click"))})})},g=function(){$(".reminder-section").each(function(){$(this).find(".reminder-item:not(.dismissed)").length||$(this).hide()})},a=function(b,d,e){$("#reminder-items-inactive").hide();g();$("#reminder-header-inactive").addClass("SimulateLink").prepend($('<span class="ui-icon ui-icon-triangle-1-e" style="display: inline-block">'));$("#reminder-add-link, #reminder-show-dismissed, #show-closed-notices").uibutton();
$("#existing-reminders-page").addClass("hide-dismissed").find(".dismissed").length||$("#reminder-dismiss-ui").hide();b.find(".AutoShorten").autoShorten(null,d,e)};window.initialize_reminders=function(b,d,e,h,f,k,p,q,m,r){var t=null;n(d,r);l();a($("#existing-reminders-page"),k,p);var w=$("#existing-reminders-page").on("click","#reminder-header-inactive",function(){var u=$("#reminder-items-inactive"),x=$(this).find("span.ui-icon");u.is(":hidden")?(u.slideDown("slow"),x.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s")):
(u.slideUp("slow"),x.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e"))}).on("click","#reminder-show-dismissed",function(){this.checked?(w.removeClass("hide-dismissed"),$(".reminder-section").show()):(w.addClass("hide-dismissed"),g())}).uitooltip({items:"span.details-link",content:function(){return $(this).data("tooltip")}}).on("click",".dismiss-reminder,.restore-reminder",function(){var u=$(this),x=u.is(".dismiss-reminder"),B=u.data("reminderId");$.when($.ajax(h.replace("IDIDID",
B),{dataType:"json",type:"post",cache:!1,data:{dismiss:x?"on":null,json_api:"on"}})).done(function(z){if(z.success){var A=u.parents("tr").first();z.dismissed?(A.addClass("dismissed"),$("#reminder-dismiss-ui").show()):(A.removeClass("dismissed"),$("#existing-reminders-page .dismissed").length||$("#reminder-dismiss-ui").hide())}})}),y=$("#reminders").click(function(){var u=$("#existing-reminders-page").empty().text(q);$.when($.ajax(e,{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(x){x.success?
(u[0].innerHTML=x.reminders,a(u,k,p),t.height()>$(window).height()-10&&t.dialog("option","height",$(window).height()-10),t.dialog("option","position","center")):t.empty().append($('<p class="Alert"></p>').text(x.ErrMsg))});t?(t.dialog("option","height","auto"),t.dialog("open")):(t=$("#reminder-dialog").dialog({title:b,width:500,maxHeight:$(window).height()-10,open:function(){$(this).dialog({position:"center"})}}),$(window).resize($.throttle(250,function(){t.dialog("option","maxHeight",$(this).height()-
10)})))}),v=null;$("#reminder-dialog").on("click",".edit-link",function(u){u.preventDefault();$("#reminder-edit-dialog").empty().text(q);$.when($.ajax(this.href,{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(x){x.success?(v[0].innerHTML=x.form,v.find(".DatePicker").css("zIndex",v.css("zIndex")).autodatepicker(),n(d),v.dialog("option","position","center")):v.empty().append($('<p class="Alert"></p>').text(x.ErrMsg))});v?v.dialog("open"):v=$("#reminder-edit-dialog").dialog({width:"auto",
height:"auto"});return!1});$("#reminder-edit-dialog").on("submit","form",function(u){u.preventDefault();u=$(this);$.when($.ajax(u.prop("action"),{dataType:"json",data:u.serialize(),type:u.prop("method")})).done(function(x){x.success?(y.trigger("click"),v.dialog("close")):(v[0].innerHTML=x.form,v.find(".DatePicker").css("zIndex",v.css("zIndex")).autodatepicker(),n(d))});return!1}).on("click","#delete-reminder",function(u){u.preventDefault();$("#reminder-edit-dialog").empty().text(q);$.when($.ajax(m.replace("IDIDID",
$(this).data("reminderId")),{dataType:"json",type:"get",cache:!1,data:{json_api:"on"}})).done(function(x){x.success?(v[0].innerHTML=x.form,v.dialog("option","position","center")):v.empty().append($('<p class="Alert"></p>').text(x.ErrMsg))});return!1})}})();
