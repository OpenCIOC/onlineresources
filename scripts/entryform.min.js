/*
 jQuery Validation Plugin v1.20.0

 https://jqueryvalidation.org/

 Copyright (c) 2023 J?rn Zaefferer
 Released under the MIT license
 Globalize

 http://github.com/jquery/globalize

 Copyright Software Freedom Conservancy, Inc.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
window.CIOC={};
(function(b,g){g.do_drop_down_navigation=function(){for(var m=b.getElementById("ActionList").options,e=0;e<m.length;e++)if(m[e].selected){var a=m[e].getAttribute("href");a&&("undefined"!=typeof m[e].attributes.newwindow?g.open(a):g.location.href=a);break}};jQuery(function(m){m("[data-toggle=dialog]").each(function(){var e=m(this),a=m(e.data("target")),c={autoOpen:!1,title:a.data("title"),modal:a.data("modal")};a.dialog(c);e.click(function(){a.dialog("isOpen")?a.dialog("close"):a.dialog("open")})})})})(document,window);
function CheckAll(b,g){b||="IDList";var m=g;g||(m=document.RecordList);g=m.elements.length;for(var e=0;e<g;e++){var a=m.elements[e];a.name===b&&(a.checked=!0)}}function ClearAll(b,g){b||="IDList";var m=g;g||(m=document.RecordList);g=m.elements.length;for(var e=0;e<g;e++){var a=m.elements[e];a.name===b&&(a.checked=!1)}}function add_class(b,g){b&&!(new RegExp("\\b"+g+"\\b")).test(b.className)&&(b.className&&(g=" "+g),b.className+=g)}
function remove_class(b,g){if(b){for(var m=b.className.split(" "),e=[],a=0;a<m.length;a++){var c=m[a];c!==g&&e.push(c)}b.className=e.join(" ")}}function hide(b){add_class(b,"NotVisible")}function show(b){remove_class(b,"NotVisible")}function openWin(b,g){window.open(b,g,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(b,g){window.open(b,g,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(b,g){window.open(b,g,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(b){var g={sm:openWin,lg:openWinL,xl:openWinXL};b(document).on("click","a.poplink",function(){var m=b(this).data("popargs");(g[m.size||"sm"]||openWin)(this.href,m.name||"popwin");return!1})});
(function(){var b=jQuery,g={},m=function(r){null!==r&&"undefined"!==typeof r?b("#myListCount").text(r):(r=b("#myListCount").text())&&(r=parseInt(r,10));r?g.myListLink.show():g.myListLink.hide()},e=function(r){b.each(r,function(z,A){b("#added_to_list_"+A).show();b("#add_to_list_"+A).hide()})},a=function(r){return function(z){z.fail?alert(z.errinfo):(z.ids?m(b.grep(z.ids,h[g.domain]).length):z.count?m(z.count):m(0),e([r]))}},c=function(r){r=b(r.currentTarget).data("id");b.ajax({success:a(r),dataType:"json",
error:function(){alert("Error")},data:{id:r},type:"POST",url:g.current_list_url})},d=function(r){return function(z){if(z.fail)alert(z.errinfo);else{z=!0;if(r){var A=b("#results_table #remove_from_list_"+r);A.length?A.parent().parent().remove():(z=!1,A=b("#results_container #remove_from_list_"+r),A.parents(".dlist-result").remove())}(z?1!==b("#results_table tr").length:0!==b("#results_container .dlist-result").length)&&r||(b("#records_ui").hide(),b("#no_records_message").show())}}},l=function(r){r=
b(r.currentTarget).data("id");b.ajax({success:d(r),dataType:"json",error:function(){alert("Error")},data:{ID:r,RemoveItem:g.domain},type:"POST",url:g.current_list_url})},p=function(r){b.ajax({success:d(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:g.domain},type:"POST",url:g.current_list_url})},h={CIC:function(r){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(r)},VOL:function(r){return/^[1-9][0-9]*$/.test(r)}},q=function(r){if(r.fail)y();else if(r.inrequest){var z=b.grep(r.ids,
h[g.domain]);e(z);m(z.length);(r=r.previous_ids)&&b.each(r,function(A,E){b("#ct_added_to_previous_request_"+E).show()});b(".ListUI img").prop("src",function(A,E){return E.replace("list","referral")});b("#list_header_text").hide();b("#ct_header_text").show();g.current_list_url=g.ct_update_url;v()}else y()},y=function(){var r=function(){g.list_view_mode||e(g.already_added||[]);g.current_list_url=g.list_view_mode&&"ct"===g.list_view_mode?g.ct_update_url:g.list_update_url;m((g.already_added||[]).length);
v()};g.list_view_mode||g.has_session?r():b.ajax({dataType:"json",error:null,url:g.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(z){z.has_session&&r()}})},v=function(){b(".HideListUI").delegate(".add_to_list","click",c).delegate(".remove_from_list","click",l).removeClass("HideListUI");b("#remove_all_from_list").click(p);b.browser.msie&&"8.0">b.browser.msie&&b(".ListUI").removeClass("FixIE")};window.init_list_adder=function(r){g=r;g.myListLink=b("#myListLink").parent(":hidden").add("#myListLink");
r.in_request?b.ajax({success:q,dataType:"json",error:null,type:"POST",url:r.in_request}):y()}})();this.JSON||(this.JSON={});
(function(){function b(h){return 10>h?"0"+h:h}function g(h){a.lastIndex=0;return a.test(h)?'"'+h.replace(a,function(q){var y=l[q];return"string"===typeof y?y:"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function m(h,q){var y=c,v=q[h];v&&"object"===typeof v&&"function"===typeof v.toJSON&&(v=v.toJSON(h));"function"===typeof p&&(v=p.call(q,h,v));switch(typeof v){case "string":return g(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);
case "object":if(!v)return"null";c+=d;var r=[];if("[object Array]"===Object.prototype.toString.apply(v)){var z=v.length;for(h=0;h<z;h+=1)r[h]=m(h,v)||"null";q=0===r.length?"[]":c?"[\n"+c+r.join(",\n"+c)+"\n"+y+"]":"["+r.join(",")+"]";c=y;return q}if(p&&"object"===typeof p)for(z=p.length,h=0;h<z;h+=1){var A=p[h];"string"===typeof A&&(q=m(A,v))&&r.push(g(A)+(c?": ":":")+q)}else for(A in v)Object.hasOwnProperty.call(v,A)&&(q=m(A,v))&&r.push(g(A)+(c?": ":":")+q);q=0===r.length?"{}":c?"{\n"+c+r.join(",\n"+
c)+"\n"+y+"}":"{"+r.join(",")+"}";c=y;return q}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(h){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(h){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
a=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,d,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(h,q,y){var v;d=c="";if("number"===typeof y)for(v=0;v<y;v+=1)d+=" ";else"string"===typeof y&&(d=y);if((p=q)&&"function"!==typeof q&&("object"!==typeof q||"number"!==typeof q.length))throw Error("JSON.stringify");return m("",{"":h})});
"function"!==typeof JSON.parse&&(JSON.parse=function(h,q){function y(v,r){var z,A=v[r];if(A&&"object"===typeof A)for(z in A)if(Object.hasOwnProperty.call(A,z)){var E=y(A,z);void 0!==E?A[z]=E:delete A[z]}return q.call(v,r,A)}h=String(h);e.lastIndex=0;e.test(h)&&(h=h.replace(e,function(v){return"\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(h.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return h=eval("("+h+")"),"function"===typeof q?y({"":h},""):h;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(b){var g={};jQuery(b).find("input,select,textarea").each(function(m){if(this.name)if(g[this.name]||(g[this.name]=[]),"select"===this.nodeName.toLowerCase()){var e=g[this.name];$(this).find("option").each(function(a){this.selected&&e.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&g[this.name].push(this.value||"")});return g};window.restore_form_values=function(b,g){var m=jQuery;m(b).find("input,select,textarea").each(function(e){if(this.name){var a=
g[this.name];"undefined"!=typeof a&&null!==a&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?m(this).find("option").each(function(c){this.selected=1<a.length?0<=m.inArray(this.value,a):0===a.length?!1:this.value===a[0]}):this.value=a.length?a[0]:"":this.checked=1<a.length?0<=m.inArray(this.value,a):0===a.length?!1:this.value===a[0])}})};window.init_cached_state=function(b){var g=jQuery;b=b||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];var m=function(){var e=document.getElementById("cache_form_values");if(e){var a={form_values:get_form_values(b)};g.each(onbeforeunload_fns,function(c,d){d(a)});e.value=JSON.stringify(a)}};document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&m()});document.addEventListener("freeze",m);window.addEventListener("pagehide",m);window.cache_register_onbeforeunload=function(e){onbeforeunload_fns.push(e)};window.cache_register_onbeforerestorevalues=
function(e){onbeforerestorevalues_fns.push(e)};window.restore_cached_state=function(){g(window).on("pageshow",function(e){if(!e.originalEvent.persisted&&(e=document.getElementById("cache_form_values"))&&e.value){var a=JSON.parse(e.value);g.each(onbeforerestorevalues_fns,function(c,d){d(a)});restore_form_values(b,a.form_values)}})}}})();
(function(){var b=jQuery,g={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},m={"en-CA":!0,"":!0},e={},a={"fr-CA":"fr","es-MX":"es"},c=function(){var l=b(this),p=l.data("culture"),h=g[p]||b.datepicker.regional[p].dateFormat,q={};l.hasClass("NoYear")&&(h=h.replace(/[\- .\/]*yy[\/]?/,""),q={beforeShow:function(y,
v){v.dpDiv.addClass("NoYearDatePicker")},onClose:function(y,v){v.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});q.dateFormat=h;l.datepicker(b.extend({},b.datepicker.regional[p],q)).prop("autocomplete","off")},d=function(l){b.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+b.ui.version+"/i18n/jquery.ui.datepicker-"+l+".min.js",function(){m[l]=!0;b.each(e[l],function(){c.call(this)});delete e[l]})};b.datepicker.regional["en-CA"]=b.extend({},b.datepicker.regional[""]);b.fn.extend({autodatepicker:function(){return this.each(function(){var l=
b(this);var p=l.parents("[lang]").first().prop("lang")||"en-CA";p=a[p]||p;l.data("culture",p);m[p]?c.call(this):(l=e[p],l||(l=e[p]=[],d(p)),l.push(this))})}});jQuery(function(){b("input.DatePicker").autodatepicker()})})();
(function(b){b.widget("ui.combobox",{options:{source:null},_create:function(){var g=this.element;this.options.source&&(b(g).autocomplete({focus:function(m,e){return!1},source:this.options.source,delay:0,minLength:0}),b("<span>").insertAfter(g).addClass("SmallButton DownButton").css("margin-left","1px").click(function(m){g.autocomplete("widget").is(":visible")?g.autocomplete("close"):(g.autocomplete("search",""),g.focus())}))}})})(jQuery);
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof module&&module.exports?module.exports=b(require("jquery")):b(jQuery)})(function(b){b.extend(b.fn,{validate:function(a){if(this.length){var c=b.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate");c=new b.validator(a,this[0]);b.data(this[0],"validator",c);c.settings.onsubmit&&(this.on("click.validate",":submit",function(d){c.submitButton=d.currentTarget;b(this).hasClass("cancel")&&(c.cancelSubmit=
!0);void 0!==b(this).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.on("submit.validate",function(d){function l(){var p;c.submitButton&&(c.settings.submitHandler||c.formSubmitted)&&(p=b("<input type='hidden'/>").attr("name",c.submitButton.name).val(b(c.submitButton).val()).appendTo(c.currentForm));if(c.settings.submitHandler&&!c.settings.debug){var h=c.settings.submitHandler.call(c,c.currentForm,d);p&&p.remove();return void 0!==h?h:!1}return!0}c.settings.debug&&d.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=
!1,l();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):l();c.focusInvalid();return!1}));return c}a&&a.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if(b(this[0]).is("form"))var a=this.validate().form();else{var c=[];a=!0;var d=b(this[0].form).validate();this.each(function(){(a=d.element(this)&&a)||(c=c.concat(d.errorList))});d.errorList=c}return a},rules:function(a,c){var d=this[0],l="undefined"!==typeof this.attr("contenteditable")&&
"false"!==this.attr("contenteditable");if(null!=d&&(!d.form&&l&&(d.form=this.closest("form")[0],d.name=this.attr("name")),null!=d.form)){if(a){l=b.data(d.form,"validator").settings;var p=l.rules;var h=b.validator.staticRules(d);switch(a){case "add":b.extend(h,b.validator.normalizeRule(c));delete h.messages;p[d.name]=h;c.messages&&(l.messages[d.name]=b.extend(l.messages[d.name],c.messages));break;case "remove":if(!c)return delete p[d.name],h;var q={};b.each(c.split(/\s/),function(y,v){q[v]=h[v];delete h[v]});
return q}}a=b.validator.normalizeRules(b.extend({},b.validator.classRules(d),b.validator.attributeRules(d),b.validator.dataRules(d),b.validator.staticRules(d)),d);a.required&&(c=a.required,delete a.required,a=b.extend({required:c},a));a.remote&&(c=a.remote,delete a.remote,a=b.extend(a,{remote:c}));return a}}});var g=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};b.extend(b.expr.pseudos||b.expr[":"],{blank:function(a){return!g(""+b(a).val())},filled:function(a){a=b(a).val();
return null!==a&&!!g(""+a)},unchecked:function(a){return!b(a).prop("checked")}});b.validator=function(a,c){this.settings=b.extend(!0,{},b.validator.defaults,a);this.currentForm=c;this.init()};b.validator.format=function(a,c){if(1===arguments.length)return function(){var d=b.makeArray(arguments);d.unshift(a);return b.validator.format.apply(this,d)};if(void 0===c)return a;2<arguments.length&&c.constructor!==Array&&(c=b.makeArray(arguments).slice(1));c.constructor!==Array&&(c=[c]);b.each(c,function(d,
l){a=a.replace(new RegExp("\\{"+d+"\\}","g"),function(){return l})});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,
this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(a)||-1!==b.inArray(c.keyCode,d)||(a.name in this.submitted||a.name in this.invalid)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},
highlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).addClass(c).removeClass(d):b(a).addClass(c).removeClass(d)},unhighlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).removeClass(c).addClass(d):b(a).removeClass(c).addClass(d)}},setDefaults:function(a){b.extend(b.validator.defaults,a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",
dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),
min:b.validator.format("Please enter a value greater than or equal to {0}."),step:b.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(p){var h="undefined"!==typeof b(this).attr("contenteditable")&&"false"!==b(this).attr("contenteditable");!this.form&&h&&(this.form=b(this).closest("form")[0],this.name=b(this).attr("name"));if(c===this.form){h=b.data(this.form,"validator");var q="on"+p.type.replace(/^validate/,""),y=h.settings;y[q]&&!b(this).is(y.ignore)&&
y[q].call(h,this,p)}}this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.currentForm,d=this.groups={};b.each(this.settings.groups,function(p,h){"string"===typeof h&&(h=h.split(/\s/));b.each(h,function(q,y){d[y]=
p})});var l=this.settings.rules;b.each(l,function(p,h){l[p]=b.validator.normalizeRule(h)});b(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",
a).on("click.validate","select, option, [type='radio'], [type='checkbox']",a);if(this.settings.invalidHandler)b(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,c=this.currentElements=this.elements();c[a];a++)this.check(c[a]);
return this.valid()},element:function(a){var c=this.clean(a),d=this.validationTargetFor(c),l=this,p=!0,h;if(void 0===d)delete this.invalid[c.name];else{this.prepareElement(d);this.currentElements=b(d);(h=this.groups[d.name])&&b.each(this.groups,function(y,v){v===h&&y!==d.name&&(c=l.validationTargetFor(l.clean(l.findByName(y))))&&c.name in l.invalid&&(l.currentElements.push(c),p=l.check(c)&&p)});var q=!1!==this.check(d);p=p&&q;this.invalid[d.name]=q?!1:!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));
this.showErrors();b(a).attr("aria-invalid",!q)}return p},showErrors:function(a){if(a){var c=this;b.extend(this.errorMap,a);this.errorList=b.map(this.errorMap,function(d,l){return{message:d,element:c.findByName(l)[0]}});this.successList=b.grep(this.successList,function(d){return!(d.name in a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm();this.invalid={};this.submitted=
{};this.prepareForm();this.hideErrors();var a=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(a)},resetElements:function(a){var c;if(this.settings.unhighlight)for(c=0;a[c];c++)this.settings.unhighlight.call(this,a[c],this.settings.errorClass,""),this.findByName(a[c].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},
objectLength:function(a){var c=0,d;for(d in a)void 0!==a[d]&&null!==a[d]&&!1!==a[d]&&c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text("");this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(a){}},
findLastActive:function(){var a=this.lastActive;return a&&1===b.grep(this.errorList,function(c){return c.element.name===a.name}).length&&a},elements:function(){var a=this,c={};return b(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||b(this).attr("name"),l="undefined"!==typeof b(this).attr("contenteditable")&&"false"!==b(this).attr("contenteditable");!d&&a.settings.debug&&window.console&&
console.error("%o has no name assigned",this);l&&(this.form=b(this).closest("form")[0],this.name=d);return this.form!==a.currentForm||d in c||!a.objectLength(b(this).rules())?!1:c[d]=!0})},clean:function(a){return b(a)[0]},errors:function(){var a=this.settings.errorClass.split(" ").join(".");return b(this.settings.errorElement+"."+a,this.errorContext)},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=b([]);this.toHide=b([])},reset:function(){this.resetInternals();
this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},elementValue:function(a){var c=b(a),d=a.type,l="undefined"!==typeof c.attr("contenteditable")&&"false"!==c.attr("contenteditable");if("radio"===d||"checkbox"===d)return this.findByName(a.name).filter(":checked").val();if("number"===d&&"undefined"!==typeof a.validity)return a.validity.badInput?"NaN":c.val();a=l?c.text():
c.val();if("file"===d){if("C:\\fakepath\\"===a.substr(0,12))return a.substr(12);d=a.lastIndexOf("/");if(0<=d)return a.substr(d+1);d=a.lastIndexOf("\\");return 0<=d?a.substr(d+1):a}return"string"===typeof a?a.replace(/\r/g,""):a},check:function(a){a=this.validationTargetFor(this.clean(a));var c=b(a).rules(),d=b.map(c,function(v,r){return r}).length,l=!1,p=this.elementValue(a),h;this.abortRequest(a);if("function"===typeof c.normalizer)var q=c.normalizer;else"function"===typeof this.settings.normalizer&&
(q=this.settings.normalizer);q&&(p=q.call(a,p),delete c.normalizer);for(h in c){q={method:h,parameters:c[h]};try{var y=b.validator.methods[h].call(this,p,a,q.parameters);if("dependency-mismatch"===y&&1===d)l=!0;else{l=!1;if("pending"===y){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!y)return this.formatAndAdd(a,q),!1}}catch(v){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+a.id+", check the '"+q.method+"' method.",v),v instanceof TypeError&&
(v.message+=".  Exception occurred when checking element "+a.id+", check the '"+q.method+"' method."),v;}}if(!l)return this.objectLength(c)&&this.successList.push(a),!0},customDataMessage:function(a,c){return b(a).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||b(a).data("msg")},customMessage:function(a,c){return(a=this.settings.messages[a])&&(a.constructor===String?a:a[c])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},
defaultMessage:function(a,c){"string"===typeof c&&(c={method:c});var d=this.findDefined(this.customMessage(a.name,c.method),this.customDataMessage(a,c.method),!this.settings.ignoreTitle&&a.title||void 0,b.validator.messages[c.method],"<strong>Warning: No message defined for "+a.name+"</strong>"),l=/\$?\{(\d+)\}/g;"function"===typeof d?d=d.call(this,c.parameters,a):l.test(d)&&(d=b.validator.format(d.replace(l,"{$1}"),c.parameters));return d},formatAndAdd:function(a,c){var d=this.defaultMessage(a,c);
this.errorList.push({message:d,element:a,method:c.method});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){var a;for(a=0;this.errorList[a];a++){var c=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass);this.showLabel(c.element,c.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));
if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,c=this.validElements();c[a];a++)this.settings.unhighlight.call(this,c[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},
showLabel:function(a,c){var d,l=this.errorsFor(a),p=this.idOrName(a),h=b(a).attr("aria-describedby");if(l.length)l.removeClass(this.settings.validClass).addClass(this.settings.errorClass),this.settings&&this.settings.escapeHtml?l.text(c||""):l.html(c||"");else{l=b("<"+this.settings.errorElement+">").attr("id",p+"-error").addClass(this.settings.errorClass);this.settings&&this.settings.escapeHtml?l.text(c||""):l.html(c||"");var q=l;this.settings.wrapper&&(q=l.hide().show().wrap("<"+this.settings.wrapper+
"/>").parent());this.labelContainer.length?this.labelContainer.append(q):this.settings.errorPlacement?this.settings.errorPlacement.call(this,q,b(a)):q.insertAfter(a);if(l.is("label"))l.attr("for",p);else if(0===l.parents("label[for='"+this.escapeCssMeta(p)+"']").length&&(q=l.attr("id"),h?h.match(new RegExp("\\b"+this.escapeCssMeta(q)+"\\b"))||(h+=" "+q):h=q,b(a).attr("aria-describedby",h),d=this.groups[a.name])){var y=this;b.each(y.groups,function(v,r){r===d&&b("[name='"+y.escapeCssMeta(v)+"']",y.currentForm).attr("aria-describedby",
l.attr("id"))})}}!c&&this.settings.success&&(l.text(""),"string"===typeof this.settings.success?l.addClass(this.settings.success):this.settings.success(l,a));this.toShow=this.toShow.add(l)},errorsFor:function(a){var c=this.escapeCssMeta(this.idOrName(a));a=b(a).attr("aria-describedby");c="label[for='"+c+"'], label[for='"+c+"'] *";a&&(c=c+", #"+this.escapeCssMeta(a).replace(/\s+/g,", #"));return this.errors().filter(c)},escapeCssMeta:function(a){return void 0===a?"":a.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,
"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name));return b(a).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){return b(this.currentForm).find("[name='"+this.escapeCssMeta(a)+"']")},getLength:function(a,c){switch(c.nodeName.toLowerCase()){case "select":return b("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return a.length},
depend:function(a,c){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,c):!0},dependTypes:{"boolean":function(a){return a},string:function(a,c){return!!b(a,c.form).length},"function":function(a,c){return a(c)}},optional:function(a){var c=this.elementValue(a);return!b.validator.methods.required.call(this,c,a)&&"dependency-mismatch"},elementAjaxPort:function(a){return"validate"+a.name},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,b(a).addClass(this.settings.pendingClass),
this.pending[a.name]=!0)},stopRequest:function(a,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];b(a).removeClass(this.settings.pendingClass);c&&0===this.pendingRequest&&this.formSubmitted&&this.form()&&0===this.pendingRequest?(b(this.currentForm).trigger("submit"),this.submitButton&&b("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(b(this.currentForm).triggerHandler("invalid-form",
[this]),this.formSubmitted=!1)},abortRequest:function(a){if(this.pending[a.name]){var c=this.elementAjaxPort(a);b.ajaxAbort(c);this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];b(a).removeClass(this.settings.pendingClass)}},previousValue:function(a,c){c="string"===typeof c&&c||"remote";return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,{method:c})})},destroy:function(){this.resetForm();b(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},
classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,c){a.constructor===String?this.classRuleSettings[a]=c:b.extend(this.classRuleSettings,a)},classRules:function(a){var c={};(a=b(a).attr("class"))&&b.each(a.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(c,b.validator.classRuleSettings[this])});return c},normalizeAttributeRule:function(a,
c,d,l){/min|max|step/.test(d)&&(null===c||/number|range|text/.test(c))&&(l=Number(l),isNaN(l)&&(l=void 0));l||0===l?a[d]=l:c===d&&"range"!==c&&(a["date"===c?"dateISO":d]=!0)},attributeRules:function(a){var c={},d=b(a),l=a.getAttribute("type"),p;for(p in b.validator.methods){if("required"===p){var h=a.getAttribute(p);""===h&&(h=!0);h=!!h}else h=d.attr(p);this.normalizeAttributeRule(c,l,p,h)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},dataRules:function(a){var c=
{},d=b(a);a=a.getAttribute("type");var l;for(l in b.validator.methods){var p=d.data("rule"+l.charAt(0).toUpperCase()+l.substring(1).toLowerCase());""===p&&(p=!0);this.normalizeAttributeRule(c,a,l,p)}return c},staticRules:function(a){var c={},d=b.data(a.form,"validator");d.settings.rules&&(c=b.validator.normalizeRule(d.settings.rules[a.name])||{});return c},normalizeRules:function(a,c){b.each(a,function(d,l){if(!1===l)delete a[d];else if(l.param||l.depends){var p=!0;switch(typeof l.depends){case "string":p=
!!b(l.depends,c.form).length;break;case "function":p=l.depends.call(c,c)}p?a[d]=void 0!==l.param?l.param:!0:(b.data(c.form,"validator").resetElements(b(c)),delete a[d])}});b.each(a,function(d,l){a[d]="function"===typeof l&&"normalizer"!==d?l(c):l});b.each(["minlength","maxlength"],function(){a[this]&&(a[this]=Number(a[this]))});b.each(["rangelength","range"],function(){if(a[this])if(Array.isArray(a[this]))a[this]=[Number(a[this][0]),Number(a[this][1])];else if("string"===typeof a[this]){var d=a[this].replace(/[\[\]]/g,
"").split(/[\s,]+/);a[this]=[Number(d[0]),Number(d[1])]}});b.validator.autoCreateRanges&&(null!=a.min&&null!=a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),null!=a.minlength&&null!=a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));return a},normalizeRule:function(a){if("string"===typeof a){var c={};b.each(a.split(/\s/),function(){c[this]=!0});a=c}return a},addMethod:function(a,c,d){b.validator.methods[a]=c;b.validator.messages[a]=void 0!==d?d:
b.validator.messages[a];3>c.length&&b.validator.addClassRules(a,b.validator.normalizeRule(a))},methods:{required:function(a,c,d){return this.depend(d,c)?"select"===c.nodeName.toLowerCase()?(a=b(c).val())&&0<a.length:this.checkable(c)?0<this.getLength(a,c):void 0!==a&&null!==a&&0<a.length:"dependency-mismatch"},email:function(a,c){return this.optional(c)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},
url:function(a,c){return this.optional(c)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})+(?::(?:[^\]\[?\/<~#`!@$^&*()+=}|:";',>{ ]|%[0-9A-Fa-f]{2})*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(a)},
date:function(){var a=!1;return function(c,d){a||(a=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`."));return this.optional(d)||!/Invalid|NaN/.test((new Date(c)).toString())}}(),dateISO:function(a,
c){return this.optional(c)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,c){return this.optional(c)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,c){return this.optional(c)||/^\d+$/.test(a)},minlength:function(a,c,d){a=Array.isArray(a)?a.length:this.getLength(a,c);return this.optional(c)||a>=d},maxlength:function(a,c,d){a=Array.isArray(a)?a.length:this.getLength(a,c);return this.optional(c)||a<=d},rangelength:function(a,c,d){a=
Array.isArray(a)?a.length:this.getLength(a,c);return this.optional(c)||a>=d[0]&&a<=d[1]},min:function(a,c,d){return this.optional(c)||a>=d},max:function(a,c,d){return this.optional(c)||a<=d},range:function(a,c,d){return this.optional(c)||a>=d[0]&&a<=d[1]},step:function(a,c,d){var l=b(c).attr("type"),p="Step attribute on input type "+l+" is not supported.",h=["text","number","range"],q=new RegExp("\\b"+l+"\\b"),y=function(r){return(r=(""+r).match(/(?:\.(\d+))?$/))?r[1]?r[1].length:0:0},v=!0;if(l&&
!q.test(h.join()))throw Error(p);l=y(d);if(y(a)>l||0!==Math.round(a*Math.pow(10,l))%Math.round(d*Math.pow(10,l)))v=!1;return this.optional(c)||v},equalTo:function(a,c,d){d=b(d);if(this.settings.onfocusout&&d.not(".validate-equalTo-blur").length)d.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){b(c).valid()});return a===d.val()},remote:function(a,c,d,l){if(this.optional(c))return"dependency-mismatch";l="string"===typeof l&&l||"remote";var p=this.previousValue(c,l);this.settings.messages[c.name]||
(this.settings.messages[c.name]={});p.originalMessage=p.originalMessage||this.settings.messages[c.name][l];this.settings.messages[c.name][l]=p.message;d="string"===typeof d&&{url:d}||d;var h=b.param(b.extend({data:a},d.data));if(p.old===h)return p.valid;p.old=h;var q=this;this.startRequest(c);h={};h[c.name]=a;b.ajax(b.extend(!0,{mode:"abort",port:this.elementAjaxPort(c),dataType:"json",data:h,context:q.currentForm,success:function(y){var v=!0===y||"true"===y;q.settings.messages[c.name][l]=p.originalMessage;
if(v){var r=q.formSubmitted;q.toHide=q.errorsFor(c);q.formSubmitted=r;q.successList.push(c);q.invalid[c.name]=!1;q.showErrors()}else r={},y=y||q.defaultMessage(c,{method:l,parameters:a}),r[c.name]=p.message=y,q.invalid[c.name]=!0,q.showErrors(r);p.valid=v;q.stopRequest(c,v)}},d));return"pending"}}});var m={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(a,c,d){c=a.port;"abort"===a.mode&&(b.ajaxAbort(c),m[c]=d)});else{var e=b.ajax;b.ajax=function(a){var c=("port"in a?a:b.ajaxSettings).port;return"abort"===
("mode"in a?a:b.ajaxSettings).mode?(b.ajaxAbort(c),m[c]=e.apply(this,arguments),m[c]):e.apply(this,arguments)}}b.ajaxAbort=function(a){m[a]&&(m[a].abort(),delete m[a])};return b});
(function(b,g){var m,e;var a=function(f){return new a.prototype.init(f)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=a:b.Globalize=a;a.cultures={};a.prototype={constructor:a,init:function(f){this.cultures=a.cultures;this.cultureSelector=f;return this}};a.prototype.init.prototype=a.prototype;a.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",
groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},
months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};
a.cultures["default"].calendar=a.cultures["default"].calendars.standard;a.cultures.en=a.cultures["default"];a.cultureSelector="en";var c=/^0x[a-f0-9]+$/i;var d=/^[+\-]?infinity$/i;var l=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;var p=/^\s+|\s+$/g;var h=function(f,n){if(f.indexOf)return f.indexOf(n);for(var w=0,k=f.length;w<k;w++)if(f[w]===n)return w;return-1};var q=function(f,n){return f.substr(f.length-n.length)===n};var y=function(){var f,n,w,k=arguments[0]||{},u=1,C=arguments.length,B=!1;"boolean"===typeof k&&
(B=k,k=arguments[1]||{},u=2);for("object"===typeof k||r(k)||(k={});u<C;u++)if(null!=(f=arguments[u]))for(n in f){var t=k[n];var G=f[n];k!==G&&(B&&G&&(z(G)||(w=v(G)))?(w?(w=!1,t=t&&v(t)?t:[]):t=t&&z(t)?t:{},k[n]=y(B,t,G)):G!==g&&(k[n]=G))}return k};var v=Array.isArray||function(f){return"[object Array]"===Object.prototype.toString.call(f)};var r=function(f){return"[object Function]"===Object.prototype.toString.call(f)};var z=function(f){return"[object Object]"===Object.prototype.toString.call(f)};
var A=function(f,n){return 0===f.indexOf(n)};var E=function(f){return(f+"").replace(p,"")};var x=function(f){return isNaN(f)?NaN:Math[0>f?"ceil":"floor"](f)};var D=function(f,n,w){var k;for(k=f.length;k<n;k+=1)f=w?"0"+f:f+"0";return f};var J=function(f,n){for(var w=0,k=!1,u=0,C=f.length;u<C;u++){var B=f.charAt(u);switch(B){case "'":k?n.push("'"):w++;k=!1;break;case "\\":k&&n.push("\\");k=!k;break;default:n.push(B),k=!1}}return w};var W=function(f,n){n=n||"F";f=f.patterns;var w=n.length;if(1===w){f=
f[n];if(!f)throw"Invalid date format string '"+n+"'.";n=f}else 2===w&&"%"===n.charAt(0)&&(n=n.charAt(1));return n};var N=function(f,n,w){function k(T,P){T+="";return 1<P&&T.length<P?(T=K[P-2]+T,T.substr(T.length-P,P)):T}function u(T,P){if(V)return V[P];switch(P){case 0:return T.getFullYear();case 1:return T.getMonth();case 2:return T.getDate();default:throw"Invalid part value "+P;}}var C=w.calendar,B=C.convert;if(!n||!n.length||"i"===n){if(w&&w.name.length)if(B)w=N(f,C.patterns.F,w);else{n=new Date(f.getTime());
var t=Z(f,C.eras);n.setFullYear(F(f,C,t));w=n.toLocaleString()}else w=f.toString();return w}var G=C.eras,H="s"===n;n=W(C,n);w=[];var K=["0","00","000"],Q=/([^d]|^)(d|dd)([^d]|$)/g,O=0,R=X(),V;for(!H&&B&&(V=B.fromGregorian(f));;){var L=R.lastIndex;B=R.exec(n);L=n.slice(L,B?B.index:n.length);O+=J(L,w);if(!B)break;if(O%2)w.push(B[0]);else switch(L=B[0],B=L.length,L){case "ddd":case "dddd":w.push((3===B?C.days.namesAbbr:C.days.names)[f.getDay()]);break;case "d":case "dd":t=!0;w.push(k(u(f,2),B));break;
case "MMM":case "MMMM":L=u(f,1);var M=w,ba=M.push,ca;if(ca=C.monthsGenitive){if(!t&&!Y){t=Q.test(n);var Y=!0}ca=t}ba.call(M,ca?C.monthsGenitive[3===B?"namesAbbr":"names"][L]:C.months[3===B?"namesAbbr":"names"][L]);break;case "M":case "MM":w.push(k(u(f,1)+1,B));break;case "y":case "yy":case "yyyy":L=V?V[0]:F(f,C,Z(f,G),H);4>B&&(L%=100);w.push(k(L,B));break;case "h":case "hh":L=f.getHours()%12;0===L&&(L=12);w.push(k(L,B));break;case "H":case "HH":w.push(k(f.getHours(),B));break;case "m":case "mm":w.push(k(f.getMinutes(),
B));break;case "s":case "ss":w.push(k(f.getSeconds(),B));break;case "t":case "tt":L=12>f.getHours()?C.AM?C.AM[0]:" ":C.PM?C.PM[0]:" ";w.push(1===B?L.charAt(0):L);break;case "f":case "ff":case "fff":w.push(k(f.getMilliseconds(),3).substr(0,B));break;case "z":case "zz":L=f.getTimezoneOffset()/60;w.push((0>=L?"+":"-")+k(Math.floor(Math.abs(L)),B));break;case "zzz":L=f.getTimezoneOffset()/60;w.push((0>=L?"+":"-")+k(Math.floor(Math.abs(L)),2)+":"+k(Math.abs(f.getTimezoneOffset()%60),2));break;case "g":case "gg":C.eras&&
w.push(C.eras[Z(f,G)].name);break;case "/":w.push(C["/"]);break;default:throw"Invalid date format pattern '"+L+"'.";}}return w.join("")};(function(){var f=function(n,w,k){var u=k.groupSizes,C=u[0],B=1,t=Math.pow(10,w);t=Math.round(n*t)/t;isFinite(t)||(t=n);n=t;t=(n+"").split(/e/i);var G=1<t.length?parseInt(t[1],10):0;n=t[0];t=n.split(".");n=t[0];t=1<t.length?t[1]:"";0<G?(t=D(t,G,!1),n+=t.slice(0,G),t=t.substr(G)):0>G&&(G=-G,n=D(n,G+1,!0),t=n.slice(-G,n.length)+t,n=n.slice(0,-G));t=0<w?k["."]+(t.length>
w?t.slice(0,w):D(t,w)):"";w=n.length-1;k=k[","];for(G="";0<=w;){if(0===C||C>w)return n.slice(0,w+1)+(G.length?k+G+t:t);G=n.slice(w-C+1,w+1)+(G.length?k+G:"");w-=C;B<u.length&&(C=u[B],B++)}return n.slice(0,w+1)+k+G+t};m=function(n,w,k){if(!isFinite(n))return Infinity===n?k.numberFormat.positiveInfinity:-Infinity===n?k.numberFormat.negativeInfinity:k.numberFormat.NaN;if(!w||"i"===w)return k.name.length?n.toLocaleString():n.toString();w=w||"D";k=k.numberFormat;var u=Math.abs(n),C=-1;1<w.length&&(C=parseInt(w.slice(1),
10));var B=w.charAt(0).toUpperCase();switch(B){case "D":w="n";u=x(u);-1!==C&&(u=D(""+u,C,!0));0>n&&(u="-"+u);break;case "N":var t=k;case "C":t=t||k.currency;case "P":t=t||k.percent;w=0>n?t.pattern[0]:t.pattern[1]||"n";-1===C&&(C=t.decimals);u=f(u*("P"===B?100:1),C,t);break;default:throw"Bad number format specifier: "+B;}n=/n|\$|-|%/g;for(t="";;){C=n.lastIndex;B=n.exec(w);t+=w.slice(C,B?B.index:w.length);if(!B)break;switch(B[0]){case "n":t+=u;break;case "$":t+=k.currency.symbol;break;case "-":/[1-9]/.test(u)&&
(t+=k["-"]);break;case "%":t+=k.percent.symbol}}return t}})();var X=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};var Z=function(f,n){if(!n)return 0;for(var w=f.getTime(),k=0,u=n.length;k<u;k++)if(f=n[k].start,null===f||w>=f)return k;return 0};var F=function(f,n,w,k){f=f.getFullYear();!k&&n.eras&&(f-=n.eras[w].offset);return f};(function(){var f=function(t,G){if(100>G){var H=new Date,K=Z(H);H=F(H,t,K);t=t.twoDigitYearMax;t="string"===
typeof t?(new Date).getFullYear()%100+parseInt(t,10):t;G+=H-H%100;G>t&&(G-=100)}return G};var n=function(t,G,H){var K=t.days,Q=t._upperDays;Q||(t._upperDays=Q=[B(K.names),B(K.namesAbbr),B(K.namesShort)]);G=C(G);H?(t=h(Q[1],G),-1===t&&(t=h(Q[2],G))):t=h(Q[0],G);return t};var w=function(t,G,H){var K=t.months,Q=t.monthsGenitive||t.months,O=t._upperMonths,R=t._upperMonthsGen;O||(t._upperMonths=O=[B(K.names),B(K.namesAbbr)],t._upperMonthsGen=R=[B(Q.names),B(Q.namesAbbr)]);G=C(G);t=h(H?O[1]:O[0],G);0>t&&
(t=h(H?R[1]:R[0],G));return t};var k=function(t,G){var H=t._parseRegExp;if(H){var K=H[G];if(K)return K}else t._parseRegExp=H={};t=W(t,G).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");K=["^"];for(var Q=[],O=0,R=0,V=X(),L;null!==(L=V.exec(t));){var M=t.slice(O,L.index);O=V.lastIndex;R+=J(M,K);if(R%2)K.push(L[0]);else{M=L[0];var ba=M.length;switch(M){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":M="(\\D+)";break;case "tt":case "t":M="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":M=
"(\\d{"+ba+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":M="(\\d\\d?)";break;case "zzz":M="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":M="([+-]?\\d\\d?)";break;case "/":M="(\\/)";break;default:throw"Invalid date format pattern '"+M+"'.";}M&&K.push(M);Q.push(L[0])}}J(t.slice(O),K);K.push("$");t={regExp:K.join("").replace(/\s+/g,"\\s+"),groups:Q};return H[G]=t};var u=function(t,G,H){return t<G||t>H};
var C=function(t){return t.split("\u00a0").join(" ").toUpperCase()};var B=function(t){for(var G=[],H=0,K=t.length;H<K;H++)G[H]=C(t[H]);return G};e=function(t,G,H){t=E(t);H=H.calendar;G=k(H,G);var K=(new RegExp(G.regExp)).exec(t);if(null===K)return null;var Q=G.groups,O=G=t=null,R=null,V=null,L=0,M=0,ba=0,ca=0;var Y=null;for(var T=!1,P=0,ea=Q.length;P<ea;P++){var S=K[P+1];if(S){var U=Q[P],da=U.length,aa=parseInt(S,10);switch(U){case "dd":case "d":R=aa;if(u(R,1,31))return null;break;case "MMM":case "MMMM":O=
w(H,S,3===da);if(u(O,0,11))return null;break;case "M":case "MM":O=aa-1;if(u(O,0,11))return null;break;case "y":case "yy":case "yyyy":G=4>da?f(H,aa):aa;if(u(G,0,9999))return null;break;case "h":case "hh":L=aa;12===L&&(L=0);if(u(L,0,11))return null;break;case "H":case "HH":L=aa;if(u(L,0,23))return null;break;case "m":case "mm":M=aa;if(u(M,0,59))return null;break;case "s":case "ss":ba=aa;if(u(ba,0,59))return null;break;case "tt":case "t":T=H.PM&&(S===H.PM[0]||S===H.PM[1]||S===H.PM[2]);if(!T&&(!H.AM||
S!==H.AM[0]&&S!==H.AM[1]&&S!==H.AM[2]))return null;break;case "f":case "ff":case "fff":ca=aa*Math.pow(10,3-da);if(u(ca,0,999))return null;break;case "ddd":case "dddd":V=n(H,S,3===da);if(u(V,0,6))return null;break;case "zzz":U=S.split(/:/);if(2!==U.length)return null;Y=parseInt(U[0],10);if(u(Y,-12,13))return null;U=parseInt(U[1],10);if(u(U,0,59))return null;Y=60*Y+(A(S,"-")?-U:U);break;case "z":case "zz":Y=aa;if(u(Y,-12,13))return null;Y*=60;break;case "g":case "gg":if(!S||!H.eras)return null;S=E(S.toLowerCase());
U=0;for(da=H.eras.length;U<da;U++)if(S===H.eras[U].name.toLowerCase()){t=U;break}if(null===t)return null}}}K=new Date;Q=(P=H.convert)?P.fromGregorian(K)[0]:K.getFullYear();null===G?G=Q:H.eras&&(G+=H.eras[t||0].offset);null===O&&(O=0);null===R&&(R=1);if(P){if(K=P.toGregorian(G,O,R),null===K)return null}else if(K.setFullYear(G,O,R),K.getDate()!==R||null!==V&&K.getDay()!==V)return null;T&&12>L&&(L+=12);K.setHours(L,M,ba,ca);null!==Y&&(H=K.getMinutes()-(Y+K.getTimezoneOffset()),K.setHours(K.getHours()+
parseInt(H/60,10),H%60));return K}})();var I=function(f,n,w){var k=n["-"];n=n["+"];var u;switch(w){case "n -":k=" "+k,n=" "+n;case "n-":q(f,k)?u=["-",f.substr(0,f.length-k.length)]:q(f,n)&&(u=["+",f.substr(0,f.length-n.length)]);break;case "- n":k+=" ",n+=" ";case "-n":A(f,k)?u=["-",f.substr(k.length)]:A(f,n)&&(u=["+",f.substr(n.length)]);break;case "(n)":A(f,"(")&&q(f,")")&&(u=["-",f.substr(1,f.length-2)])}return u||["",f]};a.prototype.findClosestCulture=function(f){return a.findClosestCulture.call(this,
f)};a.prototype.format=function(f,n,w){return a.format.call(this,f,n,w)};a.prototype.localize=function(f,n){return a.localize.call(this,f,n)};a.prototype.parseInt=function(f,n,w){return a.parseInt.call(this,f,n,w)};a.prototype.parseFloat=function(f,n,w){return a.parseFloat.call(this,f,n,w)};a.prototype.culture=function(f){return a.culture.call(this,f)};a.addCultureInfo=function(f,n,w){var k=!1;"string"!==typeof f?(w=f,f=this.culture().name,n=this.cultures[f]):"string"!==typeof n?(w=n,k=null==this.cultures[f],
n=this.cultures[f]||this.cultures["default"]):(k=!0,n=this.cultures[n]);this.cultures[f]=y(!0,{},n,w);k&&(this.cultures[f].calendar=this.cultures[f].calendars.standard)};a.findClosestCulture=function(f){var n;if(!f)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof f&&(f=f.split(","));if(v(f)){var w=this.cultures,k=f,u,C=k.length,B=[];for(u=0;u<C;u++){f=E(k[u]);f=f.split(";");var t=E(f[0]);1===f.length?f=1:(f=E(f[1]),0===f.indexOf("q=")?(f=f.substr(2),
f=parseFloat(f),f=isNaN(f)?0:f):f=1);B.push({lang:t,pri:f})}B.sort(function(H,K){return H.pri<K.pri?1:H.pri>K.pri?-1:0});for(u=0;u<C;u++)if(t=B[u].lang,n=w[t])return n;for(u=0;u<C;u++){t=B[u].lang;do{k=t.lastIndexOf("-");if(-1===k)break;t=t.substr(0,k);if(n=w[t])return n}while(1)}for(u=0;u<C;u++){t=B[u].lang;for(var G in w)if(k=w[G],k.language==t)return k}}else if("object"===typeof f)return f;return n||null};a.format=function(f,n,w){w=this.findClosestCulture(w);f instanceof Date?f=N(f,n,w):"number"===
typeof f&&(f=m(f,n,w));return f};a.localize=function(f,n){return this.findClosestCulture(n).messages[f]||this.cultures["default"].messages[f]};a.parseDate=function(f,n,w){w=this.findClosestCulture(w);var k;if(n){if("string"===typeof n&&(n=[n]),n.length){var u=0;for(var C=n.length;u<C;u++){var B=n[u];if(B&&(k=e(f,B,w)))break}}}else for(u in n=w.calendar.patterns,n)if(k=e(f,n[u],w))break;return k||null};a.parseInt=function(f,n,w){return x(a.parseFloat(f,n,w))};a.parseFloat=function(f,n,w){"number"!==
typeof n&&(w=n,n=10);var k=this.findClosestCulture(w);w=NaN;var u=k.numberFormat;-1<f.indexOf(k.numberFormat.currency.symbol)&&(f=f.replace(k.numberFormat.currency.symbol,""),f=f.replace(k.numberFormat.currency["."],k.numberFormat["."]));f=E(f);if(d.test(f))w=parseFloat(f);else if(!n&&c.test(f))w=parseInt(f,16);else{k=I(f,u,u.pattern[0]);n=k[0];k=k[1];""===n&&"(n)"!==u.pattern[0]&&(k=I(f,u,"(n)"),n=k[0],k=k[1]);""===n&&"-n"!==u.pattern[0]&&(k=I(f,u,"-n"),n=k[0],k=k[1]);n=n||"+";f=k.indexOf("e");0>
f&&(f=k.indexOf("E"));if(0>f){var C=k;f=null}else C=k.substr(0,f),f=k.substr(f+1);var B=u["."],t=C.indexOf(B);0>t?(k=C,C=null):(k=C.substr(0,t),C=C.substr(t+B.length));B=u[","];k=k.split(B).join("");t=B.replace(/\u00A0/g," ");B!==t&&(k=k.split(t).join(""));n+=k;null!==C&&(n+="."+C);null!==f&&(u=I(f,u,"-n"),n+="e"+(u[0]||"+")+u[1]);l.test(n)&&(w=parseFloat(n))}return w};a.culture=function(f){"undefined"!==typeof f&&(this.cultureSelector=f);return this.findClosestCulture(f)||this.cultures["default"]}})(this);
(function(){draggable=!1;var b=null,g=null,m=[59.888937,-101.601562],e=null,a=null,c=!0,d=null,l=null,p=function(){g.setCenter(new google.maps.LatLng(m[0],m[1]),2)},h=function(){a&&a.setMap(null);a=null;l&&(google.maps.event.removeListener(l),l=null)},q=function(k,u){document.getElementById("LATITUDE").value=Globalize.format(k,"n6");document.getElementById("LONGITUDE").value=Globalize.format(u,"n6")},y=function(k,u){k=new google.maps.LatLng(k,u);c&&g.setZoom(14);g.setCenter(k);c=!1;k=new google.maps.Marker({position:k,
map:g,clickable:!1,draggable});h();a=k;draggable&&(l=google.maps.event.addListener(k,"dragend",v))},v=function(){$("#GEOCODE_TYPE_SITE_REFRESH, #GEOCODE_TYPE_INTERSECTION_REFRESH").addClass("NotVisible");$("#GEOCODE_TYPE_MANUAL").prop("checked",!0);var k=this.getPosition();q(k.lat(),k.lng())},r=function(k){k&&(d=X,q(k.lat(),k.lng()),y(k.lat(),k.lng()))},z=function(k){switch(k){case google.maps.GeocoderStatus.ZERO_RESULTS:k=pageconstants.txt_geocode_unknown_address;break;case google.maps.GeocoderStatus.REQUEST_DENIED:k=
pageconstants.txt_geocode_map_key_fail;break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:k=pageconstants.txt_geocode_too_many_queries;break;default:k=pageconstants.txt_geocode_unknown_error+k}return k};window.get_response_message=z;var A=function(k){return function(u,C){C!==google.maps.GeocoderStatus.OK?k(null,C):k(u[0].geometry.location,C)}};window.handle_geocode=A;var E=function(){var k={zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};b=document.getElementById("map_canvas");g=new google.maps.Map(b,
k);p();e||=new google.maps.Geocoder;k=$("#LATITUDE")[0].value;var u=$("#LONGITUDE")[0].value;k&&u&&y(Globalize.parseFloat(k),Globalize.parseFloat(u))},x=[],D=!1;window.maps_loaded=function(){D=!0;$.each(x,function(k,u){u()});x=[]};window.add_maps_loaded_callback=function(k){D?k():x.push(k)};window.initialize_maps=function(k,u,C,B){if(!window.cioc_map_script_added){window.cioc_map_script_added=!0;Globalize.culture(k);var t="";B&&(t="&libraries=places");$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+
u+"&sensor=false&callback=maps_loaded&language="+k+t)}add_maps_loaded_callback(C)};var J=function(k,u){return A(function(C,B){C?(u&&$("#geocode_no_postal_code").show(),k(C)):B==google.maps.GeocoderStatus.ZERO_RESULTS&&!u&&document.getElementById("GEOCODE_TYPE_SITE").checked?F(k,!0):(alert(z(B)),k(null))})},W=function(k){var u=document.getElementById("EntryForm"),C=[];if(!u.SITE_STREET_NUMBER)return null;var B=[u.SITE_STREET_NUMBER.value,u.SITE_STREET.value,u.SITE_STREET_TYPE.value,u.SITE_STREET_DIR.value].join(" ");
B=B.replace(/^\s+/g,"");(B=B.replace(/\s+$/g,""))&&C.push(B);var t=["SITE_CITY","SITE_PROVINCE"];k||t.push("SITE_POSTAL_CODE");for(k=0;k<t.length;k++)(B=u[t[k]].value)&&C.push(B);(B=u.SITE_COUNTRY.value)?C.push(B):C.push("Canada");return(u=C.join(", "))&&"Canada"!=u?u:null},N=function(){var k=document.EntryForm,u=[];if(!k.INTERSECTION&&!k.INTERSECTION.value)return null;for(var C=["INTERSECTION","SITE_CITY","SITE_PROVINCE"],B=0;B<C.length;B++){var t=k[C[B]].value;t&&u.push(t)}(t=k.SITE_COUNTRY.value)?
u.push(t):u.push("Canada");return u.join(", ")},X=null,Z=function(k,u,C){X=k;C=J(u,C);(X=k)?e.geocode({address:k},C):(h(),q("",""));k?$("#geocode_no_postal_code").hide():u(null)},F=function(k,u){var C=W(u);Z(C,k,u)},I=function(k){var u=N();Z(u,k)};window.handle_geocode_entryform_feedback=function(k,u){"undefined"!=typeof k&&null!==k&&"undefined"!=typeof u&&null!==u&&(d=X,r(google.maps.LatLng(Globalize.parseFloat(k),Globalize.parseFloat(u))))};var f=function(k){r(k)},n=function(k){w(!1);$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();
a||k||F(function(u){u?r(u):(c=!1,u=g.getCenter(),u=u.toUrlValue().split(","),q.apply(null,u),y.apply(null,u),X=d=null)})};window.do_geocode_type_manual=n;var w=function(k){var u=document.getElementById("map_refresh_ui_area");u&&(document.getElementById("LONGITUDE").readOnly=k,(document.getElementById("LATITUDE").readOnly=k)?$(u).hide():$(u).show())};window.entryform_maps_loaded=function(){draggable=!0;E();var k=$("#GEOCODE_TYPE_INTERSECTION_REFRESH"),u=$("#GEOCODE_TYPE_SITE_REFRESH");$("#GEOCODE_TYPE_SITE").click(function(){k.hide();
u.show();w(!0);F(r)});$("#GEOCODE_TYPE_INTERSECTION").click(function(){k.show();u.hide();w(!0);I(r)});$("#GEOCODE_TYPE_MANUAL").click(function(){n(!1)});$("#GEOCODE_TYPE_BLANK").click(function(){$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();w(!0);h();p();c=!0;$("#geocode_no_postal_code").hide();q("","");d=X=null});u.click(function(){F(r)});k.click(function(){I(r)});var C=document.EntryForm,B=document.getElementById("map_refresh");B&&$(B).click(function(){y(Globalize.parseFloat(C.LATITUDE.value),
Globalize.parseFloat(C.LONGITUDE.value))});C.SITE_STREET_NUMBER?document.getElementById("GEOCODE_TYPE_SITE").checked&&(F(f),u.show()):(C.GEOCODE_TYPE_SITE.disabled=!0,u.hide());C.INTERSECTION?document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(I(f),k.show()):(C.GEOCODE_TYPE_INTERSECTION.disabled=!0,u.hide());w(!C.GEOCODE_TYPE_MANUAL.checked);$(C).submit(function(t){var G=null,H=null;document.getElementById("GEOCODE_TYPE_SITE").checked?(G=W(),H=pageconstants.txt_geocode_address_changed):
document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(G=N(),H=pageconstants.txt_geocode_intersection_change);H&&G!=d&&!confirm(H)&&(b.scrollIntoView(!0),document.documentElement.scrollTop-=10,t.preventDefault(),t.stopImmediatePropagation(),$("#SUBMIT_BUTTON").prop("disabled",!1))});B=function(t){var G=$(this);$("#dropdownMAP_PIN .selection").html(G.html());$("#MAP_PIN").val(G.data("value"));t&&t.preventDefault()};$("#dropdownMAP_PINmenu li a").click(B);B.call($("#dropdownMAP_PINmenu li a[data-value="+
$("#MAP_PIN").val()+"]"))}})();
(function(){window.init_history_dialog=function(b,g){var m=!1,e=null,a=null,c=null,d=function(v){v.fail?b("#HistoryFieldContent").html("<em>"+v.errinfo+"</em>"):v.compare?(null===e&&(e=new diff_match_patch),v=e.diff_main(v.text2,v.text1),e.diff_cleanupSemantic(v),v=e.diff_prettyHtml(v),b("#HistoryFieldContent").html(v)):b("#HistoryFieldContent").html(v.text1)},l=function(v,r,z){return function(){var A=b("#HistoryLanguage").prop("value"),E=b("#HistoryRevision").prop("value"),x=b("#HistoryCompare").prop("value");
if(x===c||!(""===c&&x===E||""===x&&c===a)){var D=x;if(""===x||x===E)D="";b.getJSON(g.fielddiff_url.replace("[ID]",z).replace("[LANG]",A).replace("[FIELD]",v).replace("[REV]",E).replace("[COMP]",D),d)}a=E;c=x}},p=null,h=function(v,r,z,A){b("select.HistorySelect").unbind("change");b("#HistoryLanguage").unbind("change");b("#field_history").html('<p class="Info">'+g.txt_loading+"</p>").dialog("close").dialog("open").dialog("option","title",g.txt_fielddifftitle+z+" ("+r+")").load(g.fielddiffui_url.replace("[ID]",
z).replace("[FIELD]",v).replace("[LANG]",A),p(v,r,z))},q=function(v,r,z){return function(){var A=b(this).prop("value");h(v,r,z,A)}};p=function(v,r,z){return function(){b("select.HistorySelect").change(l(v,r,z));b("#HistoryLanguage").change(q(v,r,z));a=b("#HistoryRevision").prop("value");c=b("#HistoryCompare").prop("value")}};b(".ShowVersions").click(function(){var v=b(this).data("ciocfield"),r=b(this).data("ciocfielddisplay"),z=b(this).data("ciocid");m||(m=!0,b.getScript(g.path_to_start+"scripts/diff_match_patch.min.js"));
h(v,r,z,"")});b(document).on("click",".FieldHistoryJump",function(v){v=b(v.currentTarget).data("fieldname");(v=document.getElementById("FIELD_"+v))&&v.scrollIntoView(!0)});b(document).on("click",".HistoryFieldsToggle",function(v){b(v.currentTarget).parent().children("ul").toggle("fast")});var y=function(){b(".HistoryFieldsToggle").parent().children("ul").hide()};b(".HistorySummary").click(function(){var v=b(this).data("cioclang"),r=b(this).data("ciocid");b("#revision_history").html("Loading...").load(g.revhistory_url.replace("[ID]",
r).replace("[LANG]",v),y).dialog("open")});b("#revision_history").dialog({autoOpen:!1,width:330,height:280,position:["right","top"],resizable:!1,dialogClass:"RevHistory"});b("#field_history").dialog({autoOpen:!1,width:620,height:280,position:["right","bottom"]});b(".RevHistory.ui-dialog").css({position:"fixed"})}})();
(function(){var b=function(e){e=e.toLowerCase();e=e.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");e=e.replace(RegExp("\u00e6","g"),"ae");e=e.replace(RegExp("\u00e7","g"),"c");e=e.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");e=e.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");e=e.replace(RegExp("\u00f1","g"),"n");e=e.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");e=e.replace(RegExp("\u009c","g"),"oe");e=e.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return e=e.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=b;window.slugify=function(e){e=b(e);e=e.replace(/-/g," ").replace(/[^a-z0-9\s]/g,"");e=e.trim();return e.replace(/\s+/g,"-")};var g=function(e,a,c,d,l){c=c||"value";d=d||"";l=l||"";return function(p,h){if(a.term&&(new RegExp(d+e.ui.autocomplete.escapeRegex(a.term)+l,"i")).test(p.term)&&a.content&&13>a.content.length){var q=new RegExp(d+e.ui.autocomplete.escapeRegex(p.term)+l,"i");h(e.grep(a.content,function(y){return q.test(b(y[c]))}));
return!0}return!1}};window.default_cache_search_fn=g;var m=function(e,a,c,d,l){c=c||{};l=l||g(e,c,d||"value");return function(p,h,q){p.term=b(p.term);c.term===p.term&&c.content?h(c.content):l(p,h)||e.ajax({url:q||a,dataType:"json",data:p,cache:!1,success:function(y){c.term=p.term;c.content=y;h(y)}})}};window.create_caching_source_fn=m;window.init_community_autocomplete=function(e,a,c,d,l){var p={};l&&=e(l);l&&!l.length&&(l=null);var h=e("#"+a).autocomplete({focus:function(q,y){return!1},select:function(q,
y){h.data({chkid:y.item.chkid,display:y.item.value})},source:m(e,c,p),minLength:d}).keypress(function(q){"13"==q.keyCode&&(q.preventDefault(),h.autocomplete("close"))});l&&(h.parents("form").on("submit",function(){var q=h.val();if(h.data("display")===q)l.val(h.data("chkid"));else{if(p.content){var y=b(q);q=e.grep(p.content,function(v){return b(v.value)===y});if(1===q.length){l.val(q[0].chkid);h.data({chkid:q[0].chkid,display:q[0].value}).val(q[0].value);return}}l.val("")}}),cache_register_onbeforerestorevalues(function(q){h.length&&
(q=q["autocomplete_data_"+h[0].id])&&h.data(q)}),cache_register_onbeforeunload(function(q){if(h.length){var y=h.data();y.display&&y.chkid&&(q["autocomplete_data_"+h[0].id]={display:y.display,chkid:y.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(m,e,a,c){cache_register_onbeforeunload(function(d){d[e+"_added"]=a});cache_register_onbeforerestorevalues(function(d){(d=d[e+"_added"])&&m.each(d,function(l,p){c(p.chkid,p.display,"")})})};window.basic_chk_add_html=function(m,e){return function(a,c){a=m("<tr>").append(m("<td>").append(m("<input>").prop({id:e+"_ID_"+a,type:"checkbox",checked:!0,defaultChecked:!0,name:e+"_ID",value:a})).append(document.createTextNode(" "+
c))).append(m("<td>").append(m("<input>").prop({id:e+"_NOTES_"+a,name:e+"_NOTES_"+a,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));m("#"+e+"_existing_add_table").append(a);return a.find('input[type="checkbox"]')[0]}};var b={},g=function(m){$("#NEW_"+m).autocomplete(b[m])};window.init_autocomplete_checklist=function(m,e){var a=e.field;if(!b[a]){var c=e.source;e.minLength=e.minLength||1;e.delay=e.delay||300;e.add_new_html=e.add_new_html||basic_chk_add_html(m,a);e.match_prop=
e.match_prop||"value";e.txt_not_found=e.txt_not_found||"Not Found";var d=m(e.delegate_root||document),l=e.added_values||[],p=function(r,z,A){var E=document.getElementById(a+"_ID_"+r);E?(E.checked=!0,e.after_add_new_value&&e.after_add_new_value.call(E)):(l.push({chkid:r,display:z,label:A}),r=e.add_new_html(r,z,A),e.after_add_new_value&&e.after_add_new_value.call(r))};create_checklist_onbefore_fns(m,a,l,p);var h={},q=function(r){m("#NEW_"+a).data({chkid:"",display:"",label:""}).prop("value","").focus();
m("#"+a+"_error").hide("slow",function(){m(this).remove()})},y=null,v=null;(function(r){m.isArray(r)?(v=function(z,A){var E=new RegExp(m.ui.autocomplete.escapeRegex(string_ci_ai(z.term)));A(m.grep(r,function(x){return E.test(string_ci_ai(x[e.match_prop]||x))}))},y=function(z,A){var E=string_ci_ai(z);z=m.grep(r,function(x){return string_ci_ai(string_ci_ai(x[e.match_prop]||x))===E});if(1===z.length)return A(z[0]),!0;A()}):"string"===typeof r?(v=create_caching_source_fn(m,r,h,e.match_prop),y=function(z,
A,E){var x=string_ci_ai(z);if(h.content){var D=m.grep(h.content,function(J){return string_ci_ai(J[e.match_prop])===x});if(1===D.length){A(D[0]);return}}E||string_ci_ai(h.term||"")===x?A():v({term:x},function(J){y(z,A,!0)})}):(v=r,y=e.look_for_fn)})(c);d.on("click","#add_"+a,function(r){r=m("#NEW_"+a);var z=r.data("chkid"),A=r.data("display"),E=r.data("label"),x=r[0].value;if(z&&A&&A==x)return p(z,A,E),q(),!1;y(r[0].value,function(D){D?(p(D.chkid,D.value,D.label),q()):0===m("#"+a+"_error").length&&
(m("#"+a+"_new_input_table").before(m("<p>").hide().addClass("Alert").prop("id",a+"_error").append(document.createTextNode(e.txt_not_found))),m("#"+a+"_error").show("slow"))});return!1});b[a]={focus:function(r,z){return!1},source:v,minLength:e.minLength,delay:e.delay,select:function(r,z){m("#NEW_"+a).data({chkid:z.item.chkid,display:z.item.value,label:z.item.label})}};d.on("keypress","#NEW_"+a,function(r){"13"==r.keyCode&&(r.preventDefault(),m("#NEW_"+a).autocomplete("close"),m("#add_"+a).trigger("click"))})}g(a)};
window.init_languages=function(m,e){var a=null,c=null,d=m("#LN_existing_add_table"),l=function(){var p=m(this).parents(".language-entry").find(".language-details-notes");this.checked?p.slideDown():p.slideUp()};init_autocomplete_checklist(m,{field:"LN",source:entryform.languages_source,txt_not_found:e,after_add_new_value:l,add_new_html:function(p,h){null===a&&(a=m("#add_LN"),c=a.data("newTemplate"));p=c.replace(/LANGNAMELANGNAME/g,h).replace(/IDIDID/g,p);d.append(p)}});d.on("change",".language-primary",
l).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+m(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(p,h){m(this).css(p);m("<div>").addClass("arrow").addClass(h.vertical).addClass(h.horizontal).appendTo(this)}}});window.languages_check_state=l}})();
(function(){window.only_items_chk_add_html=function(b,g,m){return function(e,a){m&&m();b("#"+g+"_existing_add_container").append(b("<label>").append(b("<input>").prop({id:g+"_ID_"+e,type:"checkbox",checked:!0,defaultChecked:!0,name:g+"_ID",value:e})).append("&nbsp;").append(document.createTextNode(a))).append(" ; ")}};window.init_check_for_autochecklist=function(b){var g=jQuery,m=function(){return g("<li>").append(g("<span>").data("jump_location",this.id).addClass("UnaddedChecklistJump SimulateLink").append(g(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},
e=g("input[id^=NEW_]");e.length&&(g("#EntryForm").submit(function(a){var c=e.map(function(){return this.value?this:null});if(c.length&&!a.isDefaultPrevented()){if(!confirm(b)){a.preventDefault();g("#SUBMIT_BUTTON").prop("disabled",!1);a=g("#unadded_checklist_error_box");var d=g("#unadded_checklist_error_list");var l=a.is(":visible");l&&d.children("ul:first").hide("slow",function(){g(this).remove()});var p=g("<ul>");l&&p.hide();d.append(p);g.each(c.map(m),function(){p.append(this)});l?p.show("slow"):
a.show("slow")}}else a.isDefaultPrevented()&&(a=g("#unadded_checklist_error_box"),d=g("#unadded_checklist_error_list"),a.hide("slow",function(){d.children().remove()}))}),g(document).on("click",".UnaddedChecklistJump",function(){var a=g(this).data("jump_location");(a=document.getElementById(a))&&a.scrollIntoView(!0)}))};window.init_entryform_items=function(b,g,m){var e=jQuery;b.each(function(){var a=null,c=this,d=e(c),l=1,p=d.find(".EntryFormItemContainerIds")[0];if(p){var h=d.data("maxAdd");h&&=
parseInt(h,10);var q=[];p.value&&(q=e.map(p.value.split(","),function(x){return 0===x.indexOf("NEW")&&0!==x.indexOf("NEWFB")?null:x}));var y={},v=function(){d.find(".EntryFormItemBox").each(function(x){e(this).find(".EntryFormItemCount").text(x+1)})},r=function(x){if(h){var D=d.find(".EntryFormItemContent:hidden").parent().find("button.EntryFormItemDelete").prop("disabled",!x);E.prop("disabled",!x);x?(D.removeClass("ui-state-disabled"),E.removeClass("ui-state-disabled")):(D.addClass("ui-state-disabled"),
E.addClass("ui-state-disabled"))}},z=function(){var x=0,D;for(D in y)x++;return q.length-x},A=function(x){var D=0;if(h&&!x&&(D=z(),D>=h)){alert("over");return}var J=d.data("addTmpl");q.push("NEW"+l++);p.value=q.join(",");J=e(J.replace(/\[COUNT\]/g,q.length).replace(/\[ID\]/g,q[q.length-1]));J.find(".DatePicker").autodatepicker();J.find(".Province").combobox({source:window.cioc_province_source});entryform.service_titles&&J.find(".ServiceTitleField").combobox({source:entryform.service_titles});d.append(J);
a&&(a.sortable("refresh"),v());h&&!x&&D+1===h&&r(!1)},E=d.parent().find(".EntryFormItemAdd").click(function(){A(!1)});d.on("click","button.EntryFormItemDelete",function(){var x=this,D=e(this).parents(".EntryFormItemBox").find(".EntryFormItemContent"),J=this.id.split("_");J=J[J.length-2];if(D.is(":visible"))D.hide("slow",function(){y[J]=get_form_values(D);e(x).text(m);D.find("input,select,textarea").each(function(){"input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?
"select"===this.nodeName.toLowerCase()?e(this).find("option").each(function(){this.selected=!1}):this.value="":this.checked=!1});r(!0)});else{var W=0;if(h&&(W=z(),W>=h)){alert("over");return}var N=y[J];N&&(delete y[J],restore_form_values(D,N),D.show("slow",function(){e(x).text(g)}),h&&W+1===h&&r(!1))}});d.hasClass("sortable")&&(a=d.sortable({items:".EntryFormItemBox"}),a.bind("sortstart",function(x,D){D.helper.bgiframe();d.addClass("sorting")}),a.bind("sortstop",function(){var x=a.sortable("toArray");
q=e.map(x,function(D){D=D.split("_");return D[D.length-2]});p.value=q.join(",");setTimeout(function(){d.removeClass("sorting");v()},1)}));cache_register_onbeforeunload(function(x){x[c.id+"_ids"]=q;x[c.id+"_deletes"]=y;a&&(x[c.id+"_order"]=a.sortable("toArray"))});cache_register_onbeforerestorevalues(function(x){x[c.id+"_ids"]&&e.each(x[c.id+"_ids"],function(D,J){0===J.indexOf("NEW")&&A(!0)});x[c.id+"_deletes"]&&(y=x[c.id+"_deletes"],d.find(".EntryFormItemContent").each(function(){var D=this.id.split("_");
D=D[D.length-2];y[D]&&e(this).hide().parent().find("button.EntryFormItemDelete").text(m)}));h&&z()>=h&&r(!1);a&&(x=x[c.id+"_order"])&&(x.reverse(),e.each(x,function(D,J){e("#"+J).detach().prependTo(d)}),a.sortable("refresh"),v())})}})};window.init_schedule=function(b){var g=function(){var m=b(this).parents(".EntryFormItemBox"),e=this.value;"0"===e?m.find(".recurs-ui").hide():"1"==e?(m.find(".repeat-every-ui, .repeats-on-ui, .recurs-week-label").show(),m.find(".repeat-week-of-month-ui, .repeat-day-of-month-ui, .recurs-month-label").hide()):
"2"==e?(m.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-month-label").show(),m.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-week-label").hide()):(m.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-month-label").show(),m.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-week-label").hide())};b("#ScheduleEditArea").on("change",".recur-type-selector",g).on("click",".schedule-ui-accept-feedback",function(m){var e=b(this);m=e.parents(".EntryFormItemBox");e=e.data("schedule");
var a=m.find(".recur-type-selector");restore_form_values(m,e);g.call(a[0]);return!1}).find(".recur-type-selector").each(g)}})();
(function(){window.changeAutoAssign=function(d,l,p){d.checked?(l.value="",l.disabled=!0,p.disabled=!0):(l.disabled=!1,p.disabled=!1)};var b=jQuery,g=function(d){d.find(":input").not('input[type="hidden"]').filter("[name]").addClass("require-group")},m=function(d){d.find(":input").not('input[type="hidden"]').filter("[name]").removeClass("require-group")};window.make_required_group=g;window.remove_required_group=m;var e=function(d,l){var p=d.parent().find("td[data-field-display-name]"),h=p.data("fieldDisplayName");
l?(d.text(h).append(' <span class="Alert">*</span>'),g(p)):(d.text(h),m(p))},a=function(){var d=b("#FIELD_ORG_LEVEL_2");if(d.length){var l=b("#RECORD_TYPE").find(":selected").data("progorbranch");e(d,l)}};window.update_form_make_required_org_level=function(){for(var d,l=0;6>l;l++)if(d=b("#FIELD_ORG_LEVEL_"+l),d.length){e(d,!0);break}};var c=function(d){d=b(d);var l=d.prop("lang")||d.parents("[lang]").first().prop("lang")||"en-CA",p=function(E){var x=!1;try{E.each(function(){if(this.name)if(/radio|checkbox/i.test(this.type)){if(this.checked&&
this.value)throw x=!0,{name:"StopIteration",message:"StopIteration"};}else if(b.trim(this.value))throw x=!0,{name:"StopIteration",message:"StopIteration"};})}catch(D){if("StopIteration"!==D.name)throw D;}return x},h=null;b.validator.addMethod("email",function(E,x){h||=RegExp("^((([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)(\\s*,*\\s*))*)$");return this.optional(x)||h.test(E)});
var q=null;b.validator.addMethod("single-email",function(E,x){q||=RegExp("^([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)$");return this.optional(x)||q.test(E)});var y=null;b.validator.addMethod("url",function(E,x){y||=/^((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/;return this.optional(x)||y.test(E)});var v=null;b.validator.addMethod("protourl",
function(E,x){v||=/^(https?:\/\/)?((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/;return this.optional(x)||v.test(E)});var r=null;b.validator.addMethod("posint",function(E,x){r||=/^\d+$/;return this.optional(x)||r.test(E)});var z=null;b.validator.addMethod("posdbl",function(E,x){if(!z){var D="\\.";"fr-CA"===l&&(D=",");z=new RegExp("^((\\d+)|(\\d*"+D+"\\d+))$")}return this.optional(x)||z.test(E)});var A=null;b.validator.addMethod("record-num",function(E,x){A||=/^[A-Z]{3}[0-9]{4,5}$/;
return this.optional(x)||A.test(E)});b.validator.addMethod("unique",function(E,x,D){if(!E)return!0;E=string_ci_ai(E);x=jQuery.validator.format("[name!='{0}'][unique='{1}']",x.name,D);var J=[];b(x).each(function(W,N){E==string_ci_ai(b(N).val())&&J.push(N)});return 0==J.length},"A unique value is required.");b.validator.addMethod("require-group",function(E,x){E=b(x).parents("td[data-field-display-name]");x=E.parent().children("td:first").prop("id");x=x.slice(-(x.length-6));var D=E.find(":input").not("[type=hidden]").not("button");
if(window.tinymce){var J=E.find(".WYSIWYG").prop("id");J&&(J=window.tinymce.get(J))&&J.save()}switch(x){case "ACCESSIBILITY":case "AREAS_SERVED":case "LANGUAGES":case "FUNDING":case "SCHOOL_ESCORT":case "SCHOOLS_IN_AREA":case "TYPE_OF_CARE":D=D.not("input:text");break;case "ALT_ORG":case "LEGAL_ORG":D=D.not("input:checkbox");break;case "FORMER_ORG":D=D.not("input:checkbox").not("[name^=FORMER_ORG_DATE]");break;case "FEES":D=D.not("input:text").add("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM");break;
case "VACANCY_INFO":D=D.filter("[name!=VUT_ID]")}(x=p(D))&&E.children("div.required-notice").hide();return x},"Field Required");"fr-CA"===l?jQuery.extend(jQuery.validator.messages,{required:"Ce champ est requis.",remote:"Veuillez remplir ce champ pour continuer.",email:"Veuillez entrer une adresse email valide.",url:"Veuillez entrer une URL valide.",date:"Veuillez entrer une date valide.",dateISO:"Veuillez entrer une date valide (ISO).",number:"Veuillez entrer un nombre valide.",digits:"Veuillez entrer (seulement) une valeur num\u00e9rique.",
creditcard:"Veuillez entrer un num\u00e9ro de carte de cr\u00e9dit valide.",equalTo:"Veuillez entrer une nouvelle fois la m\u00eame valeur.",notEqualTo:"Veuillez fournir une valeur diff\u00e9rente, les valeurs ne doivent pas \u00eatre identiques.",extension:"Veuillez entrer une valeur avec une extension valide.",maxlength:jQuery.validator.format("Veuillez ne pas entrer plus de {0} caract\u00e8res."),minlength:jQuery.validator.format("Veuillez entrer au moins {0} caract\u00e8res."),rangelength:jQuery.validator.format("Veuillez entrer entre {0} et {1} caract\u00e8res."),
range:jQuery.validator.format("Veuillez entrer une valeur entre {0} et {1}."),max:jQuery.validator.format("Veuillez entrer une valeur inf\u00e9rieure ou \u00e9gale \u00e0 {0}."),min:jQuery.validator.format("Veuillez entrer une valeur sup\u00e9rieure ou \u00e9gale \u00e0 {0}."),step:b.validator.format("Veuillez fournir une valeur multiple de {0}."),maxWords:b.validator.format("Veuillez fournir au plus {0} mots."),minWords:b.validator.format("Veuillez fournir au moins {0} mots."),rangeWords:b.validator.format("Veuillez fournir entre {0} et {1} mots."),
letterswithbasicpunc:"Veuillez fournir seulement des lettres et des signes de ponctuation.",alphanumeric:"Veuillez fournir seulement des lettres, nombres, espaces et soulignages.",lettersonly:"Veuillez fournir seulement des lettres.",nowhitespace:"Veuillez ne pas inscrire d'espaces blancs.",ziprange:"Veuillez fournir un code postal entre 902xx-xxxx et 905-xx-xxxx.",integer:"Veuillez fournir un nombre non d\u00e9cimal qui est positif ou n\u00e9gatif.",vinUS:"Veuillez fournir un num\u00e9ro d'identification du v\u00e9hicule (VIN).",
dateITA:"Veuillez fournir une date valide.",time:"Veuillez fournir une heure valide entre 00:00 et 23:59.",phoneUS:"Veuillez fournir un num\u00e9ro de t\u00e9l\u00e9phone valide.",phoneUK:"Veuillez fournir un num\u00e9ro de t\u00e9l\u00e9phone valide.",mobileUK:"Veuillez fournir un num\u00e9ro de t\u00e9l\u00e9phone mobile valide.",strippedminlength:b.validator.format("Veuillez fournir au moins {0} caract\u00e8res."),email2:"Veuillez fournir une adresse \u00e9lectronique valide.",url2:"Veuillez fournir une adresse URL valide.",
creditcardtypes:"Veuillez fournir un num\u00e9ro de carte de cr\u00e9dit valide.",currency:"Veuillez fournir une monnaie valide.",ipv4:"Veuillez fournir une adresse IP v4 valide.",ipv6:"Veuillez fournir une adresse IP v6 valide.",require_from_group:b.validator.format("Veuillez fournir au moins {0} de ces champs."),nifES:"Veuillez fournir un num\u00e9ro NIF valide.",nieES:"Veuillez fournir un num\u00e9ro NIE valide.",cifES:"Veuillez fournir un num\u00e9ro CIF valide.",postalCodeCA:"Veuillez fournir un code postal valide.",
pattern:"Format non valide.",protourl:"Veuillez entrer une URL valide.",posint:"Veuillez entrer un nombre positif.",posdbl:"Veuillez entrer un nombre positif.","record-num":"Please enter a valid record number.","require-group":"Ce champ est requis.",unique:"Une valeur unique est requise.","single-email":"Veuillez entrer une adresse email valide."}):jQuery.extend(jQuery.validator.messages,{protourl:"Please enter a valid URL.",posint:"Please enter a positive number.",posdbl:"Please enter a positive number.",
"record-num":"Please enter a valid record number.","require-group":"Field Required.",unique:"A unique value is required.","single-email":"Please enter a valid email address."});return d};window.init_client_validators=c;window.init_client_validation=function(d,l){d=c(d);var p=b('<div id="a_test"></div>').dialog({autoOpen:!1,title:l,closeOnEscape:!1,position:["right","bottom"],resizable:!1,dialogClass:"ValidationErrors"}),h=b("#validation_error_box");b(document).on("click",".FieldErrorJump",function(q){q=
b(q.currentTarget).prop("fieldname");(q=document.getElementById(q))&&q.scrollIntoView(!0)});b(".ValidationErrors.ui-dialog").css({position:"fixed"}).position({my:"right bottom",at:"right bottom",of:window});g(d.find("td[data-field-required]"));return d.validate({ignore:"input[type=hidden]",ignoreTitle:!0,errorPlacement:function(q,y){var v=[],r=y[0];if(y.hasClass("require-group")){var z=y.parents("td[data-field-display-name]");v=z.children("div.required-notice");var A=!1;/radio|checkbox/i.test(r.type)?
r.checked&&r.value||(A=!0):b.trim(r.value)||(A=!0);if(A){v.length?(v.empty(),v.show(),v.append(q)):(q.removeAttr("for"),z.prepend(b('<div class="required-notice"></div>').append(q)));return}}v.length&&v.hide();q.insertAfter(y)},showErrors:function(q,y){this.defaultShowErrors();if(0===y.length)p.dialog("close"),h.hide("slow");else{var v={},r=b("<ul>");jQuery.each(y,function(z,A){A=A.element;z=b(A).parents("td[data-field-display-name]");A=z.parent().children("td:first").prop("id");v[A]||(v[A]=!0,r.append(b("<li>").append(b("<span>").prop({fieldname:A,
className:"FieldErrorJump SimulateLink"}).text(z.data("fieldDisplayName")))))});p.empty().append(r);p.dialog("open");h.show("slow");b("#SUBMIT_BUTTON").prop("disabled",!1)}},focusInvalid:!1,onfocusout:!1,onkeyup:!1,onclick:!1})};window.init_record_type_form=function(d,l,p){var h=null,q=null,y={},v="ORG_LEVEL_1 ORG_LEVEL_2 ORG_LEVEL_3 ORG_LEVEL_4 ORG_LEVEL_5 LOCATION_NAME SERVICE_NAME_LEVEL_1 SERVICE_NAME_LEVEL_2".split(" "),r=function(){b("#RecordTypeName").html(q);b.each(v,function(A){var E=p[A],
x=b("#"+A);x.length&&(x[0].value=E)&&(b("#"+A+"_DISPLAY").text(E),b("#HIDDEN_"+x).prop("value",E))});b("#RECORD_TYPE").prop("value",h[0].value);a()},z=function(){var A=h[0].value;h.data("hasform")||(A=null);h=b(this).find("option:selected");var E=h[0].value;h.data("hasform")||(E=null);E!==A?(y[A]=b("#copyFieldsForm").contents().detach(),y[E]?(b("#copyFieldsForm").append(y[E]),b("#RECORD_TYPE").prop("value",h[0].value)):b("#copyFieldsForm").load(l+" #copyFieldsInner",{NUM:d,RT:E||h[0].value},r)):a()};
jQuery(function(){q=b("#RecordTypeName").html();var A=b("#RECORD_TYPE");b(document).on("change","#RECORD_TYPE",z);h=A.find("option:selected");a()})};window.init_validate_duplicate_org_names=function(d){var l=b.extend({selector:"#EntryForm",fields:"#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5,#LOCATION_NAME,#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2,#OLS_SELECT input,#ORG_NUM",only_warn:!0,num:null,org_levels:[],url:null},d),p=[],h=null!==l.num,q=[],y=b(l.selector).submit(function(v){var r,
z=!1,A=b(l.fields).serializeArray();l.num&&A.push({name:"NUM",value:l.num});if(A.length!==p.length)z=!0;else for(r=0;r<A.length;r++){var E=A[r];if(E.name!==p[r].name||E.value!==p[r].value){z=!0;break}}if(!z&&h)return!0;var x=function(){l.only_warn&&confirm(l.confirm_string)?(h=!0,b("#duplicate_name_error_box").hide(),y.submit()):(b("#SUBMIT_BUTTON").prop("disabled",!1),b("#duplicate_name_error_box").show())};v.stopPropagation();v.preventDefault();if(!z)return x(),!1;b.ajax({url:l.url,dataType:"json",
method:"get",data:A,success:function(D){h=!0;q=[];for(var J=0;J<D.length;J++)h&=0===D[J].count,0!==D[J].count&&q.push(D[J].type);p=A;h?(b("#duplicate_name_error_box").hide(),y.submit()):x()}});return!1})}})();
(function(){var b=jQuery;window.configure_entry_form_button=function(){b("#SUBMIT_BUTTON").click(function(g){g=b("#SUBMIT_BUTTON");g.prop("disabled")||(g.prop("disabled",!0),setTimeout(function(){b("#EntryForm").submit()},1))});b(document).bind("keydown",function(g){if(g.ctrlKey&&"s"===String.fromCharCode(g.which).toLowerCase())return setTimeout(function(){b("#SUBMIT_BUTTON").click()},1),g.preventDefault(),g.stopPropagation(),!1});b("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var g=b("#SUBMIT_BUTTON").prop("value");b("#SUBMIT_BUTTON").replaceWith(b('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",g));b("#EntryForm").submit(function(){var m=validateForm();!1===m&&b("#SUBMIT_BUTTON").prop("disabled",!1);return m})}})();
(function(){window.init_entryform_notes=function(b,g,m){var e=jQuery;b.each(function(){var a=this,c=e(a),d=c.parent(),l=1,p=c.find(".EntryFormNotesUpdateIds")[0];if(p){var h=c.find(".EntryFormNotesDeleteIds")[0],q=c.find(".EntryFormNotesCancelIds")[0],y=c.find(".EntryFormNotesRestoreIds")[0],v=[],r=[],z=[],A={},E=[],x=function(F,I){v.push(F.id);p.value=v.join(",");var f=c.find(".EntryFormItemBox").length+1;template=c.data("addTmpl");new_item=e(template.replace(/\[COUNT\]/g,f).replace(/\[ID\]/g,F.id).replace(/\[MODIFIED_DATE\]/g,
F.modified_date||"").replace(/\[MODIFIED_BY\]/g,F.modified_by||"").replace(/\[CREATED_DATE\]/g,F.created_date||"").replace(/\[CREATED_BY\]/g,F.created_by||"").replace(/\[NOTE_VALUE\]/g,F.note_value||""));F.note_type&&new_item.find("option[value='"+F.note_type+"']").prop("selected",!0);F.created_date&&new_item.find("tr.CreatedField").show();!F.modified_date||F.modified_date===F.created_date&&F.modified_by===F.created_by||new_item.find("tr.ModifiedField").show();I&&new_item.find(".NewFlag").show();
c.append(new_item)};d.find(".EntryFormItemAdd").click(function(){var F="NEW"+l++;x({id:F},!0)});var D=function(F){var I=F.id.split("_");F=e(F);var f=F.parents(".EntryFormNotesItem");f.find(".EntryFormItemContent").css("text-decoration","line-through");r.push(I[I.length-2]);h.value=r.join(",");f.data("actionToRestore","delete");F.parent().hide().prev().show()},J=function(F,I){var f=F.id.split("_"),n=e(F),w=n.parents(".EntryFormNotesItem"),k=w.find(".EntryFormItemContent"),u=F.id.lastIndexOf("_");F=
F.id.substring(0,u)+"_CANCEL_REASON";f=f[f.length-2];k.prepend(I.data("cancelTemplate"));z.push(f);q.value=z.join(",");A[f]=I.data("cancelType");c.append(e("<input>").prop({type:"hidden",id:F,name:F,value:I.data("cancelType")}));w.data("actionToRestore","cancel");n.parent().hide().prev().show()},W={update:function(F){F=e(F).parents(".EntryFormNotesItem");var I=F.find(".EntryFormItemContent");x(I.data("formValues"));F.hide()},"delete":D,cancel:J},N=d.find(".EntryFormItemActionMenu").menu({select:function(F,
I){e(this).hide();W[I.item.data("action")](N.data("activeButton"),I.item)}}).hide().css({position:"absolute",zIndex:1});d.on("click",".EntryFormItemAction",function(F){N.data("activeButton",this);if(N.is(":visible"))return N.hide(),!1;N.menu("blur").show();N.position({my:"right top",at:"right bottom",of:this});e(document).one("click",function(){N.hide()});return!1});d.find(".EntryFormItemViewHidden").click(function(F){F=e(this);var I=F.next();I.is(":visible")?(F.text(g),I.hide()):(F.text(m),I.show())});
var X={"delete":function(F,I,f,n){n.css("text-decoration","none");r=e.grep(r,function(w){return w!==F});h.value=r.join(",");I.parent().hide().next().show()},cancel:function(F,I,f,n){f=I[0];var w=f.id.lastIndexOf("_");f=f.id.substring(0,w)+"_CANCEL_REASON";n.find(".EntryFormItemCancelledDetails").remove();z=e.grep(z,function(k){return k!==F});q.value=z.join(",");delete A[F];e("#"+f).remove();I.parent().hide().next().show()}};d.on("click",".EntryFormItemRestoreAction",function(F){F=this.id.split("_");
var I=e(this),f=I.parents(".EntryFormNotesItem"),n=f.find(".EntryFormItemContent");X[f.data("actionToRestore")](F[F.length-2],I,f,n)});var Z=function(F){F=this.id.split("_");var I=e(this);I.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","line-through");I.parent().hide().prev().show();E.push(F[F.length-2]);y.value=E.join(",")};d.on("click",".EntryFormItemRestoreCancel",Z);d.on("click",".EntryFormItemDontRestoreCancel",function(F){var I=this.id.split("_");
F=e(this);F.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","none");F.parent().hide().next().show();I=I[I.length-2];E=e.grep(E,function(f){return f!==I});y.value=E.join(",")});cache_register_onbeforeunload(function(F){F[a.id+"_updates"]=v;F[a.id+"_deletes"]=r;F[a.id+"_restores"]=E;F[a.id+"_cancels"]=z;F[a.id+"_cancel_reason"]=A});cache_register_onbeforerestorevalues(function(F){var I=a.id.substring(0,a.id.lastIndexOf("_"))+"_";F[a.id+"_updates"]&&e.each(F[a.id+
"_updates"],function(n,w){0===w.indexOf("NEW")?(l++,x({id:w},!0)):(n=e("#"+I+w+"_DISPLAY"),x(n.data("formValues")),e("#"+I+w+"_CONTAINER").hide())});F[a.id+"_deletes"]&&e.each(F[a.id+"_deletes"],function(n,w){D(document.getElementById(I+w+"_ACTION"))});F[a.id+"_restores"]&&(e.each(F[a.id+"_restores"],function(n,w){Z.call(document.getElementById(I+w+"_RESTORECANCEL"))}),d.find(".EntryFormItemViewHidden").click());if(F[a.id+"_cancels"]){var f=F[a.id+"_cancel_reason"];e.each(F[a.id+"_cancels"],function(n,
w){J(document.getElementById(I+w+"_ACTION"),N.find("li[data-cancel-type='"+f[w]+"']"))})}})}})}})();
(function(){function b(g,m,e){var a=m.pop(),c=e.shift(),d=create_caching_source_fn(g,entryform.org_level_complete_url,c,null,default_cache_search_fn(g,c,null,"^"));g(a).autocomplete({focus:function(){return!1},source:function(l,p){var h;for(h=0;h<m.length;h++){if(!m[h].value||c[m[h].name]&&c[m[h].name].value&&m[h].value!==c[m[h].name]){delete c.term;delete c.content;for(var q=0;q<m.length;q++)delete c[m[h].name];if(!m[h].value){p([]);return}}l[m[h].name]=m[h].value}d(l,function(y){for(h=0;h<m.length;h++)c[m[h].name]=
m[h].value;p(y)})},minLength:1===a.id.slice(-1)?5:3}).keypress(function(l){13===l.keyCode&&(l.preventDefault(),g(a).autocomplete("close"))})}window.init_orglevels=function(g){var m=g.makeArray(g("#ORG_LEVEL_1, #ORG_LEVEL_2, #ORG_LEVEL_3, #ORG_LEVEL_4")),e=[],a;for(a=0;a<m.length;a++)e.push({});for(a=0;a<m.length;a++){if(m[a].name!=="ORG_LEVEL_"+(a+1))return;b(g,g.makeArray(m).slice(0,a+1),g.makeArray(e).slice(a))}m=g.makeArray(g("#ORG_LEVEL_1, #ORG_LEVEL_2, #ORG_LEVEL_3, #ORG_LEVEL_4, #ORG_LEVEL_5, #ORG_NUM, #NUM, #SERVICE_NAME_LEVEL_1"));
e=[{}];m.length&&"SERVICE_NAME_LEVEL_1"===m[m.length-1].name&&b(g,m,e)};window.init_areas_served=function(g,m){var e=basic_chk_add_html(g,"CM");init_autocomplete_checklist(g,{field:"CM",source:entryform.community_complete_url,minLength:3,txt_not_found:m,add_new_html:function(a,c,d){return e(a,d)}})};window.init_inarea_schools=function(g,m){init_autocomplete_checklist(g,{field:"INAREA_SCH",source:entryform.sch_source,txt_not_found:m})};window.init_escort_schools=function(g,m){init_autocomplete_checklist(g,
{field:"ESCORT_SCH",source:entryform.sch_source,txt_not_found:m})};window.init_distribution=function(g,m){init_autocomplete_checklist(g,{field:"DST",source:entryform.dst_complete_url,add_new_html:only_items_chk_add_html(g,"DST"),match_prop:"label",txt_not_found:m})};window.init_busroutes=function(g){var m=[],e=function(c,d){var l=g("#BR_ID_"+c);l.length?l[0].checked=!0:(m.push({chkid:c,display:d}),g("#BR_existing_add_table").append(g("<tr>").append(g("<td>").append(g("<input>").prop({id:"BR_ID_"+
c,type:"checkbox",checked:!0,defaultChecked:!0,name:"BR_ID",value:c})).append(document.createTextNode(" "+d)))))},a=g("#NEW_BR");g("#add_BR").click(function(){var c=a[0].value,d=a.children("[value="+c+"]").text();e(c,d)});create_checklist_onbefore_fns(g,"BR",m,e)};window.init_subjects=function(g,m){init_autocomplete_checklist(g,{field:"Subj",source:entryform.subj_complete_url,add_new_html:only_items_chk_add_html(g,"Subj",function(){g("#Subj_existing_add_title").removeClass("NotVisible")}),txt_not_found:m})};
window.init_fees=function(g){var m=g("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM"),e=function(){m.prop("disabled",!g(this).prop("checked"))};g("#FEE_ASSISTANCE_AVAILABLE").click(e).each(e)};window.init_org_num=function(g){g("#FIELD_ORG_NUM").next().on("click",".suggested-num",function(){g("#ORG_NUM").val(this.value).trigger("change");return!1})};window.init_locations_services=function(g,m){var e=function(a,c,d){var l='<li><label><input type="checkbox" name="[FIELD]" value="[VALUE]" id="[FIELD]_[VALUE]" checked> [VALUE]</label></li>'.replace(/\[FIELD\]/g,
c),p=a.siblings(".locations-services-new-container"),h=p.find(".locations-services-new"),q=p.find(".locations-services-add"),y=a.siblings(".locations-services-list-suggestions"),v=g(d);d=function(x){x[c+"_STATE"]=a.html()};var r=function(x){(x=x[c+"_STATE"])&&a.html(x)},z=function(x){var D=g("#"+c+"_"+x);D.length?D[0].checked=!0:(x=l.replace(/\[VALUE\]/g,x),a.append(g(x)))};a.length&&(cache_register_onbeforeunload(d),cache_register_onbeforerestorevalues(r));p.on("click",".locations-services-add",
function(){var x=g.trim(h[0].value);if(x){if(!/^[A-Z]{3}[0-9]{4,5}$/.test(x))return a.siblings(".locations-services-error").length||g("<p>").hide().addClass("Alert").addClass("locations-services-error").append(document.createTextNode(m)).insertBefore(p).show("slow"),!1;z(x);a.siblings(".locations-services-error").hide("slow",function(){g(this).remove()});h[0].value=""}return!1}).on("keypress",".locations-services-new",function(x){13===x.keyCode&&(x.preventDefault(),q.trigger("click"))});y.on("click",
".locations-services-suggestion",function(x){x.preventDefault();z(this.value);return!1});if(v.length){var A=a.parents("tr").first(),E=function(){var x=g(this);if(this.checked){if(A.show(),x.data("maybeRequired"))if(x.is(".ols-type-TOPIC,.ols-type-SERVICE")){var D=x.is(".ols-type-TOPIC")?g(".ols-type-SERVICE"):g(".ols-type-TOPIC");D.prop("checked")?(D.prop("disabled")&&(D.prop("disabled",!1),g("#OLS_ID_"+D.prop("value")+"_forceon").remove()),this.disabled&&(this.disabled=!1,g("#OLS_ID_"+this.value+
"_forceon").remove())):this.disabled||(this.disabled=!0,x.parent().after(g('<input type="hidden" name="OLS_ID" id="OLS_ID_'+this.value+'_forceon" value="'+this.value+'">')))}else this.disabled||(this.disabled=!0,x.parent().after(g('<input type="hidden" name="OLS_ID" id="OLS_ID_'+this.value+'_forceon" value="'+this.value+'">')))}else x.is(".ols-type-SITE")?A.hide():g(x.is(".ols-type-SERVICE")?".ols-type-TOPIC":".ols-type-SERVICE").prop("checked")||A.hide(),x.data("maybeRequired")&&x.is(".ols-type-TOPIC,.ols-type-SERVICE")&&
(this.disabled=!1,D=x.is(".ols-type-TOPIC")?g(".ols-type-SERVICE"):g(".ols-type-TOPIC"),D.prop("checked")?(x=D.prop("value"),D.prop("disabled")||(D.prop("disabled","true"),D.parent().after(g('<input type="hidden" name="OLS_ID" id="OLS_ID_'+x+'_forceon" value="'+x+'">')))):g("#ols-type-SERVICE-warning").show())};v.click(E);setTimeout(function(){v.each(function(x,D){E.call(D)})},1)}};g(".locations-services-list").each(function(){var a=g(this),c=a.data("fieldName"),d=a.data("needsOlsType");e(a,c,d)})};
Array.prototype.indexOf||(Array.prototype.indexOf=function(g,m){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var e=this.length>>>0;m=+m||0;Infinity===Math.abs(m)&&(m=0);0>m&&(m+=e,0>m&&(m=0));for(;m<e;m++)if(this[m]===g)return m;return-1});window.init_name_editable_toggle=function(g){var m=$("#ORG_NUM"),e=$("#DISPLAY_ORG_NAME"),a=function(){if(m.length&&!m.val()||!m.length&&!g.org_num)return e.prop("disabled",!0),!1;e.prop("disabled",!1);return e.length&&e.prop("checked")||
!e.length&&g.display_org_name},c=function(p){return function(h){h=h.not("#DISPLAY_ORG_NAME");var q=h.filter(":checked");h.length||(q=$.map(p,function(y){return g[y]?y:null}));if(!q.length)return!0;if(h.length){if(q.is(":not(.ols-type-TOPIC)"))return!1}else if($.map(q,function(y){return"TOPIC"===y?null:y}).length)return!1;return!a()}},d=function(){var p=!0;return function(h,q){p&&(q.each(function(){var y=$(this);y.data("was_required",y.hasClass("require-group"))}),p=!1);q.each(function(){var y=$(this);
y.data("was_required")&&(y=y.parents("td[data-field-display-name]"),h?remove_required_group(y):make_required_group(y))})}},l=function(p,h,q,y){p=$(p);h=$(h);var v=function(){var r=q(p);h.prop("disabled",r);y&&y(r,h)};p.on("click keyup change",v);v()};l("#DISPLAY_ORG_NAME,#ORG_NUM","#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5",a);l(".ols-type-SITE","#LOCATION_NAME",c(["SITE"]),d());l(".ols-type-SERVICE,.ols-type-TOPIC,#DISPLAY_ORG_NAME","#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2",
c(["SERVICE","TOPIC"]),d())}})();jQuery(function(b){var g="AB BC MB NB NL NS NT NU ON PE QC SK YT".split(" ");b(".Province").combobox({source:g});window.cioc_province_source=g});
