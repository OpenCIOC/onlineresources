/*
 Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 Licensed under the MIT License (LICENSE.txt).

 Version 2.1.2
 Globalize

 http://github.com/jquery/globalize

 Copyright Software Freedom Conservancy, Inc.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
window.CIOC={};
(function(c,a){a.do_drop_down_navigation=function(){for(var b=c.getElementById("ActionList").options,d=0;d<b.length;d++)if(b[d].selected){var e=b[d].getAttribute("href");e&&("undefined"!=typeof b[d].attributes.newwindow?a.open(e):a.location.href=e);break}};jQuery(function(b){b("[data-toggle=dialog]").each(function(){var d=b(this),e=b(d.data("target")),h={autoOpen:!1,title:e.data("title"),modal:e.data("modal")};e.dialog(h);d.click(function(){e.dialog("isOpen")?e.dialog("close"):e.dialog("open")})})})})(document,window);
function CheckAll(c,a){c||="IDList";var b=a;a||(b=document.RecordList);a=b.elements.length;for(var d=0;d<a;d++){var e=b.elements[d];e.name===c&&(e.checked=!0)}}function ClearAll(c,a){c||="IDList";var b=a;a||(b=document.RecordList);a=b.elements.length;for(var d=0;d<a;d++){var e=b.elements[d];e.name===c&&(e.checked=!1)}}function add_class(c,a){c&&!(new RegExp("\\b"+a+"\\b")).test(c.className)&&(c.className&&(a=" "+a),c.className+=a)}
function remove_class(c,a){if(c){for(var b=c.className.split(" "),d=[],e=0;e<b.length;e++){var h=b[e];h!==a&&d.push(h)}c.className=d.join(" ")}}function hide(c){add_class(c,"NotVisible")}function show(c){remove_class(c,"NotVisible")}function openWin(c,a){window.open(c,a,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(c,a){window.open(c,a,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(c,a){window.open(c,a,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(c){var a={sm:openWin,lg:openWinL,xl:openWinXL};c(document).on("click","a.poplink",function(){var b=c(this).data("popargs");(a[b.size||"sm"]||openWin)(this.href,b.name||"popwin");return!1})});
(function(){var c=jQuery,a={},b=function(q){null!==q&&"undefined"!==typeof q?c("#myListCount").text(q):(q=c("#myListCount").text())&&(q=parseInt(q,10));q?a.myListLink.show():a.myListLink.hide()},d=function(q){c.each(q,function(z,E){c("#added_to_list_"+E).show();c("#add_to_list_"+E).hide()})},e=function(q){return function(z){z.fail?alert(z.errinfo):(z.ids?b(c.grep(z.ids,l[a.domain]).length):z.count?b(z.count):b(0),d([q]))}},h=function(q){q=c(q.currentTarget).data("id");c.ajax({success:e(q),dataType:"json",
error:function(){alert("Error")},data:{id:q},type:"POST",url:a.current_list_url})},r=function(q){return function(z){if(z.fail)alert(z.errinfo);else{z=!0;if(q){var E=c("#results_table #remove_from_list_"+q);E.length?E.parent().parent().remove():(z=!1,E=c("#results_container #remove_from_list_"+q),E.parents(".dlist-result").remove())}(z?1!==c("#results_table tr").length:0!==c("#results_container .dlist-result").length)&&q||(c("#records_ui").hide(),c("#no_records_message").show())}}},u=function(q){q=
c(q.currentTarget).data("id");c.ajax({success:r(q),dataType:"json",error:function(){alert("Error")},data:{ID:q,RemoveItem:a.domain},type:"POST",url:a.current_list_url})},t=function(q){c.ajax({success:r(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:a.domain},type:"POST",url:a.current_list_url})},l={CIC:function(q){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(q)},VOL:function(q){return/^[1-9][0-9]*$/.test(q)}},y=function(q){if(q.fail)A();else if(q.inrequest){var z=c.grep(q.ids,
l[a.domain]);d(z);b(z.length);(q=q.previous_ids)&&c.each(q,function(E,H){c("#ct_added_to_previous_request_"+H).show()});c(".ListUI img").prop("src",function(E,H){return H.replace("list","referral")});c("#list_header_text").hide();c("#ct_header_text").show();a.current_list_url=a.ct_update_url;v()}else A()},A=function(){var q=function(){a.list_view_mode||d(a.already_added||[]);a.current_list_url=a.list_view_mode&&"ct"===a.list_view_mode?a.ct_update_url:a.list_update_url;b((a.already_added||[]).length);
v()};a.list_view_mode||a.has_session?q():c.ajax({dataType:"json",error:null,url:a.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(z){z.has_session&&q()}})},v=function(){c(".HideListUI").delegate(".add_to_list","click",h).delegate(".remove_from_list","click",u).removeClass("HideListUI");c("#remove_all_from_list").click(t);c.browser.msie&&"8.0">c.browser.msie&&c(".ListUI").removeClass("FixIE")};window.init_list_adder=function(q){a=q;a.myListLink=c("#myListLink").parent(":hidden").add("#myListLink");
q.in_request?c.ajax({success:y,dataType:"json",error:null,type:"POST",url:q.in_request}):A()}})();this.JSON||(this.JSON={});
(function(){function c(l){return 10>l?"0"+l:l}function a(l){e.lastIndex=0;return e.test(l)?'"'+l.replace(e,function(y){var A=u[y];return"string"===typeof A?A:"\\u"+("0000"+y.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+l+'"'}function b(l,y){var A=h,v=y[l];v&&"object"===typeof v&&"function"===typeof v.toJSON&&(v=v.toJSON(l));"function"===typeof t&&(v=t.call(y,l,v));switch(typeof v){case "string":return a(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);
case "object":if(!v)return"null";h+=r;var q=[];if("[object Array]"===Object.prototype.toString.apply(v)){var z=v.length;for(l=0;l<z;l+=1)q[l]=b(l,v)||"null";y=0===q.length?"[]":h?"[\n"+h+q.join(",\n"+h)+"\n"+A+"]":"["+q.join(",")+"]";h=A;return y}if(t&&"object"===typeof t)for(z=t.length,l=0;l<z;l+=1){var E=t[l];"string"===typeof E&&(y=b(E,v))&&q.push(a(E)+(h?": ":":")+y)}else for(E in v)Object.hasOwnProperty.call(v,E)&&(y=b(E,v))&&q.push(a(E)+(h?": ":":")+y);y=0===q.length?"{}":h?"{\n"+h+q.join(",\n"+
h)+"\n"+A+"}":"{"+q.join(",")+"}";h=A;return y}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(l){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(l){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,r,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;"function"!==typeof JSON.stringify&&(JSON.stringify=function(l,y,A){var v;r=h="";if("number"===typeof A)for(v=0;v<A;v+=1)r+=" ";else"string"===typeof A&&(r=A);if((t=y)&&"function"!==typeof y&&("object"!==typeof y||"number"!==typeof y.length))throw Error("JSON.stringify");return b("",{"":l})});
"function"!==typeof JSON.parse&&(JSON.parse=function(l,y){function A(v,q){var z,E=v[q];if(E&&"object"===typeof E)for(z in E)if(Object.hasOwnProperty.call(E,z)){var H=A(E,z);void 0!==H?E[z]=H:delete E[z]}return y.call(v,q,E)}l=String(l);d.lastIndex=0;d.test(l)&&(l=l.replace(d,function(v){return"\\u"+("0000"+v.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(l.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return l=eval("("+l+")"),"function"===typeof y?A({"":l},""):l;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(c){var a={};jQuery(c).find("input,select,textarea").each(function(b){if(this.name)if(a[this.name]||(a[this.name]=[]),"select"===this.nodeName.toLowerCase()){var d=a[this.name];$(this).find("option").each(function(e){this.selected&&d.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&a[this.name].push(this.value||"")});return a};window.restore_form_values=function(c,a){var b=jQuery;b(c).find("input,select,textarea").each(function(d){if(this.name){var e=
a[this.name];"undefined"!=typeof e&&null!==e&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?b(this).find("option").each(function(h){this.selected=1<e.length?0<=b.inArray(this.value,e):0===e.length?!1:this.value===e[0]}):this.value=e.length?e[0]:"":this.checked=1<e.length?0<=b.inArray(this.value,e):0===e.length?!1:this.value===e[0])}})};window.init_cached_state=function(c){var a=jQuery;c=c||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];a(window).on("beforeunload",function(){var b={form_values:get_form_values(c)};a.each(onbeforeunload_fns,function(d,e){e(b)});document.getElementById("cache_form_values").value=JSON.stringify(b)});window.cache_register_onbeforeunload=function(b){onbeforeunload_fns.push(b)};window.cache_register_onbeforerestorevalues=function(b){onbeforerestorevalues_fns.push(b)};window.restore_cached_state=function(){var b=document.getElementById("cache_form_values");if(b&&b.value){var d=
JSON.parse(b.value);a.each(onbeforerestorevalues_fns,function(e,h){h(d)});restore_form_values(c,d.form_values)}}}})();
(function(){var c=jQuery,a={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},b={"en-CA":!0,"":!0},d={},e={"fr-CA":"fr","es-MX":"es"},h=function(){var u=c(this),t=u.data("culture"),l=a[t]||c.datepicker.regional[t].dateFormat,y={};u.hasClass("NoYear")&&(l=l.replace(/[\- .\/]*yy[\/]?/,""),y={beforeShow:function(A,
v){v.dpDiv.addClass("NoYearDatePicker")},onClose:function(A,v){v.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});y.dateFormat=l;u.datepicker(c.extend({},c.datepicker.regional[t],y)).prop("autocomplete","off")},r=function(u){c.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+c.ui.version+"/i18n/jquery.ui.datepicker-"+u+".min.js",function(){b[u]=!0;c.each(d[u],function(){h.call(this)});delete d[u]})};c.datepicker.regional["en-CA"]=c.extend({},c.datepicker.regional[""]);c.fn.extend({autodatepicker:function(){return this.each(function(){var u=
c(this);var t=u.parents("[lang]").first().prop("lang")||"en-CA";t=e[t]||t;u.data("culture",t);b[t]?h.call(this):(u=d[t],u||(u=d[t]=[],r(t)),u.push(this))})}});jQuery(function(){c("input.DatePicker").autodatepicker()})})();
(function(c){function a(b){return b&&b.constructor===Number?b+"px":b}c.fn.bgiframe=c.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(b){b=c.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},b);var d='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+b.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==b.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==b.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
a(b.top))+";left:"+("auto"==b.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":a(b.left))+";width:"+("auto"==b.width?"expression(this.parentNode.offsetWidth+'px')":a(b.width))+";height:"+("auto"==b.height?"expression(this.parentNode.offsetHeight+'px')":a(b.height))+';"/>';return this.each(function(){0===c(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(d),this.firstChild)})}:function(){return this};c.fn.bgIframe=c.fn.bgiframe})(jQuery);
(function(c){c.widget("ui.combobox",{options:{source:null},_create:function(){var a=this.element;this.options.source&&(c(a).autocomplete({focus:function(b,d){return!1},source:this.options.source,delay:0,minLength:0}),c("<span>").insertAfter(a).addClass("SmallButton DownButton").css("margin-left","1px").click(function(b){a.autocomplete("widget").is(":visible")?a.autocomplete("close"):(a.autocomplete("search",""),a.focus())}))}})})(jQuery);
(function(c){c.extend(c.fn,{validate:function(a){if(this.length){var b=c.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new c.validator(a,this[0]);c.data(this[0],"validator",b);b.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){b.cancelSubmit=!0}),b.settings.submitHandler&&a.filter(":submit").click(function(){b.submitButton=this}),this.submit(function(d){function e(){if(b.settings.submitHandler){if(b.submitButton)var h=c("<input type='hidden'/>").attr("name",
b.submitButton.name).val(b.submitButton.value).appendTo(b.currentForm);b.settings.submitHandler.call(b,b.currentForm);b.submitButton&&h.remove();return!1}return!0}b.settings.debug&&d.preventDefault();if(b.cancelSubmit)return b.cancelSubmit=!1,e();if(b.form())return b.pendingRequest?(b.formSubmitted=!0,!1):e();b.focusInvalid();return!1}));return b}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(c(this[0]).is("form"))return this.validate().form();
var a=!0,b=c(this[0].form).validate();this.each(function(){a&=b.element(this)});return a},removeAttrs:function(a){var b={},d=this;c.each(a.split(/\s/),function(e,h){b[h]=d.attr(h);d.removeAttr(h)});return b},rules:function(a,b){var d=this[0];if(a){var e=c.data(d.form,"validator").settings,h=e.rules,r=c.validator.staticRules(d);switch(a){case "add":c.extend(r,c.validator.normalizeRule(b));h[d.name]=r;b.messages&&(e.messages[d.name]=c.extend(e.messages[d.name],b.messages));break;case "remove":if(!b)return delete h[d.name],
r;var u={};c.each(b.split(/\s/),function(t,l){u[l]=r[l];delete r[l]});return u}}a=c.validator.normalizeRules(c.extend({},c.validator.metadataRules(d),c.validator.classRules(d),c.validator.attributeRules(d),c.validator.staticRules(d)),d);a.required&&(b=a.required,delete a.required,a=c.extend({required:b},a));return a}});c.extend(c.expr[":"],{blank:function(a){return!c.trim(""+a.value)},filled:function(a){return!!c.trim(""+a.value)},unchecked:function(a){return!a.checked}});c.validator=function(a,b){this.settings=
c.extend(!0,{},c.validator.defaults,a);this.currentForm=b;this.init()};c.validator.format=function(a,b){if(1==arguments.length)return function(){var d=c.makeArray(arguments);d.unshift(a);return c.validator.format.apply(this,d)};2<arguments.length&&b.constructor!=Array&&(b=c.makeArray(arguments).slice(1));b.constructor!=Array&&(b=[b]);c.each(b,function(d,e){a=a.replace(new RegExp("\\{"+d+"\\}","g"),e)});return a};c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a,b){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,b){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,
b){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a,b){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).addClass(b).removeClass(d):c(a).addClass(b).removeClass(d)},unhighlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).removeClass(b).addClass(d):c(a).removeClass(b).addClass(d)}},setDefaults:function(a){c.extend(c.validator.defaults,
a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:c.validator.format("Please enter no more than {0} characters."),
minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(e){var h=c.data(this[0].form,"validator"),r="on"+e.type.replace(/^validate/,
"");h.settings[r]&&h.settings[r].call(h,this[0],e)}this.labelContainer=c(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm);this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.groups={};c.each(this.settings.groups,function(e,h){c.each(h.split(/\s/),function(r,u){b[u]=e})});var d=
this.settings.rules;c.each(d,function(e,h){d[e]=c.validator.normalizeRule(h)});c(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",
a);this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();c.extend(this.submitted,this.errorMap);this.invalid=c.extend({},this.errorMap);this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=
a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=c(a);var b=this.check(a);b?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return b},showErrors:function(a){if(a){c.extend(this.errorMap,a);this.errorList=[];for(var b in a)this.errorList.push({message:a[b],element:this.findByName(b)[0]});this.successList=c.grep(this.successList,function(d){return!(d.name in a)})}this.settings.showErrors?
this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==c.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=this,b={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in b||!a.objectLength(c(this).rules())?!1:b[this.name]=!0})},clean:function(a){return c(a)[0]},errors:function(){return c(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=c([]);this.toHide=c([]);this.currentElements=c([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var b=c(a).rules(),d=!1,e;for(e in b){var h={method:e,parameters:b[e]};try{var r=c.validator.methods[e].call(this,a.value.replace(/\r/g,""),a,h.parameters);if("dependency-mismatch"==r)d=!0;else{d=!1;if("pending"==r){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!r)return this.formatAndAdd(a,h),!1}}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+
a.id+", check the '"+h.method+"' method",u),u;}}if(!d)return this.objectLength(b)&&this.successList.push(a),!0},customMetaMessage:function(a,b){if(c.metadata)return(a=this.settings.meta?c(a).metadata()[this.settings.meta]:c(a).metadata())&&a.messages&&a.messages[b]},customMessage:function(a,b){return(a=this.settings.messages[a])&&(a.constructor==String?a:a[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,b){return this.findDefined(this.customMessage(a.name,
b),this.customMetaMessage(a,b),!this.settings.ignoreTitle&&a.title||void 0,c.validator.messages[b],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),e=/\$?\{(\d+)\}/g;"function"==typeof d?d=d.call(this,b.parameters,a):e.test(d)&&(d=jQuery.format(d.replace(e,"{$1}"),b.parameters));this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=
a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,
b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(a,b){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(b)):(d=c("<"+this.settings.errorElement+
"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(b||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,c(a)):d.insertAfter(a)));!b&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(a){var b=
this.idOrName(a);return this.errors().filter(function(){return c(this).attr("for")==b})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var b=this.currentForm;return c(document.getElementsByName(a)).map(function(d,e){return e.form==b&&e.name==a&&e||null})},
getLength:function(a,b){switch(b.nodeName.toLowerCase()){case "select":return c("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a,b){return a},string:function(a,b){return!!c(a,b.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!c.validator.methods.required.call(this,
c.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,b){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];b&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!b&&0==this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(a){return c.data(a,"previousValue")||c.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,b){a.constructor==String?this.classRuleSettings[a]=b:c.extend(this.classRuleSettings,a)},classRules:function(a){var b=
{};(a=c(a).attr("class"))&&c.each(a.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(b,c.validator.classRuleSettings[this])});return b},attributeRules:function(a){var b={};a=c(a);for(var d in c.validator.methods){var e;(e="required"===d&&"function"===typeof c.fn.prop?a.prop(d):a.attr(d))?b[d]=e:a[0].getAttribute("type")===d&&(b[d]=!0)}b.maxlength&&/-1|2147483647|524288/.test(b.maxlength)&&delete b.maxlength;return b},metadataRules:function(a){if(!c.metadata)return{};var b=c.data(a.form,
"validator").settings.meta;return b?c(a).metadata()[b]:c(a).metadata()},staticRules:function(a){var b={},d=c.data(a.form,"validator");d.settings.rules&&(b=c.validator.normalizeRule(d.settings.rules[a.name])||{});return b},normalizeRules:function(a,b){c.each(a,function(d,e){if(!1===e)delete a[d];else if(e.param||e.depends){var h=!0;switch(typeof e.depends){case "string":h=!!c(e.depends,b.form).length;break;case "function":h=e.depends.call(b,b)}h?a[d]=void 0!==e.param?e.param:!0:delete a[d]}});c.each(a,
function(d,e){a[d]=c.isFunction(e)?e(b):e});c.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});c.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});c.validator.autoCreateRanges&&(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==
typeof a){var b={};c.each(a.split(/\s/),function(){b[this]=!0});a=b}return a},addMethod:function(a,b,d){c.validator.methods[a]=b;c.validator.messages[a]=void 0!=d?d:c.validator.messages[a];3>b.length&&c.validator.addClassRules(a,c.validator.normalizeRule(a))},methods:{required:function(a,b,d){if(!this.depend(d,b))return"dependency-mismatch";switch(b.nodeName.toLowerCase()){case "select":return(a=c(b).val())&&0<a.length;case "input":if(this.checkable(b))return 0<this.getLength(a,b);default:return 0<
c.trim(a).length}},remote:function(a,b,d){if(this.optional(b))return"dependency-mismatch";var e=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});e.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=e.message;d="string"==typeof d&&{url:d}||d;if(this.pending[b.name])return"pending";if(e.old===a)return e.valid;e.old=a;var h=this;this.startRequest(b);var r={};r[b.name]=a;c.ajax(c.extend(!0,{url:d,mode:"abort",port:"validate"+
b.name,dataType:"json",data:r,success:function(u){h.settings.messages[b.name].remote=e.originalMessage;var t=!0===u;if(t){var l=h.formSubmitted;h.prepareElement(b);h.formSubmitted=l;h.successList.push(b);h.showErrors()}else l={},u=u||h.defaultMessage(b,"remote"),l[b.name]=e.message=c.isFunction(u)?u(a):u,h.showErrors(l);e.valid=t;h.stopRequest(b,t)}},d));return"pending"},minlength:function(a,b,d){return this.optional(b)||this.getLength(c.trim(a),b)>=d},maxlength:function(a,b,d){return this.optional(b)||
this.getLength(c.trim(a),b)<=d},rangelength:function(a,b,d){a=this.getLength(c.trim(a),b);return this.optional(b)||a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||a>=d[0]&&a<=d[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;b=0;var d=!1;a=a.replace(/\D/g,"");for(var e=a.length-1;0<=e;e--){var h=
a.charAt(e);h=parseInt(h,10);d&&9<(h*=2)&&(h-=9);b+=h;d=!d}return 0==b%10},accept:function(a,b,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(new RegExp(".("+d+")$","i"))},equalTo:function(a,b,d){d=c(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(b).valid()});return a==d.val()}}});c.format=c.validator.format})(jQuery);
(function(c){var a={};if(c.ajaxPrefilter)c.ajaxPrefilter(function(d,e,h){e=d.port;"abort"==d.mode&&(a[e]&&a[e].abort(),a[e]=h)});else{var b=c.ajax;c.ajax=function(d){var e=("port"in d?d:c.ajaxSettings).port;return"abort"==("mode"in d?d:c.ajaxSettings).mode?(a[e]&&a[e].abort(),a[e]=b.apply(this,arguments)):b.apply(this,arguments)}}})(jQuery);
(function(c){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(e){e=c.event.fix(e);e.type=b;return c.event.handle.call(this,e)}c.event.special[b]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(e){arguments[0]=c.event.fix(e);arguments[0].type=b;return c.event.handle.apply(this,arguments)}}});c.extend(c.fn,{validateDelegate:function(a,
b,d){return this.bind(b,function(e){var h=c(e.target);if(h.is(a))return d.apply(h,arguments)})}})})(jQuery);
(function(c,a){var b,d;var e=function(f){return new e.prototype.init(f)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=e:c.Globalize=e;e.cultures={};e.prototype={constructor:e,init:function(f){this.cultures=e.cultures;this.cultureSelector=f;return this}};e.prototype.init.prototype=e.prototype;e.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",
groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},
months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};
e.cultures["default"].calendar=e.cultures["default"].calendars.standard;e.cultures.en=e.cultures["default"];e.cultureSelector="en";var h=/^0x[a-f0-9]+$/i;var r=/^[+\-]?infinity$/i;var u=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;var t=/^\s+|\s+$/g;var l=function(f,k){if(f.indexOf)return f.indexOf(k);for(var p=0,g=f.length;p<g;p++)if(f[p]===k)return p;return-1};var y=function(f,k){return f.substr(f.length-k.length)===k};var A=function(){var f,k,p,g=arguments[0]||{},n=1,C=arguments.length,B=!1;"boolean"===typeof g&&
(B=g,g=arguments[1]||{},n=2);for("object"===typeof g||q(g)||(g={});n<C;n++)if(null!=(f=arguments[n]))for(k in f){var m=g[k];var F=f[k];g!==F&&(B&&F&&(z(F)||(p=v(F)))?(p?(p=!1,m=m&&v(m)?m:[]):m=m&&z(m)?m:{},g[k]=A(B,m,F)):F!==a&&(g[k]=F))}return g};var v=Array.isArray||function(f){return"[object Array]"===Object.prototype.toString.call(f)};var q=function(f){return"[object Function]"===Object.prototype.toString.call(f)};var z=function(f){return"[object Object]"===Object.prototype.toString.call(f)};
var E=function(f,k){return 0===f.indexOf(k)};var H=function(f){return(f+"").replace(t,"")};var x=function(f){return isNaN(f)?NaN:Math[0>f?"ceil":"floor"](f)};var w=function(f,k,p){var g;for(g=f.length;g<k;g+=1)f=p?"0"+f:f+"0";return f};var G=function(f,k){for(var p=0,g=!1,n=0,C=f.length;n<C;n++){var B=f.charAt(n);switch(B){case "'":g?k.push("'"):p++;g=!1;break;case "\\":g&&k.push("\\");g=!g;break;default:k.push(B),g=!1}}return p};var K=function(f,k){k=k||"F";f=f.patterns;var p=k.length;if(1===p){f=
f[k];if(!f)throw"Invalid date format string '"+k+"'.";k=f}else 2===p&&"%"===k.charAt(0)&&(k=k.charAt(1));return k};var N=function(f,k,p){function g(W,S){W+="";return 1<S&&W.length<S?(W=L[S-2]+W,W.substr(W.length-S,S)):W}function n(W,S){if(Y)return Y[S];switch(S){case 0:return W.getFullYear();case 1:return W.getMonth();case 2:return W.getDate();default:throw"Invalid part value "+S;}}var C=p.calendar,B=C.convert;if(!k||!k.length||"i"===k){if(p&&p.name.length)if(B)p=N(f,C.patterns.F,p);else{k=new Date(f.getTime());
var m=O(f,C.eras);k.setFullYear(D(f,C,m));p=k.toLocaleString()}else p=f.toString();return p}var F=C.eras,I="s"===k;k=K(C,k);p=[];var L=["0","00","000"],T=/([^d]|^)(d|dd)([^d]|$)/g,Q=0,U=R(),Y;for(!I&&B&&(Y=B.fromGregorian(f));;){var M=U.lastIndex;B=U.exec(k);M=k.slice(M,B?B.index:k.length);Q+=G(M,p);if(!B)break;if(Q%2)p.push(B[0]);else switch(M=B[0],B=M.length,M){case "ddd":case "dddd":p.push((3===B?C.days.namesAbbr:C.days.names)[f.getDay()]);break;case "d":case "dd":m=!0;p.push(g(n(f,2),B));break;
case "MMM":case "MMMM":M=n(f,1);var P=p,ba=P.push,ca;if(ca=C.monthsGenitive){if(!m&&!Z){m=T.test(k);var Z=!0}ca=m}ba.call(P,ca?C.monthsGenitive[3===B?"namesAbbr":"names"][M]:C.months[3===B?"namesAbbr":"names"][M]);break;case "M":case "MM":p.push(g(n(f,1)+1,B));break;case "y":case "yy":case "yyyy":M=Y?Y[0]:D(f,C,O(f,F),I);4>B&&(M%=100);p.push(g(M,B));break;case "h":case "hh":M=f.getHours()%12;0===M&&(M=12);p.push(g(M,B));break;case "H":case "HH":p.push(g(f.getHours(),B));break;case "m":case "mm":p.push(g(f.getMinutes(),
B));break;case "s":case "ss":p.push(g(f.getSeconds(),B));break;case "t":case "tt":M=12>f.getHours()?C.AM?C.AM[0]:" ":C.PM?C.PM[0]:" ";p.push(1===B?M.charAt(0):M);break;case "f":case "ff":case "fff":p.push(g(f.getMilliseconds(),3).substr(0,B));break;case "z":case "zz":M=f.getTimezoneOffset()/60;p.push((0>=M?"+":"-")+g(Math.floor(Math.abs(M)),B));break;case "zzz":M=f.getTimezoneOffset()/60;p.push((0>=M?"+":"-")+g(Math.floor(Math.abs(M)),2)+":"+g(Math.abs(f.getTimezoneOffset()%60),2));break;case "g":case "gg":C.eras&&
p.push(C.eras[O(f,F)].name);break;case "/":p.push(C["/"]);break;default:throw"Invalid date format pattern '"+M+"'.";}}return p.join("")};(function(){var f=function(k,p,g){var n=g.groupSizes,C=n[0],B=1,m=Math.pow(10,p);m=Math.round(k*m)/m;isFinite(m)||(m=k);k=m;m=(k+"").split(/e/i);var F=1<m.length?parseInt(m[1],10):0;k=m[0];m=k.split(".");k=m[0];m=1<m.length?m[1]:"";0<F?(m=w(m,F,!1),k+=m.slice(0,F),m=m.substr(F)):0>F&&(F=-F,k=w(k,F+1,!0),m=k.slice(-F,k.length)+m,k=k.slice(0,-F));m=0<p?g["."]+(m.length>
p?m.slice(0,p):w(m,p)):"";p=k.length-1;g=g[","];for(F="";0<=p;){if(0===C||C>p)return k.slice(0,p+1)+(F.length?g+F+m:m);F=k.slice(p-C+1,p+1)+(F.length?g+F:"");p-=C;B<n.length&&(C=n[B],B++)}return k.slice(0,p+1)+g+F+m};b=function(k,p,g){if(!isFinite(k))return Infinity===k?g.numberFormat.positiveInfinity:-Infinity===k?g.numberFormat.negativeInfinity:g.numberFormat.NaN;if(!p||"i"===p)return g.name.length?k.toLocaleString():k.toString();p=p||"D";g=g.numberFormat;var n=Math.abs(k),C=-1;1<p.length&&(C=parseInt(p.slice(1),
10));var B=p.charAt(0).toUpperCase();switch(B){case "D":p="n";n=x(n);-1!==C&&(n=w(""+n,C,!0));0>k&&(n="-"+n);break;case "N":var m=g;case "C":m=m||g.currency;case "P":m=m||g.percent;p=0>k?m.pattern[0]:m.pattern[1]||"n";-1===C&&(C=m.decimals);n=f(n*("P"===B?100:1),C,m);break;default:throw"Bad number format specifier: "+B;}k=/n|\$|-|%/g;for(m="";;){C=k.lastIndex;B=k.exec(p);m+=p.slice(C,B?B.index:p.length);if(!B)break;switch(B[0]){case "n":m+=n;break;case "$":m+=g.currency.symbol;break;case "-":/[1-9]/.test(n)&&
(m+=g["-"]);break;case "%":m+=g.percent.symbol}}return m}})();var R=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};var O=function(f,k){if(!k)return 0;for(var p=f.getTime(),g=0,n=k.length;g<n;g++)if(f=k[g].start,null===f||p>=f)return g;return 0};var D=function(f,k,p,g){f=f.getFullYear();!g&&k.eras&&(f-=k.eras[p].offset);return f};(function(){var f=function(m,F){if(100>F){var I=new Date,L=O(I);I=D(I,m,L);m=m.twoDigitYearMax;m="string"===
typeof m?(new Date).getFullYear()%100+parseInt(m,10):m;F+=I-I%100;F>m&&(F-=100)}return F};var k=function(m,F,I){var L=m.days,T=m._upperDays;T||(m._upperDays=T=[B(L.names),B(L.namesAbbr),B(L.namesShort)]);F=C(F);I?(m=l(T[1],F),-1===m&&(m=l(T[2],F))):m=l(T[0],F);return m};var p=function(m,F,I){var L=m.months,T=m.monthsGenitive||m.months,Q=m._upperMonths,U=m._upperMonthsGen;Q||(m._upperMonths=Q=[B(L.names),B(L.namesAbbr)],m._upperMonthsGen=U=[B(T.names),B(T.namesAbbr)]);F=C(F);m=l(I?Q[1]:Q[0],F);0>m&&
(m=l(I?U[1]:U[0],F));return m};var g=function(m,F){var I=m._parseRegExp;if(I){var L=I[F];if(L)return L}else m._parseRegExp=I={};m=K(m,F).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");L=["^"];for(var T=[],Q=0,U=0,Y=R(),M;null!==(M=Y.exec(m));){var P=m.slice(Q,M.index);Q=Y.lastIndex;U+=G(P,L);if(U%2)L.push(M[0]);else{P=M[0];var ba=P.length;switch(P){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":P="(\\D+)";break;case "tt":case "t":P="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":P=
"(\\d{"+ba+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":P="(\\d\\d?)";break;case "zzz":P="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":P="([+-]?\\d\\d?)";break;case "/":P="(\\/)";break;default:throw"Invalid date format pattern '"+P+"'.";}P&&L.push(P);T.push(M[0])}}G(m.slice(Q),L);L.push("$");m={regExp:L.join("").replace(/\s+/g,"\\s+"),groups:T};return I[F]=m};var n=function(m,F,I){return m<F||m>I};
var C=function(m){return m.split("\u00a0").join(" ").toUpperCase()};var B=function(m){for(var F=[],I=0,L=m.length;I<L;I++)F[I]=C(m[I]);return F};d=function(m,F,I){m=H(m);I=I.calendar;F=g(I,F);var L=(new RegExp(F.regExp)).exec(m);if(null===L)return null;var T=F.groups,Q=F=m=null,U=null,Y=null,M=0,P=0,ba=0,ca=0;var Z=null;for(var W=!1,S=0,ea=T.length;S<ea;S++){var V=L[S+1];if(V){var X=T[S],da=X.length,aa=parseInt(V,10);switch(X){case "dd":case "d":U=aa;if(n(U,1,31))return null;break;case "MMM":case "MMMM":Q=
p(I,V,3===da);if(n(Q,0,11))return null;break;case "M":case "MM":Q=aa-1;if(n(Q,0,11))return null;break;case "y":case "yy":case "yyyy":F=4>da?f(I,aa):aa;if(n(F,0,9999))return null;break;case "h":case "hh":M=aa;12===M&&(M=0);if(n(M,0,11))return null;break;case "H":case "HH":M=aa;if(n(M,0,23))return null;break;case "m":case "mm":P=aa;if(n(P,0,59))return null;break;case "s":case "ss":ba=aa;if(n(ba,0,59))return null;break;case "tt":case "t":W=I.PM&&(V===I.PM[0]||V===I.PM[1]||V===I.PM[2]);if(!W&&(!I.AM||
V!==I.AM[0]&&V!==I.AM[1]&&V!==I.AM[2]))return null;break;case "f":case "ff":case "fff":ca=aa*Math.pow(10,3-da);if(n(ca,0,999))return null;break;case "ddd":case "dddd":Y=k(I,V,3===da);if(n(Y,0,6))return null;break;case "zzz":X=V.split(/:/);if(2!==X.length)return null;Z=parseInt(X[0],10);if(n(Z,-12,13))return null;X=parseInt(X[1],10);if(n(X,0,59))return null;Z=60*Z+(E(V,"-")?-X:X);break;case "z":case "zz":Z=aa;if(n(Z,-12,13))return null;Z*=60;break;case "g":case "gg":if(!V||!I.eras)return null;V=H(V.toLowerCase());
X=0;for(da=I.eras.length;X<da;X++)if(V===I.eras[X].name.toLowerCase()){m=X;break}if(null===m)return null}}}L=new Date;T=(S=I.convert)?S.fromGregorian(L)[0]:L.getFullYear();null===F?F=T:I.eras&&(F+=I.eras[m||0].offset);null===Q&&(Q=0);null===U&&(U=1);if(S){if(L=S.toGregorian(F,Q,U),null===L)return null}else if(L.setFullYear(F,Q,U),L.getDate()!==U||null!==Y&&L.getDay()!==Y)return null;W&&12>M&&(M+=12);L.setHours(M,P,ba,ca);null!==Z&&(I=L.getMinutes()-(Z+L.getTimezoneOffset()),L.setHours(L.getHours()+
parseInt(I/60,10),I%60));return L}})();var J=function(f,k,p){var g=k["-"];k=k["+"];var n;switch(p){case "n -":g=" "+g,k=" "+k;case "n-":y(f,g)?n=["-",f.substr(0,f.length-g.length)]:y(f,k)&&(n=["+",f.substr(0,f.length-k.length)]);break;case "- n":g+=" ",k+=" ";case "-n":E(f,g)?n=["-",f.substr(g.length)]:E(f,k)&&(n=["+",f.substr(k.length)]);break;case "(n)":E(f,"(")&&y(f,")")&&(n=["-",f.substr(1,f.length-2)])}return n||["",f]};e.prototype.findClosestCulture=function(f){return e.findClosestCulture.call(this,
f)};e.prototype.format=function(f,k,p){return e.format.call(this,f,k,p)};e.prototype.localize=function(f,k){return e.localize.call(this,f,k)};e.prototype.parseInt=function(f,k,p){return e.parseInt.call(this,f,k,p)};e.prototype.parseFloat=function(f,k,p){return e.parseFloat.call(this,f,k,p)};e.prototype.culture=function(f){return e.culture.call(this,f)};e.addCultureInfo=function(f,k,p){var g=!1;"string"!==typeof f?(p=f,f=this.culture().name,k=this.cultures[f]):"string"!==typeof k?(p=k,g=null==this.cultures[f],
k=this.cultures[f]||this.cultures["default"]):(g=!0,k=this.cultures[k]);this.cultures[f]=A(!0,{},k,p);g&&(this.cultures[f].calendar=this.cultures[f].calendars.standard)};e.findClosestCulture=function(f){var k;if(!f)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof f&&(f=f.split(","));if(v(f)){var p=this.cultures,g=f,n,C=g.length,B=[];for(n=0;n<C;n++){f=H(g[n]);f=f.split(";");var m=H(f[0]);1===f.length?f=1:(f=H(f[1]),0===f.indexOf("q=")?(f=f.substr(2),
f=parseFloat(f),f=isNaN(f)?0:f):f=1);B.push({lang:m,pri:f})}B.sort(function(I,L){return I.pri<L.pri?1:I.pri>L.pri?-1:0});for(n=0;n<C;n++)if(m=B[n].lang,k=p[m])return k;for(n=0;n<C;n++){m=B[n].lang;do{g=m.lastIndexOf("-");if(-1===g)break;m=m.substr(0,g);if(k=p[m])return k}while(1)}for(n=0;n<C;n++){m=B[n].lang;for(var F in p)if(g=p[F],g.language==m)return g}}else if("object"===typeof f)return f;return k||null};e.format=function(f,k,p){p=this.findClosestCulture(p);f instanceof Date?f=N(f,k,p):"number"===
typeof f&&(f=b(f,k,p));return f};e.localize=function(f,k){return this.findClosestCulture(k).messages[f]||this.cultures["default"].messages[f]};e.parseDate=function(f,k,p){p=this.findClosestCulture(p);var g;if(k){if("string"===typeof k&&(k=[k]),k.length){var n=0;for(var C=k.length;n<C;n++){var B=k[n];if(B&&(g=d(f,B,p)))break}}}else for(n in k=p.calendar.patterns,k)if(g=d(f,k[n],p))break;return g||null};e.parseInt=function(f,k,p){return x(e.parseFloat(f,k,p))};e.parseFloat=function(f,k,p){"number"!==
typeof k&&(p=k,k=10);var g=this.findClosestCulture(p);p=NaN;var n=g.numberFormat;-1<f.indexOf(g.numberFormat.currency.symbol)&&(f=f.replace(g.numberFormat.currency.symbol,""),f=f.replace(g.numberFormat.currency["."],g.numberFormat["."]));f=H(f);if(r.test(f))p=parseFloat(f);else if(!k&&h.test(f))p=parseInt(f,16);else{g=J(f,n,n.pattern[0]);k=g[0];g=g[1];""===k&&"(n)"!==n.pattern[0]&&(g=J(f,n,"(n)"),k=g[0],g=g[1]);""===k&&"-n"!==n.pattern[0]&&(g=J(f,n,"-n"),k=g[0],g=g[1]);k=k||"+";f=g.indexOf("e");0>
f&&(f=g.indexOf("E"));if(0>f){var C=g;f=null}else C=g.substr(0,f),f=g.substr(f+1);var B=n["."],m=C.indexOf(B);0>m?(g=C,C=null):(g=C.substr(0,m),C=C.substr(m+B.length));B=n[","];g=g.split(B).join("");m=B.replace(/\u00A0/g," ");B!==m&&(g=g.split(m).join(""));k+=g;null!==C&&(k+="."+C);null!==f&&(n=J(f,n,"-n"),k+="e"+(n[0]||"+")+n[1]);u.test(k)&&(p=parseFloat(k))}return p};e.culture=function(f){"undefined"!==typeof f&&(this.cultureSelector=f);return this.findClosestCulture(f)||this.cultures["default"]}})(this);
(function(){draggable=!1;var c=null,a=null,b=[59.888937,-101.601562],d=null,e=null,h=!0,r=null,u=null,t=function(){a.setCenter(new google.maps.LatLng(b[0],b[1]),2)},l=function(){e&&e.setMap(null);e=null;u&&(google.maps.event.removeListener(u),u=null)},y=function(g,n){document.getElementById("LATITUDE").value=Globalize.format(g,"n6");document.getElementById("LONGITUDE").value=Globalize.format(n,"n6")},A=function(g,n){g=new google.maps.LatLng(g,n);h&&a.setZoom(14);a.setCenter(g);h=!1;g=new google.maps.Marker({position:g,
map:a,clickable:!1,draggable});l();e=g;draggable&&(u=google.maps.event.addListener(g,"dragend",v))},v=function(){$("#GEOCODE_TYPE_SITE_REFRESH, #GEOCODE_TYPE_INTERSECTION_REFRESH").addClass("NotVisible");$("#GEOCODE_TYPE_MANUAL").prop("checked",!0);var g=this.getPosition();y(g.lat(),g.lng())},q=function(g){g&&(r=R,y(g.lat(),g.lng()),A(g.lat(),g.lng()))},z=function(g){switch(g){case google.maps.GeocoderStatus.ZERO_RESULTS:g=pageconstants.txt_geocode_unknown_address;break;case google.maps.GeocoderStatus.REQUEST_DENIED:g=
pageconstants.txt_geocode_map_key_fail;break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:g=pageconstants.txt_geocode_too_many_queries;break;default:g=pageconstants.txt_geocode_unknown_error+g}return g};window.get_response_message=z;var E=function(g){return function(n,C){C!==google.maps.GeocoderStatus.OK?g(null,C):g(n[0].geometry.location,C)}};window.handle_geocode=E;var H=function(){var g={zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};c=document.getElementById("map_canvas");a=new google.maps.Map(c,
g);t();d||=new google.maps.Geocoder;g=$("#LATITUDE")[0].value;var n=$("#LONGITUDE")[0].value;g&&n&&A(Globalize.parseFloat(g),Globalize.parseFloat(n))},x=[],w=!1;window.maps_loaded=function(){w=!0;$.each(x,function(g,n){n()});x=[]};window.add_maps_loaded_callback=function(g){w?g():x.push(g)};window.initialize_maps=function(g,n,C,B){if(!window.cioc_map_script_added){window.cioc_map_script_added=!0;Globalize.culture(g);var m="";B&&(m="&libraries=places");$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+
n+"&sensor=false&callback=maps_loaded&language="+g+m)}add_maps_loaded_callback(C)};var G=function(g,n){return E(function(C,B){C?(n&&$("#geocode_no_postal_code").show(),g(C)):B==google.maps.GeocoderStatus.ZERO_RESULTS&&!n&&document.getElementById("GEOCODE_TYPE_SITE").checked?D(g,!0):(alert(z(B)),g(null))})},K=function(g){var n=document.getElementById("EntryForm"),C=[];if(!n.SITE_STREET_NUMBER)return null;var B=[n.SITE_STREET_NUMBER.value,n.SITE_STREET.value,n.SITE_STREET_TYPE.value,n.SITE_STREET_DIR.value].join(" ");
B=B.replace(/^\s+/g,"");(B=B.replace(/\s+$/g,""))&&C.push(B);var m=["SITE_CITY","SITE_PROVINCE"];g||m.push("SITE_POSTAL_CODE");for(g=0;g<m.length;g++)(B=n[m[g]].value)&&C.push(B);(B=n.SITE_COUNTRY.value)?C.push(B):C.push("Canada");return(n=C.join(", "))&&"Canada"!=n?n:null},N=function(){var g=document.EntryForm,n=[];if(!g.INTERSECTION&&!g.INTERSECTION.value)return null;for(var C=["INTERSECTION","SITE_CITY","SITE_PROVINCE"],B=0;B<C.length;B++){var m=g[C[B]].value;m&&n.push(m)}(m=g.SITE_COUNTRY.value)?
n.push(m):n.push("Canada");return n.join(", ")},R=null,O=function(g,n,C){R=g;C=G(n,C);(R=g)?d.geocode({address:g},C):(l(),y("",""));g?$("#geocode_no_postal_code").hide():n(null)},D=function(g,n){var C=K(n);O(C,g,n)},J=function(g){var n=N();O(n,g)};window.handle_geocode_entryform_feedback=function(g,n){"undefined"!=typeof g&&null!==g&&"undefined"!=typeof n&&null!==n&&(r=R,q(google.maps.LatLng(Globalize.parseFloat(g),Globalize.parseFloat(n))))};var f=function(g){q(g)},k=function(g){p(!1);$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();
e||g||D(function(n){n?q(n):(h=!1,n=a.getCenter(),n=n.toUrlValue().split(","),y.apply(null,n),A.apply(null,n),R=r=null)})};window.do_geocode_type_manual=k;var p=function(g){var n=document.getElementById("map_refresh_ui_area");n&&(document.getElementById("LONGITUDE").readOnly=g,(document.getElementById("LATITUDE").readOnly=g)?$(n).hide():$(n).show())};window.entryform_maps_loaded=function(){draggable=!0;H();var g=$("#GEOCODE_TYPE_INTERSECTION_REFRESH"),n=$("#GEOCODE_TYPE_SITE_REFRESH");$("#GEOCODE_TYPE_SITE").click(function(){g.hide();
n.show();p(!0);D(q)});$("#GEOCODE_TYPE_INTERSECTION").click(function(){g.show();n.hide();p(!0);J(q)});$("#GEOCODE_TYPE_MANUAL").click(function(){k(!1)});$("#GEOCODE_TYPE_BLANK").click(function(){$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();p(!0);l();t();h=!0;$("#geocode_no_postal_code").hide();y("","");r=R=null});n.click(function(){D(q)});g.click(function(){J(q)});var C=document.EntryForm,B=document.getElementById("map_refresh");B&&$(B).click(function(){A(Globalize.parseFloat(C.LATITUDE.value),
Globalize.parseFloat(C.LONGITUDE.value))});C.SITE_STREET_NUMBER?document.getElementById("GEOCODE_TYPE_SITE").checked&&(D(f),n.show()):(C.GEOCODE_TYPE_SITE.disabled=!0,n.hide());C.INTERSECTION?document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(J(f),g.show()):(C.GEOCODE_TYPE_INTERSECTION.disabled=!0,n.hide());p(!C.GEOCODE_TYPE_MANUAL.checked);$(C).submit(function(m){var F=null,I=null;document.getElementById("GEOCODE_TYPE_SITE").checked?(F=K(),I=pageconstants.txt_geocode_address_changed):
document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(F=N(),I=pageconstants.txt_geocode_intersection_change);I&&F!=r&&!confirm(I)&&(c.scrollIntoView(!0),document.documentElement.scrollTop-=10,m.preventDefault(),m.stopImmediatePropagation(),$("#SUBMIT_BUTTON").prop("disabled",!1))});B=function(m){var F=$(this);$("#dropdownMAP_PIN .selection").html(F.html());$("#MAP_PIN").val(F.data("value"));m&&m.preventDefault()};$("#dropdownMAP_PINmenu li a").click(B);B.call($("#dropdownMAP_PINmenu li a[data-value="+
$("#MAP_PIN").val()+"]"))}})();
(function(){window.init_history_dialog=function(c,a){var b=!1,d=null,e=null,h=null,r=function(v){v.fail?c("#HistoryFieldContent").html("<em>"+v.errinfo+"</em>"):v.compare?(null===d&&(d=new diff_match_patch),v=d.diff_main(v.text2,v.text1),d.diff_cleanupSemantic(v),v=d.diff_prettyHtml(v),c("#HistoryFieldContent").html(v)):c("#HistoryFieldContent").html(v.text1)},u=function(v,q,z){return function(){var E=c("#HistoryLanguage").prop("value"),H=c("#HistoryRevision").prop("value"),x=c("#HistoryCompare").prop("value");
if(x===h||!(""===h&&x===H||""===x&&h===e)){var w=x;if(""===x||x===H)w="";c.getJSON(a.fielddiff_url.replace("[ID]",z).replace("[LANG]",E).replace("[FIELD]",v).replace("[REV]",H).replace("[COMP]",w),r)}e=H;h=x}},t=null,l=function(v,q,z,E){c("select.HistorySelect").unbind("change");c("#HistoryLanguage").unbind("change");c("#field_history").html('<p class="Info">'+a.txt_loading+"</p>").dialog("close").dialog("open").dialog("option","title",a.txt_fielddifftitle+z+" ("+q+")").load(a.fielddiffui_url.replace("[ID]",
z).replace("[FIELD]",v).replace("[LANG]",E),t(v,q,z))},y=function(v,q,z){return function(){var E=c(this).prop("value");l(v,q,z,E)}};t=function(v,q,z){return function(){c("select.HistorySelect").change(u(v,q,z));c("#HistoryLanguage").change(y(v,q,z));e=c("#HistoryRevision").prop("value");h=c("#HistoryCompare").prop("value")}};c(".ShowVersions").click(function(){var v=c(this).data("ciocfield"),q=c(this).data("ciocfielddisplay"),z=c(this).data("ciocid");b||(b=!0,c.getScript(a.path_to_start+"scripts/diff_match_patch.min.js"));
l(v,q,z,"")});c(document).on("click",".FieldHistoryJump",function(v){v=c(v.currentTarget).data("fieldname");(v=document.getElementById("FIELD_"+v))&&v.scrollIntoView(!0)});c(document).on("click",".HistoryFieldsToggle",function(v){c(v.currentTarget).parent().children("ul").toggle("fast")});var A=function(){c(".HistoryFieldsToggle").parent().children("ul").hide()};c(".HistorySummary").click(function(){var v=c(this).data("cioclang"),q=c(this).data("ciocid");c("#revision_history").html("Loading...").load(a.revhistory_url.replace("[ID]",
q).replace("[LANG]",v),A).dialog("open")});c("#revision_history").dialog({autoOpen:!1,width:330,height:280,position:["right","top"],resizable:!1,dialogClass:"RevHistory"});c("#field_history").dialog({autoOpen:!1,width:620,height:280,position:["right","bottom"]});c(".RevHistory.ui-dialog").css({position:"fixed"})}})();
(function(){var c=function(d){d=d.toLowerCase();d=d.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");d=d.replace(RegExp("\u00e6","g"),"ae");d=d.replace(RegExp("\u00e7","g"),"c");d=d.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");d=d.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");d=d.replace(RegExp("\u00f1","g"),"n");d=d.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");d=d.replace(RegExp("\u009c","g"),"oe");d=d.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return d=d.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=c;var a=function(d,e,h,r,u){h=h||"value";r=r||"";u=u||"";return function(t,l){if(e.term&&(new RegExp(r+d.ui.autocomplete.escapeRegex(e.term)+u,"i")).test(t.term)&&e.content&&13>e.content.length){var y=new RegExp(r+d.ui.autocomplete.escapeRegex(t.term)+u,"i");l(d.grep(e.content,function(A){return y.test(c(A[h]))}));return!0}return!1}};window.default_cache_search_fn=a;var b=function(d,e,h,r,u){h=h||{};u=u||a(d,h,r||"value");
return function(t,l,y){t.term=c(t.term);h.term===t.term&&h.content?l(h.content):u(t,l)||d.ajax({url:y||e,dataType:"json",data:t,cache:!1,success:function(A){h.term=t.term;h.content=A;l(A)}})}};window.create_caching_source_fn=b;window.init_community_autocomplete=function(d,e,h,r,u){var t={};u&&=d(u);u&&!u.length&&(u=null);var l=d("#"+e).autocomplete({focus:function(y,A){return!1},select:function(y,A){l.data({chkid:A.item.chkid,display:A.item.value})},source:b(d,h,t),minLength:r}).keypress(function(y){"13"==
y.keyCode&&(y.preventDefault(),l.autocomplete("close"))});u&&(l.parents("form").on("submit",function(){var y=l.val();if(l.data("display")===y)u.val(l.data("chkid"));else{if(t.content){var A=c(y);y=d.grep(t.content,function(v){return c(v.value)===A});if(1===y.length){u.val(y[0].chkid);l.data({chkid:y[0].chkid,display:y[0].value}).val(y[0].value);return}}u.val("")}}),cache_register_onbeforerestorevalues(function(y){l.length&&(y=y["autocomplete_data_"+l[0].id])&&l.data(y)}),cache_register_onbeforeunload(function(y){if(l.length){var A=
l.data();A.display&&A.chkid&&(y["autocomplete_data_"+l[0].id]={display:A.display,chkid:A.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(b,d,e,h){cache_register_onbeforeunload(function(r){r[d+"_added"]=e});cache_register_onbeforerestorevalues(function(r){(r=r[d+"_added"])&&b.each(r,function(u,t){h(t.chkid,t.display,"")})})};window.basic_chk_add_html=function(b,d){return function(e,h){e=b("<tr>").append(b("<td>").append(b("<input>").prop({id:d+"_ID_"+e,type:"checkbox",checked:!0,defaultChecked:!0,name:d+"_ID",value:e})).append(document.createTextNode(" "+
h))).append(b("<td>").append(b("<input>").prop({id:d+"_NOTES_"+e,name:d+"_NOTES_"+e,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));b("#"+d+"_existing_add_table").append(e);return e.find('input[type="checkbox"]')[0]}};var c={},a=function(b){$("#NEW_"+b).autocomplete(c[b])};window.init_autocomplete_checklist=function(b,d){var e=d.field;if(!c[e]){var h=d.source;d.minLength=d.minLength||1;d.delay=d.delay||300;d.add_new_html=d.add_new_html||basic_chk_add_html(b,e);d.match_prop=
d.match_prop||"value";d.txt_not_found=d.txt_not_found||"Not Found";var r=b(d.delegate_root||document),u=d.added_values||[],t=function(q,z,E){var H=document.getElementById(e+"_ID_"+q);H?(H.checked=!0,d.after_add_new_value&&d.after_add_new_value.call(H)):(u.push({chkid:q,display:z,label:E}),q=d.add_new_html(q,z,E),d.after_add_new_value&&d.after_add_new_value.call(q))};create_checklist_onbefore_fns(b,e,u,t);var l={},y=function(q){b("#NEW_"+e).data({chkid:"",display:"",label:""}).prop("value","").focus();
b("#"+e+"_error").hide("slow",function(){b(this).remove()})},A=null,v=null;(function(q){b.isArray(q)?(v=function(z,E){var H=new RegExp(b.ui.autocomplete.escapeRegex(string_ci_ai(z.term)));E(b.grep(q,function(x){return H.test(string_ci_ai(x[d.match_prop]||x))}))},A=function(z,E){var H=string_ci_ai(z);z=b.grep(q,function(x){return string_ci_ai(string_ci_ai(x[d.match_prop]||x))===H});if(1===z.length)return E(z[0]),!0;E()}):"string"===typeof q?(v=create_caching_source_fn(b,q,l,d.match_prop),A=function(z,
E,H){var x=string_ci_ai(z);if(l.content){var w=b.grep(l.content,function(G){return string_ci_ai(G[d.match_prop])===x});if(1===w.length){E(w[0]);return}}H||string_ci_ai(l.term||"")===x?E():v({term:x},function(G){A(z,E,!0)})}):(v=q,A=d.look_for_fn)})(h);r.on("click","#add_"+e,function(q){q=b("#NEW_"+e);var z=q.data("chkid"),E=q.data("display"),H=q.data("label"),x=q[0].value;if(z&&E&&E==x)return t(z,E,H),y(),!1;A(q[0].value,function(w){w?(t(w.chkid,w.value,w.label),y()):0===b("#"+e+"_error").length&&
(b("#"+e+"_new_input_table").before(b("<p>").hide().addClass("Alert").prop("id",e+"_error").append(document.createTextNode(d.txt_not_found))),b("#"+e+"_error").show("slow"))});return!1});c[e]={focus:function(q,z){return!1},source:v,minLength:d.minLength,delay:d.delay,select:function(q,z){b("#NEW_"+e).data({chkid:z.item.chkid,display:z.item.value,label:z.item.label})}};r.on("keypress","#NEW_"+e,function(q){"13"==q.keyCode&&(q.preventDefault(),b("#NEW_"+e).autocomplete("close"),b("#add_"+e).trigger("click"))})}a(e)};
window.init_languages=function(b,d){var e=null,h=null,r=b("#LN_existing_add_table"),u=function(){var t=b(this).parents(".language-entry").find(".language-details-notes");this.checked?t.slideDown():t.slideUp()};init_autocomplete_checklist(b,{field:"LN",source:entryform.languages_source,txt_not_found:d,after_add_new_value:u,add_new_html:function(t,l){null===e&&(e=b("#add_LN"),h=e.data("newTemplate"));t=h.replace(/LANGNAMELANGNAME/g,l).replace(/IDIDID/g,t);r.append(t)}});r.on("change",".language-primary",
u).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+b(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(t,l){b(this).css(t);b("<div>").addClass("arrow").addClass(l.vertical).addClass(l.horizontal).appendTo(this)}}});window.languages_check_state=u}})();
(function(){window.only_items_chk_add_html=function(c,a,b){return function(d,e){b&&b();c("#"+a+"_existing_add_container").append(c("<label>").append(c("<input>").prop({id:a+"_ID_"+d,type:"checkbox",checked:!0,defaultChecked:!0,name:a+"_ID",value:d})).append("&nbsp;").append(document.createTextNode(e))).append(" ; ")}};window.init_check_for_autochecklist=function(c){var a=jQuery,b=function(){return a("<li>").append(a("<span>").data("jump_location",this.id).addClass("UnaddedChecklistJump SimulateLink").append(a(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},
d=a("input[id^=NEW_]");d.length&&(a("#EntryForm").submit(function(e){var h=d.map(function(){return this.value?this:null});if(h.length&&!e.isDefaultPrevented()){if(!confirm(c)){e.preventDefault();a("#SUBMIT_BUTTON").prop("disabled",!1);e=a("#unadded_checklist_error_box");var r=a("#unadded_checklist_error_list");var u=e.is(":visible");u&&r.children("ul:first").hide("slow",function(){a(this).remove()});var t=a("<ul>");u&&t.hide();r.append(t);a.each(h.map(b),function(){t.append(this)});u?t.show("slow"):
e.show("slow")}}else e.isDefaultPrevented()&&(e=a("#unadded_checklist_error_box"),r=a("#unadded_checklist_error_list"),e.hide("slow",function(){r.children().remove()}))}),a(document).on("click",".UnaddedChecklistJump",function(){var e=a(this).data("jump_location");(e=document.getElementById(e))&&e.scrollIntoView(!0)}))};window.init_entryform_items=function(c,a,b){var d=jQuery;c.each(function(){var e=null,h=this,r=d(h),u=1,t=r.find(".EntryFormItemContainerIds")[0];if(t){var l=r.data("maxAdd");l&&=
parseInt(l,10);var y=[];t.value&&(y=d.map(t.value.split(","),function(x){return 0===x.indexOf("NEW")&&0!==x.indexOf("NEWFB")?null:x}));var A={},v=function(){r.find(".EntryFormItemBox").each(function(x){d(this).find(".EntryFormItemCount").text(x+1)})},q=function(x){if(l){var w=r.find(".EntryFormItemContent:hidden").parent().find("button.EntryFormItemDelete").prop("disabled",!x);H.prop("disabled",!x);x?(w.removeClass("ui-state-disabled"),H.removeClass("ui-state-disabled")):(w.addClass("ui-state-disabled"),
H.addClass("ui-state-disabled"))}},z=function(){var x=0,w;for(w in A)x++;return y.length-x},E=function(x){var w=0;if(l&&!x&&(w=z(),w>=l)){alert("over");return}var G=r.data("addTmpl");y.push("NEW"+u++);t.value=y.join(",");G=d(G.replace(/\[COUNT\]/g,y.length).replace(/\[ID\]/g,y[y.length-1]));G.find(".DatePicker").autodatepicker();G.find(".Province").combobox({source:window.cioc_province_source});entryform.service_titles&&G.find(".ServiceTitleField").combobox({source:entryform.service_titles});r.append(G);
e&&(e.sortable("refresh"),v());l&&!x&&w+1===l&&q(!1)},H=r.parent().find(".EntryFormItemAdd").click(function(){E(!1)});r.on("click","button.EntryFormItemDelete",function(){var x=this,w=d(this).parents(".EntryFormItemBox").find(".EntryFormItemContent"),G=this.id.split("_");G=G[G.length-2];if(w.is(":visible"))w.hide("slow",function(){A[G]=get_form_values(w);d(x).text(b);w.find("input,select,textarea").each(function(){"input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?
"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(){this.selected=!1}):this.value="":this.checked=!1});q(!0)});else{var K=0;if(l&&(K=z(),K>=l)){alert("over");return}var N=A[G];N&&(delete A[G],restore_form_values(w,N),w.show("slow",function(){d(x).text(a)}),l&&K+1===l&&q(!1))}});r.hasClass("sortable")&&(e=r.sortable({items:".EntryFormItemBox"}),e.bind("sortstart",function(x,w){w.helper.bgiframe();r.addClass("sorting")}),e.bind("sortstop",function(){var x=e.sortable("toArray");
y=d.map(x,function(w){w=w.split("_");return w[w.length-2]});t.value=y.join(",");setTimeout(function(){r.removeClass("sorting");v()},1)}));cache_register_onbeforeunload(function(x){x[h.id+"_ids"]=y;x[h.id+"_deletes"]=A;e&&(x[h.id+"_order"]=e.sortable("toArray"))});cache_register_onbeforerestorevalues(function(x){x[h.id+"_ids"]&&d.each(x[h.id+"_ids"],function(w,G){0===G.indexOf("NEW")&&E(!0)});x[h.id+"_deletes"]&&(A=x[h.id+"_deletes"],r.find(".EntryFormItemContent").each(function(){var w=this.id.split("_");
w=w[w.length-2];A[w]&&d(this).hide().parent().find("button.EntryFormItemDelete").text(b)}));l&&z()>=l&&q(!1);e&&(x=x[h.id+"_order"])&&(x.reverse(),d.each(x,function(w,G){d("#"+G).detach().prependTo(r)}),e.sortable("refresh"),v())})}})};window.init_schedule=function(c){var a=function(){var b=c(this).parents(".EntryFormItemBox"),d=this.value;"0"===d?b.find(".recurs-ui").hide():"1"==d?(b.find(".repeat-every-ui, .repeats-on-ui, .recurs-week-label").show(),b.find(".repeat-week-of-month-ui, .repeat-day-of-month-ui, .recurs-month-label").hide()):
"2"==d?(b.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-month-label").show(),b.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-week-label").hide()):(b.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-month-label").show(),b.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-week-label").hide())};c("#ScheduleEditArea").on("change",".recur-type-selector",a).on("click",".schedule-ui-accept-feedback",function(b){var d=c(this);b=d.parents(".EntryFormItemBox");d=d.data("schedule");
var e=b.find(".recur-type-selector");restore_form_values(b,d);a.call(e[0]);return!1}).find(".recur-type-selector").each(a)}})();
(function(){window.changeAutoAssign=function(h,r,u){h.checked?(r.value="",r.disabled=!0,u.disabled=!0):(r.disabled=!1,u.disabled=!1)};var c=jQuery,a=function(h){h.find(":input").not('input[type="hidden"]').filter("[name]").addClass("require-group")},b=function(h){h.find(":input").not('input[type="hidden"]').filter("[name]").removeClass("require-group")};window.make_required_group=a;window.remove_required_group=b;var d=function(h,r){var u=h.parent().find("td[data-field-display-name]"),t=u.data("fieldDisplayName");
r?(h.text(t).append(' <span class="Alert">*</span>'),a(u)):(h.text(t),b(u))},e=function(){var h=c("#FIELD_ORG_LEVEL_2");if(h.length){var r=c("#RECORD_TYPE").find(":selected").data("progorbranch");d(h,r)}};window.update_form_make_required_org_level=function(){for(var h,r=0;6>r;r++)if(h=c("#FIELD_ORG_LEVEL_"+r),h.length){d(h,!0);break}};window.init_client_validation=function(h,r){var u=c(h),t=u.prop("lang")||u.parents("[lang]").first().prop("lang")||"en-CA",l=function(w){var G=!1;try{w.each(function(){if(this.name)if(/radio|checkbox/i.test(this.type)){if(this.checked&&
this.value)throw G=!0,{name:"StopIteration",message:"StopIteration"};}else if(c.trim(this.value))throw G=!0,{name:"StopIteration",message:"StopIteration"};})}catch(K){if("StopIteration"!==K.name)throw K;}return G},y=null;c.validator.addMethod("email",function(w,G){y||=RegExp("^((([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)(\\s*,*\\s*))*)$");return this.optional(G)||y.test(w)});
var A=null;c.validator.addMethod("url",function(w,G){A||=/^((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/;return this.optional(G)||A.test(w)});var v=null;c.validator.addMethod("protourl",function(w,G){v||=/^(https?:\/\/)?((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/;return this.optional(G)||v.test(w)});var q=null;c.validator.addMethod("posint",function(w,G){q||=/^\d+$/;return this.optional(G)||q.test(w)});var z=null;c.validator.addMethod("posdbl",
function(w,G){if(!z){var K="\\.";"fr-CA"===t&&(K=",");z=new RegExp("^((\\d+)|(\\d*"+K+"\\d+))$")}return this.optional(G)||z.test(w)});var E=null;c.validator.addMethod("record-num",function(w,G){E||=/^[A-Z]{3}[0-9]{4,5}$/;return this.optional(G)||E.test(w)});c.validator.addMethod("unique",function(w,G,K){if(!w)return!0;w=string_ci_ai(w);G=jQuery.validator.format("[name!='{0}'][unique='{1}']",G.name,K);var N=[];c(G).each(function(R,O){w==string_ci_ai(c(O).val())&&N.push(O)});return 0==N.length},"A unique value is required.");
c.validator.addMethod("require-group",function(w,G){w=c(G).parents("td[data-field-display-name]");G=w.parent().children("td:first").prop("id");G=G.slice(-(G.length-6));var K=w.find(":input").not("[type=hidden]").not("button");console.log("About to tinymce check",G);if(window.tinymce){var N=w.find(".WYSIWYG").prop("id");console.log("in tinymce check",N);N&&(N=window.tinymce.get(N))&&(N.save(),console.log("did save"))}switch(G){case "ACCESSIBILITY":case "AREAS_SERVED":case "LANGUAGES":case "FUNDING":case "SCHOOL_ESCORT":case "SCHOOLS_IN_AREA":case "TYPE_OF_CARE":K=
K.not("input:text");break;case "ALT_ORG":case "LEGAL_ORG":K=K.not("input:checkbox");break;case "FORMER_ORG":K=K.not("input:checkbox").not("[name^=FORMER_ORG_DATE]");break;case "FEES":K=K.not("input:text").add("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM");break;case "VACANCY_INFO":K=K.filter("[name!=VUT_ID]")}(G=l(K))&&w.children("div.required-notice").hide();return G},"Field Required");var H=c('<div id="a_test"></div>').dialog({autoOpen:!1,title:r,closeOnEscape:!1,position:["right","bottom"],resizable:!1,
dialogClass:"ValidationErrors"}),x=c("#validation_error_box");c(document).on("click",".FieldErrorJump",function(w){w=c(w.currentTarget).prop("fieldname");(w=document.getElementById(w))&&w.scrollIntoView(!0)});c(".ValidationErrors.ui-dialog").css({position:"fixed"}).position({my:"right bottom",at:"right bottom",of:window});a(c(h).find("td[data-field-required]"));h=c(h).validate({ignore:"input[type=hidden]",ignoreTitle:!0,errorPlacement:function(w,G){var K=[],N=G[0];if(G.hasClass("require-group")){var R=
G.parents("td[data-field-display-name]");K=R.children("div.required-notice");var O=!1;/radio|checkbox/i.test(N.type)?N.checked&&N.value||(O=!0):c.trim(N.value)||(O=!0);if(O){K.length?(K.empty(),K.show(),K.append(w)):(w.removeAttr("for"),R.prepend(c('<div class="required-notice"></div>').append(w)));return}}K.length&&K.hide();w.insertAfter(G)},showErrors:function(w,G){this.defaultShowErrors();if(0===G.length)H.dialog("close"),x.hide("slow");else{var K={},N=c("<ul>");jQuery.each(G,function(R,O){O=O.element;
R=c(O).parents("td[data-field-display-name]");O=R.parent().children("td:first").prop("id");K[O]||(K[O]=!0,N.append(c("<li>").append(c("<span>").prop({fieldname:O,className:"FieldErrorJump SimulateLink"}).text(R.data("fieldDisplayName")))))});H.empty().append(N);H.dialog("open");x.show("slow");c("#SUBMIT_BUTTON").prop("disabled",!1)}},focusInvalid:!1,onfocusout:!1,onkeyup:!1,onclick:!1});"fr-CA"===t?jQuery.extend(jQuery.validator.messages,{required:"Ce champ est requis.",remote:"Veuillez remplir ce champ pour continuer.",
email:"Veuillez entrer une adresse email valide.",url:"Veuillez entrer une URL valide.",date:"Veuillez entrer une date valide.",dateISO:"Veuillez entrer une date valide (ISO).",number:"Veuillez entrer un nombre valide.",digits:"Veuillez entrer (seulement) une valeur num\u00e9rique.",creditcard:"Veuillez entrer un num\u00e9ro de carte de cr\u00e9dit valide.",equalTo:"Veuillez entrer une nouvelle fois la m\u00eame valeur.",accept:"Veuillez entrer une valeur avec une extension valide.",maxlength:jQuery.validator.format("Veuillez ne pas entrer plus de {0} caract\u00e8res."),
minlength:jQuery.validator.format("Veuillez entrer au moins {0} caract\u00e8res."),rangelength:jQuery.validator.format("Veuillez entrer entre {0} et {1} caract\u00e8res."),range:jQuery.validator.format("Veuillez entrer une valeur entre {0} et {1}."),max:jQuery.validator.format("Veuillez entrer une valeur inf\u00e9rieure ou \u00e9gale \u00e0 {0}."),min:jQuery.validator.format("Veuillez entrer une valeur sup\u00e9rieure ou \u00e9gale \u00e0 {0}."),protourl:"Veuillez entrer une URL valide.",posint:"Veuillez entrer un nombre positif.",
posdbl:"Veuillez entrer un nombre positif.","record-num":"Please enter a valid record number.","require-group":"Ce champ est requis.",unique:"Une valeur unique est requise."}):jQuery.extend(jQuery.validator.messages,{protourl:"Please enter a valid URL.",posint:"Please enter a positive number.",posdbl:"Please enter a positive number.","record-num":"Please enter a valid record number.","require-group":"Field Required.",unique:"A unique value is required."});return h};window.init_record_type_form=function(h,
r,u){var t=null,l=null,y={},A="ORG_LEVEL_1 ORG_LEVEL_2 ORG_LEVEL_3 ORG_LEVEL_4 ORG_LEVEL_5 LOCATION_NAME SERVICE_NAME_LEVEL_1 SERVICE_NAME_LEVEL_2".split(" "),v=function(){c("#RecordTypeName").html(l);c.each(A,function(z){var E=u[z],H=c("#"+z);H.length&&(H[0].value=E)&&(c("#"+z+"_DISPLAY").text(E),c("#HIDDEN_"+H).prop("value",E))});c("#RECORD_TYPE").prop("value",t[0].value);e()},q=function(){var z=t[0].value;t.data("hasform")||(z=null);t=c(this).find("option:selected");var E=t[0].value;t.data("hasform")||
(E=null);E!==z?(y[z]=c("#copyFieldsForm").contents().detach(),y[E]?(c("#copyFieldsForm").append(y[E]),c("#RECORD_TYPE").prop("value",t[0].value)):c("#copyFieldsForm").load(r+" #copyFieldsInner",{NUM:h,RT:E||t[0].value},v)):e()};jQuery(function(){l=c("#RecordTypeName").html();var z=c("#RECORD_TYPE");c(document).on("change","#RECORD_TYPE",q);t=z.find("option:selected");e()})};window.init_validate_duplicate_org_names=function(h){var r=c.extend({selector:"#EntryForm",fields:"#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5,#LOCATION_NAME,#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2,#OLS_SELECT input,#ORG_NUM",
only_warn:!0,num:null,org_levels:[],url:null},h),u=[],t=null!==r.num,l=[],y=c(r.selector).submit(function(A){var v,q=!1,z=c(r.fields).serializeArray();r.num&&z.push({name:"NUM",value:r.num});if(z.length!==u.length)q=!0;else for(v=0;v<z.length;v++){var E=z[v];if(E.name!==u[v].name||E.value!==u[v].value){q=!0;break}}if(!q&&t)return!0;var H=function(){r.only_warn&&confirm(r.confirm_string)?(t=!0,c("#duplicate_name_error_box").hide(),y.submit()):(c("#SUBMIT_BUTTON").prop("disabled",!1),c("#duplicate_name_error_box").show())};
A.stopPropagation();A.preventDefault();if(!q)return H(),!1;c.ajax({url:r.url,dataType:"json",method:"get",data:z,success:function(x){t=!0;l=[];for(var w=0;w<x.length;w++)t&=0===x[w].count,0!==x[w].count&&l.push(x[w].type);u=z;t?(c("#duplicate_name_error_box").hide(),y.submit()):H()}});return!1})}})();
(function(){var c=jQuery;window.configure_entry_form_button=function(){c("#SUBMIT_BUTTON").click(function(a){a=c("#SUBMIT_BUTTON");a.prop("disabled")||(a.prop("disabled",!0),setTimeout(function(){c("#EntryForm").submit()},1))});c(document).bind("keydown",function(a){if(a.ctrlKey&&"s"===String.fromCharCode(a.which).toLowerCase())return setTimeout(function(){c("#SUBMIT_BUTTON").click()},1),a.preventDefault(),a.stopPropagation(),!1});c("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var a=c("#SUBMIT_BUTTON").prop("value");c("#SUBMIT_BUTTON").replaceWith(c('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",a));c("#EntryForm").submit(function(){var b=validateForm();!1===b&&c("#SUBMIT_BUTTON").prop("disabled",!1);return b})}})();
(function(){window.init_entryform_notes=function(c,a,b){var d=jQuery;c.each(function(){var e=this,h=d(e),r=h.parent(),u=1,t=h.find(".EntryFormNotesUpdateIds")[0];if(t){var l=h.find(".EntryFormNotesDeleteIds")[0],y=h.find(".EntryFormNotesCancelIds")[0],A=h.find(".EntryFormNotesRestoreIds")[0],v=[],q=[],z=[],E={},H=[],x=function(D,J){v.push(D.id);t.value=v.join(",");var f=h.find(".EntryFormItemBox").length+1;template=h.data("addTmpl");new_item=d(template.replace(/\[COUNT\]/g,f).replace(/\[ID\]/g,D.id).replace(/\[MODIFIED_DATE\]/g,
D.modified_date||"").replace(/\[MODIFIED_BY\]/g,D.modified_by||"").replace(/\[CREATED_DATE\]/g,D.created_date||"").replace(/\[CREATED_BY\]/g,D.created_by||"").replace(/\[NOTE_VALUE\]/g,D.note_value||""));D.note_type&&new_item.find("option[value='"+D.note_type+"']").prop("selected",!0);D.created_date&&new_item.find("tr.CreatedField").show();!D.modified_date||D.modified_date===D.created_date&&D.modified_by===D.created_by||new_item.find("tr.ModifiedField").show();J&&new_item.find(".NewFlag").show();
h.append(new_item)};r.find(".EntryFormItemAdd").click(function(){var D="NEW"+u++;x({id:D},!0)});var w=function(D){var J=D.id.split("_");D=d(D);var f=D.parents(".EntryFormNotesItem");f.find(".EntryFormItemContent").css("text-decoration","line-through");q.push(J[J.length-2]);l.value=q.join(",");f.data("actionToRestore","delete");D.parent().hide().prev().show()},G=function(D,J){var f=D.id.split("_"),k=d(D),p=k.parents(".EntryFormNotesItem"),g=p.find(".EntryFormItemContent"),n=D.id.lastIndexOf("_");D=
D.id.substring(0,n)+"_CANCEL_REASON";f=f[f.length-2];g.prepend(J.data("cancelTemplate"));z.push(f);y.value=z.join(",");E[f]=J.data("cancelType");h.append(d("<input>").prop({type:"hidden",id:D,name:D,value:J.data("cancelType")}));p.data("actionToRestore","cancel");k.parent().hide().prev().show()},K={update:function(D){D=d(D).parents(".EntryFormNotesItem");var J=D.find(".EntryFormItemContent");x(J.data("formValues"));D.hide()},"delete":w,cancel:G},N=r.find(".EntryFormItemActionMenu").menu({select:function(D,
J){d(this).hide();K[J.item.data("action")](N.data("activeButton"),J.item)}}).hide().css({position:"absolute",zIndex:1});r.on("click",".EntryFormItemAction",function(D){N.data("activeButton",this);if(N.is(":visible"))return N.hide(),!1;N.menu("blur").show();N.position({my:"right top",at:"right bottom",of:this});d(document).one("click",function(){N.hide()});return!1});r.find(".EntryFormItemViewHidden").click(function(D){D=d(this);var J=D.next();J.is(":visible")?(D.text(a),J.hide()):(D.text(b),J.show())});
var R={"delete":function(D,J,f,k){k.css("text-decoration","none");q=d.grep(q,function(p){return p!==D});l.value=q.join(",");J.parent().hide().next().show()},cancel:function(D,J,f,k){f=J[0];var p=f.id.lastIndexOf("_");f=f.id.substring(0,p)+"_CANCEL_REASON";k.find(".EntryFormItemCancelledDetails").remove();z=d.grep(z,function(g){return g!==D});y.value=z.join(",");delete E[D];d("#"+f).remove();J.parent().hide().next().show()}};r.on("click",".EntryFormItemRestoreAction",function(D){D=this.id.split("_");
var J=d(this),f=J.parents(".EntryFormNotesItem"),k=f.find(".EntryFormItemContent");R[f.data("actionToRestore")](D[D.length-2],J,f,k)});var O=function(D){D=this.id.split("_");var J=d(this);J.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","line-through");J.parent().hide().prev().show();H.push(D[D.length-2]);A.value=H.join(",")};r.on("click",".EntryFormItemRestoreCancel",O);r.on("click",".EntryFormItemDontRestoreCancel",function(D){var J=this.id.split("_");
D=d(this);D.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","none");D.parent().hide().next().show();J=J[J.length-2];H=d.grep(H,function(f){return f!==J});A.value=H.join(",")});cache_register_onbeforeunload(function(D){D[e.id+"_updates"]=v;D[e.id+"_deletes"]=q;D[e.id+"_restores"]=H;D[e.id+"_cancels"]=z;D[e.id+"_cancel_reason"]=E});cache_register_onbeforerestorevalues(function(D){var J=e.id.substring(0,e.id.lastIndexOf("_"))+"_";D[e.id+"_updates"]&&d.each(D[e.id+
"_updates"],function(k,p){0===p.indexOf("NEW")?(u++,x({id:p},!0)):(k=d("#"+J+p+"_DISPLAY"),x(k.data("formValues")),d("#"+J+p+"_CONTAINER").hide())});D[e.id+"_deletes"]&&d.each(D[e.id+"_deletes"],function(k,p){w(document.getElementById(J+p+"_ACTION"))});D[e.id+"_restores"]&&(d.each(D[e.id+"_restores"],function(k,p){O.call(document.getElementById(J+p+"_RESTORECANCEL"))}),r.find(".EntryFormItemViewHidden").click());if(D[e.id+"_cancels"]){var f=D[e.id+"_cancel_reason"];d.each(D[e.id+"_cancels"],function(k,
p){G(document.getElementById(J+p+"_ACTION"),N.find("li[data-cancel-type='"+f[p]+"']"))})}})}})}})();
(function(){function c(a,b,d){var e=b.pop(),h=d.shift(),r=create_caching_source_fn(a,entryform.org_level_complete_url,h,null,default_cache_search_fn(a,h,null,"^"));a(e).autocomplete({focus:function(){return!1},source:function(u,t){var l;for(l=0;l<b.length;l++){if(!b[l].value||h[b[l].name]&&h[b[l].name].value&&b[l].value!==h[b[l].name]){delete h.term;delete h.content;for(var y=0;y<b.length;y++)delete h[b[l].name];if(!b[l].value){t([]);return}}u[b[l].name]=b[l].value}r(u,function(A){for(l=0;l<b.length;l++)h[b[l].name]=
b[l].value;t(A)})},minLength:1===e.id.slice(-1)?5:3}).keypress(function(u){13===u.keyCode&&(u.preventDefault(),a(e).autocomplete("close"))})}window.init_orglevels=function(a){var b=a.makeArray(a("#ORG_LEVEL_1, #ORG_LEVEL_2, #ORG_LEVEL_3, #ORG_LEVEL_4")),d=[],e;for(e=0;e<b.length;e++)d.push({});for(e=0;e<b.length;e++){if(b[e].name!=="ORG_LEVEL_"+(e+1))return;c(a,a.makeArray(b).slice(0,e+1),a.makeArray(d).slice(e))}b=a.makeArray(a("#ORG_LEVEL_1, #ORG_LEVEL_2, #ORG_LEVEL_3, #ORG_LEVEL_4, #ORG_LEVEL_5, #ORG_NUM, #NUM, #SERVICE_NAME_LEVEL_1"));
d=[{}];b.length&&"SERVICE_NAME_LEVEL_1"===b[b.length-1].name&&c(a,b,d)};window.init_areas_served=function(a,b){var d=basic_chk_add_html(a,"CM");init_autocomplete_checklist(a,{field:"CM",source:entryform.community_complete_url,minLength:3,txt_not_found:b,add_new_html:function(e,h,r){return d(e,r)}})};window.init_inarea_schools=function(a,b){init_autocomplete_checklist(a,{field:"INAREA_SCH",source:entryform.sch_source,txt_not_found:b})};window.init_escort_schools=function(a,b){init_autocomplete_checklist(a,
{field:"ESCORT_SCH",source:entryform.sch_source,txt_not_found:b})};window.init_distribution=function(a,b){init_autocomplete_checklist(a,{field:"DST",source:entryform.dst_complete_url,add_new_html:only_items_chk_add_html(a,"DST"),match_prop:"label",txt_not_found:b})};window.init_busroutes=function(a){var b=[],d=function(h,r){var u=a("#BR_ID_"+h);u.length?u[0].checked=!0:(b.push({chkid:h,display:r}),a("#BR_existing_add_table").append(a("<tr>").append(a("<td>").append(a("<input>").prop({id:"BR_ID_"+
h,type:"checkbox",checked:!0,defaultChecked:!0,name:"BR_ID",value:h})).append(document.createTextNode(" "+r)))))},e=a("#NEW_BR");a("#add_BR").click(function(){var h=e[0].value,r=e.children("[value="+h+"]").text();d(h,r)});create_checklist_onbefore_fns(a,"BR",b,d)};window.init_subjects=function(a,b){init_autocomplete_checklist(a,{field:"Subj",source:entryform.subj_complete_url,add_new_html:only_items_chk_add_html(a,"Subj",function(){a("#Subj_existing_add_title").removeClass("NotVisible")}),txt_not_found:b})};
window.init_fees=function(a){var b=a("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM"),d=function(){b.prop("disabled",!a(this).prop("checked"))};a("#FEE_ASSISTANCE_AVAILABLE").click(d).each(d)};window.init_org_num=function(a){a("#FIELD_ORG_NUM").next().on("click",".suggested-num",function(){a("#ORG_NUM").val(this.value).trigger("change");return!1})};window.init_locations_services=function(a,b){var d=function(e,h,r){var u='<li><label><input type="checkbox" name="[FIELD]" value="[VALUE]" id="[FIELD]_[VALUE]" checked> [VALUE]</label></li>'.replace(/\[FIELD\]/g,
h),t=e.siblings(".locations-services-new-container"),l=t.find(".locations-services-new"),y=t.find(".locations-services-add"),A=e.siblings(".locations-services-list-suggestions"),v=a(r);r=function(x){x[h+"_STATE"]=e.html()};var q=function(x){(x=x[h+"_STATE"])&&e.html(x)},z=function(x){var w=a("#"+h+"_"+x);w.length?w[0].checked=!0:(x=u.replace(/\[VALUE\]/g,x),e.append(a(x)))};e.length&&(cache_register_onbeforeunload(r),cache_register_onbeforerestorevalues(q));t.on("click",".locations-services-add",
function(){var x=a.trim(l[0].value);if(x){if(!/^[A-Z]{3}[0-9]{4,5}$/.test(x))return e.siblings(".locations-services-error").length||a("<p>").hide().addClass("Alert").addClass("locations-services-error").append(document.createTextNode(b)).insertBefore(t).show("slow"),!1;z(x);e.siblings(".locations-services-error").hide("slow",function(){a(this).remove()});l[0].value=""}return!1}).on("keypress",".locations-services-new",function(x){13===x.keyCode&&(x.preventDefault(),y.trigger("click"))});A.on("click",
".locations-services-suggestion",function(x){x.preventDefault();z(this.value);return!1});if(v.length){var E=e.parents("tr").first(),H=function(){var x=a(this);if(this.checked){if(E.show(),x.data("maybeRequired"))if(x.is(".ols-type-TOPIC,.ols-type-SERVICE")){var w=x.is(".ols-type-TOPIC")?a(".ols-type-SERVICE"):a(".ols-type-TOPIC");w.prop("checked")?(w.prop("disabled")&&(w.prop("disabled",!1),a("#OLS_ID_"+w.prop("value")+"_forceon").remove()),this.disabled&&(this.disabled=!1,a("#OLS_ID_"+this.value+
"_forceon").remove())):this.disabled||(this.disabled=!0,x.parent().after(a('<input type="hidden" name="OLS_ID" id="OLS_ID_'+this.value+'_forceon" value="'+this.value+'">')))}else this.disabled||(this.disabled=!0,x.parent().after(a('<input type="hidden" name="OLS_ID" id="OLS_ID_'+this.value+'_forceon" value="'+this.value+'">')))}else x.is(".ols-type-SITE")?E.hide():a(x.is(".ols-type-SERVICE")?".ols-type-TOPIC":".ols-type-SERVICE").prop("checked")||E.hide(),x.data("maybeRequired")&&x.is(".ols-type-TOPIC,.ols-type-SERVICE")&&
(this.disabled=!1,w=x.is(".ols-type-TOPIC")?a(".ols-type-SERVICE"):a(".ols-type-TOPIC"),w.prop("checked")?(x=w.prop("value"),w.prop("disabled")||(w.prop("disabled","true"),w.parent().after(a('<input type="hidden" name="OLS_ID" id="OLS_ID_'+x+'_forceon" value="'+x+'">')))):a("#ols-type-SERVICE-warning").show())};v.click(H);setTimeout(function(){v.each(function(x,w){H.call(w)})},1)}};a(".locations-services-list").each(function(){var e=a(this),h=e.data("fieldName"),r=e.data("needsOlsType");d(e,h,r)})};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var d=this.length>>>0;b=+b||0;Infinity===Math.abs(b)&&(b=0);0>b&&(b+=d,0>b&&(b=0));for(;b<d;b++)if(this[b]===a)return b;return-1});window.init_name_editable_toggle=function(a){var b=$("#ORG_NUM"),d=$("#DISPLAY_ORG_NAME"),e=function(){if(b.length&&!b.val()||!b.length&&!a.org_num)return d.prop("disabled",!0),!1;d.prop("disabled",!1);return d.length&&d.prop("checked")||
!d.length&&a.display_org_name},h=function(t){return function(l){l=l.not("#DISPLAY_ORG_NAME");var y=l.filter(":checked");l.length||(y=$.map(t,function(A){return a[A]?A:null}));if(!y.length)return!0;if(l.length){if(y.is(":not(.ols-type-TOPIC)"))return!1}else if($.map(y,function(A){return"TOPIC"===A?null:A}).length)return!1;return!e()}},r=function(){var t=!0;return function(l,y){t&&(y.each(function(){var A=$(this);A.data("was_required",A.hasClass("require-group"))}),t=!1);y.each(function(){var A=$(this);
A.data("was_required")&&(A=A.parents("td[data-field-display-name]"),l?remove_required_group(A):make_required_group(A))})}},u=function(t,l,y,A){t=$(t);l=$(l);var v=function(){var q=y(t);l.prop("disabled",q);A&&A(q,l)};t.on("click keyup change",v);v()};u("#DISPLAY_ORG_NAME,#ORG_NUM","#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5",e);u(".ols-type-SITE","#LOCATION_NAME",h(["SITE"]),r());u(".ols-type-SERVICE,.ols-type-TOPIC,#DISPLAY_ORG_NAME","#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2",
h(["SERVICE","TOPIC"]),r())}})();jQuery(function(c){var a="AB BC MB NB NL NS NT NU ON PE QC SK YT".split(" ");c(".Province").combobox({source:a});window.cioc_province_source=a});
