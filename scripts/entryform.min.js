window.CIOC={};
(function(c,a){a.do_drop_down_navigation=function(){for(var b=c.getElementById("ActionList").options,d=0;d<b.length;d++)if(b[d].selected){var e=b[d].getAttribute("href");e&&("undefined"!=typeof b[d].attributes.newwindow?a.open(e):a.location.href=e);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var c=a(this),e=a(c.data("target")),g={autoOpen:!1,title:e.data("title"),modal:e.data("modal")};e.dialog(g);c.click(function(){e.dialog("isOpen")?e.dialog("close"):e.dialog("open")})})})})(document,window);
function CheckAll(c,a){c||(c="IDList");var b=a;a||(b=document.RecordList);for(var d=b.elements.length,e=0;e<d;e++){var g=b.elements[e];g.name===c&&(g.checked=!0)}}function ClearAll(c,a){c||(c="IDList");var b=a;a||(b=document.RecordList);for(var d=b.elements.length,e=0;e<d;e++){var g=b.elements[e];g.name===c&&(g.checked=!1)}}function add_class(c,a){c&&!(new RegExp("\\b"+a+"\\b")).test(c.className)&&(c.className&&(a=" "+a),c.className+=a)}
function remove_class(c,a){if(c){for(var b=c.className.split(" "),d=[],e=0;e<b.length;e++){var g=b[e];g!==a&&d.push(g)}c.className=d.join(" ")}}function hide(c){add_class(c,"NotVisible")}function show(c){remove_class(c,"NotVisible")}function openWin(c,a){window.open(c,a,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(c,a){window.open(c,a,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(c,a){window.open(c,a,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(c){var a={sm:openWin,lg:openWinL,xl:openWinXL};c(document).on("click","a.poplink",function(){var b=c(this).data("popargs");(a[b.size||"sm"]||openWin)(this.href,b.name||"popwin");return!1})});
(function(){var c=jQuery,a={},b=function(b){null!==b&&"undefined"!==typeof b?c("#myListCount").text(b):(b=c("#myListCount").text())&&(b=parseInt(b,10));b?a.myListLink.show():a.myListLink.hide()},d=function(a){c.each(a,function(a,b){c("#added_to_list_"+b).show();c("#add_to_list_"+b).hide()})},e=function(e){return function(g){g.fail?alert(g.errinfo):(g.ids?b(c.grep(g.ids,k[a.domain]).length):g.count?b(g.count):b(0),d([e]))}},g=function(b){b=c(b.currentTarget).data("id");c.ajax({success:e(b),dataType:"json",
error:function(){alert("Error")},data:{id:b},type:"POST",url:a.current_list_url})},f=function(a){return function(b){if(b.fail)alert(b.errinfo);else{b=!0;if(a){var d=c("#results_table #remove_from_list_"+a);d.length?d.parent().parent().remove():(b=!1,d=c("#results_container #remove_from_list_"+a),d.parents(".dlist-result").remove())}d=!1;if((d=b?1===c("#results_table tr").length:0===c("#results_container .dlist-result").length)||!a)c("#records_ui").hide(),c("#no_records_message").show()}}},h=function(b){b=
c(b.currentTarget).data("id");c.ajax({success:f(b),dataType:"json",error:function(){alert("Error")},data:{ID:b,RemoveItem:a.domain},type:"POST",url:a.current_list_url})},l=function(b){c.ajax({success:f(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:a.domain},type:"POST",url:a.current_list_url})},k={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},m=function(e){if(e.fail)p();else if(e.inrequest){var g=c.grep(e.ids,
k[a.domain]);d(g);b(g.length);(e=e.previous_ids)&&c.each(e,function(a,b){c("#ct_added_to_previous_request_"+b).show()});c(".ListUI img").prop("src",function(a,b){return b.replace("list","referral")});c("#list_header_text").hide();c("#ct_header_text").show();a.current_list_url=a.ct_update_url;n()}else p()},p=function(){var e=function(){a.list_view_mode||d(a.already_added||[]);a.current_list_url=a.list_view_mode&&"ct"===a.list_view_mode?a.ct_update_url:a.list_update_url;b((a.already_added||[]).length);
n()};a.list_view_mode||a.has_session?e():c.ajax({dataType:"json",error:null,url:a.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&e()}})},n=function(){c(".HideListUI").delegate(".add_to_list","click",g).delegate(".remove_from_list","click",h).removeClass("HideListUI");c("#remove_all_from_list").click(l);c.browser.msie&&"8.0">c.browser.msie&&c(".ListUI").removeClass("FixIE")};window.init_list_adder=function(b){a=b;a.myListLink=c("#myListLink").parent(":hidden").add("#myListLink");
b.in_request?c.ajax({success:m,dataType:"json",error:null,type:"POST",url:b.in_request}):p()}})();this.JSON||(this.JSON={});
(function(){function c(a){return 10>a?"0"+a:a}function a(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(c,d){var e,h,u,s,t=g,r,q=d[c];q&&"object"===typeof q&&"function"===typeof q.toJSON&&(q=q.toJSON(c));"function"===typeof l&&(q=l.call(d,c,q));switch(typeof q){case "string":return a(q);case "number":return isFinite(q)?String(q):"null";case "boolean":case "null":return String(q);
case "object":if(!q)return"null";g+=f;r=[];if("[object Array]"===Object.prototype.toString.apply(q)){s=q.length;for(e=0;e<s;e+=1)r[e]=b(e,q)||"null";u=0===r.length?"[]":g?"[\n"+g+r.join(",\n"+g)+"\n"+t+"]":"["+r.join(",")+"]";g=t;return u}if(l&&"object"===typeof l)for(s=l.length,e=0;e<s;e+=1)h=l[e],"string"===typeof h&&(u=b(h,q))&&r.push(a(h)+(g?": ":":")+u);else for(h in q)Object.hasOwnProperty.call(q,h)&&(u=b(h,q))&&r.push(a(h)+(g?": ":":")+u);u=0===r.length?"{}":g?"{\n"+g+r.join(",\n"+g)+"\n"+
t+"}":"{"+r.join(",")+"}";g=t;return u}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,f,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var e;f=g="";if("number"===typeof d)for(e=0;e<d;e+=1)f+=" ";else"string"===typeof d&&(f=d);if((l=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,g,h=a[d];if(h&&"object"===typeof h)for(e in h)Object.hasOwnProperty.call(h,e)&&(g=c(h,e),void 0!==g?h[e]=g:delete h[e]);return b.call(a,d,h)}var e;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(c){var a={};jQuery(c).find("input,select,textarea").each(function(b){if(this.name)if(a[this.name]||(a[this.name]=[]),"select"===this.nodeName.toLowerCase()){var c=a[this.name];$(this).find("option").each(function(a){this.selected&&c.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&a[this.name].push(this.value||"")});return a};window.restore_form_values=function(c,a){var b=jQuery;b(c).find("input,select,textarea").each(function(c){if(this.name){var e=
a[this.name];"undefined"!=typeof e&&null!==e&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?b(this).find("option").each(function(a){this.selected=1<e.length?0<=b.inArray(this.value,e):0===e.length?!1:this.value===e[0]}):this.value=e.length?e[0]:"":this.checked=1<e.length?0<=b.inArray(this.value,e):0===e.length?!1:this.value===e[0])}})};window.init_cached_state=function(c){var a=jQuery;c=c||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];a(window).on("beforeunload",function(){var b={form_values:get_form_values(c)};a.each(onbeforeunload_fns,function(a,c){c(b)});document.getElementById("cache_form_values").value=JSON.stringify(b)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var b=document.getElementById("cache_form_values");if(b&&b.value){var d=
JSON.parse(b.value);a.each(onbeforerestorevalues_fns,function(a,b){b(d)});restore_form_values(c,d.form_values)}}}})();
(function(){var c=jQuery,a={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},b={"en-CA":!0,"":!0},d={},e={"fr-CA":"fr","es-MX":"es"},g=function(){var b=c(this),d=b.data("culture"),e=a[d]||c.datepicker.regional[d].dateFormat,g={};b.hasClass("NoYear")&&(e=e.replace(/[\- .\/]*yy[\/]?/,""),g={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});g.dateFormat=e;b.datepicker(c.extend({},c.datepicker.regional[d],g)).prop("autocomplete","off")},f=function(a){c.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+c.ui.version+"/i18n/jquery.ui.datepicker-"+a+".min.js",function(){b[a]=!0;c.each(d[a],function(){g.call(this)});delete d[a]})};c.datepicker.regional["en-CA"]=c.extend({},c.datepicker.regional[""]);c.fn.extend({autodatepicker:function(){return this.each(function(){var a=
c(this),l;l=a.parents("[lang]").first().prop("lang")||"en-CA";l=e[l]||l;a.data("culture",l);b[l]?g.call(this):(a=d[l],a||(a=d[l]=[],f(l)),a.push(this))})}});jQuery(function(){c("input.DatePicker").autodatepicker()})})();
(function(c){function a(a){return a&&a.constructor===Number?a+"px":a}c.fn.bgiframe=c.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(b){b=c.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},b);var d='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+b.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==b.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==b.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
a(b.top))+";left:"+("auto"==b.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":a(b.left))+";width:"+("auto"==b.width?"expression(this.parentNode.offsetWidth+'px')":a(b.width))+";height:"+("auto"==b.height?"expression(this.parentNode.offsetHeight+'px')":a(b.height))+';"/>';return this.each(function(){0===c(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(d),this.firstChild)})}:function(){return this};c.fn.bgIframe=c.fn.bgiframe})(jQuery);
(function(c){c.widget("ui.combobox",{options:{source:null},_create:function(){var a=this.element;this.options.source&&(c(a).autocomplete({focus:function(a,c){return!1},source:this.options.source,delay:0,minLength:0}),c("<span>").insertAfter(a).addClass("SmallButton DownButton").css("margin-left","1px").click(function(b){a.autocomplete("widget").is(":visible")?a.autocomplete("close"):(a.autocomplete("search",""),a.focus())}))}})})(jQuery);
(function(c){c.extend(c.fn,{validate:function(a){if(this.length){var b=c.data(this[0],"validator");if(b)return b;this.attr("novalidate","novalidate");b=new c.validator(a,this[0]);c.data(this[0],"validator",b);b.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){b.cancelSubmit=!0}),b.settings.submitHandler&&a.filter(":submit").click(function(){b.submitButton=this}),this.submit(function(a){function e(){if(b.settings.submitHandler){if(b.submitButton)var a=c("<input type='hidden'/>").attr("name",
b.submitButton.name).val(b.submitButton.value).appendTo(b.currentForm);b.settings.submitHandler.call(b,b.currentForm);b.submitButton&&a.remove();return!1}return!0}b.settings.debug&&a.preventDefault();if(b.cancelSubmit)return b.cancelSubmit=!1,e();if(b.form())return b.pendingRequest?(b.formSubmitted=!0,!1):e();b.focusInvalid();return!1}));return b}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(c(this[0]).is("form"))return this.validate().form();
var a=!0,b=c(this[0].form).validate();this.each(function(){a&=b.element(this)});return a},removeAttrs:function(a){var b={},d=this;c.each(a.split(/\s/),function(a,c){b[c]=d.attr(c);d.removeAttr(c)});return b},rules:function(a,b){var d=this[0];if(a){var e=c.data(d.form,"validator").settings,g=e.rules,f=c.validator.staticRules(d);switch(a){case "add":c.extend(f,c.validator.normalizeRule(b));g[d.name]=f;b.messages&&(e.messages[d.name]=c.extend(e.messages[d.name],b.messages));break;case "remove":if(!b)return delete g[d.name],
f;var h={};c.each(b.split(/\s/),function(a,b){h[b]=f[b];delete f[b]});return h}}d=c.validator.normalizeRules(c.extend({},c.validator.metadataRules(d),c.validator.classRules(d),c.validator.attributeRules(d),c.validator.staticRules(d)),d);d.required&&(e=d.required,delete d.required,d=c.extend({required:e},d));return d}});c.extend(c.expr[":"],{blank:function(a){return!c.trim(""+a.value)},filled:function(a){return!!c.trim(""+a.value)},unchecked:function(a){return!a.checked}});c.validator=function(a,b){this.settings=
c.extend(!0,{},c.validator.defaults,a);this.currentForm=b;this.init()};c.validator.format=function(a,b){if(1==arguments.length)return function(){var b=c.makeArray(arguments);b.unshift(a);return c.validator.format.apply(this,b)};2<arguments.length&&b.constructor!=Array&&(b=c.makeArray(arguments).slice(1));b.constructor!=Array&&(b=[b]);c.each(b,function(b,c){a=a.replace(new RegExp("\\{"+b+"\\}","g"),c)});return a};c.extend(c.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:c([]),errorLabelContainer:c([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a,b){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a,b){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a,
b){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a,b){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).addClass(b).removeClass(d):c(a).addClass(b).removeClass(d)},unhighlight:function(a,b,d){"radio"===a.type?this.findByName(a.name).removeClass(b).addClass(d):c(a).removeClass(b).addClass(d)}},setDefaults:function(a){c.extend(c.validator.defaults,
a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:c.validator.format("Please enter no more than {0} characters."),
minlength:c.validator.format("Please enter at least {0} characters."),rangelength:c.validator.format("Please enter a value between {0} and {1} characters long."),range:c.validator.format("Please enter a value between {0} and {1}."),max:c.validator.format("Please enter a value less than or equal to {0}."),min:c.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function a(a){var b=c.data(this[0].form,"validator"),d="on"+a.type.replace(/^validate/,
"");b.settings[d]&&b.settings[d].call(b,this[0],a)}this.labelContainer=c(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||c(this.currentForm);this.containers=c(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=this.groups={};c.each(this.settings.groups,function(a,d){c.each(d.split(/\s/),function(c,d){b[d]=a})});var d=
this.settings.rules;c.each(d,function(a,b){d[a]=c.validator.normalizeRule(b)});c(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",
a);this.settings.invalidHandler&&c(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();c.extend(this.submitted,this.errorMap);this.invalid=c.extend({},this.errorMap);this.valid()||c(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=
a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=c(a);var b=this.check(a);b?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return b},showErrors:function(a){if(a){c.extend(this.errorMap,a);this.errorList=[];for(var b in a)this.errorList.push({message:a[b],element:this.findByName(b)[0]});this.successList=c.grep(this.successList,function(b){return!(b.name in a)})}this.settings.showErrors?
this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){c.fn.resetForm&&c(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,c;for(c in a)b++;return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==
this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{c(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==c.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=this,b={};return c(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&
a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in b||!a.objectLength(c(this).rules())?!1:b[this.name]=!0})},clean:function(a){return c(a)[0]},errors:function(){return c(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=c([]);this.toHide=c([]);this.currentElements=c([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},
prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var b=c(a).rules(),d=!1,e;for(e in b){var g={method:e,parameters:b[e]};try{var f=c.validator.methods[e].call(this,a.value.replace(/\r/g,""),a,g.parameters);if("dependency-mismatch"==f)d=!0;else{d=!1;if("pending"==f){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!f)return this.formatAndAdd(a,g),!1}}catch(h){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+
a.id+", check the '"+g.method+"' method",h),h;}}if(!d)return this.objectLength(b)&&this.successList.push(a),!0},customMetaMessage:function(a,b){if(c.metadata){var d=this.settings.meta?c(a).metadata()[this.settings.meta]:c(a).metadata();return d&&d.messages&&d.messages[b]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,
b){return this.findDefined(this.customMessage(a.name,b),this.customMetaMessage(a,b),!this.settings.ignoreTitle&&a.title||void 0,c.validator.messages[b],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),e=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,a):e.test(c)&&(c=jQuery.format(c.replace(e,"{$1}"),b.parameters));this.errorList.push({message:c,element:a});this.errorMap[a.name]=c;this.submitted[a.name]=
c},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);
if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return c(this.errorList).map(function(){return this.element})},showLabel:function(a,b){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),
d.attr("generated")&&d.html(b)):(d=c("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(b||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,c(a)):d.insertAfter(a)));!b&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));
this.toShow=this.toShow.add(d)},errorsFor:function(a){var b=this.idOrName(a);return this.errors().filter(function(){return c(this).attr("for")==b})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var b=this.currentForm;return c(document.getElementsByName(a)).map(function(c,
e){return e.form==b&&e.name==a&&e||null})},getLength:function(a,b){switch(b.nodeName.toLowerCase()){case "select":return c("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a,b){return a},string:function(a,b){return!!c(a,b.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!c.validator.methods.required.call(this,
c.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,b){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[a.name];b&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(c(this.currentForm).submit(),this.formSubmitted=!1):!b&&0==this.pendingRequest&&this.formSubmitted&&(c(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},
previousValue:function(a){return c.data(a,"previousValue")||c.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,b){a.constructor==String?this.classRuleSettings[a]=b:c.extend(this.classRuleSettings,a)},classRules:function(a){var b=
{};(a=c(a).attr("class"))&&c.each(a.split(" "),function(){this in c.validator.classRuleSettings&&c.extend(b,c.validator.classRuleSettings[this])});return b},attributeRules:function(a){var b={};a=c(a);for(var d in c.validator.methods){var e;(e="required"===d&&"function"===typeof c.fn.prop?a.prop(d):a.attr(d))?b[d]=e:a[0].getAttribute("type")===d&&(b[d]=!0)}b.maxlength&&/-1|2147483647|524288/.test(b.maxlength)&&delete b.maxlength;return b},metadataRules:function(a){if(!c.metadata)return{};var b=c.data(a.form,
"validator").settings.meta;return b?c(a).metadata()[b]:c(a).metadata()},staticRules:function(a){var b={},d=c.data(a.form,"validator");d.settings.rules&&(b=c.validator.normalizeRule(d.settings.rules[a.name])||{});return b},normalizeRules:function(a,b){c.each(a,function(d,e){if(!1===e)delete a[d];else if(e.param||e.depends){var g=!0;switch(typeof e.depends){case "string":g=!!c(e.depends,b.form).length;break;case "function":g=e.depends.call(b,b)}g?a[d]=void 0!==e.param?e.param:!0:delete a[d]}});c.each(a,
function(d,e){a[d]=c.isFunction(e)?e(b):e});c.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});c.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});c.validator.autoCreateRanges&&(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==
typeof a){var b={};c.each(a.split(/\s/),function(){b[this]=!0});a=b}return a},addMethod:function(a,b,d){c.validator.methods[a]=b;c.validator.messages[a]=void 0!=d?d:c.validator.messages[a];3>b.length&&c.validator.addClassRules(a,c.validator.normalizeRule(a))},methods:{required:function(a,b,d){if(!this.depend(d,b))return"dependency-mismatch";switch(b.nodeName.toLowerCase()){case "select":return(a=c(b).val())&&0<a.length;case "input":if(this.checkable(b))return 0<this.getLength(a,b);default:return 0<
c.trim(a).length}},remote:function(a,b,d){if(this.optional(b))return"dependency-mismatch";var e=this.previousValue(b);this.settings.messages[b.name]||(this.settings.messages[b.name]={});e.originalMessage=this.settings.messages[b.name].remote;this.settings.messages[b.name].remote=e.message;d="string"==typeof d&&{url:d}||d;if(this.pending[b.name])return"pending";if(e.old===a)return e.valid;e.old=a;var g=this;this.startRequest(b);var f={};f[b.name]=a;c.ajax(c.extend(!0,{url:d,mode:"abort",port:"validate"+
b.name,dataType:"json",data:f,success:function(d){g.settings.messages[b.name].remote=e.originalMessage;var f=!0===d;if(f){var k=g.formSubmitted;g.prepareElement(b);g.formSubmitted=k;g.successList.push(b);g.showErrors()}else k={},d=d||g.defaultMessage(b,"remote"),k[b.name]=e.message=c.isFunction(d)?d(a):d,g.showErrors(k);e.valid=f;g.stopRequest(b,f)}},d));return"pending"},minlength:function(a,b,d){return this.optional(b)||this.getLength(c.trim(a),b)>=d},maxlength:function(a,b,d){return this.optional(b)||
this.getLength(c.trim(a),b)<=d},rangelength:function(a,b,d){a=this.getLength(c.trim(a),b);return this.optional(b)||a>=d[0]&&a<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;var c=0,e=0,g=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;0<=f;f--)e=
a.charAt(f),e=parseInt(e,10),g&&9<(e*=2)&&(e-=9),c+=e,g=!g;return 0==c%10},accept:function(a,b,c){c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(new RegExp(".("+c+")$","i"))},equalTo:function(a,b,d){d=c(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){c(b).valid()});return a==d.val()}}});c.format=c.validator.format})(jQuery);
(function(c){var a={};if(c.ajaxPrefilter)c.ajaxPrefilter(function(b,c,g){c=b.port;"abort"==b.mode&&(a[c]&&a[c].abort(),a[c]=g)});else{var b=c.ajax;c.ajax=function(d){var e=("port"in d?d:c.ajaxSettings).port;return"abort"==("mode"in d?d:c.ajaxSettings).mode?(a[e]&&a[e].abort(),a[e]=b.apply(this,arguments)):b.apply(this,arguments)}}})(jQuery);
(function(c){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(a){a=c.event.fix(a);a.type=b;return c.event.handle.call(this,a)}c.event.special[b]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(a){arguments[0]=c.event.fix(a);arguments[0].type=b;return c.event.handle.apply(this,arguments)}}});c.extend(c.fn,{validateDelegate:function(a,
b,d){return this.bind(b,function(b){var g=c(b.target);if(g.is(a))return d.apply(g,arguments)})}})})(jQuery);
(function(c,a){var b,d,e,g,f,h,l,k,m,p,n,u,s,t,r,q,x,E,z,v,B,F,A,C;b=function(a){return new b.prototype.init(a)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=b:c.Globalize=b;b.cultures={};b.prototype={constructor:b,init:function(a){this.cultures=b.cultures;this.cultureSelector=a;return this}};b.prototype.init.prototype=b.prototype;b.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};b.cultures["default"].calendar=b.cultures["default"].calendars.standard;b.cultures.en=b.cultures["default"];b.cultureSelector="en";d=/^0x[a-f0-9]+$/i;e=/^[+\-]?infinity$/i;g=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;f=/^\s+|\s+$/g;h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};l=function(a,b){return a.substr(a.length-b.length)===b};k=function(){var b,c,d,e,g,f=arguments[0]||{},h=1,y=arguments.length,
x=!1;"boolean"===typeof f&&(x=f,f=arguments[1]||{},h=2);for("object"===typeof f||p(f)||(f={});h<y;h++)if(null!=(b=arguments[h]))for(c in b)d=f[c],e=b[c],f!==e&&(x&&e&&(n(e)||(g=m(e)))?(g?(g=!1,d=d&&m(d)?d:[]):d=d&&n(d)?d:{},f[c]=k(x,d,e)):e!==a&&(f[c]=e));return f};m=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};p=function(a){return"[object Function]"===Object.prototype.toString.call(a)};n=function(a){return"[object Object]"===Object.prototype.toString.call(a)};
u=function(a,b){return 0===a.indexOf(b)};s=function(a){return(a+"").replace(f,"")};t=function(a){return isNaN(a)?NaN:Math[0>a?"ceil":"floor"](a)};r=function(a,b,c){var d;for(d=a.length;d<b;d+=1)a=c?"0"+a:a+"0";return a};q=function(a,b){for(var c=0,d=!1,e=0,g=a.length;e<g;e++){var f=a.charAt(e);switch(f){case "'":d?b.push("'"):c++;d=!1;break;case "\\":d&&b.push("\\");d=!d;break;default:b.push(f),d=!1}}return c};x=function(a,b){b=b||"F";var c;c=a.patterns;var d=b.length;if(1===d){c=c[b];if(!c)throw"Invalid date format string '"+
b+"'.";b=c}else 2===d&&"%"===b.charAt(0)&&(b=b.charAt(1));return b};E=function(a,b,c){function d(a,b){var c;c=a+"";return 1<b&&c.length<b?(c=n[b-2]+c,c.substr(c.length-b,b)):c}function e(){if(m||A)return m;m=u.test(b);A=!0;return m}function g(a,b){if(t)return t[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var f=c.calendar,y=f.convert;if(!b||!b.length||"i"===b){if(c&&c.name.length)if(y)c=E(a,f.patterns.F,c);else{c=
new Date(a.getTime());var h=B(a,f.eras);c.setFullYear(F(a,f,h));c=c.toLocaleString()}else c=a.toString();return c}var h=f.eras,l="s"===b;b=x(f,b);c=[];var k,n=["0","00","000"],m,A,u=/([^d]|^)(d|dd)([^d]|$)/g,s=0,p=v(),t;for(!l&&y&&(t=y.fromGregorian(a));;){k=p.lastIndex;y=p.exec(b);k=b.slice(k,y?y.index:b.length);s+=q(k,c);if(!y)break;if(s%2)c.push(y[0]);else switch(k=y[0],y=k.length,k){case "ddd":case "dddd":c.push((3===y?f.days.namesAbbr:f.days.names)[a.getDay()]);break;case "d":case "dd":m=!0;
c.push(d(g(a,2),y));break;case "MMM":case "MMMM":k=g(a,1);c.push(f.monthsGenitive&&e()?f.monthsGenitive[3===y?"namesAbbr":"names"][k]:f.months[3===y?"namesAbbr":"names"][k]);break;case "M":case "MM":c.push(d(g(a,1)+1,y));break;case "y":case "yy":case "yyyy":k=t?t[0]:F(a,f,B(a,h),l);4>y&&(k%=100);c.push(d(k,y));break;case "h":case "hh":k=a.getHours()%12;0===k&&(k=12);c.push(d(k,y));break;case "H":case "HH":c.push(d(a.getHours(),y));break;case "m":case "mm":c.push(d(a.getMinutes(),y));break;case "s":case "ss":c.push(d(a.getSeconds(),
y));break;case "t":case "tt":k=12>a.getHours()?f.AM?f.AM[0]:" ":f.PM?f.PM[0]:" ";c.push(1===y?k.charAt(0):k);break;case "f":case "ff":case "fff":c.push(d(a.getMilliseconds(),3).substr(0,y));break;case "z":case "zz":k=a.getTimezoneOffset()/60;c.push((0>=k?"+":"-")+d(Math.floor(Math.abs(k)),y));break;case "zzz":k=a.getTimezoneOffset()/60;c.push((0>=k?"+":"-")+d(Math.floor(Math.abs(k)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":f.eras&&c.push(f.eras[B(a,h)].name);break;
case "/":c.push(f["/"]);break;default:throw"Invalid date format pattern '"+k+"'.";}}return c.join("")};(function(){var a;a=function(a,b,c){var d=c.groupSizes,e=d[0],g=1,f=Math.pow(10,b),f=Math.round(a*f)/f;isFinite(f)||(f=a);a=f+"";var f="",f=a.split(/e/i),w=1<f.length?parseInt(f[1],10):0;a=f[0];f=a.split(".");a=f[0];f=1<f.length?f[1]:"";0<w?(f=r(f,w,!1),a+=f.slice(0,w),f=f.substr(w)):0>w&&(w=-w,a=r(a,w+1,!0),f=a.slice(-w,a.length)+f,a=a.slice(0,-w));f=0<b?c["."]+(f.length>b?f.slice(0,b):r(f,b)):
"";b=a.length-1;c=c[","];for(w="";0<=b;){if(0===e||e>b)return a.slice(0,b+1)+(w.length?c+w+f:f);w=a.slice(b-e+1,b+1)+(w.length?c+w:"");b-=e;g<d.length&&(e=d[g],g++)}return a.slice(0,b+1)+c+w+f};z=function(b,c,d){if(!isFinite(b))return Infinity===b?d.numberFormat.positiveInfinity:-Infinity===b?d.numberFormat.negativeInfinity:d.numberFormat.NaN;if(!c||"i"===c)return d.name.length?b.toLocaleString():b.toString();c=c||"D";d=d.numberFormat;var e=Math.abs(b),g=-1;1<c.length&&(g=parseInt(c.slice(1),10));
var f=c.charAt(0).toUpperCase(),h;switch(f){case "D":c="n";e=t(e);-1!==g&&(e=r(""+e,g,!0));0>b&&(e="-"+e);break;case "N":h=d;case "C":h=h||d.currency;case "P":h=h||d.percent;c=0>b?h.pattern[0]:h.pattern[1]||"n";-1===g&&(g=h.decimals);e=a(e*("P"===f?100:1),g,h);break;default:throw"Bad number format specifier: "+f;}b=/n|\$|-|%/g;for(h="";;){g=b.lastIndex;f=b.exec(c);h+=c.slice(g,f?f.index:c.length);if(!f)break;switch(f[0]){case "n":h+=e;break;case "$":h+=d.currency.symbol;break;case "-":/[1-9]/.test(e)&&
(h+=d["-"]);break;case "%":h+=d.percent.symbol}}return h}})();v=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};B=function(a,b){if(!b)return 0;for(var c,d=a.getTime(),e=0,g=b.length;e<g;e++)if(c=b[e].start,null===c||d>=c)return e;return 0};F=function(a,b,c,d){a=a.getFullYear();!d&&b.eras&&(a-=b.eras[c].offset);return a};(function(){var a,b,c,d,e,g,f;a=function(a,b){if(100>b){var c=new Date,d=B(c),c=F(c,a,d),d=a.twoDigitYearMax,d="string"===
typeof d?(new Date).getFullYear()%100+parseInt(d,10):d;b+=c-c%100;b>d&&(b-=100)}return b};b=function(a,b,c){var d=a.days,e=a._upperDays;e||(a._upperDays=e=[f(d.names),f(d.namesAbbr),f(d.namesShort)]);b=g(b);c?(a=h(e[1],b),-1===a&&(a=h(e[2],b))):a=h(e[0],b);return a};c=function(a,b,c){var d=a.months,e=a.monthsGenitive||a.months,w=a._upperMonths,k=a._upperMonthsGen;w||(a._upperMonths=w=[f(d.names),f(d.namesAbbr)],a._upperMonthsGen=k=[f(e.names),f(e.namesAbbr)]);b=g(b);a=h(c?w[1]:w[0],b);0>a&&(a=h(c?
k[1]:k[0],b));return a};d=function(a,b){var c=a._parseRegExp;if(c){var d=c[b];if(d)return d}else a._parseRegExp=c={};for(var d=x(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),e=["^"],g=[],f=0,w=0,h=v(),k;null!==(k=h.exec(d));){var D=d.slice(f,k.index),f=h.lastIndex,w=w+q(D,e);if(w%2)e.push(k[0]);else{var D=k[0],I=D.length;switch(D){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":D="(\\D+)";break;case "tt":case "t":D="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":D=
"(\\d{"+I+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":D="(\\d\\d?)";break;case "zzz":D="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":D="([+-]?\\d\\d?)";break;case "/":D="(\\/)";break;default:throw"Invalid date format pattern '"+D+"'.";}D&&e.push(D);g.push(k[0])}}q(d.slice(f),e);e.push("$");d={regExp:e.join("").replace(/\s+/g,"\\s+"),groups:g};return c[b]=d};e=function(a,b,c){return a<b||a>c};g=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
f=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=g(a[c]);return b};A=function(g,f,h){g=s(g);h=h.calendar;f=d(h,f);var k=(new RegExp(f.regExp)).exec(g);if(null===k)return null;var x=f.groups,l=f=g=null,q=null,m=null,n=0,A,p=0,E=0,t=0;A=null;for(var r=!1,C=0,J=x.length;C<J;C++){var z=k[C+1];if(z){var v=x[C],B=v.length,G=parseInt(z,10);switch(v){case "dd":case "d":q=G;if(e(q,1,31))return null;break;case "MMM":case "MMMM":l=c(h,z,3===B);if(e(l,0,11))return null;break;case "M":case "MM":l=G-1;if(e(l,
0,11))return null;break;case "y":case "yy":case "yyyy":f=4>B?a(h,G):G;if(e(f,0,9999))return null;break;case "h":case "hh":n=G;12===n&&(n=0);if(e(n,0,11))return null;break;case "H":case "HH":n=G;if(e(n,0,23))return null;break;case "m":case "mm":p=G;if(e(p,0,59))return null;break;case "s":case "ss":E=G;if(e(E,0,59))return null;break;case "tt":case "t":r=h.PM&&(z===h.PM[0]||z===h.PM[1]||z===h.PM[2]);if(!r&&(!h.AM||z!==h.AM[0]&&z!==h.AM[1]&&z!==h.AM[2]))return null;break;case "f":case "ff":case "fff":t=
G*Math.pow(10,3-B);if(e(t,0,999))return null;break;case "ddd":case "dddd":m=b(h,z,3===B);if(e(m,0,6))return null;break;case "zzz":v=z.split(/:/);if(2!==v.length)return null;A=parseInt(v[0],10);if(e(A,-12,13))return null;v=parseInt(v[1],10);if(e(v,0,59))return null;A=60*A+(u(z,"-")?-v:v);break;case "z":case "zz":A=G;if(e(A,-12,13))return null;A*=60;break;case "g":case "gg":if(!z||!h.eras)return null;z=s(z.toLowerCase());v=0;for(B=h.eras.length;v<B;v++)if(z===h.eras[v].name.toLowerCase()){g=v;break}if(null===
g)return null}}}k=new Date;x=(C=h.convert)?C.fromGregorian(k)[0]:k.getFullYear();null===f?f=x:h.eras&&(f+=h.eras[g||0].offset);null===l&&(l=0);null===q&&(q=1);if(C){if(k=C.toGregorian(f,l,q),null===k)return null}else if(k.setFullYear(f,l,q),k.getDate()!==q||null!==m&&k.getDay()!==m)return null;r&&12>n&&(n+=12);k.setHours(n,p,E,t);null!==A&&(h=k.getMinutes()-(A+k.getTimezoneOffset()),k.setHours(k.getHours()+parseInt(h/60,10),h%60));return k}})();C=function(a,b,c){var d=b["-"];b=b["+"];var e;switch(c){case "n -":d=
" "+d,b=" "+b;case "n-":l(a,d)?e=["-",a.substr(0,a.length-d.length)]:l(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":d+=" ",b+=" ";case "-n":u(a,d)?e=["-",a.substr(d.length)]:u(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":u(a,"(")&&l(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};b.prototype.findClosestCulture=function(a){return b.findClosestCulture.call(this,a)};b.prototype.format=function(a,c,d){return b.format.call(this,a,c,d)};b.prototype.localize=function(a,
c){return b.localize.call(this,a,c)};b.prototype.parseInt=function(a,c,d){return b.parseInt.call(this,a,c,d)};b.prototype.parseFloat=function(a,c,d){return b.parseFloat.call(this,a,c,d)};b.prototype.culture=function(a){return b.culture.call(this,a)};b.addCultureInfo=function(a,b,c){var d={},e=!1;"string"!==typeof a?(c=a,a=this.culture().name,d=this.cultures[a]):"string"!==typeof b?(c=b,e=null==this.cultures[a],d=this.cultures[a]||this.cultures["default"]):(e=!0,d=this.cultures[b]);this.cultures[a]=
k(!0,{},d,c);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};b.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(m(a)){var c,d=this.cultures,e=a,g,f=e.length,h=[];for(g=0;g<f;g++)a=s(e[g]),a=a.split(";"),c=s(a[0]),1===a.length?a=1:(a=s(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),h.push({lang:c,pri:a});h.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(g=0;g<f;g++)if(c=h[g].lang,b=d[c])return b;for(g=0;g<f;g++){c=h[g].lang;do{e=c.lastIndexOf("-");if(-1===e)break;c=c.substr(0,e);if(b=d[c])return b}while(1)}for(g=0;g<f;g++){c=h[g].lang;for(var k in d)if(e=d[k],e.language==c)return e}}else if("object"===typeof a)return a;return b||null};b.format=function(a,b,c){c=this.findClosestCulture(c);a instanceof Date?a=E(a,b,c):"number"===typeof a&&(a=z(a,b,c));return a};b.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};b.parseDate=function(a,b,c){c=this.findClosestCulture(c);var d,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var g=b.length;e<g;e++){var f=b[e];if(f&&(d=A(a,f,c)))break}}}else for(e in b=c.calendar.patterns,b)if(d=A(a,b[e],c))break;return d||null};b.parseInt=function(a,c,d){return t(b.parseFloat(a,c,d))};b.parseFloat=function(a,b,c){"number"!==typeof b&&(c=b,b=10);var f=this.findClosestCulture(c);c=NaN;var h=f.numberFormat;-1<a.indexOf(f.numberFormat.currency.symbol)&&
(a=a.replace(f.numberFormat.currency.symbol,""),a=a.replace(f.numberFormat.currency["."],f.numberFormat["."]));a=s(a);if(e.test(a))c=parseFloat(a);else if(!b&&d.test(a))c=parseInt(a,16);else{f=C(a,h,h.pattern[0]);b=f[0];f=f[1];""===b&&"(n)"!==h.pattern[0]&&(f=C(a,h,"(n)"),b=f[0],f=f[1]);""===b&&"-n"!==h.pattern[0]&&(f=C(a,h,"-n"),b=f[0],f=f[1]);b=b||"+";var k;a=f.indexOf("e");0>a&&(a=f.indexOf("E"));0>a?(k=f,a=null):(k=f.substr(0,a),a=f.substr(a+1));var l=h["."],x=k.indexOf(l);0>x?(f=k,k=null):(f=
k.substr(0,x),k=k.substr(x+l.length));l=h[","];f=f.split(l).join("");x=l.replace(/\u00A0/g," ");l!==x&&(f=f.split(x).join(""));b+=f;null!==k&&(b+="."+k);null!==a&&(h=C(a,h,"-n"),b+="e"+(h[0]||"+")+h[1]);g.test(b)&&(c=parseFloat(b))}return c};b.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
(function(){var c=null,a=null,b=[59.888937,-101.601562],d=null,e=null,g=!0,f=null,h=null,l=function(){a.setCenter(new google.maps.LatLng(b[0],b[1]),2)},k=function(){e&&e.setMap(null);e=null;h&&(google.maps.event.removeListener(h),h=null)},m=function(a,b){document.getElementById("LATITUDE").value=Globalize.format(a,"n6");document.getElementById("LONGITUDE").value=Globalize.format(b,"n6")},p=function(b,c){var d=new google.maps.LatLng(b,c);g&&a.setZoom(14);a.setCenter(d);g=!1;d=new google.maps.Marker({position:d,
map:a,clickable:!1});k();e=d},n=function(a){a&&(f=v,m(a.lat(),a.lng()),p(a.lat(),a.lng()))},u=function(a){var b=null;switch(a){case google.maps.GeocoderStatus.ZERO_RESULTS:b=pageconstants.txt_geocode_unknown_address;break;case google.maps.GeocoderStatus.REQUEST_DENIED:b=pageconstants.txt_geocode_map_key_fail;break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:b=pageconstants.txt_geocode_too_many_queries;break;default:b=pageconstants.txt_geocode_unknown_error+a}return b};window.get_response_message=
u;var s=function(a){return function(b,c){c!==google.maps.GeocoderStatus.OK?a(null,c):a(b[0].geometry.location,c)}};window.handle_geocode=s;var t=function(){var b={zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};c=document.getElementById("map_canvas");a=new google.maps.Map(c,b);l();d||(d=new google.maps.Geocoder);var b=$("#LATITUDE")[0].value,e=$("#LONGITUDE")[0].value;b&&e&&p(Globalize.parseFloat(b),Globalize.parseFloat(e))},r=[],q=!1;window.maps_loaded=function(){q=!0;$.each(r,function(a,b){b()});
r=[]};window.add_maps_loaded_callback=function(a){q?a():r.push(a)};window.initialize_maps=function(a,b,c,d){if(!window.cioc_map_script_added){window.cioc_map_script_added=!0;Globalize.culture(a);var e="";d&&(e="&libraries=places");$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+b+"&sensor=false&callback=maps_loaded&language="+a+e)}add_maps_loaded_callback(c)};var x=function(a,b){return s(function(c,d){c?(b&&$("#geocode_no_postal_code").show(),a(c)):d==google.maps.GeocoderStatus.ZERO_RESULTS&&
!b&&document.getElementById("GEOCODE_TYPE_SITE").checked?F(a,!0):(alert(u(d)),a(null))})},E=function(a){var b=document.getElementById("EntryForm"),c=[];if(!b.SITE_STREET_NUMBER)return null;var d=[b.SITE_STREET_NUMBER.value,b.SITE_STREET.value,b.SITE_STREET_TYPE.value,b.SITE_STREET_DIR.value].join(" "),d=d.replace(/^\s+/g,"");(d=d.replace(/\s+$/g,""))&&c.push(d);var e=["SITE_CITY","SITE_PROVINCE"];a||e.push("SITE_POSTAL_CODE");for(a=0;a<e.length;a++)(d=b[e[a]].value)&&c.push(d);(d=b.SITE_COUNTRY.value)?
c.push(d):c.push("Canada");return(b=c.join(", "))&&"Canada"!=b?b:null},z=function(){var a=document.EntryForm,b=[];if(!a.INTERSECTION&&!a.INTERSECTION.value)return null;for(var c=["INTERSECTION","SITE_CITY","SITE_PROVINCE"],d=0;d<c.length;d++){var e=a[c[d]].value;e&&b.push(e)}(e=a.SITE_COUNTRY.value)?b.push(e):b.push("Canada");return b.join(", ")},v=null,B=function(a,b,c){v=a;c=x(b,c);(v=a)?d.geocode({address:a},c):(k(),m("",""));a?$("#geocode_no_postal_code").hide():b(null)},F=function(a,b){var c=
E(b);B(c,a,b)},A=function(a){var b=z();B(b,a)};window.handle_geocode_entryform_feedback=function(a,b){"undefined"!=typeof a&&null!==a&&"undefined"!=typeof b&&null!==b&&(f=v,n(google.maps.LatLng(Globalize.parseFloat(a),Globalize.parseFloat(b))))};var C=function(a){n(a)},w=function(b){H(!1);$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();e||b||F(function(b){b?n(b):(g=!1,b=a.getCenter(),b=b.toUrlValue().split(","),m.apply(null,b),p.apply(null,b),v=f=null)})};window.do_geocode_type_manual=
w;var H=function(a){var b=document.getElementById("map_refresh_ui_area");b&&(document.getElementById("LONGITUDE").readOnly=a,(document.getElementById("LATITUDE").readOnly=a)?$(b).hide():$(b).show())};window.entryform_maps_loaded=function(){t();var a=$("#GEOCODE_TYPE_INTERSECTION_REFRESH"),b=$("#GEOCODE_TYPE_SITE_REFRESH");$("#GEOCODE_TYPE_SITE").click(function(){a.hide();b.show();H(!0);F(n)});$("#GEOCODE_TYPE_INTERSECTION").click(function(){a.show();b.hide();H(!0);A(n)});$("#GEOCODE_TYPE_MANUAL").click(function(){w(!1)});
$("#GEOCODE_TYPE_BLANK").click(function(){$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();H(!0);k();l();g=!0;$("#geocode_no_postal_code").hide();m("","");f=v=null});b.click(function(){F(n)});a.click(function(){A(n)});var d=document.EntryForm,e=document.getElementById("map_refresh");e&&$(e).click(function(){p(Globalize.parseFloat(d.LATITUDE.value),Globalize.parseFloat(d.LONGITUDE.value))});d.SITE_STREET_NUMBER?document.getElementById("GEOCODE_TYPE_SITE").checked&&(F(C),b.show()):
(d.GEOCODE_TYPE_SITE.disabled=!0,b.hide());d.INTERSECTION?document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(A(C),a.show()):(d.GEOCODE_TYPE_INTERSECTION.disabled=!0,b.hide());H(!d.GEOCODE_TYPE_MANUAL.checked);$(d).submit(function(a){var b=null,d=null;document.getElementById("GEOCODE_TYPE_SITE").checked?(b=E(),d=pageconstants.txt_geocode_address_changed):document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(b=z(),d=pageconstants.txt_geocode_intersection_change);d&&b!=f&&!confirm(d)&&
(c.scrollIntoView(!0),document.documentElement.scrollTop-=10,a.preventDefault(),a.stopImmediatePropagation(),$("#SUBMIT_BUTTON").prop("disabled",!1))})}})();
(function(){window.init_history_dialog=function(c,a){var b=!1,d=null,e=null,g=null,f=function(a){a.fail?c("#HistoryFieldContent").html("<em>"+a.errinfo+"</em>"):a.compare?(null===d&&(d=new diff_match_patch),a=d.diff_main(a.text2,a.text1),d.diff_cleanupSemantic(a),a=d.diff_prettyHtml(a),c("#HistoryFieldContent").html(a)):c("#HistoryFieldContent").html(a.text1)},h=function(b,d,h){return function(){var d=c("#HistoryLanguage").prop("value"),k=c("#HistoryRevision").prop("value"),l=c("#HistoryCompare").prop("value");
if(l===g||!(""===g&&l===k||""===l&&g===e)){var x=l;if(""===l||l===k)x="";c.getJSON(a.fielddiff_url.replace("[ID]",h).replace("[LANG]",d).replace("[FIELD]",b).replace("[REV]",k).replace("[COMP]",x),f)}e=k;g=l}},l=null,k=function(b,d,e,f){c("select.HistorySelect").unbind("change");c("#HistoryLanguage").unbind("change");c("#field_history").html('<p class="Info">'+a.txt_loading+"</p>").dialog("close").dialog("open").dialog("option","title",a.txt_fielddifftitle+e+" ("+d+")").load(a.fielddiffui_url.replace("[ID]",
e).replace("[FIELD]",b).replace("[LANG]",f),l(b,d,e))},m=function(a,b,d){return function(){var e=c(this).prop("value");k(a,b,d,e)}},l=function(a,b,d){return function(){c("select.HistorySelect").change(h(a,b,d));c("#HistoryLanguage").change(m(a,b,d));e=c("#HistoryRevision").prop("value");g=c("#HistoryCompare").prop("value")}};c(".ShowVersions").click(function(){var d=c(this).data("ciocfield"),e=c(this).data("ciocfielddisplay"),f=c(this).data("ciocid");b||(b=!0,c.getScript(a.path_to_start+"scripts/diff_match_patch.min.js"));
k(d,e,f,"")});c(document).on("click",".FieldHistoryJump",function(a){a=c(a.currentTarget).data("fieldname");(a=document.getElementById("FIELD_"+a))&&a.scrollIntoView(!0)});c(document).on("click",".HistoryFieldsToggle",function(a){c(a.currentTarget).parent().children("ul").toggle("fast")});var p=function(){c(".HistoryFieldsToggle").parent().children("ul").hide()};c(".HistorySummary").click(function(){var b=c(this).data("cioclang"),d=c(this).data("ciocid");c("#revision_history").html("Loading...").load(a.revhistory_url.replace("[ID]",
d).replace("[LANG]",b),p).dialog("open")});c("#revision_history").dialog({autoOpen:!1,width:330,height:280,position:["right","top"],resizable:!1,dialogClass:"RevHistory"});c("#field_history").dialog({autoOpen:!1,width:620,height:280,position:["right","bottom"]});c(".RevHistory.ui-dialog").css({position:"fixed"})}})();
(function(){var c=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=c;var a=function(a,b,g,f,h){g=g||"value";f=f||"";h=h||"";return function(l,k){if(b.term&&(new RegExp(f+a.ui.autocomplete.escapeRegex(b.term)+h,"i")).test(l.term)&&b.content&&13>b.content.length){var m=new RegExp(f+a.ui.autocomplete.escapeRegex(l.term)+h,"i");k(a.grep(b.content,function(a){return m.test(c(a[g]))}));return!0}return!1}};window.default_cache_search_fn=a;var b=function(b,e,g,f,h){g=g||{};h=h||a(b,g,f||"value");
return function(a,f,m){a.term=c(a.term);g.term===a.term&&g.content?f(g.content):h(a,f)||b.ajax({url:m||e,dataType:"json",data:a,cache:!1,success:function(b){g.term=a.term;g.content=b;f(b)}})}};window.create_caching_source_fn=b;window.init_community_autocomplete=function(a,e,g,f,h){var l={};h&&(h=a(h));h&&!h.length&&(h=null);var k=a("#"+e).autocomplete({focus:function(a,b){return!1},select:function(a,b){k.data({chkid:b.item.chkid,display:b.item.value})},source:b(a,g,l),minLength:f}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),k.autocomplete("close"))});h&&(k.parents("form").on("submit",function(){var b=k.val();if(k.data("display")===b)h.val(k.data("chkid"));else{if(l.content){var e=c(b),b=a.grep(l.content,function(a){return c(a.value)===e});if(1===b.length){h.val(b[0].chkid);k.data({chkid:b[0].chkid,display:b[0].value}).val(b[0].value);return}}h.val("")}}),cache_register_onbeforerestorevalues(function(a){k.length&&(a=a["autocomplete_data_"+k[0].id])&&k.data(a)}),cache_register_onbeforeunload(function(a){if(k.length){var b=
k.data();b.display&&b.chkid&&(a["autocomplete_data_"+k[0].id]={display:b.display,chkid:b.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(a,c,e,g){cache_register_onbeforeunload(function(a){a[c+"_added"]=e});cache_register_onbeforerestorevalues(function(e){(e=e[c+"_added"])&&a.each(e,function(a,b){g(b.chkid,b.display,"")})})};window.basic_chk_add_html=function(a,c){return function(e,g){var f=a("<tr>").append(a("<td>").append(a("<input>").prop({id:c+"_ID_"+e,type:"checkbox",checked:!0,defaultChecked:!0,name:c+"_ID",value:e})).append(document.createTextNode(" "+
g))).append(a("<td>").append(a("<input>").prop({id:c+"_NOTES_"+e,name:c+"_NOTES_"+e,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));a("#"+c+"_existing_add_table").append(f);return f.find('input[type="checkbox"]')[0]}};var c={},a=function(a){$("#NEW_"+a).autocomplete(c[a])};window.init_autocomplete_checklist=function(b,d){var e=d.field;if(!c[e]){var g=d.source;d.minLength=d.minLength||1;d.delay=d.delay||300;d.add_new_html=d.add_new_html||basic_chk_add_html(b,e);d.match_prop=
d.match_prop||"value";d.txt_not_found=d.txt_not_found||"Not Found";var f=b(d.delegate_root||document),h=d.added_values||[],l=function(a,b,c){var f=document.getElementById(e+"_ID_"+a);f?(f.checked=!0,d.after_add_new_value&&d.after_add_new_value.call(f)):(h.push({chkid:a,display:b,label:c}),a=d.add_new_html(a,b,c),d.after_add_new_value&&d.after_add_new_value.call(a))};create_checklist_onbefore_fns(b,e,h,l);var k={},m=function(a){b("#NEW_"+e).data({chkid:"",display:"",label:""}).prop("value","").focus();
b("#"+e+"_error").hide("slow",function(){b(this).remove()})},p=null,n=null;(function(a){b.isArray(a)?(n=function(c,e){var f=new RegExp(b.ui.autocomplete.escapeRegex(string_ci_ai(c.term)));e(b.grep(a,function(a){return f.test(string_ci_ai(a[d.match_prop]||a))}))},p=function(c,e){var f=string_ci_ai(c),g=b.grep(a,function(a){return string_ci_ai(string_ci_ai(a[d.match_prop]||a))===f});if(1===g.length)return e(g[0]),!0;e()}):"string"===typeof a?(n=create_caching_source_fn(b,a,k,d.match_prop),p=function(a,
c,e){var f=string_ci_ai(a);if(k.content){var g=b.grep(k.content,function(a){return string_ci_ai(a[d.match_prop])===f});if(1===g.length){c(g[0]);return}}e||string_ci_ai(k.term||"")===f?c():n({term:f},function(b){p(a,c,!0)})}):(n=a,p=d.look_for_fn)})(g);f.on("click","#add_"+e,function(a){a=b("#NEW_"+e);var c=a.data("chkid"),f=a.data("display"),g=a.data("label"),h=a[0].value;if(c&&f&&f==h)return l(c,f,g),m(),!1;p(a[0].value,function(a){a?(l(a.chkid,a.value,a.label),m()):0===b("#"+e+"_error").length&&
(b("#"+e+"_new_input_table").before(b("<p>").hide().addClass("Alert").prop("id",e+"_error").append(document.createTextNode(d.txt_not_found))),b("#"+e+"_error").show("slow"))});return!1});c[e]={focus:function(a,b){return!1},source:n,minLength:d.minLength,delay:d.delay,select:function(a,c){b("#NEW_"+e).data({chkid:c.item.chkid,display:c.item.value,label:c.item.label})}};f.on("keypress","#NEW_"+e,function(a){"13"==a.keyCode&&(a.preventDefault(),b("#NEW_"+e).autocomplete("close"),b("#add_"+e).trigger("click"))})}a(e)};
window.init_languages=function(a,c){var e=null,g=null,f=a("#LN_existing_add_table"),h=function(){var c=a(this).parents(".language-entry").find(".language-details-notes");this.checked?c.slideDown():c.slideUp()};init_autocomplete_checklist(a,{field:"LN",source:entryform.languages_source,txt_not_found:c,after_add_new_value:h,add_new_html:function(c,d){null===e&&(e=a("#add_LN"),g=e.data("newTemplate"));var h=g.replace(/LANGNAMELANGNAME/g,d).replace(/IDIDID/g,c);f.append(h)}});f.on("change",".language-primary",
h).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+a(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(c,d){a(this).css(c);a("<div>").addClass("arrow").addClass(d.vertical).addClass(d.horizontal).appendTo(this)}}});window.languages_check_state=h}})();
(function(){window.only_items_chk_add_html=function(c,a,b){return function(d,e){b&&b();c("#"+a+"_existing_add_container").append(c("<label>").append(c("<input>").prop({id:a+"_ID_"+d,type:"checkbox",checked:!0,defaultChecked:!0,name:a+"_ID",value:d})).append("&nbsp;").append(document.createTextNode(e))).append(" ; ")}};window.init_check_for_autochecklist=function(c){var a=jQuery,b=function(){var b=a(this).data("jump_location");(b=document.getElementById(b))&&b.scrollIntoView(!0)},d=function(){return a("<li>").append(a("<span>").data("jump_location",
this.id).addClass("UnaddedChecklistJump SimulateLink").append(a(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},e=a("input[id^=NEW_]");e.length&&(a("#EntryForm").submit(function(b){var f=e.map(function(){return this.value?this:null}),h;if(f.length&&!b.isDefaultPrevented()){if(!confirm(c)){b.preventDefault();a("#SUBMIT_BUTTON").prop("disabled",!1);b=a("#unadded_checklist_error_box");h=a("#unadded_checklist_error_list");var l=b.is(":visible");l&&h.children("ul:first").hide("slow",
function(){a(this).remove()});var k=a("<ul>");l&&k.hide();h.append(k);a.each(f.map(d),function(){k.append(this)});l?k.show("slow"):b.show("slow")}}else b.isDefaultPrevented()&&(b=a("#unadded_checklist_error_box"),h=a("#unadded_checklist_error_list"),b.hide("slow",function(){h.children().remove()}))}),a(document).on("click",".UnaddedChecklistJump",b))}})();
(function(){window.changeAutoAssign=function(a,b,c){a.checked?(b.value="",b.disabled=!0,c.disabled=!0):(b.disabled=!1,c.disabled=!1)};var c=jQuery,a=function(a){a.find(":input").not('input[type="hidden"]').filter("[name]").addClass("require-group")},b=function(a){a.find(":input").not('input[type="hidden"]').filter("[name]").removeClass("require-group")};window.make_required_group=a;window.remove_required_group=b;var d=function(c,d){var e=c.parent().find("td[data-field-display-name]"),l=e.data("fieldDisplayName");
d?(c.text(l).append(' <span class="Alert">*</span>'),a(e)):(c.text(l),b(e))},e=function(){var a=c("#FIELD_ORG_LEVEL_2");if(a.length){var b=c("#RECORD_TYPE").find(":selected").data("progorbranch");d(a,b)}};window.update_form_make_required_org_level=function(){for(var a,b=0;6>b;b++)if(a=c("#FIELD_ORG_LEVEL_"+b),a.length){d(a,!0);break}};window.init_client_validation=function(b,d){var e=c(b),l=e.prop("lang")||e.parents("[lang]").first().prop("lang")||"en-CA",k=function(a){var b=!1;try{a.each(function(){if(this.name)if(/radio|checkbox/i.test(this.type)){if(this.checked&&
this.value)throw b=!0,{name:"StopIteration",message:"StopIteration"};}else if(c.trim(this.value))throw b=!0,{name:"StopIteration",message:"StopIteration"};})}catch(d){if("StopIteration"!==d.name)throw d;}return b},m=null;c.validator.addMethod("email",function(a,b){m||(m=RegExp("^((([A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*@[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+(\\.[A-Za-z0-9!#-'\\*\\+\\-/=\\?\\^_`\\{-~]+)*)(\\s*,*\\s*))*)$"));return this.optional(b)||
m.test(a)});var p=null;c.validator.addMethod("url",function(a,b){p||(p=/^((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/);return this.optional(b)||p.test(a)});var n=null;c.validator.addMethod("protourl",function(a,b){n||(n=/^(https?:\/\/)?((\d{1,3}(\.\d{1,3}){3})|([\w_\-]+(\.[\w\._\-]+)*)(:[0-9]+)?((\/|\?)[^\s]*)?)$/);return this.optional(b)||n.test(a)});var u=null;c.validator.addMethod("posint",function(a,b){u||(u=/^\d+$/);return this.optional(b)||u.test(a)});var s=
null;c.validator.addMethod("posdbl",function(a,b){if(!s){var c="\\.";"fr-CA"===l&&(c=",");s=new RegExp("^((\\d+)|(\\d*"+c+"\\d+))$")}return this.optional(b)||s.test(a)});var t=null;c.validator.addMethod("record-num",function(a,b){t||(t=/^[A-Z]{3}[0-9]{4,5}$/);return this.optional(b)||t.test(a)});c.validator.addMethod("unique",function(a,b,d){if(!a)return!0;a=string_ci_ai(a);b=jQuery.validator.format("[name!='{0}'][unique='{1}']",b.name,d);var e=[];c(b).each(function(b,d){a==string_ci_ai(c(d).val())&&
e.push(d)});return 0==e.length},"A unique value is required.");c.validator.addMethod("require-group",function(a,b){var d=c(b).parents("td[data-field-display-name]"),e=d.parent().children("td:first").prop("id"),e=e.slice(-(e.length-6)),f=d.find(":input").not("[type=hidden]").not("button");switch(e){case "ACCESSIBILITY":case "AREAS_SERVED":case "LANGUAGES":case "FUNDING":case "SCHOOL_ESCORT":case "SCHOOLS_IN_AREA":case "TYPE_OF_CARE":f=f.not("input:text");break;case "ALT_ORG":case "LEGAL_ORG":f=f.not("input:checkbox");
break;case "FORMER_ORG":f=f.not("input:checkbox").not("[name^=FORMER_ORG_DATE]");break;case "FEES":f=f.not("input:text").add("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM");break;case "VACANCY_INFO":f=f.filter("[name!=VUT_ID]")}(e=k(f))&&d.children("div.required-notice").hide();return e},"Field Required");var r=c('<div id="a_test"></div>').dialog({autoOpen:!1,title:d,closeOnEscape:!1,position:["right","bottom"],resizable:!1,dialogClass:"ValidationErrors"}),q=c("#validation_error_box");c(document).on("click",
".FieldErrorJump",function(a){a=c(a.currentTarget).prop("fieldname");(a=document.getElementById(a))&&a.scrollIntoView(!0)});c(".ValidationErrors.ui-dialog").css({position:"fixed"}).position({my:"right bottom",at:"right bottom",of:window});a(c(b).find("td[data-field-required]"));e=c(b).validate({ignore:"input[type=hidden]",ignoreTitle:!0,errorPlacement:function(a,b){var d=[],e=b[0],f=null;if(b.hasClass("require-group")){var f=b.parents("td[data-field-display-name]"),d=f.children("div.required-notice"),
g=!1;/radio|checkbox/i.test(e.type)?e.checked&&e.value||(g=!0):c.trim(e.value)||(g=!0);if(g){d.length?(d.empty(),d.show(),d.append(a)):(a.removeAttr("for"),f.prepend(c('<div class="required-notice"></div>').append(a)));return}}d.length&&d.hide();a.insertAfter(b)},showErrors:function(a,b){this.defaultShowErrors();if(0===b.length)r.dialog("close"),q.hide("slow");else{var d={},e=c("<ul>");jQuery.each(b,function(a,b){b=b.element;var f=c(b).parents("td[data-field-display-name]"),g=f.parent().children("td:first").prop("id");
d[g]||(d[g]=!0,e.append(c("<li>").append(c("<span>").prop({fieldname:g,className:"FieldErrorJump SimulateLink"}).text(f.data("fieldDisplayName")))))});r.empty().append(e);r.dialog("open");q.show("slow");c("#SUBMIT_BUTTON").prop("disabled",!1)}},focusInvalid:!1,onfocusout:!1,onkeyup:!1,onclick:!1});"fr-CA"===l?jQuery.extend(jQuery.validator.messages,{required:"Ce champ est requis.",remote:"Veuillez remplir ce champ pour continuer.",email:"Veuillez entrer une adresse email valide.",url:"Veuillez entrer une URL valide.",
date:"Veuillez entrer une date valide.",dateISO:"Veuillez entrer une date valide (ISO).",number:"Veuillez entrer un nombre valide.",digits:"Veuillez entrer (seulement) une valeur num\u00e9rique.",creditcard:"Veuillez entrer un num\u00e9ro de carte de cr\u00e9dit valide.",equalTo:"Veuillez entrer une nouvelle fois la m\u00eame valeur.",accept:"Veuillez entrer une valeur avec une extension valide.",maxlength:jQuery.validator.format("Veuillez ne pas entrer plus de {0} caract\u00e8res."),minlength:jQuery.validator.format("Veuillez entrer au moins {0} caract\u00e8res."),
rangelength:jQuery.validator.format("Veuillez entrer entre {0} et {1} caract\u00e8res."),range:jQuery.validator.format("Veuillez entrer une valeur entre {0} et {1}."),max:jQuery.validator.format("Veuillez entrer une valeur inf\u00e9rieure ou \u00e9gale \u00e0 {0}."),min:jQuery.validator.format("Veuillez entrer une valeur sup\u00e9rieure ou \u00e9gale \u00e0 {0}."),protourl:"Veuillez entrer une URL valide.",posint:"Veuillez entrer un nombre positif.",posdbl:"Veuillez entrer un nombre positif.","record-num":"Please enter a valid record number.",
"require-group":"Ce champ est requis.",unique:"Une valeur unique est requise."}):jQuery.extend(jQuery.validator.messages,{protourl:"Please enter a valid URL.",posint:"Please enter a positive number.",posdbl:"Please enter a positive number.","record-num":"Please enter a valid record number.","require-group":"Field Required.",unique:"A unique value is required."});return e};window.init_record_type_form=function(a,b,d){var l=null,k=null,m={},p="ORG_LEVEL_1 ORG_LEVEL_2 ORG_LEVEL_3 ORG_LEVEL_4 ORG_LEVEL_5 LOCATION_NAME SERVICE_NAME_LEVEL_1 SERVICE_NAME_LEVEL_2".split(" "),
n=function(){c("#RecordTypeName").html(k);c.each(p,function(a){var b=d[a],e=c("#"+a);e.length&&(e[0].value=b)&&(c("#"+a+"_DISPLAY").text(b),c("#HIDDEN_"+e).prop("value",b))});c("#RECORD_TYPE").prop("value",l[0].value);e()},u=function(){var d=l[0].value;l.data("hasform")||(d=null);l=c(this).find("option:selected");var h=l[0].value;l.data("hasform")||(h=null);h!==d?(m[d]=c("#copyFieldsForm").contents().detach(),m[h]?(c("#copyFieldsForm").append(m[h]),c("#RECORD_TYPE").prop("value",l[0].value)):c("#copyFieldsForm").load(b+
" #copyFieldsInner",{NUM:a,RT:h||l[0].value},n)):e()};jQuery(function(){k=c("#RecordTypeName").html();var a=c("#RECORD_TYPE");c(document).on("change","#RECORD_TYPE",u);l=a.find("option:selected");e()})};window.init_validate_duplicate_org_names=function(a){var b=c.extend({selector:"#EntryForm",fields:"#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5,#LOCATION_NAME,#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2,#OLS_SELECT input,#ORG_NUM",only_warn:!0,num:null,org_levels:[],url:null},a),
d=[],e=null!==b.num,k=[],m=c(b.selector).submit(function(a){var g,u,s=!1,t=c(b.fields).serializeArray();b.num&&t.push({name:"NUM",value:b.num});if(t.length!==d.length)s=!0;else for(g=0;g<t.length;g++)if(u=t[g],u.name!==d[g].name||u.value!==d[g].value){s=!0;break}if(!s&&e)return!0;var r=function(){b.only_warn&&confirm(b.confirm_string)?(e=!0,c("#duplicate_name_error_box").hide(),m.submit()):(c("#SUBMIT_BUTTON").prop("disabled",!1),c("#duplicate_name_error_box").show())};a.stopPropagation();a.preventDefault();
if(!s)return r(),!1;c.ajax({url:b.url,dataType:"json",method:"get",data:t,success:function(a){e=!0;k=[];for(var b=0;b<a.length;b++)e&=0===a[b].count,0!==a[b].count&&k.push(a[b].type);d=t;e?(c("#duplicate_name_error_box").hide(),m.submit()):r()}});return!1})}})();
(function(){var c=jQuery;window.configure_entry_form_button=function(){c("#SUBMIT_BUTTON").click(function(a){a=c("#SUBMIT_BUTTON");a.prop("disabled")||(a.prop("disabled",!0),setTimeout(function(){c("#EntryForm").submit()},1))});c(document).bind("keydown",function(a){if(a.ctrlKey&&"s"===String.fromCharCode(a.which).toLowerCase())return setTimeout(function(){c("#SUBMIT_BUTTON").click()},1),a.preventDefault(),a.stopPropagation(),!1});c("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var a=c("#SUBMIT_BUTTON").prop("value");c("#SUBMIT_BUTTON").replaceWith(c('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",a));c("#EntryForm").submit(function(){var a=validateForm();!1===a&&c("#SUBMIT_BUTTON").prop("disabled",!1);return a})}})();
(function(){window.init_entryform_notes=function(c,a,b){var d=jQuery;c.each(function(){var c=this,g=d(c),f=g.parent(),h=1,l=g.find(".EntryFormNotesUpdateIds")[0];if(l){var k=g.find(".EntryFormNotesDeleteIds")[0],m=g.find(".EntryFormNotesCancelIds")[0],p=g.find(".EntryFormNotesRestoreIds")[0],n=[],u=[],s=[],t={},r=[],q=function(a,b){n.push(a.id);l.value=n.join(",");var c=g.find(".EntryFormItemBox").length+1;template=g.data("addTmpl");new_item=d(template.replace(/\[COUNT\]/g,c).replace(/\[ID\]/g,a.id).replace(/\[MODIFIED_DATE\]/g,
a.modified_date||"").replace(/\[MODIFIED_BY\]/g,a.modified_by||"").replace(/\[CREATED_DATE\]/g,a.created_date||"").replace(/\[CREATED_BY\]/g,a.created_by||"").replace(/\[NOTE_VALUE\]/g,a.note_value||""));a.note_type&&new_item.find("option[value='"+a.note_type+"']").prop("selected",!0);a.created_date&&new_item.find("tr.CreatedField").show();!a.modified_date||a.modified_date===a.created_date&&a.modified_by===a.created_by||new_item.find("tr.ModifiedField").show();b&&new_item.find(".NewFlag").show();
g.append(new_item)};f.find(".EntryFormItemAdd").click(function(){var a="NEW"+h++;q({id:a},!0)});var x=function(a){var b=a.id.split("_");a=d(a);var c=a.parents(".EntryFormNotesItem");c.find(".EntryFormItemContent").css("text-decoration","line-through");u.push(b[b.length-2]);k.value=u.join(",");c.data("actionToRestore","delete");a.parent().hide().prev().show()},E=function(a,b){var c=a.id.split("_"),e=d(a),f=e.parents(".EntryFormNotesItem"),h=f.find(".EntryFormItemContent"),k=a.id.lastIndexOf("_"),k=
a.id.substring(0,k)+"_CANCEL_REASON",c=c[c.length-2];h.prepend(b.data("cancelTemplate"));s.push(c);m.value=s.join(",");t[c]=b.data("cancelType");g.append(d("<input>").prop({type:"hidden",id:k,name:k,value:b.data("cancelType")}));f.data("actionToRestore","cancel");e.parent().hide().prev().show()},z={update:function(a){a=d(a).parents(".EntryFormNotesItem");var b=a.find(".EntryFormItemContent");q(b.data("formValues"));a.hide()},"delete":x,cancel:E},v=f.find(".EntryFormItemActionMenu").menu({select:function(a,
b){d(this).hide();z[b.item.data("action")](v.data("activeButton"),b.item)}}).hide().css({position:"absolute",zIndex:1});f.on("click",".EntryFormItemAction",function(a){v.data("activeButton",this);if(v.is(":visible"))return v.hide(),!1;v.menu("blur").show();v.position({my:"right top",at:"right bottom",of:this});d(document).one("click",function(){v.hide()});return!1});f.find(".EntryFormItemViewHidden").click(function(c){c=d(this);var e=c.next();e.is(":visible")?(c.text(a),e.hide()):(c.text(b),e.show())});
var B={"delete":function(a,b,c,e){e.css("text-decoration","none");u=d.grep(u,function(b){return b!==a});k.value=u.join(",");b.parent().hide().next().show()},cancel:function(a,b,c,e){c=b[0];var f=c.id.lastIndexOf("_");c=c.id.substring(0,f)+"_CANCEL_REASON";e.find(".EntryFormItemCancelledDetails").remove();s=d.grep(s,function(b){return b!==a});m.value=s.join(",");delete t[a];d("#"+c).remove();b.parent().hide().next().show()}};f.on("click",".EntryFormItemRestoreAction",function(a){a=this.id.split("_");
var b=d(this),c=b.parents(".EntryFormNotesItem"),e=c.find(".EntryFormItemContent");B[c.data("actionToRestore")](a[a.length-2],b,c,e)});var F=function(a){a=this.id.split("_");var b=d(this);b.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","line-through");b.parent().hide().prev().show();r.push(a[a.length-2]);p.value=r.join(",")};f.on("click",".EntryFormItemRestoreCancel",F);f.on("click",".EntryFormItemDontRestoreCancel",function(a){var b=this.id.split("_");
a=d(this);a.parents(".EntryFormNotesItem").find(".EntryFormItemCancelledDetails").css("text-decoration","none");a.parent().hide().next().show();b=b[b.length-2];r=d.grep(r,function(a){return a!==b});p.value=r.join(",")});cache_register_onbeforeunload(function(a){a[c.id+"_updates"]=n;a[c.id+"_deletes"]=u;a[c.id+"_restores"]=r;a[c.id+"_cancels"]=s;a[c.id+"_cancel_reason"]=t});cache_register_onbeforerestorevalues(function(a){var b=c.id.substring(0,c.id.lastIndexOf("_"))+"_";a[c.id+"_updates"]&&d.each(a[c.id+
"_updates"],function(a,c){if(0===c.indexOf("NEW"))h++,q({id:c},!0);else{var e=d("#"+b+c+"_DISPLAY");q(e.data("formValues"));d("#"+b+c+"_CONTAINER").hide()}});a[c.id+"_deletes"]&&d.each(a[c.id+"_deletes"],function(a,c){x(document.getElementById(b+c+"_ACTION"))});a[c.id+"_restores"]&&(d.each(a[c.id+"_restores"],function(a,c){F.call(document.getElementById(b+c+"_RESTORECANCEL"))}),f.find(".EntryFormItemViewHidden").click());if(a[c.id+"_cancels"]){var g=a[c.id+"_cancel_reason"];d.each(a[c.id+"_cancels"],
function(a,c){E(document.getElementById(b+c+"_ACTION"),v.find("li[data-cancel-type='"+g[c]+"']"))})}})}})}})();
(function(){function c(a,b,c){var e=b.pop(),g=c.shift(),f=create_caching_source_fn(a,entryform.org_level_complete_url,g,null,default_cache_search_fn(a,g,null,"^"));a(e).autocomplete({focus:function(){return!1},source:function(a,c){var d;for(d=0;d<b.length;d++){if(!b[d].value||g[b[d].name]&&g[b[d].name].value&&b[d].value!==g[b[d].name]){delete g.term;delete g.content;for(var e=0;e<b.length;e++)delete g[b[d].name];if(!b[d].value){c([]);return}}a[b[d].name]=b[d].value}f(a,function(a){for(d=0;d<b.length;d++)g[b[d].name]=
b[d].value;c(a)})},minLength:1===e.id.slice(-1)?5:3}).keypress(function(b){13===b.keyCode&&(b.preventDefault(),a(e).autocomplete("close"))})}window.init_entryform_items=function(a,b,c){var e=jQuery;a.each(function(){var a=null,f=this,h=e(f),l=1,k=h.find(".EntryFormItemContainerIds")[0];if(k){var m=h.data("maxAdd");m&&(m=parseInt(m,10));var p=[];k.value&&(p=e.map(k.value.split(","),function(a){return 0===a.indexOf("NEW")?null:a}));var n={},u=function(){h.find(".EntryFormItemBox").each(function(a){e(this).find(".EntryFormItemCount").text(a+
1)})},s=function(a){if(m){var b=h.find(".EntryFormItemContent:hidden").parent().find("button.EntryFormItemDelete").prop("disabled",!a);q.prop("disabled",!a);a?(b.removeClass("ui-state-disabled"),q.removeClass("ui-state-disabled")):(b.addClass("ui-state-disabled"),q.addClass("ui-state-disabled"))}},t=function(){var a=0,b;for(b in n)a++;return p.length-a},r=function(b){var c=0;if(m&&!b&&(c=t(),c>=m)){alert("over");return}var d=h.data("addTmpl");p.push("NEW"+l++);k.value=p.join(",");d=e(d.replace(/\[COUNT\]/g,
p.length).replace(/\[ID\]/g,p[p.length-1]));d.find(".DatePicker").autodatepicker();d.find(".Province").combobox({source:window.cioc_province_source});entryform.service_titles&&d.find(".ServiceTitleField").combobox({source:entryform.service_titles});h.append(d);a&&(a.sortable("refresh"),u());m&&!b&&c+1===m&&s(!1)},q=h.parent().find(".EntryFormItemAdd").click(function(){r(!1)});h.on("click","button.EntryFormItemDelete",function(){var a=this,f=e(this).parents(".EntryFormItemBox").find(".EntryFormItemContent"),
g=this.id.split("_"),g=g[g.length-2];if(f.is(":visible"))f.hide("slow",function(){n[g]=get_form_values(f);e(a).text(c);f.find("input,select,textarea").each(function(){"input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?e(this).find("option").each(function(){this.selected=!1}):this.value="":this.checked=!1});s(!0)});else{var h=0;if(m&&(h=t(),h>=m)){alert("over");return}var k=n[g];k&&(delete n[g],restore_form_values(f,k),f.show("slow",
function(){e(a).text(b)}),m&&h+1===m&&s(!1))}});h.hasClass("sortable")&&(a=h.sortable({items:".EntryFormItemBox"}),a.bind("sortstart",function(a,b){b.helper.bgiframe();h.addClass("sorting")}),a.bind("sortstop",function(){var b=a.sortable("toArray");p=e.map(b,function(a){a=a.split("_");return a[a.length-2]});k.value=p.join(",");setTimeout(function(){h.removeClass("sorting");u()},1)}));cache_register_onbeforeunload(function(b){b[f.id+"_ids"]=p;b[f.id+"_deletes"]=n;a&&(b[f.id+"_order"]=a.sortable("toArray"))});
cache_register_onbeforerestorevalues(function(b){b[f.id+"_ids"]&&e.each(b[f.id+"_ids"],function(a,b){0===b.indexOf("NEW")&&r(!0)});b[f.id+"_deletes"]&&(n=b[f.id+"_deletes"],h.find(".EntryFormItemContent").each(function(){var a=this.id.split("_"),a=a[a.length-2];n[a]&&e(this).hide().parent().find("button.EntryFormItemDelete").text(c)}));m&&t()>=m&&s(!1);a&&(b=b[f.id+"_order"])&&(b.reverse(),e.each(b,function(a,b){e("#"+b).detach().prependTo(h)}),a.sortable("refresh"),u())})}})};window.init_orglevels=
function(a){var b=a.makeArray(a("#ORG_LEVEL_1, #ORG_LEVEL_2, #ORG_LEVEL_3, #ORG_LEVEL_4")),d=[],e;for(e=0;e<b.length;e++)d.push({});for(e=0;e<b.length;e++){if(b[e].name!=="ORG_LEVEL_"+(e+1))return;c(a,a.makeArray(b).slice(0,e+1),a.makeArray(d).slice(e))}b=a.makeArray(a("#ORG_LEVEL_1, #ORG_LEVEL_2, #ORG_LEVEL_3, #ORG_LEVEL_4, #ORG_LEVEL_5, #ORG_NUM, #NUM, #SERVICE_NAME_LEVEL_1"));d=[{}];b.length&&"SERVICE_NAME_LEVEL_1"===b[b.length-1].name&&c(a,b,d)};window.init_areas_served=function(a,b){var c=basic_chk_add_html(a,
"CM");init_autocomplete_checklist(a,{field:"CM",source:entryform.community_complete_url,minLength:3,txt_not_found:b,add_new_html:function(a,b,f){return c(a,f)}})};window.init_inarea_schools=function(a,b){init_autocomplete_checklist(a,{field:"INAREA_SCH",source:entryform.sch_source,txt_not_found:b})};window.init_escort_schools=function(a,b){init_autocomplete_checklist(a,{field:"ESCORT_SCH",source:entryform.sch_source,txt_not_found:b})};window.init_distribution=function(a,b){init_autocomplete_checklist(a,
{field:"DST",source:entryform.dst_complete_url,add_new_html:only_items_chk_add_html(a,"DST"),match_prop:"label",txt_not_found:b})};window.init_busroutes=function(a){var b=[],c=function(c,d){var e=a("#BR_ID_"+c);e.length?e[0].checked=!0:(b.push({chkid:c,display:d}),a("#BR_existing_add_table").append(a("<tr>").append(a("<td>").append(a("<input>").prop({id:"BR_ID_"+c,type:"checkbox",checked:!0,defaultChecked:!0,name:"BR_ID",value:c})).append(document.createTextNode(" "+d)))))},e=a("#NEW_BR");a("#add_BR").click(function(){var a=
e[0].value,b=e.children("[value="+a+"]").text();c(a,b)});create_checklist_onbefore_fns(a,"BR",b,c)};window.init_subjects=function(a,b){init_autocomplete_checklist(a,{field:"Subj",source:entryform.subj_complete_url,add_new_html:only_items_chk_add_html(a,"Subj",function(){a("#Subj_existing_add_title").removeClass("NotVisible")}),txt_not_found:b})};window.init_fees=function(a){var b=a("#FEE_ASSISTANCE_FOR, #FEE_ASSISTANCE_FROM"),c=function(){b.prop("disabled",!a(this).prop("checked"))};a("#FEE_ASSISTANCE_AVAILABLE").click(c).each(c)};
window.init_org_num=function(a){a("#FIELD_ORG_NUM").next().on("click",".suggested-num",function(){a("#ORG_NUM").val(this.value).trigger("change");return!1})};window.init_locations_services=function(a,b){var c=function(c,d,f){var h='<li><label><input type="checkbox" name="[FIELD]" value="[VALUE]" id="[FIELD]_[VALUE]" checked> [VALUE]</label></li>'.replace(/\[FIELD\]/g,d),l=c.siblings(".locations-services-new-container"),k=l.find(".locations-services-new"),m=l.find(".locations-services-add"),p=c.siblings(".locations-services-list-suggestions"),
n=a(f);f=function(a){a[d+"_STATE"]=c.html()};var u=function(a){(a=a[d+"_STATE"])&&c.html(a)},s=function(b){var f=a("#"+d+"_"+b);f.length?f[0].checked=!0:(b=h.replace(/\[VALUE\]/g,b),c.append(a(b)))};c.length&&(cache_register_onbeforeunload(f),cache_register_onbeforerestorevalues(u));l.on("click",".locations-services-add",function(){var d=a.trim(k[0].value);if(d){if(!/^[A-Z]{3}[0-9]{4,5}$/.test(d))return c.siblings(".locations-services-error").length||a("<p>").hide().addClass("Alert").addClass("locations-services-error").append(document.createTextNode(b)).insertBefore(l).show("slow"),
!1;s(d);c.siblings(".locations-services-error").hide("slow",function(){a(this).remove()});k[0].value=""}return!1}).on("keypress",".locations-services-new",function(a){13===a.keyCode&&(a.preventDefault(),m.trigger("click"))});p.on("click",".locations-services-suggestion",function(a){a.preventDefault();s(this.value);return!1});if(n.length){var t=c.parents("tr").first(),r=function(){var b=a(this),c;this.checked?(t.show(),b.data("maybeRequired")&&(b.is(".ols-type-TOPIC,.ols-type-SERVICE")?(c=b.is(".ols-type-TOPIC")?
a(".ols-type-SERVICE"):a(".ols-type-TOPIC"),c.prop("checked")?(c.prop("disabled")&&(c.prop("disabled",!1),a("#OLS_ID_"+c.prop("value")+"_forceon").remove()),this.disabled&&(this.disabled=!1,a("#OLS_ID_"+this.value+"_forceon").remove())):this.disabled||(this.disabled=!0,b.parent().after(a('<input type="hidden" name="OLS_ID" id="OLS_ID_'+this.value+'_forceon" value="'+this.value+'">')))):this.disabled||(this.disabled=!0,b.parent().after(a('<input type="hidden" name="OLS_ID" id="OLS_ID_'+this.value+
'_forceon" value="'+this.value+'">'))))):(b.is(".ols-type-SITE")?t.hide():a(b.is(".ols-type-SERVICE")?".ols-type-TOPIC":".ols-type-SERVICE").prop("checked")||t.hide(),b.data("maybeRequired")&&b.is(".ols-type-TOPIC,.ols-type-SERVICE")&&(this.disabled=!1,c=b.is(".ols-type-TOPIC")?a(".ols-type-SERVICE"):a(".ols-type-TOPIC"),c.prop("checked")?(b=c.prop("value"),c.prop("disabled")||(c.prop("disabled","true"),c.parent().after(a('<input type="hidden" name="OLS_ID" id="OLS_ID_'+b+'_forceon" value="'+b+'">')))):
a("#ols-type-SERVICE-warning").show()))};n.click(r);setTimeout(function(){n.each(function(a,b){r.call(b)})},1)}};a(".locations-services-list").each(function(){var b=a(this),g=b.data("fieldName"),f=b.data("needsOlsType");c(b,g,f)})};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var c=this.length>>>0;b=+b||0;Infinity===Math.abs(b)&&(b=0);0>b&&(b+=c,0>b&&(b=0));for(;b<c;b++)if(this[b]===a)return b;return-1});
window.init_name_editable_toggle=function(a){var b=$("#ORG_NUM"),c=$("#DISPLAY_ORG_NAME"),e=function(){if(b.length&&!b.val()||!b.length&&!a.org_num)return c.prop("disabled",!0),!1;c.prop("disabled",!1);return c.length&&c.prop("checked")||!c.length&&a.display_org_name},g=function(b){return function(c){c=c.not("#DISPLAY_ORG_NAME");var d=c.filter(":checked");c.length||(d=$.map(b,function(b){return a[b]?b:null}));if(!d.length)return!0;if(c.length){if(d.is(":not(.ols-type-TOPIC)"))return!1}else if($.map(d,
function(a){return"TOPIC"===a?null:a}).length)return!1;return!e()}},f=function(){var a=!0;return function(b,c){a&&(c.each(function(){var a=$(this);a.data("was_required",a.hasClass("require-group"))}),a=!1);c.each(function(){var a=$(this);a.data("was_required")&&(a=a.parents("td[data-field-display-name]"),b?remove_required_group(a):make_required_group(a))})}},h=function(a,b,c,d){var e;a=$(a);b=$(b);e=function(){var e=c(a);b.prop("disabled",e);d&&d(e,b)};a.on("click keyup change",e);e()};h("#DISPLAY_ORG_NAME,#ORG_NUM",
"#ORG_LEVEL_1,#ORG_LEVEL_2,#ORG_LEVEL_3,#ORG_LEVEL_4,#ORG_LEVEL_5",e);h(".ols-type-SITE","#LOCATION_NAME",g(["SITE"]),f());h(".ols-type-SERVICE,.ols-type-TOPIC,#DISPLAY_ORG_NAME","#SERVICE_NAME_LEVEL_1,#SERVICE_NAME_LEVEL_2",g(["SERVICE","TOPIC"]),f())}})();jQuery(function(c){var a="AB BC MB NB NL NS NT NU ON PE QC SK YT".split(" ");c(".Province").combobox({source:a});window.cioc_province_source=a});
