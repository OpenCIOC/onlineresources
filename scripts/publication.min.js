window.CIOC={};
(function(a,c){c.do_drop_down_navigation=function(){for(var g=a.getElementById("ActionList").options,b=0;b<g.length;b++)if(g[b].selected){var d=g[b].getAttribute("href");d&&("undefined"!=typeof g[b].attributes.newwindow?c.open(d):c.location.href=d);break}};jQuery(function(g){g("[data-toggle=dialog]").each(function(){var b=g(this),d=g(b.data("target")),k={autoOpen:!1,title:d.data("title"),modal:d.data("modal")};d.dialog(k);b.click(function(){d.dialog("isOpen")?d.dialog("close"):d.dialog("open")})})})})(document,window);
function CheckAll(a,c){a||="IDList";var g=c;c||(g=document.RecordList);c=g.elements.length;for(var b=0;b<c;b++){var d=g.elements[b];d.name===a&&(d.checked=!0)}}function ClearAll(a,c){a||="IDList";var g=c;c||(g=document.RecordList);c=g.elements.length;for(var b=0;b<c;b++){var d=g.elements[b];d.name===a&&(d.checked=!1)}}function add_class(a,c){a&&!(new RegExp("\\b"+c+"\\b")).test(a.className)&&(a.className&&(c=" "+c),a.className+=c)}
function remove_class(a,c){if(a){for(var g=a.className.split(" "),b=[],d=0;d<g.length;d++){var k=g[d];k!==c&&b.push(k)}a.className=b.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,c){window.open(a,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,c){window.open(a,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,c){window.open(a,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var c={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var g=a(this).data("popargs");(c[g.size||"sm"]||openWin)(this.href,g.name||"popwin");return!1})});
(function(){var a=jQuery,c={},g=function(f){null!==f&&"undefined"!==typeof f?a("#myListCount").text(f):(f=a("#myListCount").text())&&(f=parseInt(f,10));f?c.myListLink.show():c.myListLink.hide()},b=function(f){a.each(f,function(q,r){a("#added_to_list_"+r).show();a("#add_to_list_"+r).hide()})},d=function(f){return function(q){q.fail?alert(q.errinfo):(q.ids?g(a.grep(q.ids,e[c.domain]).length):q.count?g(q.count):g(0),b([f]))}},k=function(f){f=a(f.currentTarget).data("id");a.ajax({success:d(f),dataType:"json",
error:function(){alert("Error")},data:{id:f},type:"POST",url:c.current_list_url})},t=function(f){return function(q){if(q.fail)alert(q.errinfo);else{q=!0;if(f){var r=a("#results_table #remove_from_list_"+f);r.length?r.parent().parent().remove():(q=!1,r=a("#results_container #remove_from_list_"+f),r.parents(".dlist-result").remove())}(q?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&f||(a("#records_ui").hide(),a("#no_records_message").show())}}},l=function(f){f=
a(f.currentTarget).data("id");a.ajax({success:t(f),dataType:"json",error:function(){alert("Error")},data:{ID:f,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},p=function(f){a.ajax({success:t(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},e={CIC:function(f){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(f)},VOL:function(f){return/^[1-9][0-9]*$/.test(f)}},h=function(f){if(f.fail)n();else if(f.inrequest){var q=a.grep(f.ids,
e[c.domain]);b(q);g(q.length);(f=f.previous_ids)&&a.each(f,function(r,u){a("#ct_added_to_previous_request_"+u).show()});a(".ListUI img").prop("src",function(r,u){return u.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();c.current_list_url=c.ct_update_url;m()}else n()},n=function(){var f=function(){c.list_view_mode||b(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;g((c.already_added||[]).length);
m()};c.list_view_mode||c.has_session?f():a.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(q){q.has_session&&f()}})},m=function(){a(".HideListUI").delegate(".add_to_list","click",k).delegate(".remove_from_list","click",l).removeClass("HideListUI");a("#remove_all_from_list").click(p);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(f){c=f;c.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
f.in_request?a.ajax({success:h,dataType:"json",error:null,type:"POST",url:f.in_request}):n()}})();this.JSON||(this.JSON={});
(function(){function a(e){return 10>e?"0"+e:e}function c(e){d.lastIndex=0;return d.test(e)?'"'+e.replace(d,function(h){var n=l[h];return"string"===typeof n?n:"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function g(e,h){var n=k,m=h[e];m&&"object"===typeof m&&"function"===typeof m.toJSON&&(m=m.toJSON(e));"function"===typeof p&&(m=p.call(h,e,m));switch(typeof m){case "string":return c(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);
case "object":if(!m)return"null";k+=t;var f=[];if("[object Array]"===Object.prototype.toString.apply(m)){var q=m.length;for(e=0;e<q;e+=1)f[e]=g(e,m)||"null";h=0===f.length?"[]":k?"[\n"+k+f.join(",\n"+k)+"\n"+n+"]":"["+f.join(",")+"]";k=n;return h}if(p&&"object"===typeof p)for(q=p.length,e=0;e<q;e+=1){var r=p[e];"string"===typeof r&&(h=g(r,m))&&f.push(c(r)+(k?": ":":")+h)}else for(r in m)Object.hasOwnProperty.call(m,r)&&(h=g(r,m))&&f.push(c(r)+(k?": ":":")+h);h=0===f.length?"{}":k?"{\n"+k+f.join(",\n"+
k)+"\n"+n+"}":"{"+f.join(",")+"}";k=n;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,t,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(e,h,n){var m;t=k="";if("number"===typeof n)for(m=0;m<n;m+=1)t+=" ";else"string"===typeof n&&(t=n);if((p=h)&&"function"!==typeof h&&("object"!==typeof h||"number"!==typeof h.length))throw Error("JSON.stringify");return g("",{"":e})});
"function"!==typeof JSON.parse&&(JSON.parse=function(e,h){function n(m,f){var q,r=m[f];if(r&&"object"===typeof r)for(q in r)if(Object.hasOwnProperty.call(r,q)){var u=n(r,q);void 0!==u?r[q]=u:delete r[q]}return h.call(m,f,r)}e=String(e);b.lastIndex=0;b.test(e)&&(e=e.replace(b,function(m){return"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+e+")"),"function"===typeof h?n({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var c={};jQuery(a).find("input,select,textarea").each(function(g){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var b=c[this.name];$(this).find("option").each(function(d){this.selected&&b.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(a,c){var g=jQuery;g(a).find("input,select,textarea").each(function(b){if(this.name){var d=
c[this.name];"undefined"!=typeof d&&null!==d&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?g(this).find("option").each(function(k){this.selected=1<d.length?0<=g.inArray(this.value,d):0===d.length?!1:this.value===d[0]}):this.value=d.length?d[0]:"":this.checked=1<d.length?0<=g.inArray(this.value,d):0===d.length?!1:this.value===d[0])}})};window.init_cached_state=function(a){var c=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];var g=function(){var b=document.getElementById("cache_form_values");if(b){var d={form_values:get_form_values(a)};c.each(onbeforeunload_fns,function(k,t){t(d)});b.value=JSON.stringify(d)}};document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&g()});document.addEventListener("freeze",g);window.addEventListener("pagehide",g);window.cache_register_onbeforeunload=function(b){onbeforeunload_fns.push(b)};window.cache_register_onbeforerestorevalues=
function(b){onbeforerestorevalues_fns.push(b)};window.restore_cached_state=function(){c(window).on("pageshow",function(b){if(!b.originalEvent.persisted&&(b=document.getElementById("cache_form_values"))&&b.value){var d=JSON.parse(b.value);c.each(onbeforerestorevalues_fns,function(k,t){t(d)});restore_form_values(a,d.form_values)}})}}})();
(function(){var a=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},g={"en-CA":!0,"":!0},b={},d={"fr-CA":"fr","es-MX":"es"},k=function(){var l=a(this),p=l.data("culture"),e=c[p]||a.datepicker.regional[p].dateFormat,h={};l.hasClass("NoYear")&&(e=e.replace(/[\- .\/]*yy[\/]?/,""),h={beforeShow:function(n,
m){m.dpDiv.addClass("NoYearDatePicker")},onClose:function(n,m){m.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});h.dateFormat=e;l.datepicker(a.extend({},a.datepicker.regional[p],h)).prop("autocomplete","off")},t=function(l){a.getScript("https://ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+l+".min.js",function(){g[l]=!0;a.each(b[l],function(){k.call(this)});delete b[l]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var l=
a(this);var p=l.parents("[lang]").first().prop("lang")||"en-CA";p=d[p]||p;l.data("culture",p);g[p]?k.call(this):(l=b[p],l||(l=b[p]=[],t(p)),l.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
(function(){var a=function(b){b=b.toLowerCase();b=b.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");b=b.replace(RegExp("\u00e6","g"),"ae");b=b.replace(RegExp("\u00e7","g"),"c");b=b.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");b=b.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");b=b.replace(RegExp("\u00f1","g"),"n");b=b.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");b=b.replace(RegExp("\u009c","g"),"oe");b=b.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return b=b.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;window.slugify=function(b){b=a(b);b=b.replace(/-/g," ").replace(/[^a-z0-9\s]/g,"");b=b.trim();return b.replace(/\s+/g,"-")};var c=function(b,d,k,t,l){k=k||"value";t=t||"";l=l||"";return function(p,e){if(d.term&&(new RegExp(t+b.ui.autocomplete.escapeRegex(d.term)+l,"i")).test(p.term)&&d.content&&13>d.content.length){var h=new RegExp(t+b.ui.autocomplete.escapeRegex(p.term)+l,"i");e(b.grep(d.content,function(n){return h.test(a(n[k]))}));
return!0}return!1}};window.default_cache_search_fn=c;var g=function(b,d,k,t,l){k=k||{};l=l||c(b,k,t||"value");return function(p,e,h){p.term=a(p.term);k.term===p.term&&k.content?e(k.content):l(p,e)||b.ajax({url:h||d,dataType:"json",data:p,cache:!1,success:function(n){k.term=p.term;k.content=n;e(n)}})}};window.create_caching_source_fn=g;window.init_community_autocomplete=function(b,d,k,t,l){var p={};l&&=b(l);l&&!l.length&&(l=null);var e=b("#"+d).autocomplete({focus:function(h,n){return!1},select:function(h,
n){e.data({chkid:n.item.chkid,display:n.item.value})},source:g(b,k,p),minLength:t}).keypress(function(h){"13"==h.keyCode&&(h.preventDefault(),e.autocomplete("close"))});l&&(e.parents("form").on("submit",function(){var h=e.val();if(e.data("display")===h)l.val(e.data("chkid"));else{if(p.content){var n=a(h);h=b.grep(p.content,function(m){return a(m.value)===n});if(1===h.length){l.val(h[0].chkid);e.data({chkid:h[0].chkid,display:h[0].value}).val(h[0].value);return}}l.val("")}}),cache_register_onbeforerestorevalues(function(h){e.length&&
(h=h["autocomplete_data_"+e[0].id])&&e.data(h)}),cache_register_onbeforeunload(function(h){if(e.length){var n=e.data();n.display&&n.chkid&&(h["autocomplete_data_"+e[0].id]={display:n.display,chkid:n.chkid})}}))}})();
(function(a){window.init_general_heading_icons=function(c,g){g=g||a("#generalheading_IconNameFull");g.autocomplete({focus:function(b,d){return!1},source:create_caching_source_fn(a,c),minLength:3}).keypress(function(b){"13"==b.keyCode&&(b.preventDefault(),g.autocomplete("close"))});g.data("autocomplete")._renderItem=function(b,d){return a("<li></li>").data("item.autocomplete",d).append(a("<a></a>").text(d.label+" ").append(a(" <span></span>").addClass(d.label+" "+d.class_extra))).appendTo(b)}}})(jQuery);
