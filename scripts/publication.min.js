window.CIOC={};
(function(a,c){c.do_drop_down_navigation=function(){for(var d=a.getElementById("ActionList").options,b=0;b<d.length;b++)if(d[b].selected){var f=d[b].getAttribute("href");f&&("undefined"!=typeof d[b].attributes.newwindow?c.open(f):c.location.href=f);break}};jQuery(function(d){d("[data-toggle=dialog]").each(function(){var b=d(this),f=d(b.data("target")),k={autoOpen:!1,title:f.data("title"),modal:f.data("modal")};f.dialog(k);b.click(function(){f.dialog("isOpen")?f.dialog("close"):f.dialog("open")})})})})(document,window);
function CheckAll(a,c){a||="IDList";var d=c;c||(d=document.RecordList);c=d.elements.length;for(var b=0;b<c;b++){var f=d.elements[b];f.name===a&&(f.checked=!0)}}function ClearAll(a,c){a||="IDList";var d=c;c||(d=document.RecordList);c=d.elements.length;for(var b=0;b<c;b++){var f=d.elements[b];f.name===a&&(f.checked=!1)}}function add_class(a,c){a&&!(new RegExp("\\b"+c+"\\b")).test(a.className)&&(a.className&&(c=" "+c),a.className+=c)}
function remove_class(a,c){if(a){for(var d=a.className.split(" "),b=[],f=0;f<d.length;f++){var k=d[f];k!==c&&b.push(k)}a.className=b.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,c){window.open(a,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,c){window.open(a,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,c){window.open(a,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var c={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var d=a(this).data("popargs");(c[d.size||"sm"]||openWin)(this.href,d.name||"popwin");return!1})});
(function(){var a=jQuery,c={},d=function(g){null!==g&&"undefined"!==typeof g?a("#myListCount").text(g):(g=a("#myListCount").text())&&(g=parseInt(g,10));g?c.myListLink.show():c.myListLink.hide()},b=function(g){a.each(g,function(q,r){a("#added_to_list_"+r).show();a("#add_to_list_"+r).hide()})},f=function(g){return function(q){q.fail?alert(q.errinfo):(q.ids?d(a.grep(q.ids,e[c.domain]).length):q.count?d(q.count):d(0),b([g]))}},k=function(g){g=a(g.currentTarget).data("id");a.ajax({success:f(g),dataType:"json",
error:function(){alert("Error")},data:{id:g},type:"POST",url:c.current_list_url})},t=function(g){return function(q){if(q.fail)alert(q.errinfo);else{q=!0;if(g){var r=a("#results_table #remove_from_list_"+g);r.length?r.parent().parent().remove():(q=!1,r=a("#results_container #remove_from_list_"+g),r.parents(".dlist-result").remove())}(q?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&g||(a("#records_ui").hide(),a("#no_records_message").show())}}},l=function(g){g=
a(g.currentTarget).data("id");a.ajax({success:t(g),dataType:"json",error:function(){alert("Error")},data:{ID:g,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},p=function(g){a.ajax({success:t(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},e={CIC:function(g){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(g)},VOL:function(g){return/^[1-9][0-9]*$/.test(g)}},h=function(g){if(g.fail)n();else if(g.inrequest){var q=a.grep(g.ids,
e[c.domain]);b(q);d(q.length);(g=g.previous_ids)&&a.each(g,function(r,u){a("#ct_added_to_previous_request_"+u).show()});a(".ListUI img").prop("src",function(r,u){return u.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();c.current_list_url=c.ct_update_url;m()}else n()},n=function(){var g=function(){c.list_view_mode||b(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;d((c.already_added||[]).length);
m()};c.list_view_mode||c.has_session?g():a.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(q){q.has_session&&g()}})},m=function(){a(".HideListUI").delegate(".add_to_list","click",k).delegate(".remove_from_list","click",l).removeClass("HideListUI");a("#remove_all_from_list").click(p);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(g){c=g;c.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
g.in_request?a.ajax({success:h,dataType:"json",error:null,type:"POST",url:g.in_request}):n()}})();this.JSON||(this.JSON={});
(function(){function a(e){return 10>e?"0"+e:e}function c(e){f.lastIndex=0;return f.test(e)?'"'+e.replace(f,function(h){var n=l[h];return"string"===typeof n?n:"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function d(e,h){var n=k,m=h[e];m&&"object"===typeof m&&"function"===typeof m.toJSON&&(m=m.toJSON(e));"function"===typeof p&&(m=p.call(h,e,m));switch(typeof m){case "string":return c(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);
case "object":if(!m)return"null";k+=t;var g=[];if("[object Array]"===Object.prototype.toString.apply(m)){var q=m.length;for(e=0;e<q;e+=1)g[e]=d(e,m)||"null";h=0===g.length?"[]":k?"[\n"+k+g.join(",\n"+k)+"\n"+n+"]":"["+g.join(",")+"]";k=n;return h}if(p&&"object"===typeof p)for(q=p.length,e=0;e<q;e+=1){var r=p[e];"string"===typeof r&&(h=d(r,m))&&g.push(c(r)+(k?": ":":")+h)}else for(r in m)Object.hasOwnProperty.call(m,r)&&(h=d(r,m))&&g.push(c(r)+(k?": ":":")+h);h=0===g.length?"{}":k?"{\n"+k+g.join(",\n"+
k)+"\n"+n+"}":"{"+g.join(",")+"}";k=n;return h}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,t,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p;"function"!==typeof JSON.stringify&&(JSON.stringify=function(e,h,n){var m;t=k="";if("number"===typeof n)for(m=0;m<n;m+=1)t+=" ";else"string"===typeof n&&(t=n);if((p=h)&&"function"!==typeof h&&("object"!==typeof h||"number"!==typeof h.length))throw Error("JSON.stringify");return d("",{"":e})});
"function"!==typeof JSON.parse&&(JSON.parse=function(e,h){function n(m,g){var q,r=m[g];if(r&&"object"===typeof r)for(q in r)if(Object.hasOwnProperty.call(r,q)){var u=n(r,q);void 0!==u?r[q]=u:delete r[q]}return h.call(m,g,r)}e=String(e);b.lastIndex=0;b.test(e)&&(e=e.replace(b,function(m){return"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+e+")"),"function"===typeof h?n({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var c={};jQuery(a).find("input,select,textarea").each(function(d){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var b=c[this.name];$(this).find("option").each(function(f){this.selected&&b.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(a,c){var d=jQuery;d(a).find("input,select,textarea").each(function(b){if(this.name){var f=
c[this.name];"undefined"!=typeof f&&null!==f&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(k){this.selected=1<f.length?0<=d.inArray(this.value,f):0===f.length?!1:this.value===f[0]}):this.value=f.length?f[0]:"":this.checked=1<f.length?0<=d.inArray(this.value,f):0===f.length?!1:this.value===f[0])}})};window.init_cached_state=function(a){var c=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];c(window).on("beforeunload",function(){var d={form_values:get_form_values(a)};c.each(onbeforeunload_fns,function(b,f){f(d)});document.getElementById("cache_form_values").value=JSON.stringify(d)});window.cache_register_onbeforeunload=function(d){onbeforeunload_fns.push(d)};window.cache_register_onbeforerestorevalues=function(d){onbeforerestorevalues_fns.push(d)};window.restore_cached_state=function(){var d=document.getElementById("cache_form_values");if(d&&d.value){var b=
JSON.parse(d.value);c.each(onbeforerestorevalues_fns,function(f,k){k(b)});restore_form_values(a,b.form_values)}}}})();
(function(){var a=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},d={"en-CA":!0,"":!0},b={},f={"fr-CA":"fr","es-MX":"es"},k=function(){var l=a(this),p=l.data("culture"),e=c[p]||a.datepicker.regional[p].dateFormat,h={};l.hasClass("NoYear")&&(e=e.replace(/[\- .\/]*yy[\/]?/,""),h={beforeShow:function(n,
m){m.dpDiv.addClass("NoYearDatePicker")},onClose:function(n,m){m.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});h.dateFormat=e;l.datepicker(a.extend({},a.datepicker.regional[p],h)).prop("autocomplete","off")},t=function(l){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+l+".min.js",function(){d[l]=!0;a.each(b[l],function(){k.call(this)});delete b[l]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var l=
a(this);var p=l.parents("[lang]").first().prop("lang")||"en-CA";p=f[p]||p;l.data("culture",p);d[p]?k.call(this):(l=b[p],l||(l=b[p]=[],t(p)),l.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
(function(){var a=function(b){b=b.toLowerCase();b=b.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");b=b.replace(RegExp("\u00e6","g"),"ae");b=b.replace(RegExp("\u00e7","g"),"c");b=b.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");b=b.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");b=b.replace(RegExp("\u00f1","g"),"n");b=b.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");b=b.replace(RegExp("\u009c","g"),"oe");b=b.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return b=b.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=a;window.slugify=function(b){b=a(b);b=b.replace(/-/g," ").replace(/[^a-z0-9\s]/g,"");b=b.trim();return b.replace(/\s+/g,"-")};var c=function(b,f,k,t,l){k=k||"value";t=t||"";l=l||"";return function(p,e){if(f.term&&(new RegExp(t+b.ui.autocomplete.escapeRegex(f.term)+l,"i")).test(p.term)&&f.content&&13>f.content.length){var h=new RegExp(t+b.ui.autocomplete.escapeRegex(p.term)+l,"i");e(b.grep(f.content,function(n){return h.test(a(n[k]))}));
return!0}return!1}};window.default_cache_search_fn=c;var d=function(b,f,k,t,l){k=k||{};l=l||c(b,k,t||"value");return function(p,e,h){p.term=a(p.term);k.term===p.term&&k.content?e(k.content):l(p,e)||b.ajax({url:h||f,dataType:"json",data:p,cache:!1,success:function(n){k.term=p.term;k.content=n;e(n)}})}};window.create_caching_source_fn=d;window.init_community_autocomplete=function(b,f,k,t,l){var p={};l&&=b(l);l&&!l.length&&(l=null);var e=b("#"+f).autocomplete({focus:function(h,n){return!1},select:function(h,
n){e.data({chkid:n.item.chkid,display:n.item.value})},source:d(b,k,p),minLength:t}).keypress(function(h){"13"==h.keyCode&&(h.preventDefault(),e.autocomplete("close"))});l&&(e.parents("form").on("submit",function(){var h=e.val();if(e.data("display")===h)l.val(e.data("chkid"));else{if(p.content){var n=a(h);h=b.grep(p.content,function(m){return a(m.value)===n});if(1===h.length){l.val(h[0].chkid);e.data({chkid:h[0].chkid,display:h[0].value}).val(h[0].value);return}}l.val("")}}),cache_register_onbeforerestorevalues(function(h){e.length&&
(h=h["autocomplete_data_"+e[0].id])&&e.data(h)}),cache_register_onbeforeunload(function(h){if(e.length){var n=e.data();n.display&&n.chkid&&(h["autocomplete_data_"+e[0].id]={display:n.display,chkid:n.chkid})}}))}})();
(function(a){window.init_general_heading_icons=function(c,d){d=d||a("#generalheading_IconNameFull");d.autocomplete({focus:function(b,f){return!1},source:create_caching_source_fn(a,c),minLength:3}).keypress(function(b){"13"==b.keyCode&&(b.preventDefault(),d.autocomplete("close"))});d.data("autocomplete")._renderItem=function(b,f){return a("<li></li>").data("item.autocomplete",f).append(a("<a></a>").text(f.label+" ").append(a(" <span></span>").addClass(f.label+" "+f.class_extra))).appendTo(b)}}})(jQuery);
