/*
 Globalize

 http://github.com/jquery/globalize

 Copyright Software Freedom Conservancy, Inc.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
window.CIOC={};
(function(a,c){c.do_drop_down_navigation=function(){for(var d=a.getElementById("ActionList").options,m=0;m<d.length;m++)if(d[m].selected){var k=d[m].getAttribute("href");k&&("undefined"!=typeof d[m].attributes.newwindow?c.open(k):c.location.href=k);break}};jQuery(function(d){d("[data-toggle=dialog]").each(function(){var m=d(this),k=d(m.data("target")),u={autoOpen:!1,title:k.data("title"),modal:k.data("modal")};k.dialog(u);m.click(function(){k.dialog("isOpen")?k.dialog("close"):k.dialog("open")})})})})(document,window);
function CheckAll(a,c){a||="IDList";var d=c;c||(d=document.RecordList);c=d.elements.length;for(var m=0;m<c;m++){var k=d.elements[m];k.name===a&&(k.checked=!0)}}function ClearAll(a,c){a||="IDList";var d=c;c||(d=document.RecordList);c=d.elements.length;for(var m=0;m<c;m++){var k=d.elements[m];k.name===a&&(k.checked=!1)}}function add_class(a,c){a&&!(new RegExp("\\b"+c+"\\b")).test(a.className)&&(a.className&&(c=" "+c),a.className+=c)}
function remove_class(a,c){if(a){for(var d=a.className.split(" "),m=[],k=0;k<d.length;k++){var u=d[k];u!==c&&m.push(u)}a.className=m.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,c){window.open(a,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,c){window.open(a,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,c){window.open(a,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var c={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var d=a(this).data("popargs");(c[d.size||"sm"]||openWin)(this.href,d.name||"popwin");return!1})});
(function(){var a=jQuery,c={},d=function(q){null!==q&&"undefined"!==typeof q?a("#myListCount").text(q):(q=a("#myListCount").text())&&(q=parseInt(q,10));q?c.myListLink.show():c.myListLink.hide()},m=function(q){a.each(q,function(z,C){a("#added_to_list_"+C).show();a("#add_to_list_"+C).hide()})},k=function(q){return function(z){z.fail?alert(z.errinfo):(z.ids?d(a.grep(z.ids,r[c.domain]).length):z.count?d(z.count):d(0),m([q]))}},u=function(q){q=a(q.currentTarget).data("id");a.ajax({success:k(q),dataType:"json",
error:function(){alert("Error")},data:{id:q},type:"POST",url:c.current_list_url})},F=function(q){return function(z){if(z.fail)alert(z.errinfo);else{z=!0;if(q){var C=a("#results_table #remove_from_list_"+q);C.length?C.parent().parent().remove():(z=!1,C=a("#results_container #remove_from_list_"+q),C.parents(".dlist-result").remove())}(z?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&q||(a("#records_ui").hide(),a("#no_records_message").show())}}},D=function(q){q=
a(q.currentTarget).data("id");a.ajax({success:F(q),dataType:"json",error:function(){alert("Error")},data:{ID:q,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},B=function(q){a.ajax({success:F(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},r={CIC:function(q){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(q)},VOL:function(q){return/^[1-9][0-9]*$/.test(q)}},A=function(q){if(q.fail)E();else if(q.inrequest){var z=a.grep(q.ids,
r[c.domain]);m(z);d(z.length);(q=q.previous_ids)&&a.each(q,function(C,O){a("#ct_added_to_previous_request_"+O).show()});a(".ListUI img").prop("src",function(C,O){return O.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();c.current_list_url=c.ct_update_url;w()}else E()},E=function(){var q=function(){c.list_view_mode||m(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;d((c.already_added||[]).length);
w()};c.list_view_mode||c.has_session?q():a.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(z){z.has_session&&q()}})},w=function(){a(".HideListUI").delegate(".add_to_list","click",u).delegate(".remove_from_list","click",D).removeClass("HideListUI");a("#remove_all_from_list").click(B);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(q){c=q;c.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
q.in_request?a.ajax({success:A,dataType:"json",error:null,type:"POST",url:q.in_request}):E()}})();this.JSON||(this.JSON={});
(function(){function a(r){return 10>r?"0"+r:r}function c(r){k.lastIndex=0;return k.test(r)?'"'+r.replace(k,function(A){var E=D[A];return"string"===typeof E?E:"\\u"+("0000"+A.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+r+'"'}function d(r,A){var E=u,w=A[r];w&&"object"===typeof w&&"function"===typeof w.toJSON&&(w=w.toJSON(r));"function"===typeof B&&(w=B.call(A,r,w));switch(typeof w){case "string":return c(w);case "number":return isFinite(w)?String(w):"null";case "boolean":case "null":return String(w);
case "object":if(!w)return"null";u+=F;var q=[];if("[object Array]"===Object.prototype.toString.apply(w)){var z=w.length;for(r=0;r<z;r+=1)q[r]=d(r,w)||"null";A=0===q.length?"[]":u?"[\n"+u+q.join(",\n"+u)+"\n"+E+"]":"["+q.join(",")+"]";u=E;return A}if(B&&"object"===typeof B)for(z=B.length,r=0;r<z;r+=1){var C=B[r];"string"===typeof C&&(A=d(C,w))&&q.push(c(C)+(u?": ":":")+A)}else for(C in w)Object.hasOwnProperty.call(w,C)&&(A=d(C,w))&&q.push(c(C)+(u?": ":":")+A);A=0===q.length?"{}":u?"{\n"+u+q.join(",\n"+
u)+"\n"+E+"}":"{"+q.join(",")+"}";u=E;return A}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(r){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(r){return this.valueOf()});var m=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
k=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u,F,D={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},B;"function"!==typeof JSON.stringify&&(JSON.stringify=function(r,A,E){var w;F=u="";if("number"===typeof E)for(w=0;w<E;w+=1)F+=" ";else"string"===typeof E&&(F=E);if((B=A)&&"function"!==typeof A&&("object"!==typeof A||"number"!==typeof A.length))throw Error("JSON.stringify");return d("",{"":r})});
"function"!==typeof JSON.parse&&(JSON.parse=function(r,A){function E(w,q){var z,C=w[q];if(C&&"object"===typeof C)for(z in C)if(Object.hasOwnProperty.call(C,z)){var O=E(C,z);void 0!==O?C[z]=O:delete C[z]}return A.call(w,q,C)}r=String(r);m.lastIndex=0;m.test(r)&&(r=r.replace(m,function(w){return"\\u"+("0000"+w.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(r.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return r=eval("("+r+")"),"function"===typeof A?E({"":r},""):r;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var c={};jQuery(a).find("input,select,textarea").each(function(d){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var m=c[this.name];$(this).find("option").each(function(k){this.selected&&m.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(a,c){var d=jQuery;d(a).find("input,select,textarea").each(function(m){if(this.name){var k=
c[this.name];"undefined"!=typeof k&&null!==k&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(u){this.selected=1<k.length?0<=d.inArray(this.value,k):0===k.length?!1:this.value===k[0]}):this.value=k.length?k[0]:"":this.checked=1<k.length?0<=d.inArray(this.value,k):0===k.length?!1:this.value===k[0])}})};window.init_cached_state=function(a){var c=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];c(window).on("beforeunload",function(){var d={form_values:get_form_values(a)};c.each(onbeforeunload_fns,function(m,k){k(d)});document.getElementById("cache_form_values").value=JSON.stringify(d)});window.cache_register_onbeforeunload=function(d){onbeforeunload_fns.push(d)};window.cache_register_onbeforerestorevalues=function(d){onbeforerestorevalues_fns.push(d)};window.restore_cached_state=function(){var d=document.getElementById("cache_form_values");if(d&&d.value){var m=
JSON.parse(d.value);c.each(onbeforerestorevalues_fns,function(k,u){u(m)});restore_form_values(a,m.form_values)}}}})();
(function(){var a=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},d={"en-CA":!0,"":!0},m={},k={"fr-CA":"fr","es-MX":"es"},u=function(){var D=a(this),B=D.data("culture"),r=c[B]||a.datepicker.regional[B].dateFormat,A={};D.hasClass("NoYear")&&(r=r.replace(/[\- .\/]*yy[\/]?/,""),A={beforeShow:function(E,
w){w.dpDiv.addClass("NoYearDatePicker")},onClose:function(E,w){w.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});A.dateFormat=r;D.datepicker(a.extend({},a.datepicker.regional[B],A)).prop("autocomplete","off")},F=function(D){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+D+".min.js",function(){d[D]=!0;a.each(m[D],function(){u.call(this)});delete m[D]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var D=
a(this);var B=D.parents("[lang]").first().prop("lang")||"en-CA";B=k[B]||B;D.data("culture",B);d[B]?u.call(this):(D=m[B],D||(D=m[B]=[],F(B)),D.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();function ClusterIcon(a,c){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.cluster_=a;this.className_=a.getMarkerClusterer().getClusterClass();this.styles_=c;this.sums_=this.div_=this.center_=null;this.visible_=!1;this.setMap(a.getMap())}
ClusterIcon.prototype.onAdd=function(){var a=this,c,d;this.div_=document.createElement("div");this.div_.className=this.className_;this.visible_&&this.show();this.getPanes().overlayMouseTarget.appendChild(this.div_);this.getMap().getDiv().addEventListener("bounds_changed",function(){d=c});this.div_.addEventListener("mousedown",function(){c=!0;d=!1});this.div_.addEventListener("click",function(m){c=!1;if(!d){var k=a.cluster_.getMarkerClusterer();google.maps.event.trigger(k,"click",a.cluster_);google.maps.event.trigger(k,
"clusterclick",a.cluster_);if(k.getZoomOnClick()){var u=k.getMaxZoom();var F=a.cluster_.getBounds();k.getMap().fitBounds(F);setTimeout(function(){k.getMap().fitBounds(F);null!==u&&k.getMap().getZoom()>u&&k.getMap().setZoom(u+1)},100)}m.cancelBubble=!0;m.stopPropagation&&m.stopPropagation()}});this.div_.addEventListener("mouseover",function(){var m=a.cluster_.getMarkerClusterer();google.maps.event.trigger(m,"mouseover",a.cluster_)});this.div_.addEventListener("mouseout",function(){var m=a.cluster_.getMarkerClusterer();
google.maps.event.trigger(m,"mouseout",a.cluster_)})};ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)};ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px";this.div_.style.left=a.x+"px"}};
ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none");this.visible_=!1};
ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);this.div_.innerHTML=this.cluster_.printable_?"<img src='"+this.url_+"'><div style='position: absolute; top: 0px; left: 0px; width: "+this.width_+"px;'>"+this.sums_.text+"</div>":this.sums_.text;this.div_.title="undefined"===typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title;this.div_.style.display=""}this.visible_=
!0};
ClusterIcon.prototype.useStyle=function(a){this.sums_=a;a=Math.max(0,a.index-1);a=Math.min(this.styles_.length-1,a);a=this.styles_[a];this.url_=a.url;this.height_=a.height;this.width_=a.width;this.anchor_=a.anchor;this.anchorIcon_=a.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)];this.textColor_=a.textColor||"black";this.textSize_=a.textSize||11;this.textDecoration_=a.textDecoration||"none";this.fontWeight_=a.fontWeight||"bold";this.fontStyle_=a.fontStyle||"normal";this.fontFamily_=a.fontFamily||
"Arial,sans-serif";this.backgroundPosition_=a.backgroundPosition||"0 0"};ClusterIcon.prototype.setCenter=function(a){this.center_=a};
ClusterIcon.prototype.createCss=function(a){var c=[];this.cluster_.printable_||(c.push("background-image:url("+this.url_+");"),c.push("background-position:"+this.backgroundPosition_+";"));"object"===typeof this.anchor_?("number"===typeof this.anchor_[0]&&0<this.anchor_[0]&&this.anchor_[0]<this.height_?c.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):c.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"===typeof this.anchor_[1]&&0<this.anchor_[1]&&
this.anchor_[1]<this.width_?c.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):c.push("width:"+this.width_+"px; text-align:center;")):c.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");c.push("cursor:pointer; top:"+a.y+"px; left:"+a.x+"px; color:"+this.textColor_+"; position:absolute; font-size:"+this.textSize_+"px; font-family:"+this.fontFamily_+"; font-weight:"+this.fontWeight_+"; font-style:"+this.fontStyle_+
"; text-decoration:"+this.textDecoration_+";");return c.join("")};ClusterIcon.prototype.getPosFromLatLng_=function(a){a=this.getProjection().fromLatLngToDivPixel(a);a.x-=this.anchorIcon_[1];a.y-=this.anchorIcon_[0];return a};
function Cluster(a){this.markerClusterer_=a;this.map_=a.getMap();this.gridSize_=a.getGridSize();this.minClusterSize_=a.getMinimumClusterSize();this.averageCenter_=a.getAverageCenter();this.printable_=a.getPrintable();this.markers_=[];this.bounds_=this.center_=null;this.clusterIcon_=new ClusterIcon(this,a.getStyles())}Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getIcon=function(){return this.clusterIcon_};Cluster.prototype.getMarkers=function(){return this.markers_};
Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var a,c=new google.maps.LatLngBounds(this.center_,this.center_),d=this.getMarkers();for(a=0;a<d.length;a++)c.extend(d[a].getPosition());return c};Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null);this.markers_=[];delete this.markers_};
Cluster.prototype.addMarker=function(a){if(this.isMarkerAlreadyAdded_(a))return!1;if(!this.center_)this.center_=a.getPosition(),this.calculateBounds_();else if(this.averageCenter_){var c=this.markers_.length+1;var d=(this.center_.lat()*(c-1)+a.getPosition().lat())/c;c=(this.center_.lng()*(c-1)+a.getPosition().lng())/c;this.center_=new google.maps.LatLng(d,c);this.calculateBounds_()}a.isAdded=!0;this.markers_.push(a);d=this.markers_.length;c=this.markerClusterer_.getMaxZoom();if(null!==c&&this.map_.getZoom()>
c)a.getMap()!==this.map_&&a.setMap(this.map_);else if(d<this.minClusterSize_)a.getMap()!==this.map_&&a.setMap(this.map_);else if(d===this.minClusterSize_)for(a=0;a<d;a++)this.markers_[a].setMap(null);else a.setMap(null);this.updateIcon_();return!0};Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())};Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)};
Cluster.prototype.updateIcon_=function(){var a=this.markers_.length,c=this.markerClusterer_.getMaxZoom();null!==c&&this.map_.getZoom()>c?this.clusterIcon_.hide():a<this.minClusterSize_?this.clusterIcon_.hide():(a=this.markerClusterer_.getStyles().length,a=this.markerClusterer_.getCalculator()(this.markers_,a),this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(a),this.clusterIcon_.show())};
Cluster.prototype.isMarkerAlreadyAdded_=function(a){var c;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(a);for(c=0;c<this.markers_.length;c++)if(a===this.markers_[c])return!0;return!1};
function MarkerClusterer(a,c,d){this.extend(MarkerClusterer,google.maps.OverlayView);c=c||[];d=d||{};this.markers_=[];this.clusters_=[];this.listeners_=[];this.activeMap_=null;this.ready_=!1;this.gridSize_=d.gridSize||60;this.minClusterSize_=d.minimumClusterSize||2;this.maxZoom_=d.maxZoom||null;this.styles_=d.styles||[];this.title_=d.title||"";this.zoomOnClick_=!0;void 0!==d.zoomOnClick&&(this.zoomOnClick_=d.zoomOnClick);this.averageCenter_=!1;void 0!==d.averageCenter&&(this.averageCenter_=d.averageCenter);
this.ignoreHidden_=!1;void 0!==d.ignoreHidden&&(this.ignoreHidden_=d.ignoreHidden);this.printable_=!1;void 0!==d.printable&&(this.printable_=d.printable);this.imagePath_=d.imagePath||MarkerClusterer.IMAGE_PATH;this.imageExtension_=d.imageExtension||MarkerClusterer.IMAGE_EXTENSION;this.imageSizes_=d.imageSizes||MarkerClusterer.IMAGE_SIZES;this.calculator_=d.calculator||MarkerClusterer.CALCULATOR;this.batchSize_=d.batchSize||MarkerClusterer.BATCH_SIZE;this.batchSizeIE_=d.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE;
this.clusterClass_=d.clusterClass||"cluster";-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_);this.setupStyles_();this.addMarkers(c,!0);this.setMap(a)}
MarkerClusterer.prototype.onAdd=function(){var a=this;this.activeMap_=this.getMap();this.ready_=!0;this.repaint();this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){a.resetViewport_(!1);this.getZoom()!==(this.get("minZoom")||0)&&this.getZoom()!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){a.redraw_()})]};
MarkerClusterer.prototype.onRemove=function(){var a;for(a=0;a<this.markers_.length;a++)this.markers_[a].setMap(this.activeMap_);for(a=0;a<this.clusters_.length;a++)this.clusters_[a].remove();this.clusters_=[];for(a=0;a<this.listeners_.length;a++)google.maps.event.removeListener(this.listeners_[a]);this.listeners_=[];this.activeMap_=null;this.ready_=!1};MarkerClusterer.prototype.draw=function(){};
MarkerClusterer.prototype.setupStyles_=function(){var a;if(!(0<this.styles_.length))for(a=0;a<this.imageSizes_.length;a++){var c=this.imageSizes_[a];this.styles_.push({url:this.imagePath_+(a+1)+"."+this.imageExtension_,height:c,width:c})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var a,c=this.getMarkers(),d=new google.maps.LatLngBounds;for(a=0;a<c.length;a++)d.extend(c[a].getPosition());this.getMap().fitBounds(d)};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};
MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a};MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinimumClusterSize=function(a){this.minClusterSize_=a};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a};MarkerClusterer.prototype.getStyles=function(){return this.styles_};
MarkerClusterer.prototype.setStyles=function(a){this.styles_=a};MarkerClusterer.prototype.getTitle=function(){return this.title_};MarkerClusterer.prototype.setTitle=function(a){this.title_=a};MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.setZoomOnClick=function(a){this.zoomOnClick_=a};MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_};
MarkerClusterer.prototype.setAverageCenter=function(a){this.averageCenter_=a};MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_};MarkerClusterer.prototype.setIgnoreHidden=function(a){this.ignoreHidden_=a};MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_};MarkerClusterer.prototype.setImageExtension=function(a){this.imageExtension_=a};MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_};
MarkerClusterer.prototype.setImagePath=function(a){this.imagePath_=a};MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_};MarkerClusterer.prototype.setImageSizes=function(a){this.imageSizes_=a};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a};MarkerClusterer.prototype.getPrintable=function(){return this.printable_};
MarkerClusterer.prototype.setPrintable=function(a){this.printable_=a};MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_};MarkerClusterer.prototype.setBatchSizeIE=function(a){this.batchSizeIE_=a};MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_};MarkerClusterer.prototype.setClusterClass=function(a){this.clusterClass_=a};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};
MarkerClusterer.prototype.getClusters=function(){return this.clusters_};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.addMarker=function(a,c){this.pushMarkerTo_(a);c||this.redraw_()};MarkerClusterer.prototype.addMarkers=function(a,c){var d;for(d=0;d<a.length;d++)this.pushMarkerTo_(a[d]);c||this.redraw_()};
MarkerClusterer.prototype.pushMarkerTo_=function(a){if(a.getDraggable()){var c=this;google.maps.event.addListener(a,"dragend",function(){c.ready_&&(this.isAdded=!1,c.repaint())})}a.isAdded=!1;this.markers_.push(a)};MarkerClusterer.prototype.removeMarker=function(a,c){a=this.removeMarker_(a);!c&&a&&this.repaint();return a};MarkerClusterer.prototype.removeMarkers=function(a,c){var d,m=!1;for(d=0;d<a.length;d++){var k=this.removeMarker_(a[d]);m=m||k}!c&&m&&this.repaint();return m};
MarkerClusterer.prototype.removeMarker_=function(a){var c,d=-1;if(this.markers_.indexOf)d=this.markers_.indexOf(a);else for(c=0;c<this.markers_.length;c++)if(a===this.markers_[c]){d=c;break}if(-1===d)return!1;a.setMap(null);this.markers_.splice(d,1);return!0};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0);this.markers_=[]};
MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_=[];this.resetViewport_(!1);this.redraw_();setTimeout(function(){var c;for(c=0;c<a.length;c++)a[c].remove()},0)};
MarkerClusterer.prototype.getExtendedBounds=function(a){var c=this.getProjection(),d=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),m=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng());d=c.fromLatLngToDivPixel(d);d.x+=this.gridSize_;d.y-=this.gridSize_;m=c.fromLatLngToDivPixel(m);m.x-=this.gridSize_;m.y+=this.gridSize_;d=c.fromDivPixelToLatLng(d);c=c.fromDivPixelToLatLng(m);a.extend(d);a.extend(c);return a};MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)};
MarkerClusterer.prototype.resetViewport_=function(a){var c;for(c=0;c<this.clusters_.length;c++)this.clusters_[c].remove();this.clusters_=[];for(c=0;c<this.markers_.length;c++){var d=this.markers_[c];d.isAdded=!1;a&&d.setMap(null)}};MarkerClusterer.prototype.pi_over_180=Math.PI/180;MarkerClusterer.prototype.pi_over_360=Math.PI/360;MarkerClusterer.prototype.distanceBetweenPoints_=function(a,c){var d=a.lat(),m=c.lat();a=(c.lng()-a.lng())*Math.cos((d+m)/2);d=m-d;return 6371*Math.sqrt(a*a+d*d)};
MarkerClusterer.prototype.isMarkerInBounds_=function(a,c){return c.contains(a.getPosition())};MarkerClusterer.prototype.addToClosestCluster_=function(a){var c,d,m=4E4,k=null;for(c=0;c<this.clusters_.length;c++){var u=this.clusters_[c];if(d=u.getCenter())d=this.distanceBetweenPoints_(d,a.getPosition()),d<m&&(m=d,k=u)}k&&k.isMarkerInClusterBounds(a)?k.addMarker(a):(u=new Cluster(this),u.addMarker(a),this.clusters_.push(u))};
MarkerClusterer.prototype.createClusters_=function(a){var c=this;if(this.ready_){0===a&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!==typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic));var d=3<this.getMap().getZoom()?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,
178.00048865625));d=this.getExtendedBounds(d);for(var m=Math.min(a+this.batchSize_,this.markers_.length);a<m;a++){var k=this.markers_[a];!k.isAdded&&this.isMarkerInBounds_(k,d)&&(!this.ignoreHidden_||this.ignoreHidden_&&k.getVisible())&&this.addToClosestCluster_(k)}m<this.markers_.length?this.timerRefStatic=setTimeout(function(){c.createClusters_(m)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}};
MarkerClusterer.prototype.extend=function(a,c){return function(d){for(var m in d.prototype)this.prototype[m]=d.prototype[m];return this}.apply(a,[c])};MarkerClusterer.CALCULATOR=function(a,c){for(var d=0,m=a=a.length.toString();0!==m;)m=parseInt(m/10,10),d++;d=Math.min(d,c);return{text:a,index:d,title:""}};MarkerClusterer.BATCH_SIZE=2E3;MarkerClusterer.BATCH_SIZE_IE=500;MarkerClusterer.IMAGE_PATH="//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m";
MarkerClusterer.IMAGE_EXTENSION="png";MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90];
(function(a,c){var d,m;var k=function(b){return new k.prototype.init(b)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=k:a.Globalize=k;k.cultures={};k.prototype={constructor:k,init:function(b){this.cultures=k.cultures;this.cultureSelector=b;return this}};k.prototype.init.prototype=k.prototype;k.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",
groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},
months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};
k.cultures["default"].calendar=k.cultures["default"].calendars.standard;k.cultures.en=k.cultures["default"];k.cultureSelector="en";var u=/^0x[a-f0-9]+$/i;var F=/^[+\-]?infinity$/i;var D=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;var B=/^\s+|\s+$/g;var r=function(b,e){if(b.indexOf)return b.indexOf(e);for(var h=0,g=b.length;h<g;h++)if(b[h]===e)return h;return-1};var A=function(b,e){return b.substr(b.length-e.length)===e};var E=function(){var b,e,h,g=arguments[0]||{},l=1,t=arguments.length,p=!1;"boolean"===typeof g&&
(p=g,g=arguments[1]||{},l=2);for("object"===typeof g||q(g)||(g={});l<t;l++)if(null!=(b=arguments[l]))for(e in b){var f=g[e];var n=b[e];g!==n&&(p&&n&&(z(n)||(h=w(n)))?(h?(h=!1,f=f&&w(f)?f:[]):f=f&&z(f)?f:{},g[e]=E(p,f,n)):n!==c&&(g[e]=n))}return g};var w=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)};var q=function(b){return"[object Function]"===Object.prototype.toString.call(b)};var z=function(b){return"[object Object]"===Object.prototype.toString.call(b)};
var C=function(b,e){return 0===b.indexOf(e)};var O=function(b){return(b+"").replace(B,"")};var aa=function(b){return isNaN(b)?NaN:Math[0>b?"ceil":"floor"](b)};var V=function(b,e,h){var g;for(g=b.length;g<e;g+=1)b=h?"0"+b:b+"0";return b};var Y=function(b,e){for(var h=0,g=!1,l=0,t=b.length;l<t;l++){var p=b.charAt(l);switch(p){case "'":g?e.push("'"):h++;g=!1;break;case "\\":g&&e.push("\\");g=!g;break;default:e.push(p),g=!1}}return h};var ba=function(b,e){e=e||"F";b=b.patterns;var h=e.length;if(1===h){b=
b[e];if(!b)throw"Invalid date format string '"+e+"'.";e=b}else 2===h&&"%"===e.charAt(0)&&(e=e.charAt(1));return e};var ca=function(b,e,h){function g(M,I){M+="";return 1<I&&M.length<I?(M=x[I-2]+M,M.substr(M.length-I,I)):M}function l(M,I){if(P)return P[I];switch(I){case 0:return M.getFullYear();case 1:return M.getMonth();case 2:return M.getDate();default:throw"Invalid part value "+I;}}var t=h.calendar,p=t.convert;if(!e||!e.length||"i"===e){if(h&&h.name.length)if(p)h=ca(b,t.patterns.F,h);else{e=new Date(b.getTime());
var f=W(b,t.eras);e.setFullYear(Z(b,t,f));h=e.toLocaleString()}else h=b.toString();return h}var n=t.eras,v="s"===e;e=ba(t,e);h=[];var x=["0","00","000"],J=/([^d]|^)(d|dd)([^d]|$)/g,H=0,K=da(),P;for(!v&&p&&(P=p.fromGregorian(b));;){var y=K.lastIndex;p=K.exec(e);y=e.slice(y,p?p.index:e.length);H+=Y(y,h);if(!p)break;if(H%2)h.push(p[0]);else switch(y=p[0],p=y.length,y){case "ddd":case "dddd":h.push((3===p?t.days.namesAbbr:t.days.names)[b.getDay()]);break;case "d":case "dd":f=!0;h.push(g(l(b,2),p));break;
case "MMM":case "MMMM":y=l(b,1);var G=h,S=G.push,T;if(T=t.monthsGenitive){if(!f&&!Q){f=J.test(e);var Q=!0}T=f}S.call(G,T?t.monthsGenitive[3===p?"namesAbbr":"names"][y]:t.months[3===p?"namesAbbr":"names"][y]);break;case "M":case "MM":h.push(g(l(b,1)+1,p));break;case "y":case "yy":case "yyyy":y=P?P[0]:Z(b,t,W(b,n),v);4>p&&(y%=100);h.push(g(y,p));break;case "h":case "hh":y=b.getHours()%12;0===y&&(y=12);h.push(g(y,p));break;case "H":case "HH":h.push(g(b.getHours(),p));break;case "m":case "mm":h.push(g(b.getMinutes(),
p));break;case "s":case "ss":h.push(g(b.getSeconds(),p));break;case "t":case "tt":y=12>b.getHours()?t.AM?t.AM[0]:" ":t.PM?t.PM[0]:" ";h.push(1===p?y.charAt(0):y);break;case "f":case "ff":case "fff":h.push(g(b.getMilliseconds(),3).substr(0,p));break;case "z":case "zz":y=b.getTimezoneOffset()/60;h.push((0>=y?"+":"-")+g(Math.floor(Math.abs(y)),p));break;case "zzz":y=b.getTimezoneOffset()/60;h.push((0>=y?"+":"-")+g(Math.floor(Math.abs(y)),2)+":"+g(Math.abs(b.getTimezoneOffset()%60),2));break;case "g":case "gg":t.eras&&
h.push(t.eras[W(b,n)].name);break;case "/":h.push(t["/"]);break;default:throw"Invalid date format pattern '"+y+"'.";}}return h.join("")};(function(){var b=function(e,h,g){var l=g.groupSizes,t=l[0],p=1,f=Math.pow(10,h);f=Math.round(e*f)/f;isFinite(f)||(f=e);e=f;f=(e+"").split(/e/i);var n=1<f.length?parseInt(f[1],10):0;e=f[0];f=e.split(".");e=f[0];f=1<f.length?f[1]:"";0<n?(f=V(f,n,!1),e+=f.slice(0,n),f=f.substr(n)):0>n&&(n=-n,e=V(e,n+1,!0),f=e.slice(-n,e.length)+f,e=e.slice(0,-n));f=0<h?g["."]+(f.length>
h?f.slice(0,h):V(f,h)):"";h=e.length-1;g=g[","];for(n="";0<=h;){if(0===t||t>h)return e.slice(0,h+1)+(n.length?g+n+f:f);n=e.slice(h-t+1,h+1)+(n.length?g+n:"");h-=t;p<l.length&&(t=l[p],p++)}return e.slice(0,h+1)+g+n+f};d=function(e,h,g){if(!isFinite(e))return Infinity===e?g.numberFormat.positiveInfinity:-Infinity===e?g.numberFormat.negativeInfinity:g.numberFormat.NaN;if(!h||"i"===h)return g.name.length?e.toLocaleString():e.toString();h=h||"D";g=g.numberFormat;var l=Math.abs(e),t=-1;1<h.length&&(t=parseInt(h.slice(1),
10));var p=h.charAt(0).toUpperCase();switch(p){case "D":h="n";l=aa(l);-1!==t&&(l=V(""+l,t,!0));0>e&&(l="-"+l);break;case "N":var f=g;case "C":f=f||g.currency;case "P":f=f||g.percent;h=0>e?f.pattern[0]:f.pattern[1]||"n";-1===t&&(t=f.decimals);l=b(l*("P"===p?100:1),t,f);break;default:throw"Bad number format specifier: "+p;}e=/n|\$|-|%/g;for(f="";;){t=e.lastIndex;p=e.exec(h);f+=h.slice(t,p?p.index:h.length);if(!p)break;switch(p[0]){case "n":f+=l;break;case "$":f+=g.currency.symbol;break;case "-":/[1-9]/.test(l)&&
(f+=g["-"]);break;case "%":f+=g.percent.symbol}}return f}})();var da=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};var W=function(b,e){if(!e)return 0;for(var h=b.getTime(),g=0,l=e.length;g<l;g++)if(b=e[g].start,null===b||h>=b)return g;return 0};var Z=function(b,e,h,g){b=b.getFullYear();!g&&e.eras&&(b-=e.eras[h].offset);return b};(function(){var b=function(f,n){if(100>n){var v=new Date,x=W(v);v=Z(v,f,x);f=f.twoDigitYearMax;f="string"===
typeof f?(new Date).getFullYear()%100+parseInt(f,10):f;n+=v-v%100;n>f&&(n-=100)}return n};var e=function(f,n,v){var x=f.days,J=f._upperDays;J||(f._upperDays=J=[p(x.names),p(x.namesAbbr),p(x.namesShort)]);n=t(n);v?(f=r(J[1],n),-1===f&&(f=r(J[2],n))):f=r(J[0],n);return f};var h=function(f,n,v){var x=f.months,J=f.monthsGenitive||f.months,H=f._upperMonths,K=f._upperMonthsGen;H||(f._upperMonths=H=[p(x.names),p(x.namesAbbr)],f._upperMonthsGen=K=[p(J.names),p(J.namesAbbr)]);n=t(n);f=r(v?H[1]:H[0],n);0>f&&
(f=r(v?K[1]:K[0],n));return f};var g=function(f,n){var v=f._parseRegExp;if(v){var x=v[n];if(x)return x}else f._parseRegExp=v={};f=ba(f,n).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");x=["^"];for(var J=[],H=0,K=0,P=da(),y;null!==(y=P.exec(f));){var G=f.slice(H,y.index);H=P.lastIndex;K+=Y(G,x);if(K%2)x.push(y[0]);else{G=y[0];var S=G.length;switch(G){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":G="(\\D+)";break;case "tt":case "t":G="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":G=
"(\\d{"+S+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":G="(\\d\\d?)";break;case "zzz":G="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":G="([+-]?\\d\\d?)";break;case "/":G="(\\/)";break;default:throw"Invalid date format pattern '"+G+"'.";}G&&x.push(G);J.push(y[0])}}Y(f.slice(H),x);x.push("$");f={regExp:x.join("").replace(/\s+/g,"\\s+"),groups:J};return v[n]=f};var l=function(f,n,v){return f<n||f>v};
var t=function(f){return f.split("\u00a0").join(" ").toUpperCase()};var p=function(f){for(var n=[],v=0,x=f.length;v<x;v++)n[v]=t(f[v]);return n};m=function(f,n,v){f=O(f);v=v.calendar;n=g(v,n);var x=(new RegExp(n.regExp)).exec(f);if(null===x)return null;var J=n.groups,H=n=f=null,K=null,P=null,y=0,G=0,S=0,T=0;var Q=null;for(var M=!1,I=0,ea=J.length;I<ea;I++){var L=x[I+1];if(L){var N=J[I],U=N.length,R=parseInt(L,10);switch(N){case "dd":case "d":K=R;if(l(K,1,31))return null;break;case "MMM":case "MMMM":H=
h(v,L,3===U);if(l(H,0,11))return null;break;case "M":case "MM":H=R-1;if(l(H,0,11))return null;break;case "y":case "yy":case "yyyy":n=4>U?b(v,R):R;if(l(n,0,9999))return null;break;case "h":case "hh":y=R;12===y&&(y=0);if(l(y,0,11))return null;break;case "H":case "HH":y=R;if(l(y,0,23))return null;break;case "m":case "mm":G=R;if(l(G,0,59))return null;break;case "s":case "ss":S=R;if(l(S,0,59))return null;break;case "tt":case "t":M=v.PM&&(L===v.PM[0]||L===v.PM[1]||L===v.PM[2]);if(!M&&(!v.AM||L!==v.AM[0]&&
L!==v.AM[1]&&L!==v.AM[2]))return null;break;case "f":case "ff":case "fff":T=R*Math.pow(10,3-U);if(l(T,0,999))return null;break;case "ddd":case "dddd":P=e(v,L,3===U);if(l(P,0,6))return null;break;case "zzz":N=L.split(/:/);if(2!==N.length)return null;Q=parseInt(N[0],10);if(l(Q,-12,13))return null;N=parseInt(N[1],10);if(l(N,0,59))return null;Q=60*Q+(C(L,"-")?-N:N);break;case "z":case "zz":Q=R;if(l(Q,-12,13))return null;Q*=60;break;case "g":case "gg":if(!L||!v.eras)return null;L=O(L.toLowerCase());N=
0;for(U=v.eras.length;N<U;N++)if(L===v.eras[N].name.toLowerCase()){f=N;break}if(null===f)return null}}}x=new Date;J=(I=v.convert)?I.fromGregorian(x)[0]:x.getFullYear();null===n?n=J:v.eras&&(n+=v.eras[f||0].offset);null===H&&(H=0);null===K&&(K=1);if(I){if(x=I.toGregorian(n,H,K),null===x)return null}else if(x.setFullYear(n,H,K),x.getDate()!==K||null!==P&&x.getDay()!==P)return null;M&&12>y&&(y+=12);x.setHours(y,G,S,T);null!==Q&&(v=x.getMinutes()-(Q+x.getTimezoneOffset()),x.setHours(x.getHours()+parseInt(v/
60,10),v%60));return x}})();var X=function(b,e,h){var g=e["-"];e=e["+"];var l;switch(h){case "n -":g=" "+g,e=" "+e;case "n-":A(b,g)?l=["-",b.substr(0,b.length-g.length)]:A(b,e)&&(l=["+",b.substr(0,b.length-e.length)]);break;case "- n":g+=" ",e+=" ";case "-n":C(b,g)?l=["-",b.substr(g.length)]:C(b,e)&&(l=["+",b.substr(e.length)]);break;case "(n)":C(b,"(")&&A(b,")")&&(l=["-",b.substr(1,b.length-2)])}return l||["",b]};k.prototype.findClosestCulture=function(b){return k.findClosestCulture.call(this,b)};
k.prototype.format=function(b,e,h){return k.format.call(this,b,e,h)};k.prototype.localize=function(b,e){return k.localize.call(this,b,e)};k.prototype.parseInt=function(b,e,h){return k.parseInt.call(this,b,e,h)};k.prototype.parseFloat=function(b,e,h){return k.parseFloat.call(this,b,e,h)};k.prototype.culture=function(b){return k.culture.call(this,b)};k.addCultureInfo=function(b,e,h){var g=!1;"string"!==typeof b?(h=b,b=this.culture().name,e=this.cultures[b]):"string"!==typeof e?(h=e,g=null==this.cultures[b],
e=this.cultures[b]||this.cultures["default"]):(g=!0,e=this.cultures[e]);this.cultures[b]=E(!0,{},e,h);g&&(this.cultures[b].calendar=this.cultures[b].calendars.standard)};k.findClosestCulture=function(b){var e;if(!b)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof b&&(b=b.split(","));if(w(b)){var h=this.cultures,g=b,l,t=g.length,p=[];for(l=0;l<t;l++){b=O(g[l]);b=b.split(";");var f=O(b[0]);1===b.length?b=1:(b=O(b[1]),0===b.indexOf("q=")?(b=b.substr(2),
b=parseFloat(b),b=isNaN(b)?0:b):b=1);p.push({lang:f,pri:b})}p.sort(function(v,x){return v.pri<x.pri?1:v.pri>x.pri?-1:0});for(l=0;l<t;l++)if(f=p[l].lang,e=h[f])return e;for(l=0;l<t;l++){f=p[l].lang;do{g=f.lastIndexOf("-");if(-1===g)break;f=f.substr(0,g);if(e=h[f])return e}while(1)}for(l=0;l<t;l++){f=p[l].lang;for(var n in h)if(g=h[n],g.language==f)return g}}else if("object"===typeof b)return b;return e||null};k.format=function(b,e,h){h=this.findClosestCulture(h);b instanceof Date?b=ca(b,e,h):"number"===
typeof b&&(b=d(b,e,h));return b};k.localize=function(b,e){return this.findClosestCulture(e).messages[b]||this.cultures["default"].messages[b]};k.parseDate=function(b,e,h){h=this.findClosestCulture(h);var g;if(e){if("string"===typeof e&&(e=[e]),e.length){var l=0;for(var t=e.length;l<t;l++){var p=e[l];if(p&&(g=m(b,p,h)))break}}}else for(l in e=h.calendar.patterns,e)if(g=m(b,e[l],h))break;return g||null};k.parseInt=function(b,e,h){return aa(k.parseFloat(b,e,h))};k.parseFloat=function(b,e,h){"number"!==
typeof e&&(h=e,e=10);var g=this.findClosestCulture(h);h=NaN;var l=g.numberFormat;-1<b.indexOf(g.numberFormat.currency.symbol)&&(b=b.replace(g.numberFormat.currency.symbol,""),b=b.replace(g.numberFormat.currency["."],g.numberFormat["."]));b=O(b);if(F.test(b))h=parseFloat(b);else if(!e&&u.test(b))h=parseInt(b,16);else{g=X(b,l,l.pattern[0]);e=g[0];g=g[1];""===e&&"(n)"!==l.pattern[0]&&(g=X(b,l,"(n)"),e=g[0],g=g[1]);""===e&&"-n"!==l.pattern[0]&&(g=X(b,l,"-n"),e=g[0],g=g[1]);e=e||"+";b=g.indexOf("e");0>
b&&(b=g.indexOf("E"));if(0>b){var t=g;b=null}else t=g.substr(0,b),b=g.substr(b+1);var p=l["."],f=t.indexOf(p);0>f?(g=t,t=null):(g=t.substr(0,f),t=t.substr(f+p.length));p=l[","];g=g.split(p).join("");f=p.replace(/\u00A0/g," ");p!==f&&(g=g.split(f).join(""));e+=g;null!==t&&(e+="."+t);null!==b&&(l=X(b,l,"-n"),e+="e"+(l[0]||"+")+l[1]);D.test(e)&&(h=parseFloat(e))}return h};k.culture=function(b){"undefined"!==typeof b&&(this.cultureSelector=b);return this.findClosestCulture(b)||this.cultures["default"]}})(this);
(function(){var a=null,c=null,d=null,m=function(u){$.each(u,function(F,D){var B=D.getMarkers(),r;$.each(B,function(A,E){r=E.num;document.getElementById("map_pin_number_"+r).innerHTML=F+1});D.getIcon().useStyle({text:F+1,index:a[1<B.length?0:k[r]].order_index+1})})},k={};window.start_map=function(){var u=[59.888937,-101.601562];u={center:new google.maps.LatLng(u[0],u[1]),zoom:2,mapTypeId:google.maps.MapTypeId.ROADMAP};c=new google.maps.Map(document.getElementById("map_canvas"),u);u=[];for(var F=0;F<
map_pins_order.length;F++){var D=map_pins_order[F],B=a[D];u.push({url:"images/mapping/"+B.image,height:0!=D?25:30,width:0!=D?25:30,textColor:"#"+B.textColour})}d=new MarkerClusterer(c,[],{gridSize:21,maxZoom:99,minimumClusterSize:1,styles:u});google.maps.event.addListener(d,"clusteringend",function(){m(d.getClusters())});var r=new google.maps.LatLngBounds,A=[];u=$("#page_content tr.MapRow").each(function(E){var w=$(this).data("mapinfo"),q=Globalize.parseFloat(w.latitude),z=Globalize.parseFloat(w.longitude);
E=w.num;w=w.mappin;q=new google.maps.LatLng(q,z);z=new google.maps.Marker({position:q,clickable:!1});z.num=E;A.push(z);k[E]=parseInt(w,10);r.extend(q)});d.addMarkers(A);u.length?c.fitBounds(r):(c.setCenter(new google.maps.LatLng(59.888937,-101.601562)),c.setZoom(2))};window.init=function(u){var F=a=u.map_pins,D=[],B=0,r;for(r in F)F[r].order_index=B,D.push(r),B++;map_pins_order=D;$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+u.key_arg+"&sensor=false&callback=start_map&language="+u.culture);
u=prompt("Please enter a Title for the map","");""!=u&&null!=u&&$("#PrintMapPageTitle").text(u).show()}})();
