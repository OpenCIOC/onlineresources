window.CIOC={};
(function(b,c){c.do_drop_down_navigation=function(){for(var a=b.getElementById("ActionList").options,f=0;f<a.length;f++)if(a[f].selected){var e=a[f].getAttribute("href");e&&("undefined"!=typeof a[f].attributes.newwindow?c.open(e):c.location.href=e);break}};jQuery(function(b){b("[data-toggle=dialog]").each(function(){var c=b(this),e=b(c.data("target")),g={autoOpen:!1,title:e.data("title"),modal:e.data("modal")};e.dialog(g);c.click(function(){e.dialog("isOpen")?e.dialog("close"):e.dialog("open")})})})})(document,window);
function CheckAll(b,c){b||(b="IDList");var a=c;c||(a=document.RecordList);for(var f=a.elements.length,e=0;e<f;e++){var g=a.elements[e];g.name===b&&(g.checked=!0)}}function ClearAll(b,c){b||(b="IDList");var a=c;c||(a=document.RecordList);for(var f=a.elements.length,e=0;e<f;e++){var g=a.elements[e];g.name===b&&(g.checked=!1)}}function add_class(b,c){b&&!(new RegExp("\\b"+c+"\\b")).test(b.className)&&(b.className&&(c=" "+c),b.className+=c)}
function remove_class(b,c){if(b){for(var a=b.className.split(" "),f=[],e=0;e<a.length;e++){var g=a[e];g!==c&&f.push(g)}b.className=f.join(" ")}}function hide(b){add_class(b,"NotVisible")}function show(b){remove_class(b,"NotVisible")}function openWin(b,c){window.open(b,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(b,c){window.open(b,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(b,c){window.open(b,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(b){var c={sm:openWin,lg:openWinL,xl:openWinXL};b(document).on("click","a.poplink",function(){var a=b(this).data("popargs");(c[a.size||"sm"]||openWin)(this.href,a.name||"popwin");return!1})});
(function(){var b=jQuery,c={},a=function(a){null!==a&&"undefined"!==typeof a?b("#myListCount").text(a):(a=b("#myListCount").text())&&(a=parseInt(a,10));a?c.myListLink.show():c.myListLink.hide()},f=function(a){b.each(a,function(d,a){b("#added_to_list_"+a).show();b("#add_to_list_"+a).hide()})},e=function(z){return function(d){d.fail?alert(d.errinfo):(d.ids?a(b.grep(d.ids,w[c.domain]).length):d.count?a(d.count):a(0),f([z]))}},g=function(a){a=b(a.currentTarget).data("id");b.ajax({success:e(a),dataType:"json",
error:function(){alert("Error")},data:{id:a},type:"POST",url:c.current_list_url})},s=function(a){return function(d){if(d.fail)alert(d.errinfo);else{d=!0;if(a){var c=b("#results_table #remove_from_list_"+a);c.length?c.parent().parent().remove():(d=!1,c=b("#results_container #remove_from_list_"+a),c.parents(".dlist-result").remove())}c=!1;if((c=d?1===b("#results_table tr").length:0===b("#results_container .dlist-result").length)||!a)b("#records_ui").hide(),b("#no_records_message").show()}}},t=function(a){a=
b(a.currentTarget).data("id");b.ajax({success:s(a),dataType:"json",error:function(){alert("Error")},data:{ID:a,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},n=function(a){b.ajax({success:s(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},w={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},v=function(e){if(e.fail)A();else if(e.inrequest){var d=b.grep(e.ids,
w[c.domain]);f(d);a(d.length);(e=e.previous_ids)&&b.each(e,function(a,d){b("#ct_added_to_previous_request_"+d).show()});b(".ListUI img").prop("src",function(a,b){return b.replace("list","referral")});b("#list_header_text").hide();b("#ct_header_text").show();c.current_list_url=c.ct_update_url;r()}else A()},A=function(){var e=function(){c.list_view_mode||f(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;a((c.already_added||[]).length);
r()};c.list_view_mode||c.has_session?e():b.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&e()}})},r=function(){b(".HideListUI").delegate(".add_to_list","click",g).delegate(".remove_from_list","click",t).removeClass("HideListUI");b("#remove_all_from_list").click(n);b.browser.msie&&"8.0">b.browser.msie&&b(".ListUI").removeClass("FixIE")};window.init_list_adder=function(a){c=a;c.myListLink=b("#myListLink").parent(":hidden").add("#myListLink");
a.in_request?b.ajax({success:v,dataType:"json",error:null,type:"POST",url:a.in_request}):A()}})();this.JSON||(this.JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function c(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=t[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,e){var f,r,t,d,u=g,h,m=e[b];m&&"object"===typeof m&&"function"===typeof m.toJSON&&(m=m.toJSON(b));"function"===typeof n&&(m=n.call(e,b,m));switch(typeof m){case "string":return c(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);
case "object":if(!m)return"null";g+=s;h=[];if("[object Array]"===Object.prototype.toString.apply(m)){d=m.length;for(f=0;f<d;f+=1)h[f]=a(f,m)||"null";t=0===h.length?"[]":g?"[\n"+g+h.join(",\n"+g)+"\n"+u+"]":"["+h.join(",")+"]";g=u;return t}if(n&&"object"===typeof n)for(d=n.length,f=0;f<d;f+=1)r=n[f],"string"===typeof r&&(t=a(r,m))&&h.push(c(r)+(g?": ":":")+t);else for(r in m)Object.hasOwnProperty.call(m,r)&&(t=a(r,m))&&h.push(c(r)+(g?": ":":")+t);t=0===h.length?"{}":g?"{\n"+g+h.join(",\n"+g)+"\n"+
u+"}":"{"+h.join(",")+"}";g=u;return t}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,s,t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,e){var f;s=g="";if("number"===typeof e)for(f=0;f<e;f+=1)s+=" ";else"string"===typeof e&&(s=e);if((n=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,f,m=a[d];if(m&&"object"===typeof m)for(e in m)Object.hasOwnProperty.call(m,e)&&(f=c(m,e),void 0!==f?m[e]=f:delete m[e]);return b.call(a,d,m)}var e;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(b){var c={};jQuery(b).find("input,select,textarea").each(function(a){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var b=c[this.name];$(this).find("option").each(function(a){this.selected&&b.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(b,c){var a=jQuery;a(b).find("input,select,textarea").each(function(b){if(this.name){var e=
c[this.name];"undefined"!=typeof e&&null!==e&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?a(this).find("option").each(function(b){this.selected=1<e.length?0<=a.inArray(this.value,e):0===e.length?!1:this.value===e[0]}):this.value=e.length?e[0]:"":this.checked=1<e.length?0<=a.inArray(this.value,e):0===e.length?!1:this.value===e[0])}})};window.init_cached_state=function(b){var c=jQuery;b=b||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];c(window).on("beforeunload",function(){var a={form_values:get_form_values(b)};c.each(onbeforeunload_fns,function(b,c){c(a)});document.getElementById("cache_form_values").value=JSON.stringify(a)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var a=document.getElementById("cache_form_values");if(a&&a.value){var f=
JSON.parse(a.value);c.each(onbeforerestorevalues_fns,function(a,b){b(f)});restore_form_values(b,f.form_values)}}}})();
(function(){var b=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},a={"en-CA":!0,"":!0},f={},e={"fr-CA":"fr","es-MX":"es"},g=function(){var a=b(this),e=a.data("culture"),f=c[e]||b.datepicker.regional[e].dateFormat,g={};a.hasClass("NoYear")&&(f=f.replace(/[\- .\/]*yy[\/]?/,""),g={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});g.dateFormat=f;a.datepicker(b.extend({},b.datepicker.regional[e],g)).prop("autocomplete","off")},s=function(c){b.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+b.ui.version+"/i18n/jquery.ui.datepicker-"+c+".min.js",function(){a[c]=!0;b.each(f[c],function(){g.call(this)});delete f[c]})};b.datepicker.regional["en-CA"]=b.extend({},b.datepicker.regional[""]);b.fn.extend({autodatepicker:function(){return this.each(function(){var c=
b(this),n;n=c.parents("[lang]").first().prop("lang")||"en-CA";n=e[n]||n;c.data("culture",n);a[n]?g.call(this):(c=f[n],c||(c=f[n]=[],s(n)),c.push(this))})}});jQuery(function(){b("input.DatePicker").autodatepicker()})})();
(function(b,c){var a,f,e,g,s,t,n,w,v,A,r,z,d,u,h,m,D,K,O,L,F,I,M,G;a=function(l){return new a.prototype.init(l)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=a:b.Globalize=a;a.cultures={};a.prototype={constructor:a,init:function(l){this.cultures=a.cultures;this.cultureSelector=l;return this}};a.prototype.init.prototype=a.prototype;a.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};a.cultures["default"].calendar=a.cultures["default"].calendars.standard;a.cultures.en=a.cultures["default"];a.cultureSelector="en";f=/^0x[a-f0-9]+$/i;e=/^[+\-]?infinity$/i;g=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;s=/^\s+|\s+$/g;t=function(l,a){if(l.indexOf)return l.indexOf(a);for(var p=0,b=l.length;p<b;p++)if(l[p]===a)return p;return-1};n=function(l,a){return l.substr(l.length-a.length)===a};w=function(){var l,a,p,b,d,e=arguments[0]||{},f=1,k=arguments.length,
C=!1;"boolean"===typeof e&&(C=e,e=arguments[1]||{},f=2);for("object"===typeof e||A(e)||(e={});f<k;f++)if(null!=(l=arguments[f]))for(a in l)p=e[a],b=l[a],e!==b&&(C&&b&&(r(b)||(d=v(b)))?(d?(d=!1,p=p&&v(p)?p:[]):p=p&&r(p)?p:{},e[a]=w(C,p,b)):b!==c&&(e[a]=b));return e};v=Array.isArray||function(l){return"[object Array]"===Object.prototype.toString.call(l)};A=function(l){return"[object Function]"===Object.prototype.toString.call(l)};r=function(l){return"[object Object]"===Object.prototype.toString.call(l)};
z=function(l,a){return 0===l.indexOf(a)};d=function(l){return(l+"").replace(s,"")};u=function(l){return isNaN(l)?NaN:Math[0>l?"ceil":"floor"](l)};h=function(l,a,b){var d;for(d=l.length;d<a;d+=1)l=b?"0"+l:l+"0";return l};m=function(l,a){for(var b=0,d=!1,c=0,e=l.length;c<e;c++){var f=l.charAt(c);switch(f){case "'":d?a.push("'"):b++;d=!1;break;case "\\":d&&a.push("\\");d=!d;break;default:a.push(f),d=!1}}return b};D=function(l,a){a=a||"F";var b;b=l.patterns;var d=a.length;if(1===d){b=b[a];if(!b)throw"Invalid date format string '"+
a+"'.";a=b}else 2===d&&"%"===a.charAt(0)&&(a=a.charAt(1));return a};K=function(a,b,p){function d(a,b){var l;l=a+"";return 1<b&&l.length<b?(l=g[b-2]+l,l.substr(l.length-b,b)):l}function c(){if(h||n)return h;h=u.test(b);n=!0;return h}function e(a,b){if(H)return H[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var f=p.calendar,k=f.convert;if(!b||!b.length||"i"===b){if(p&&p.name.length)if(k)p=K(a,f.patterns.F,p);else{p=
new Date(a.getTime());var C=F(a,f.eras);p.setFullYear(I(a,f,C));p=p.toLocaleString()}else p=a.toString();return p}var C=f.eras,Q="s"===b;b=D(f,b);p=[];var q,g=["0","00","000"],h,n,u=/([^d]|^)(d|dd)([^d]|$)/g,r=0,s=L(),H;for(!Q&&k&&(H=k.fromGregorian(a));;){q=s.lastIndex;k=s.exec(b);q=b.slice(q,k?k.index:b.length);r+=m(q,p);if(!k)break;if(r%2)p.push(k[0]);else switch(q=k[0],k=q.length,q){case "ddd":case "dddd":p.push((3===k?f.days.namesAbbr:f.days.names)[a.getDay()]);break;case "d":case "dd":h=!0;
p.push(d(e(a,2),k));break;case "MMM":case "MMMM":q=e(a,1);p.push(f.monthsGenitive&&c()?f.monthsGenitive[3===k?"namesAbbr":"names"][q]:f.months[3===k?"namesAbbr":"names"][q]);break;case "M":case "MM":p.push(d(e(a,1)+1,k));break;case "y":case "yy":case "yyyy":q=H?H[0]:I(a,f,F(a,C),Q);4>k&&(q%=100);p.push(d(q,k));break;case "h":case "hh":q=a.getHours()%12;0===q&&(q=12);p.push(d(q,k));break;case "H":case "HH":p.push(d(a.getHours(),k));break;case "m":case "mm":p.push(d(a.getMinutes(),k));break;case "s":case "ss":p.push(d(a.getSeconds(),
k));break;case "t":case "tt":q=12>a.getHours()?f.AM?f.AM[0]:" ":f.PM?f.PM[0]:" ";p.push(1===k?q.charAt(0):q);break;case "f":case "ff":case "fff":p.push(d(a.getMilliseconds(),3).substr(0,k));break;case "z":case "zz":q=a.getTimezoneOffset()/60;p.push((0>=q?"+":"-")+d(Math.floor(Math.abs(q)),k));break;case "zzz":q=a.getTimezoneOffset()/60;p.push((0>=q?"+":"-")+d(Math.floor(Math.abs(q)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":f.eras&&p.push(f.eras[F(a,C)].name);break;
case "/":p.push(f["/"]);break;default:throw"Invalid date format pattern '"+q+"'.";}}return p.join("")};(function(){var a;a=function(a,b,l){var d=l.groupSizes,c=d[0],e=1,k=Math.pow(10,b),k=Math.round(a*k)/k;isFinite(k)||(k=a);a=k+"";var k="",k=a.split(/e/i),f=1<k.length?parseInt(k[1],10):0;a=k[0];k=a.split(".");a=k[0];k=1<k.length?k[1]:"";0<f?(k=h(k,f,!1),a+=k.slice(0,f),k=k.substr(f)):0>f&&(f=-f,a=h(a,f+1,!0),k=a.slice(-f,a.length)+k,a=a.slice(0,-f));k=0<b?l["."]+(k.length>b?k.slice(0,b):h(k,b)):
"";b=a.length-1;l=l[","];for(f="";0<=b;){if(0===c||c>b)return a.slice(0,b+1)+(f.length?l+f+k:k);f=a.slice(b-c+1,b+1)+(f.length?l+f:"");b-=c;e<d.length&&(c=d[e],e++)}return a.slice(0,b+1)+l+f+k};O=function(b,d,c){if(!isFinite(b))return Infinity===b?c.numberFormat.positiveInfinity:-Infinity===b?c.numberFormat.negativeInfinity:c.numberFormat.NaN;if(!d||"i"===d)return c.name.length?b.toLocaleString():b.toString();d=d||"D";c=c.numberFormat;var f=Math.abs(b),e=-1;1<d.length&&(e=parseInt(d.slice(1),10));
var g=d.charAt(0).toUpperCase(),k;switch(g){case "D":d="n";f=u(f);-1!==e&&(f=h(""+f,e,!0));0>b&&(f="-"+f);break;case "N":k=c;case "C":k=k||c.currency;case "P":k=k||c.percent;d=0>b?k.pattern[0]:k.pattern[1]||"n";-1===e&&(e=k.decimals);f=a(f*("P"===g?100:1),e,k);break;default:throw"Bad number format specifier: "+g;}b=/n|\$|-|%/g;for(k="";;){e=b.lastIndex;g=b.exec(d);k+=d.slice(e,g?g.index:d.length);if(!g)break;switch(g[0]){case "n":k+=f;break;case "$":k+=c.currency.symbol;break;case "-":/[1-9]/.test(f)&&
(k+=c["-"]);break;case "%":k+=c.percent.symbol}}return k}})();L=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};F=function(a,b){if(!b)return 0;for(var d,c=a.getTime(),f=0,e=b.length;f<e;f++)if(d=b[f].start,null===d||c>=d)return f;return 0};I=function(a,b,d,c){a=a.getFullYear();!c&&b.eras&&(a-=b.eras[d].offset);return a};(function(){var a,b,c,f,e,g,h;a=function(a,b){if(100>b){var l=new Date,d=F(l),l=I(l,a,d),d=a.twoDigitYearMax,d="string"===
typeof d?(new Date).getFullYear()%100+parseInt(d,10):d;b+=l-l%100;b>d&&(b-=100)}return b};b=function(a,b,l){var d=a.days,c=a._upperDays;c||(a._upperDays=c=[h(d.names),h(d.namesAbbr),h(d.namesShort)]);b=g(b);l?(a=t(c[1],b),-1===a&&(a=t(c[2],b))):a=t(c[0],b);return a};c=function(a,b,l){var d=a.months,c=a.monthsGenitive||a.months,e=a._upperMonths,f=a._upperMonthsGen;e||(a._upperMonths=e=[h(d.names),h(d.namesAbbr)],a._upperMonthsGen=f=[h(c.names),h(c.namesAbbr)]);b=g(b);a=t(l?e[1]:e[0],b);0>a&&(a=t(l?
f[1]:f[0],b));return a};f=function(a,b){var l=a._parseRegExp;if(l){var d=l[b];if(d)return d}else a._parseRegExp=l={};for(var d=D(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],e=[],f=0,p=0,P=L(),g;null!==(g=P.exec(d));){var h=d.slice(f,g.index),f=P.lastIndex,p=p+m(h,c);if(p%2)c.push(g[0]);else{var h=g[0],R=h.length;switch(h){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":h="(\\D+)";break;case "tt":case "t":h="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":h=
"(\\d{"+R+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":h="(\\d\\d?)";break;case "zzz":h="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":h="([+-]?\\d\\d?)";break;case "/":h="(\\/)";break;default:throw"Invalid date format pattern '"+h+"'.";}h&&c.push(h);e.push(g[0])}}m(d.slice(f),c);c.push("$");d={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:e};return l[b]=d};e=function(a,b,d){return a<b||a>d};g=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
h=function(a){for(var b=[],d=0,l=a.length;d<l;d++)b[d]=g(a[d]);return b};M=function(k,h,g){k=d(k);g=g.calendar;h=f(g,h);var q=(new RegExp(h.regExp)).exec(k);if(null===q)return null;var m=h.groups,n=h=k=null,u=null,J=null,r=0,s,t=0,N=0,w=0;s=null;for(var D=!1,v=0,A=m.length;v<A;v++){var x=q[v+1];if(x){var y=m[v],E=y.length,B=parseInt(x,10);switch(y){case "dd":case "d":u=B;if(e(u,1,31))return null;break;case "MMM":case "MMMM":n=c(g,x,3===E);if(e(n,0,11))return null;break;case "M":case "MM":n=B-1;if(e(n,
0,11))return null;break;case "y":case "yy":case "yyyy":h=4>E?a(g,B):B;if(e(h,0,9999))return null;break;case "h":case "hh":r=B;12===r&&(r=0);if(e(r,0,11))return null;break;case "H":case "HH":r=B;if(e(r,0,23))return null;break;case "m":case "mm":t=B;if(e(t,0,59))return null;break;case "s":case "ss":N=B;if(e(N,0,59))return null;break;case "tt":case "t":D=g.PM&&(x===g.PM[0]||x===g.PM[1]||x===g.PM[2]);if(!D&&(!g.AM||x!==g.AM[0]&&x!==g.AM[1]&&x!==g.AM[2]))return null;break;case "f":case "ff":case "fff":w=
B*Math.pow(10,3-E);if(e(w,0,999))return null;break;case "ddd":case "dddd":J=b(g,x,3===E);if(e(J,0,6))return null;break;case "zzz":y=x.split(/:/);if(2!==y.length)return null;s=parseInt(y[0],10);if(e(s,-12,13))return null;y=parseInt(y[1],10);if(e(y,0,59))return null;s=60*s+(z(x,"-")?-y:y);break;case "z":case "zz":s=B;if(e(s,-12,13))return null;s*=60;break;case "g":case "gg":if(!x||!g.eras)return null;x=d(x.toLowerCase());y=0;for(E=g.eras.length;y<E;y++)if(x===g.eras[y].name.toLowerCase()){k=y;break}if(null===
k)return null}}}q=new Date;m=(v=g.convert)?v.fromGregorian(q)[0]:q.getFullYear();null===h?h=m:g.eras&&(h+=g.eras[k||0].offset);null===n&&(n=0);null===u&&(u=1);if(v){if(q=v.toGregorian(h,n,u),null===q)return null}else if(q.setFullYear(h,n,u),q.getDate()!==u||null!==J&&q.getDay()!==J)return null;D&&12>r&&(r+=12);q.setHours(r,t,N,w);null!==s&&(g=q.getMinutes()-(s+q.getTimezoneOffset()),q.setHours(q.getHours()+parseInt(g/60,10),g%60));return q}})();G=function(a,b,d){var c=b["-"];b=b["+"];var e;switch(d){case "n -":c=
" "+c,b=" "+b;case "n-":n(a,c)?e=["-",a.substr(0,a.length-c.length)]:n(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":c+=" ",b+=" ";case "-n":z(a,c)?e=["-",a.substr(c.length)]:z(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":z(a,"(")&&n(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};a.prototype.findClosestCulture=function(b){return a.findClosestCulture.call(this,b)};a.prototype.format=function(b,d,c){return a.format.call(this,b,d,c)};a.prototype.localize=function(b,
d){return a.localize.call(this,b,d)};a.prototype.parseInt=function(b,d,c){return a.parseInt.call(this,b,d,c)};a.prototype.parseFloat=function(b,d,c){return a.parseFloat.call(this,b,d,c)};a.prototype.culture=function(b){return a.culture.call(this,b)};a.addCultureInfo=function(a,b,d){var c={},e=!1;"string"!==typeof a?(d=a,a=this.culture().name,c=this.cultures[a]):"string"!==typeof b?(d=b,e=null==this.cultures[a],c=this.cultures[a]||this.cultures["default"]):(e=!0,c=this.cultures[b]);this.cultures[a]=
w(!0,{},c,d);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};a.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(v(a)){var c,e=this.cultures,f=a,g,h=f.length,k=[];for(g=0;g<h;g++)a=d(f[g]),a=a.split(";"),c=d(a[0]),1===a.length?a=1:(a=d(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),k.push({lang:c,pri:a});k.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(g=0;g<h;g++)if(c=k[g].lang,b=e[c])return b;for(g=0;g<h;g++){c=k[g].lang;do{f=c.lastIndexOf("-");if(-1===f)break;c=c.substr(0,f);if(b=e[c])return b}while(1)}for(g=0;g<h;g++){c=k[g].lang;for(var m in e)if(f=e[m],f.language==c)return f}}else if("object"===typeof a)return a;return b||null};a.format=function(a,b,d){d=this.findClosestCulture(d);a instanceof Date?a=K(a,b,d):"number"===typeof a&&(a=O(a,b,d));return a};a.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};a.parseDate=function(a,b,d){d=this.findClosestCulture(d);var c,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var f=b.length;e<f;e++){var g=b[e];if(g&&(c=M(a,g,d)))break}}}else for(e in b=d.calendar.patterns,b)if(c=M(a,b[e],d))break;return c||null};a.parseInt=function(b,d,c){return u(a.parseFloat(b,d,c))};a.parseFloat=function(a,b,c){"number"!==typeof b&&(c=b,b=10);var h=this.findClosestCulture(c);c=NaN;var m=h.numberFormat;-1<a.indexOf(h.numberFormat.currency.symbol)&&
(a=a.replace(h.numberFormat.currency.symbol,""),a=a.replace(h.numberFormat.currency["."],h.numberFormat["."]));a=d(a);if(e.test(a))c=parseFloat(a);else if(!b&&f.test(a))c=parseInt(a,16);else{h=G(a,m,m.pattern[0]);b=h[0];h=h[1];""===b&&"(n)"!==m.pattern[0]&&(h=G(a,m,"(n)"),b=h[0],h=h[1]);""===b&&"-n"!==m.pattern[0]&&(h=G(a,m,"-n"),b=h[0],h=h[1]);b=b||"+";var n;a=h.indexOf("e");0>a&&(a=h.indexOf("E"));0>a?(n=h,a=null):(n=h.substr(0,a),a=h.substr(a+1));var u=m["."],k=n.indexOf(u);0>k?(h=n,n=null):(h=
n.substr(0,k),n=n.substr(k+u.length));u=m[","];h=h.split(u).join("");k=u.replace(/\u00A0/g," ");u!==k&&(h=h.split(k).join(""));b+=h;null!==n&&(b+="."+n);null!==a&&(m=G(a,m,"-n"),b+="e"+(m[0]||"+")+m[1]);g.test(b)&&(c=parseFloat(b))}return c};a.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
(function(b){var c=null,a=200,f,e=null,g=null,s=null,t=null,n=function(a,b){var c=a.id.substr(12),c=document.getElementById("status_"+c);c.innerHTML=b;c.className=""},w=function(a){g.value=a.rowIndex;for(a=a.nextSibling;a&&(!/\bRowToCode\b/.test(a.className)||"tr"!==a.nodeName.toLowerCase());)a=a.nextSibling;return a},v=function(a,c,h){var g=a.id.substr(12);n(a,b.updating);var r=f===s.current?a.getAttribute("geocode_type"):f,v=null===e?a.getAttribute("map_pin"):e;c={NUM:g,GEOCODE_TYPE:r,MAP_PIN:v,
LATITUDE:c?Globalize.format(c.lat(),"n6"):"",LONGITUDE:c?Globalize.format(c.lng(),"n6"):""};$.ajax(t,{data:c,type:"post",dataType:"json",success:function(b){n(a,b.msg);h&&h()},error:function(){n(a,b.error_server);h&&h()}})},A=function(c,e){return function(f,g,s){if(g!==google.maps.GeocoderStatus.OK){console.log(g,f,s);if(g===google.maps.GeocoderStatus.OVER_QUERY_LIMIT){a+=100;r(c);return}if(g!==google.maps.GeocoderStatus.ZERO_RESULTS||e){f=null;switch(g){case google.maps.GeocoderStatus.ZERO_RESULTS:f=
b.error_unknown_address;break;case google.maps.GeocoderStatus.REQUEST_DENIED:f=b.error_map_key_fail;break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:f=b.error_too_many_queries;break;default:f=b.error_unknown_error+g}n(c,f)}else{r(c,!0);return}}else e&&(document.getElementById("status_no_pc_"+c.id.substr(12)).className="Alert"),v(c,f[0].geometry.location);c=w(c);r(c)}},r=function(d,g){if(d){var h=d.getAttribute("can_update"),m=d.getAttribute("geocode_type");if("1"!==h||null===e&&(f===s.dont_change||
f===s.current&&(m===s.blank.toString()||m===s.manual.toString())))n(d,b.nochange),d=w(d),r(d);else if(f===s.dont_change)v(d,null,function(){d=w(d);r(d)});else if(f===s.blank)m!==s.blank&&(v(d,null),d=w(d),r(d));else{var t;(t=g?d.getAttribute("geocode_query_no_pc"):d.getAttribute("geocode_query"))&&"Canada"!==t?setTimeout(function(){n(d,b.coding);c.geocode({address:t},A(d,g))},a):(g?n(d,b.unknown):n(d,b.nochange),d=w(d),r(d))}}};window.maps_loaded=function(){c=new google.maps.Geocoder;var a=document.getElementById("table_header");
"0"!==g.value&&(a=document.getElementById("geocode_table").rows[g.value]);a=w(a);r(a)};var z=function(a,b){$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+b+"&sensor=false&callback=maps_loaded&language="+a)};window.initialize=function(a){e=a.map_pin_target;s=a.types;t=a.url;f=a.geocode_type_target;Globalize.culture(a.culture);b=a.status_messages;g=document.getElementById("stateField");if("0"!==g.value){var c=document.getElementById("restart_geocode"),h=document.getElementById("continue_geocode");
c.className="";c.onclick=function(){g.value="0";c.className="NotVisible";h.className="NotVisible";z(a.culture,a.key_arg)};document.getElementById("geocode_table").rows.length-1>g.value&&(h.className="",h.onclick=function(){c.className="NotVisible";h.className="NotVisible";z(a.culture,a.key_arg)})}else z(a.culture,a.key_arg)}})();
