window.CIOC={};
(function(b,c){c.do_drop_down_navigation=function(){for(var a=b.getElementById("ActionList").options,f=0;f<a.length;f++)if(a[f].selected){var e=a[f].getAttribute("href");e&&("undefined"!=typeof a[f].attributes.newwindow?c.open(e):c.location.href=e);break}};jQuery(function(b){b("[data-toggle=dialog]").each(function(){var c=b(this),e=b(c.data("target")),g={autoOpen:!1,title:e.data("title"),modal:e.data("modal")};e.dialog(g);c.click(function(){e.dialog("isOpen")?e.dialog("close"):e.dialog("open")})})})})(document,window);
function CheckAll(b,c){b||(b="IDList");var a=c;c||(a=document.RecordList);for(var f=a.elements.length,e=0;e<f;e++){var g=a.elements[e];g.name===b&&(g.checked=!0)}}function ClearAll(b,c){b||(b="IDList");var a=c;c||(a=document.RecordList);for(var f=a.elements.length,e=0;e<f;e++){var g=a.elements[e];g.name===b&&(g.checked=!1)}}function add_class(b,c){b&&!(new RegExp("\\b"+c+"\\b")).test(b.className)&&(b.className&&(c=" "+c),b.className+=c)}
function remove_class(b,c){if(b){for(var a=b.className.split(" "),f=[],e=0;e<a.length;e++){var g=a[e];g!==c&&f.push(g)}b.className=f.join(" ")}}function hide(b){add_class(b,"NotVisible")}function show(b){remove_class(b,"NotVisible")}function openWin(b,c){window.open(b,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(b,c){window.open(b,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(b,c){window.open(b,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(b){var c={sm:openWin,lg:openWinL,xl:openWinXL};b(document).on("click","a.poplink",function(){var a=b(this).data("popargs");(c[a.size||"sm"]||openWin)(this.href,a.name||"popwin");return!1})});
(function(){var b=jQuery,c={},a=function(a){null!==a&&"undefined"!==typeof a?b("#myListCount").text(a):(a=b("#myListCount").text())&&(a=parseInt(a,10));a?c.myListLink.show():c.myListLink.hide()},f=function(a){b.each(a,function(d,a){b("#added_to_list_"+a).show();b("#add_to_list_"+a).hide()})},e=function(B){return function(d){d.fail?alert(d.errinfo):(d.ids?a(b.grep(d.ids,w[c.domain]).length):d.count?a(d.count):a(0),f([B]))}},g=function(a){a=b(a.currentTarget).data("id");b.ajax({success:e(a),dataType:"json",
error:function(){alert("Error")},data:{id:a},type:"POST",url:c.current_list_url})},s=function(a){return function(d){if(d.fail)alert(d.errinfo);else{d=!0;if(a){var c=b("#results_table #remove_from_list_"+a);c.length?c.parent().parent().remove():(d=!1,c=b("#results_container #remove_from_list_"+a),c.parents(".dlist-result").remove())}c=!1;if((c=d?1===b("#results_table tr").length:0===b("#results_container .dlist-result").length)||!a)b("#records_ui").hide(),b("#no_records_message").show()}}},t=function(a){a=
b(a.currentTarget).data("id");b.ajax({success:s(a),dataType:"json",error:function(){alert("Error")},data:{ID:a,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},n=function(a){b.ajax({success:s(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},w={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},u=function(e){if(e.fail)C();else if(e.inrequest){var d=b.grep(e.ids,
w[c.domain]);f(d);a(d.length);(e=e.previous_ids)&&b.each(e,function(a,d){b("#ct_added_to_previous_request_"+d).show()});b(".ListUI img").prop("src",function(a,d){return d.replace("list","referral")});b("#list_header_text").hide();b("#ct_header_text").show();c.current_list_url=c.ct_update_url;r()}else C()},C=function(){var e=function(){c.list_view_mode||f(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;a((c.already_added||[]).length);
r()};c.list_view_mode||c.has_session?e():b.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&e()}})},r=function(){b(".HideListUI").delegate(".add_to_list","click",g).delegate(".remove_from_list","click",t).removeClass("HideListUI");b("#remove_all_from_list").click(n);b.browser.msie&&"8.0">b.browser.msie&&b(".ListUI").removeClass("FixIE")};window.init_list_adder=function(a){c=a;c.myListLink=b("#myListLink").parent(":hidden").add("#myListLink");
a.in_request?b.ajax({success:u,dataType:"json",error:null,type:"POST",url:a.in_request}):C()}})();this.JSON||(this.JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function c(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=t[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,e){var f,r,t,d,y=g,p,l=e[b];l&&"object"===typeof l&&"function"===typeof l.toJSON&&(l=l.toJSON(b));"function"===typeof n&&(l=n.call(e,b,l));switch(typeof l){case "string":return c(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);
case "object":if(!l)return"null";g+=s;p=[];if("[object Array]"===Object.prototype.toString.apply(l)){d=l.length;for(f=0;f<d;f+=1)p[f]=a(f,l)||"null";t=0===p.length?"[]":g?"[\n"+g+p.join(",\n"+g)+"\n"+y+"]":"["+p.join(",")+"]";g=y;return t}if(n&&"object"===typeof n)for(d=n.length,f=0;f<d;f+=1)r=n[f],"string"===typeof r&&(t=a(r,l))&&p.push(c(r)+(g?": ":":")+t);else for(r in l)Object.hasOwnProperty.call(l,r)&&(t=a(r,l))&&p.push(c(r)+(g?": ":":")+t);t=0===p.length?"{}":g?"{\n"+g+p.join(",\n"+g)+"\n"+
y+"}":"{"+p.join(",")+"}";g=y;return t}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,s,t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,c,e){var f;s=g="";if("number"===typeof e)for(f=0;f<e;f+=1)s+=" ";else"string"===typeof e&&(s=e);if((n=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return a("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,f,l=a[d];if(l&&"object"===typeof l)for(e in l)Object.hasOwnProperty.call(l,e)&&(f=c(l,e),void 0!==f?l[e]=f:delete l[e]);return b.call(a,d,l)}var e;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(b){var c={};jQuery(b).find("input,select,textarea").each(function(a){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var b=c[this.name];$(this).find("option").each(function(a){this.selected&&b.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(b,c){var a=jQuery;a(b).find("input,select,textarea").each(function(b){if(this.name){var e=
c[this.name];"undefined"!=typeof e&&null!==e&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?a(this).find("option").each(function(b){this.selected=1<e.length?0<=a.inArray(this.value,e):0===e.length?!1:this.value===e[0]}):this.value=e.length?e[0]:"":this.checked=1<e.length?0<=a.inArray(this.value,e):0===e.length?!1:this.value===e[0])}})};window.init_cached_state=function(b){var c=jQuery;b=b||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];c(window).on("beforeunload",function(){var a={form_values:get_form_values(b)};c.each(onbeforeunload_fns,function(b,c){c(a)});document.getElementById("cache_form_values").value=JSON.stringify(a)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var a=document.getElementById("cache_form_values");if(a&&a.value){var f=
JSON.parse(a.value);c.each(onbeforerestorevalues_fns,function(a,b){b(f)});restore_form_values(b,f.form_values)}}}})();
(function(){var b=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},a={"en-CA":!0,"":!0},f={},e={"fr-CA":"fr","es-MX":"es"},g=function(){var a=b(this),e=a.data("culture"),f=c[e]||b.datepicker.regional[e].dateFormat,g={};a.hasClass("NoYear")&&(f=f.replace(/[\- .\/]*yy[\/]?/,""),g={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});g.dateFormat=f;a.datepicker(b.extend({},b.datepicker.regional[e],g)).prop("autocomplete","off")},s=function(c){b.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+b.ui.version+"/i18n/jquery.ui.datepicker-"+c+".min.js",function(){a[c]=!0;b.each(f[c],function(){g.call(this)});delete f[c]})};b.datepicker.regional["en-CA"]=b.extend({},b.datepicker.regional[""]);b.fn.extend({autodatepicker:function(){return this.each(function(){var c=
b(this),n;n=c.parents("[lang]").first().prop("lang")||"en-CA";n=e[n]||n;c.data("culture",n);a[n]?g.call(this):(c=f[n],c||(c=f[n]=[],s(n)),c.push(this))})}});jQuery(function(){b("input.DatePicker").autodatepicker()})})();
(function(b,c){var a,f,e,g,s,t,n,w,u,C,r,B,d,y,p,l,G,M,Q,N,I,L,O,J;a=function(k){return new a.prototype.init(k)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=a:b.Globalize=a;a.cultures={};a.prototype={constructor:a,init:function(k){this.cultures=a.cultures;this.cultureSelector=k;return this}};a.prototype.init.prototype=a.prototype;a.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};a.cultures["default"].calendar=a.cultures["default"].calendars.standard;a.cultures.en=a.cultures["default"];a.cultureSelector="en";f=/^0x[a-f0-9]+$/i;e=/^[+\-]?infinity$/i;g=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;s=/^\s+|\s+$/g;t=function(k,a){if(k.indexOf)return k.indexOf(a);for(var v=0,b=k.length;v<b;v++)if(k[v]===a)return v;return-1};n=function(k,a){return k.substr(k.length-a.length)===a};w=function(){var k,a,v,b,d,e=arguments[0]||{},f=1,h=arguments.length,
F=!1;"boolean"===typeof e&&(F=e,e=arguments[1]||{},f=2);for("object"===typeof e||C(e)||(e={});f<h;f++)if(null!=(k=arguments[f]))for(a in k)v=e[a],b=k[a],e!==b&&(F&&b&&(r(b)||(d=u(b)))?(d?(d=!1,v=v&&u(v)?v:[]):v=v&&r(v)?v:{},e[a]=w(F,v,b)):b!==c&&(e[a]=b));return e};u=Array.isArray||function(k){return"[object Array]"===Object.prototype.toString.call(k)};C=function(k){return"[object Function]"===Object.prototype.toString.call(k)};r=function(k){return"[object Object]"===Object.prototype.toString.call(k)};
B=function(k,a){return 0===k.indexOf(a)};d=function(k){return(k+"").replace(s,"")};y=function(k){return isNaN(k)?NaN:Math[0>k?"ceil":"floor"](k)};p=function(k,a,b){var d;for(d=k.length;d<a;d+=1)k=b?"0"+k:k+"0";return k};l=function(k,a){for(var b=0,d=!1,c=0,e=k.length;c<e;c++){var f=k.charAt(c);switch(f){case "'":d?a.push("'"):b++;d=!1;break;case "\\":d&&a.push("\\");d=!d;break;default:a.push(f),d=!1}}return b};G=function(k,a){a=a||"F";var b;b=k.patterns;var d=a.length;if(1===d){b=b[a];if(!b)throw"Invalid date format string '"+
a+"'.";a=b}else 2===d&&"%"===a.charAt(0)&&(a=a.charAt(1));return a};M=function(a,b,d){function c(a,k){var b;b=a+"";return 1<k&&b.length<k?(b=g[k-2]+b,b.substr(b.length-k,k)):b}function e(){if(p||n)return p;p=y.test(b);n=!0;return p}function f(a,b){if(K)return K[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var m=d.calendar,h=m.convert;if(!b||!b.length||"i"===b){if(d&&d.name.length)if(h)d=M(a,m.patterns.F,d);else{d=
new Date(a.getTime());var F=I(a,m.eras);d.setFullYear(L(a,m,F));d=d.toLocaleString()}else d=a.toString();return d}var F=m.eras,R="s"===b;b=G(m,b);d=[];var q,g=["0","00","000"],p,n,y=/([^d]|^)(d|dd)([^d]|$)/g,r=0,s=N(),K;for(!R&&h&&(K=h.fromGregorian(a));;){q=s.lastIndex;h=s.exec(b);q=b.slice(q,h?h.index:b.length);r+=l(q,d);if(!h)break;if(r%2)d.push(h[0]);else switch(q=h[0],h=q.length,q){case "ddd":case "dddd":d.push((3===h?m.days.namesAbbr:m.days.names)[a.getDay()]);break;case "d":case "dd":p=!0;
d.push(c(f(a,2),h));break;case "MMM":case "MMMM":q=f(a,1);d.push(m.monthsGenitive&&e()?m.monthsGenitive[3===h?"namesAbbr":"names"][q]:m.months[3===h?"namesAbbr":"names"][q]);break;case "M":case "MM":d.push(c(f(a,1)+1,h));break;case "y":case "yy":case "yyyy":q=K?K[0]:L(a,m,I(a,F),R);4>h&&(q%=100);d.push(c(q,h));break;case "h":case "hh":q=a.getHours()%12;0===q&&(q=12);d.push(c(q,h));break;case "H":case "HH":d.push(c(a.getHours(),h));break;case "m":case "mm":d.push(c(a.getMinutes(),h));break;case "s":case "ss":d.push(c(a.getSeconds(),
h));break;case "t":case "tt":q=12>a.getHours()?m.AM?m.AM[0]:" ":m.PM?m.PM[0]:" ";d.push(1===h?q.charAt(0):q);break;case "f":case "ff":case "fff":d.push(c(a.getMilliseconds(),3).substr(0,h));break;case "z":case "zz":q=a.getTimezoneOffset()/60;d.push((0>=q?"+":"-")+c(Math.floor(Math.abs(q)),h));break;case "zzz":q=a.getTimezoneOffset()/60;d.push((0>=q?"+":"-")+c(Math.floor(Math.abs(q)),2)+":"+c(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":m.eras&&d.push(m.eras[I(a,F)].name);break;
case "/":d.push(m["/"]);break;default:throw"Invalid date format pattern '"+q+"'.";}}return d.join("")};(function(){var a;a=function(a,b,k){var d=k.groupSizes,c=d[0],e=1,h=Math.pow(10,b),h=Math.round(a*h)/h;isFinite(h)||(h=a);a=h+"";var h="",h=a.split(/e/i),f=1<h.length?parseInt(h[1],10):0;a=h[0];h=a.split(".");a=h[0];h=1<h.length?h[1]:"";0<f?(h=p(h,f,!1),a+=h.slice(0,f),h=h.substr(f)):0>f&&(f=-f,a=p(a,f+1,!0),h=a.slice(-f,a.length)+h,a=a.slice(0,-f));h=0<b?k["."]+(h.length>b?h.slice(0,b):p(h,b)):
"";b=a.length-1;k=k[","];for(f="";0<=b;){if(0===c||c>b)return a.slice(0,b+1)+(f.length?k+f+h:h);f=a.slice(b-c+1,b+1)+(f.length?k+f:"");b-=c;e<d.length&&(c=d[e],e++)}return a.slice(0,b+1)+k+f+h};Q=function(b,d,c){if(!isFinite(b))return Infinity===b?c.numberFormat.positiveInfinity:-Infinity===b?c.numberFormat.negativeInfinity:c.numberFormat.NaN;if(!d||"i"===d)return c.name.length?b.toLocaleString():b.toString();d=d||"D";c=c.numberFormat;var e=Math.abs(b),f=-1;1<d.length&&(f=parseInt(d.slice(1),10));
var m=d.charAt(0).toUpperCase(),h;switch(m){case "D":d="n";e=y(e);-1!==f&&(e=p(""+e,f,!0));0>b&&(e="-"+e);break;case "N":h=c;case "C":h=h||c.currency;case "P":h=h||c.percent;d=0>b?h.pattern[0]:h.pattern[1]||"n";-1===f&&(f=h.decimals);e=a(e*("P"===m?100:1),f,h);break;default:throw"Bad number format specifier: "+m;}b=/n|\$|-|%/g;for(h="";;){f=b.lastIndex;m=b.exec(d);h+=d.slice(f,m?m.index:d.length);if(!m)break;switch(m[0]){case "n":h+=e;break;case "$":h+=c.currency.symbol;break;case "-":/[1-9]/.test(e)&&
(h+=c["-"]);break;case "%":h+=c.percent.symbol}}return h}})();N=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};I=function(a,b){if(!b)return 0;for(var d,c=a.getTime(),e=0,f=b.length;e<f;e++)if(d=b[e].start,null===d||c>=d)return e;return 0};L=function(a,b,d,c){a=a.getFullYear();!c&&b.eras&&(a-=b.eras[d].offset);return a};(function(){var a,b,c,e,f,g,m;a=function(a,b){if(100>b){var d=new Date,k=I(d),d=L(d,a,k),k=a.twoDigitYearMax,k="string"===
typeof k?(new Date).getFullYear()%100+parseInt(k,10):k;b+=d-d%100;b>k&&(b-=100)}return b};b=function(a,b,d){var k=a.days,c=a._upperDays;c||(a._upperDays=c=[m(k.names),m(k.namesAbbr),m(k.namesShort)]);b=g(b);d?(a=t(c[1],b),-1===a&&(a=t(c[2],b))):a=t(c[0],b);return a};c=function(a,b,d){var k=a.months,c=a.monthsGenitive||a.months,e=a._upperMonths,f=a._upperMonthsGen;e||(a._upperMonths=e=[m(k.names),m(k.namesAbbr)],a._upperMonthsGen=f=[m(c.names),m(c.namesAbbr)]);b=g(b);a=t(d?e[1]:e[0],b);0>a&&(a=t(d?
f[1]:f[0],b));return a};e=function(a,b){var d=a._parseRegExp;if(d){var k=d[b];if(k)return k}else a._parseRegExp=d={};for(var k=G(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],e=[],f=0,P=0,v=N(),g;null!==(g=v.exec(k));){var A=k.slice(f,g.index),f=v.lastIndex,P=P+l(A,c);if(P%2)c.push(g[0]);else{var A=g[0],m=A.length;switch(A){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":A="(\\D+)";break;case "tt":case "t":A="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":A=
"(\\d{"+m+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":A="(\\d\\d?)";break;case "zzz":A="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":A="([+-]?\\d\\d?)";break;case "/":A="(\\/)";break;default:throw"Invalid date format pattern '"+A+"'.";}A&&c.push(A);e.push(g[0])}}l(k.slice(f),c);c.push("$");k={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:e};return d[b]=k};f=function(a,b,d){return a<b||a>d};g=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
m=function(a){for(var b=[],d=0,k=a.length;d<k;d++)b[d]=g(a[d]);return b};O=function(h,g,m){h=d(h);m=m.calendar;g=e(m,g);var q=(new RegExp(g.regExp)).exec(h);if(null===q)return null;var l=g.groups,p=g=h=null,n=null,y=null,D=0,r,s=0,t=0,G=0;r=null;for(var w=!1,u=0,C=l.length;u<C;u++){var x=q[u+1];if(x){var z=l[u],H=z.length,E=parseInt(x,10);switch(z){case "dd":case "d":n=E;if(f(n,1,31))return null;break;case "MMM":case "MMMM":p=c(m,x,3===H);if(f(p,0,11))return null;break;case "M":case "MM":p=E-1;if(f(p,
0,11))return null;break;case "y":case "yy":case "yyyy":g=4>H?a(m,E):E;if(f(g,0,9999))return null;break;case "h":case "hh":D=E;12===D&&(D=0);if(f(D,0,11))return null;break;case "H":case "HH":D=E;if(f(D,0,23))return null;break;case "m":case "mm":s=E;if(f(s,0,59))return null;break;case "s":case "ss":t=E;if(f(t,0,59))return null;break;case "tt":case "t":w=m.PM&&(x===m.PM[0]||x===m.PM[1]||x===m.PM[2]);if(!w&&(!m.AM||x!==m.AM[0]&&x!==m.AM[1]&&x!==m.AM[2]))return null;break;case "f":case "ff":case "fff":G=
E*Math.pow(10,3-H);if(f(G,0,999))return null;break;case "ddd":case "dddd":y=b(m,x,3===H);if(f(y,0,6))return null;break;case "zzz":z=x.split(/:/);if(2!==z.length)return null;r=parseInt(z[0],10);if(f(r,-12,13))return null;z=parseInt(z[1],10);if(f(z,0,59))return null;r=60*r+(B(x,"-")?-z:z);break;case "z":case "zz":r=E;if(f(r,-12,13))return null;r*=60;break;case "g":case "gg":if(!x||!m.eras)return null;x=d(x.toLowerCase());z=0;for(H=m.eras.length;z<H;z++)if(x===m.eras[z].name.toLowerCase()){h=z;break}if(null===
h)return null}}}q=new Date;l=(u=m.convert)?u.fromGregorian(q)[0]:q.getFullYear();null===g?g=l:m.eras&&(g+=m.eras[h||0].offset);null===p&&(p=0);null===n&&(n=1);if(u){if(q=u.toGregorian(g,p,n),null===q)return null}else if(q.setFullYear(g,p,n),q.getDate()!==n||null!==y&&q.getDay()!==y)return null;w&&12>D&&(D+=12);q.setHours(D,s,t,G);null!==r&&(m=q.getMinutes()-(r+q.getTimezoneOffset()),q.setHours(q.getHours()+parseInt(m/60,10),m%60));return q}})();J=function(a,b,d){var c=b["-"];b=b["+"];var e;switch(d){case "n -":c=
" "+c,b=" "+b;case "n-":n(a,c)?e=["-",a.substr(0,a.length-c.length)]:n(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":c+=" ",b+=" ";case "-n":B(a,c)?e=["-",a.substr(c.length)]:B(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":B(a,"(")&&n(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};a.prototype.findClosestCulture=function(b){return a.findClosestCulture.call(this,b)};a.prototype.format=function(b,d,c){return a.format.call(this,b,d,c)};a.prototype.localize=function(b,
d){return a.localize.call(this,b,d)};a.prototype.parseInt=function(b,d,c){return a.parseInt.call(this,b,d,c)};a.prototype.parseFloat=function(b,d,c){return a.parseFloat.call(this,b,d,c)};a.prototype.culture=function(b){return a.culture.call(this,b)};a.addCultureInfo=function(a,b,d){var c={},e=!1;"string"!==typeof a?(d=a,a=this.culture().name,c=this.cultures[a]):"string"!==typeof b?(d=b,e=null==this.cultures[a],c=this.cultures[a]||this.cultures["default"]):(e=!0,c=this.cultures[b]);this.cultures[a]=
w(!0,{},c,d);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};a.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(u(a)){var c,e=this.cultures,f=a,g,m=f.length,h=[];for(g=0;g<m;g++)a=d(f[g]),a=a.split(";"),c=d(a[0]),1===a.length?a=1:(a=d(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),h.push({lang:c,pri:a});h.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(g=0;g<m;g++)if(c=h[g].lang,b=e[c])return b;for(g=0;g<m;g++){c=h[g].lang;do{f=c.lastIndexOf("-");if(-1===f)break;c=c.substr(0,f);if(b=e[c])return b}while(1)}for(g=0;g<m;g++){c=h[g].lang;for(var l in e)if(f=e[l],f.language==c)return f}}else if("object"===typeof a)return a;return b||null};a.format=function(a,b,d){d=this.findClosestCulture(d);a instanceof Date?a=M(a,b,d):"number"===typeof a&&(a=Q(a,b,d));return a};a.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};a.parseDate=function(a,b,d){d=this.findClosestCulture(d);var c,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var f=b.length;e<f;e++){var g=b[e];if(g&&(c=O(a,g,d)))break}}}else for(e in b=d.calendar.patterns,b)if(c=O(a,b[e],d))break;return c||null};a.parseInt=function(b,d,c){return y(a.parseFloat(b,d,c))};a.parseFloat=function(a,b,c){"number"!==typeof b&&(c=b,b=10);var l=this.findClosestCulture(c);c=NaN;var p=l.numberFormat;-1<a.indexOf(l.numberFormat.currency.symbol)&&
(a=a.replace(l.numberFormat.currency.symbol,""),a=a.replace(l.numberFormat.currency["."],l.numberFormat["."]));a=d(a);if(e.test(a))c=parseFloat(a);else if(!b&&f.test(a))c=parseInt(a,16);else{l=J(a,p,p.pattern[0]);b=l[0];l=l[1];""===b&&"(n)"!==p.pattern[0]&&(l=J(a,p,"(n)"),b=l[0],l=l[1]);""===b&&"-n"!==p.pattern[0]&&(l=J(a,p,"-n"),b=l[0],l=l[1]);b=b||"+";var n;a=l.indexOf("e");0>a&&(a=l.indexOf("E"));0>a?(n=l,a=null):(n=l.substr(0,a),a=l.substr(a+1));var m=p["."],h=n.indexOf(m);0>h?(l=n,n=null):(l=
n.substr(0,h),n=n.substr(h+m.length));m=p[","];l=l.split(m).join("");h=m.replace(/\u00A0/g," ");m!==h&&(l=l.split(h).join(""));b+=l;null!==n&&(b+="."+n);null!==a&&(p=J(a,p,"-n"),b+="e"+(p[0]||"+")+p[1]);g.test(b)&&(c=parseFloat(b))}return c};a.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
(function(b){var c=null,a=200,f,e=null,g=null,s=null,t=null,n=function(a,b){var c=a.id.substr(12),c=document.getElementById("status_"+c);c.innerHTML=b;c.className=""},w=function(a){g.value=a.rowIndex;for(a=a.nextSibling;a&&(!/\bRowToCode\b/.test(a.className)||"tr"!==a.nodeName.toLowerCase());)a=a.nextSibling;return a},u=function(a,c,g){var l=a.id.substr(12);n(a,b.updating);var r=f===s.current?a.getAttribute("geocode_type"):f,u=null===e?a.getAttribute("map_pin"):e;c={NUM:l,GEOCODE_TYPE:r,MAP_PIN:u,
LATITUDE:c?Globalize.format(c.lat(),"n6"):"",LONGITUDE:c?Globalize.format(c.lng(),"n6"):""};$.ajax(t,{data:c,type:"post",dataType:"json",success:function(b){n(a,b.msg);g&&g()},error:function(){n(a,b.error_server);g&&g()}})},C=function(b,c){return function(e,f){if(f!==google.maps.GeocoderStatus.OK){if(f===google.maps.GeocoderStatus.OVER_QUERY_LIMIT){a+=100;r(b);return}if(f!==google.maps.GeocoderStatus.ZERO_RESULTS||c){var g=null;switch(f){case google.maps.GeocoderStatus.ZERO_RESULTS:g=pageconstants.txt_geocode_unknown_address;
break;case google.maps.GeocoderStatus.REQUEST_DENIED:g=pageconstants.txt_geocode_map_key_fail;break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:g=pageconstants.txt_geocode_too_many_queries;break;default:g=pageconstants.txt_geocode_unknown_error+f}n(b,g)}else{r(b,!0);return}}else c&&(document.getElementById("status_no_pc_"+b.id.substr(12)).className="Alert"),u(b,e[0].geometry.location);b=w(b);r(b)}},r=function(d,g){if(d){var p=d.getAttribute("can_update"),l=d.getAttribute("geocode_type");if("1"!==
p||null===e&&(f===s.dont_change||f===s.current&&(l===s.blank.toString()||l===s.manual.toString())))n(d,b.nochange),d=w(d),r(d);else if(f===s.dont_change)u(d,null,function(){d=w(d);r(d)});else if(f===s.blank)l!==s.blank&&(u(d,null),d=w(d),r(d));else{var t;(t=g?d.getAttribute("geocode_query_no_pc"):d.getAttribute("geocode_query"))&&"Canada"!==t?setTimeout(function(){n(d,b.coding);c.geocode({address:t},C(d,g))},a):(g?n(d,b.unknown):n(d,b.nochange),d=w(d),r(d))}}};window.maps_loaded=function(){c=new google.maps.Geocoder;
var a=document.getElementById("table_header");"0"!==g.value&&(a=document.getElementById("geocode_table").rows[g.value]);a=w(a);r(a)};var B=function(a,b){$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+b+"&sensor=false&callback=maps_loaded&language="+a)};window.initialize=function(a){e=a.map_pin_target;s=a.types;t=a.url;f=a.geocode_type_target;Globalize.culture(a.culture);b=a.status_messages;g=document.getElementById("stateField");if("0"!==g.value){var c=document.getElementById("restart_geocode"),
n=document.getElementById("continue_geocode");c.className="";c.onclick=function(){g.value="0";c.className="NotVisible";n.className="NotVisible";B(a.culture,a.key_arg)};document.getElementById("geocode_table").rows.length-1>g.value&&(n.className="",n.onclick=function(){c.className="NotVisible";n.className="NotVisible";B(a.culture,a.key_arg)})}else B(a.culture,a.key_arg)}})();
