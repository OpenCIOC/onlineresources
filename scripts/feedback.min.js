/*
 Globalize

 http://github.com/jquery/globalize

 Copyright Software Freedom Conservancy, Inc.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
window.CIOC={};
(function(h,k){k.do_drop_down_navigation=function(){for(var l=h.getElementById("ActionList").options,c=0;c<l.length;c++)if(l[c].selected){var d=l[c].getAttribute("href");d&&("undefined"!=typeof l[c].attributes.newwindow?k.open(d):k.location.href=d);break}};jQuery(function(l){l("[data-toggle=dialog]").each(function(){var c=l(this),d=l(c.data("target")),v={autoOpen:!1,title:d.data("title"),modal:d.data("modal")};d.dialog(v);c.click(function(){d.dialog("isOpen")?d.dialog("close"):d.dialog("open")})})})})(document,window);
function CheckAll(h,k){h||="IDList";var l=k;k||(l=document.RecordList);k=l.elements.length;for(var c=0;c<k;c++){var d=l.elements[c];d.name===h&&(d.checked=!0)}}function ClearAll(h,k){h||="IDList";var l=k;k||(l=document.RecordList);k=l.elements.length;for(var c=0;c<k;c++){var d=l.elements[c];d.name===h&&(d.checked=!1)}}function add_class(h,k){h&&!(new RegExp("\\b"+k+"\\b")).test(h.className)&&(h.className&&(k=" "+k),h.className+=k)}
function remove_class(h,k){if(h){for(var l=h.className.split(" "),c=[],d=0;d<l.length;d++){var v=l[d];v!==k&&c.push(v)}h.className=c.join(" ")}}function hide(h){add_class(h,"NotVisible")}function show(h){remove_class(h,"NotVisible")}function openWin(h,k){window.open(h,k,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(h,k){window.open(h,k,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(h,k){window.open(h,k,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(h){var k={sm:openWin,lg:openWinL,xl:openWinXL};h(document).on("click","a.poplink",function(){var l=h(this).data("popargs");(k[l.size||"sm"]||openWin)(this.href,l.name||"popwin");return!1})});
(function(){var h=jQuery,k={},l=function(n){null!==n&&"undefined"!==typeof n?h("#myListCount").text(n):(n=h("#myListCount").text())&&(n=parseInt(n,10));n?k.myListLink.show():k.myListLink.hide()},c=function(n){h.each(n,function(y,D){h("#added_to_list_"+D).show();h("#add_to_list_"+D).hide()})},d=function(n){return function(y){y.fail?alert(y.errinfo):(y.ids?l(h.grep(y.ids,p[k.domain]).length):y.count?l(y.count):l(0),c([n]))}},v=function(n){n=h(n.currentTarget).data("id");h.ajax({success:d(n),dataType:"json",
error:function(){alert("Error")},data:{id:n},type:"POST",url:k.current_list_url})},x=function(n){return function(y){if(y.fail)alert(y.errinfo);else{y=!0;if(n){var D=h("#results_table #remove_from_list_"+n);D.length?D.parent().parent().remove():(y=!1,D=h("#results_container #remove_from_list_"+n),D.parents(".dlist-result").remove())}(y?1!==h("#results_table tr").length:0!==h("#results_container .dlist-result").length)&&n||(h("#records_ui").hide(),h("#no_records_message").show())}}},z=function(n){n=
h(n.currentTarget).data("id");h.ajax({success:x(n),dataType:"json",error:function(){alert("Error")},data:{ID:n,RemoveItem:k.domain},type:"POST",url:k.current_list_url})},w=function(n){h.ajax({success:x(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:k.domain},type:"POST",url:k.current_list_url})},p={CIC:function(n){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(n)},VOL:function(n){return/^[1-9][0-9]*$/.test(n)}},u=function(n){if(n.fail)A();else if(n.inrequest){var y=h.grep(n.ids,
p[k.domain]);c(y);l(y.length);(n=n.previous_ids)&&h.each(n,function(D,I){h("#ct_added_to_previous_request_"+I).show()});h(".ListUI img").prop("src",function(D,I){return I.replace("list","referral")});h("#list_header_text").hide();h("#ct_header_text").show();k.current_list_url=k.ct_update_url;C()}else A()},A=function(){var n=function(){k.list_view_mode||c(k.already_added||[]);k.current_list_url=k.list_view_mode&&"ct"===k.list_view_mode?k.ct_update_url:k.list_update_url;l((k.already_added||[]).length);
C()};k.list_view_mode||k.has_session?n():h.ajax({dataType:"json",error:null,url:k.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(y){y.has_session&&n()}})},C=function(){h(".HideListUI").delegate(".add_to_list","click",v).delegate(".remove_from_list","click",z).removeClass("HideListUI");h("#remove_all_from_list").click(w);h.browser.msie&&"8.0">h.browser.msie&&h(".ListUI").removeClass("FixIE")};window.init_list_adder=function(n){k=n;k.myListLink=h("#myListLink").parent(":hidden").add("#myListLink");
n.in_request?h.ajax({success:u,dataType:"json",error:null,type:"POST",url:n.in_request}):A()}})();this.JSON||(this.JSON={});
(function(){function h(p){return 10>p?"0"+p:p}function k(p){d.lastIndex=0;return d.test(p)?'"'+p.replace(d,function(u){var A=z[u];return"string"===typeof A?A:"\\u"+("0000"+u.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+p+'"'}function l(p,u){var A=v,C=u[p];C&&"object"===typeof C&&"function"===typeof C.toJSON&&(C=C.toJSON(p));"function"===typeof w&&(C=w.call(u,p,C));switch(typeof C){case "string":return k(C);case "number":return isFinite(C)?String(C):"null";case "boolean":case "null":return String(C);
case "object":if(!C)return"null";v+=x;var n=[];if("[object Array]"===Object.prototype.toString.apply(C)){var y=C.length;for(p=0;p<y;p+=1)n[p]=l(p,C)||"null";u=0===n.length?"[]":v?"[\n"+v+n.join(",\n"+v)+"\n"+A+"]":"["+n.join(",")+"]";v=A;return u}if(w&&"object"===typeof w)for(y=w.length,p=0;p<y;p+=1){var D=w[p];"string"===typeof D&&(u=l(D,C))&&n.push(k(D)+(v?": ":":")+u)}else for(D in C)Object.hasOwnProperty.call(C,D)&&(u=l(D,C))&&n.push(k(D)+(v?": ":":")+u);u=0===n.length?"{}":v?"{\n"+v+n.join(",\n"+
v)+"\n"+A+"}":"{"+n.join(",")+"}";v=A;return u}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(p){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(p){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v,x,z={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},w;"function"!==typeof JSON.stringify&&(JSON.stringify=function(p,u,A){var C;x=v="";if("number"===typeof A)for(C=0;C<A;C+=1)x+=" ";else"string"===typeof A&&(x=A);if((w=u)&&"function"!==typeof u&&("object"!==typeof u||"number"!==typeof u.length))throw Error("JSON.stringify");return l("",{"":p})});
"function"!==typeof JSON.parse&&(JSON.parse=function(p,u){function A(C,n){var y,D=C[n];if(D&&"object"===typeof D)for(y in D)if(Object.hasOwnProperty.call(D,y)){var I=A(D,y);void 0!==I?D[y]=I:delete D[y]}return u.call(C,n,D)}p=String(p);c.lastIndex=0;c.test(p)&&(p=p.replace(c,function(C){return"\\u"+("0000"+C.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(p.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return p=eval("("+p+")"),"function"===typeof u?A({"":p},""):p;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(h){var k={};jQuery(h).find("input,select,textarea").each(function(l){if(this.name)if(k[this.name]||(k[this.name]=[]),"select"===this.nodeName.toLowerCase()){var c=k[this.name];$(this).find("option").each(function(d){this.selected&&c.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&k[this.name].push(this.value||"")});return k};window.restore_form_values=function(h,k){var l=jQuery;l(h).find("input,select,textarea").each(function(c){if(this.name){var d=
k[this.name];"undefined"!=typeof d&&null!==d&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?l(this).find("option").each(function(v){this.selected=1<d.length?0<=l.inArray(this.value,d):0===d.length?!1:this.value===d[0]}):this.value=d.length?d[0]:"":this.checked=1<d.length?0<=l.inArray(this.value,d):0===d.length?!1:this.value===d[0])}})};window.init_cached_state=function(h){var k=jQuery;h=h||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];var l=function(){var c=document.getElementById("cache_form_values");if(c){var d={form_values:get_form_values(h)};k.each(onbeforeunload_fns,function(v,x){x(d)});c.value=JSON.stringify(d)}};document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&l()});document.addEventListener("freeze",l);window.addEventListener("pagehide",l);window.cache_register_onbeforeunload=function(c){onbeforeunload_fns.push(c)};window.cache_register_onbeforerestorevalues=
function(c){onbeforerestorevalues_fns.push(c)};window.restore_cached_state=function(){k(window).on("pageshow",function(c){if(!c.originalEvent.persisted&&(c=document.getElementById("cache_form_values"))&&c.value){var d=JSON.parse(c.value);k.each(onbeforerestorevalues_fns,function(v,x){x(d)});restore_form_values(h,d.form_values)}})}}})();
(function(){var h=jQuery,k={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},l={"en-CA":!0,"":!0},c={},d={"fr-CA":"fr","es-MX":"es"},v=function(){var z=h(this),w=z.data("culture"),p=k[w]||h.datepicker.regional[w].dateFormat,u={};z.hasClass("NoYear")&&(p=p.replace(/[\- .\/]*yy[\/]?/,""),u={beforeShow:function(A,
C){C.dpDiv.addClass("NoYearDatePicker")},onClose:function(A,C){C.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});u.dateFormat=p;z.datepicker(h.extend({},h.datepicker.regional[w],u)).prop("autocomplete","off")},x=function(z){h.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+h.ui.version+"/i18n/jquery.ui.datepicker-"+z+".min.js",function(){l[z]=!0;h.each(c[z],function(){v.call(this)});delete c[z]})};h.datepicker.regional["en-CA"]=h.extend({},h.datepicker.regional[""]);h.fn.extend({autodatepicker:function(){return this.each(function(){var z=
h(this);var w=z.parents("[lang]").first().prop("lang")||"en-CA";w=d[w]||w;z.data("culture",w);l[w]?v.call(this):(z=c[w],z||(z=c[w]=[],x(w)),z.push(this))})}});jQuery(function(){h("input.DatePicker").autodatepicker()})})();
(function(h,k){var l,c;var d=function(b){return new d.prototype.init(b)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=d:h.Globalize=d;d.cultures={};d.prototype={constructor:d,init:function(b){this.cultures=d.cultures;this.cultureSelector=b;return this}};d.prototype.init.prototype=d.prototype;d.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",
groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},
months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};
d.cultures["default"].calendar=d.cultures["default"].calendars.standard;d.cultures.en=d.cultures["default"];d.cultureSelector="en";var v=/^0x[a-f0-9]+$/i;var x=/^[+\-]?infinity$/i;var z=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;var w=/^\s+|\s+$/g;var p=function(b,e){if(b.indexOf)return b.indexOf(e);for(var m=0,a=b.length;m<a;m++)if(b[m]===e)return m;return-1};var u=function(b,e){return b.substr(b.length-e.length)===e};var A=function(){var b,e,m,a=arguments[0]||{},g=1,r=arguments.length,q=!1;"boolean"===typeof a&&
(q=a,a=arguments[1]||{},g=2);for("object"===typeof a||n(a)||(a={});g<r;g++)if(null!=(b=arguments[g]))for(e in b){var f=a[e];var t=b[e];a!==t&&(q&&t&&(y(t)||(m=C(t)))?(m?(m=!1,f=f&&C(f)?f:[]):f=f&&y(f)?f:{},a[e]=A(q,f,t)):t!==k&&(a[e]=t))}return a};var C=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)};var n=function(b){return"[object Function]"===Object.prototype.toString.call(b)};var y=function(b){return"[object Object]"===Object.prototype.toString.call(b)};
var D=function(b,e){return 0===b.indexOf(e)};var I=function(b){return(b+"").replace(w,"")};var E=function(b){return isNaN(b)?NaN:Math[0>b?"ceil":"floor"](b)};var F=function(b,e,m){var a;for(a=b.length;a<e;a+=1)b=m?"0"+b:b+"0";return b};var J=function(b,e){for(var m=0,a=!1,g=0,r=b.length;g<r;g++){var q=b.charAt(g);switch(q){case "'":a?e.push("'"):m++;a=!1;break;case "\\":a&&e.push("\\");a=!a;break;default:e.push(q),a=!1}}return m};var V=function(b,e){e=e||"F";b=b.patterns;var m=e.length;if(1===m){b=
b[e];if(!b)throw"Invalid date format string '"+e+"'.";e=b}else 2===m&&"%"===e.charAt(0)&&(e=e.charAt(1));return e};var Y=function(b,e,m){function a(Q,M){Q+="";return 1<M&&Q.length<M?(Q=G[M-2]+Q,Q.substr(Q.length-M,M)):Q}function g(Q,M){if(S)return S[M];switch(M){case 0:return Q.getFullYear();case 1:return Q.getMonth();case 2:return Q.getDate();default:throw"Invalid part value "+M;}}var r=m.calendar,q=r.convert;if(!e||!e.length||"i"===e){if(m&&m.name.length)if(q)m=Y(b,r.patterns.F,m);else{e=new Date(b.getTime());
var f=aa(b,r.eras);e.setFullYear(W(b,r,f));m=e.toLocaleString()}else m=b.toString();return m}var t=r.eras,B="s"===e;e=V(r,e);m=[];var G=["0","00","000"],N=/([^d]|^)(d|dd)([^d]|$)/g,L=0,O=X(),S;for(!B&&q&&(S=q.fromGregorian(b));;){var H=O.lastIndex;q=O.exec(e);H=e.slice(H,q?q.index:e.length);L+=J(H,m);if(!q)break;if(L%2)m.push(q[0]);else switch(H=q[0],q=H.length,H){case "ddd":case "dddd":m.push((3===q?r.days.namesAbbr:r.days.names)[b.getDay()]);break;case "d":case "dd":f=!0;m.push(a(g(b,2),q));break;
case "MMM":case "MMMM":H=g(b,1);var K=m,ba=K.push,ca;if(ca=r.monthsGenitive){if(!f&&!T){f=N.test(e);var T=!0}ca=f}ba.call(K,ca?r.monthsGenitive[3===q?"namesAbbr":"names"][H]:r.months[3===q?"namesAbbr":"names"][H]);break;case "M":case "MM":m.push(a(g(b,1)+1,q));break;case "y":case "yy":case "yyyy":H=S?S[0]:W(b,r,aa(b,t),B);4>q&&(H%=100);m.push(a(H,q));break;case "h":case "hh":H=b.getHours()%12;0===H&&(H=12);m.push(a(H,q));break;case "H":case "HH":m.push(a(b.getHours(),q));break;case "m":case "mm":m.push(a(b.getMinutes(),
q));break;case "s":case "ss":m.push(a(b.getSeconds(),q));break;case "t":case "tt":H=12>b.getHours()?r.AM?r.AM[0]:" ":r.PM?r.PM[0]:" ";m.push(1===q?H.charAt(0):H);break;case "f":case "ff":case "fff":m.push(a(b.getMilliseconds(),3).substr(0,q));break;case "z":case "zz":H=b.getTimezoneOffset()/60;m.push((0>=H?"+":"-")+a(Math.floor(Math.abs(H)),q));break;case "zzz":H=b.getTimezoneOffset()/60;m.push((0>=H?"+":"-")+a(Math.floor(Math.abs(H)),2)+":"+a(Math.abs(b.getTimezoneOffset()%60),2));break;case "g":case "gg":r.eras&&
m.push(r.eras[aa(b,t)].name);break;case "/":m.push(r["/"]);break;default:throw"Invalid date format pattern '"+H+"'.";}}return m.join("")};(function(){var b=function(e,m,a){var g=a.groupSizes,r=g[0],q=1,f=Math.pow(10,m);f=Math.round(e*f)/f;isFinite(f)||(f=e);e=f;f=(e+"").split(/e/i);var t=1<f.length?parseInt(f[1],10):0;e=f[0];f=e.split(".");e=f[0];f=1<f.length?f[1]:"";0<t?(f=F(f,t,!1),e+=f.slice(0,t),f=f.substr(t)):0>t&&(t=-t,e=F(e,t+1,!0),f=e.slice(-t,e.length)+f,e=e.slice(0,-t));f=0<m?a["."]+(f.length>
m?f.slice(0,m):F(f,m)):"";m=e.length-1;a=a[","];for(t="";0<=m;){if(0===r||r>m)return e.slice(0,m+1)+(t.length?a+t+f:f);t=e.slice(m-r+1,m+1)+(t.length?a+t:"");m-=r;q<g.length&&(r=g[q],q++)}return e.slice(0,m+1)+a+t+f};l=function(e,m,a){if(!isFinite(e))return Infinity===e?a.numberFormat.positiveInfinity:-Infinity===e?a.numberFormat.negativeInfinity:a.numberFormat.NaN;if(!m||"i"===m)return a.name.length?e.toLocaleString():e.toString();m=m||"D";a=a.numberFormat;var g=Math.abs(e),r=-1;1<m.length&&(r=parseInt(m.slice(1),
10));var q=m.charAt(0).toUpperCase();switch(q){case "D":m="n";g=E(g);-1!==r&&(g=F(""+g,r,!0));0>e&&(g="-"+g);break;case "N":var f=a;case "C":f=f||a.currency;case "P":f=f||a.percent;m=0>e?f.pattern[0]:f.pattern[1]||"n";-1===r&&(r=f.decimals);g=b(g*("P"===q?100:1),r,f);break;default:throw"Bad number format specifier: "+q;}e=/n|\$|-|%/g;for(f="";;){r=e.lastIndex;q=e.exec(m);f+=m.slice(r,q?q.index:m.length);if(!q)break;switch(q[0]){case "n":f+=g;break;case "$":f+=a.currency.symbol;break;case "-":/[1-9]/.test(g)&&
(f+=a["-"]);break;case "%":f+=a.percent.symbol}}return f}})();var X=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};var aa=function(b,e){if(!e)return 0;for(var m=b.getTime(),a=0,g=e.length;a<g;a++)if(b=e[a].start,null===b||m>=b)return a;return 0};var W=function(b,e,m,a){b=b.getFullYear();!a&&e.eras&&(b-=e.eras[m].offset);return b};(function(){var b=function(f,t){if(100>t){var B=new Date,G=aa(B);B=W(B,f,G);f=f.twoDigitYearMax;f="string"===
typeof f?(new Date).getFullYear()%100+parseInt(f,10):f;t+=B-B%100;t>f&&(t-=100)}return t};var e=function(f,t,B){var G=f.days,N=f._upperDays;N||(f._upperDays=N=[q(G.names),q(G.namesAbbr),q(G.namesShort)]);t=r(t);B?(f=p(N[1],t),-1===f&&(f=p(N[2],t))):f=p(N[0],t);return f};var m=function(f,t,B){var G=f.months,N=f.monthsGenitive||f.months,L=f._upperMonths,O=f._upperMonthsGen;L||(f._upperMonths=L=[q(G.names),q(G.namesAbbr)],f._upperMonthsGen=O=[q(N.names),q(N.namesAbbr)]);t=r(t);f=p(B?L[1]:L[0],t);0>f&&
(f=p(B?O[1]:O[0],t));return f};var a=function(f,t){var B=f._parseRegExp;if(B){var G=B[t];if(G)return G}else f._parseRegExp=B={};f=V(f,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");G=["^"];for(var N=[],L=0,O=0,S=X(),H;null!==(H=S.exec(f));){var K=f.slice(L,H.index);L=S.lastIndex;O+=J(K,G);if(O%2)G.push(H[0]);else{K=H[0];var ba=K.length;switch(K){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":K="(\\D+)";break;case "tt":case "t":K="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":K=
"(\\d{"+ba+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":K="(\\d\\d?)";break;case "zzz":K="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":K="([+-]?\\d\\d?)";break;case "/":K="(\\/)";break;default:throw"Invalid date format pattern '"+K+"'.";}K&&G.push(K);N.push(H[0])}}J(f.slice(L),G);G.push("$");f={regExp:G.join("").replace(/\s+/g,"\\s+"),groups:N};return B[t]=f};var g=function(f,t,B){return f<t||f>B};
var r=function(f){return f.split("\u00a0").join(" ").toUpperCase()};var q=function(f){for(var t=[],B=0,G=f.length;B<G;B++)t[B]=r(f[B]);return t};c=function(f,t,B){f=I(f);B=B.calendar;t=a(B,t);var G=(new RegExp(t.regExp)).exec(f);if(null===G)return null;var N=t.groups,L=t=f=null,O=null,S=null,H=0,K=0,ba=0,ca=0;var T=null;for(var Q=!1,M=0,ea=N.length;M<ea;M++){var P=G[M+1];if(P){var R=N[M],da=R.length,U=parseInt(P,10);switch(R){case "dd":case "d":O=U;if(g(O,1,31))return null;break;case "MMM":case "MMMM":L=
m(B,P,3===da);if(g(L,0,11))return null;break;case "M":case "MM":L=U-1;if(g(L,0,11))return null;break;case "y":case "yy":case "yyyy":t=4>da?b(B,U):U;if(g(t,0,9999))return null;break;case "h":case "hh":H=U;12===H&&(H=0);if(g(H,0,11))return null;break;case "H":case "HH":H=U;if(g(H,0,23))return null;break;case "m":case "mm":K=U;if(g(K,0,59))return null;break;case "s":case "ss":ba=U;if(g(ba,0,59))return null;break;case "tt":case "t":Q=B.PM&&(P===B.PM[0]||P===B.PM[1]||P===B.PM[2]);if(!Q&&(!B.AM||P!==B.AM[0]&&
P!==B.AM[1]&&P!==B.AM[2]))return null;break;case "f":case "ff":case "fff":ca=U*Math.pow(10,3-da);if(g(ca,0,999))return null;break;case "ddd":case "dddd":S=e(B,P,3===da);if(g(S,0,6))return null;break;case "zzz":R=P.split(/:/);if(2!==R.length)return null;T=parseInt(R[0],10);if(g(T,-12,13))return null;R=parseInt(R[1],10);if(g(R,0,59))return null;T=60*T+(D(P,"-")?-R:R);break;case "z":case "zz":T=U;if(g(T,-12,13))return null;T*=60;break;case "g":case "gg":if(!P||!B.eras)return null;P=I(P.toLowerCase());
R=0;for(da=B.eras.length;R<da;R++)if(P===B.eras[R].name.toLowerCase()){f=R;break}if(null===f)return null}}}G=new Date;N=(M=B.convert)?M.fromGregorian(G)[0]:G.getFullYear();null===t?t=N:B.eras&&(t+=B.eras[f||0].offset);null===L&&(L=0);null===O&&(O=1);if(M){if(G=M.toGregorian(t,L,O),null===G)return null}else if(G.setFullYear(t,L,O),G.getDate()!==O||null!==S&&G.getDay()!==S)return null;Q&&12>H&&(H+=12);G.setHours(H,K,ba,ca);null!==T&&(B=G.getMinutes()-(T+G.getTimezoneOffset()),G.setHours(G.getHours()+
parseInt(B/60,10),B%60));return G}})();var Z=function(b,e,m){var a=e["-"];e=e["+"];var g;switch(m){case "n -":a=" "+a,e=" "+e;case "n-":u(b,a)?g=["-",b.substr(0,b.length-a.length)]:u(b,e)&&(g=["+",b.substr(0,b.length-e.length)]);break;case "- n":a+=" ",e+=" ";case "-n":D(b,a)?g=["-",b.substr(a.length)]:D(b,e)&&(g=["+",b.substr(e.length)]);break;case "(n)":D(b,"(")&&u(b,")")&&(g=["-",b.substr(1,b.length-2)])}return g||["",b]};d.prototype.findClosestCulture=function(b){return d.findClosestCulture.call(this,
b)};d.prototype.format=function(b,e,m){return d.format.call(this,b,e,m)};d.prototype.localize=function(b,e){return d.localize.call(this,b,e)};d.prototype.parseInt=function(b,e,m){return d.parseInt.call(this,b,e,m)};d.prototype.parseFloat=function(b,e,m){return d.parseFloat.call(this,b,e,m)};d.prototype.culture=function(b){return d.culture.call(this,b)};d.addCultureInfo=function(b,e,m){var a=!1;"string"!==typeof b?(m=b,b=this.culture().name,e=this.cultures[b]):"string"!==typeof e?(m=e,a=null==this.cultures[b],
e=this.cultures[b]||this.cultures["default"]):(a=!0,e=this.cultures[e]);this.cultures[b]=A(!0,{},e,m);a&&(this.cultures[b].calendar=this.cultures[b].calendars.standard)};d.findClosestCulture=function(b){var e;if(!b)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof b&&(b=b.split(","));if(C(b)){var m=this.cultures,a=b,g,r=a.length,q=[];for(g=0;g<r;g++){b=I(a[g]);b=b.split(";");var f=I(b[0]);1===b.length?b=1:(b=I(b[1]),0===b.indexOf("q=")?(b=b.substr(2),
b=parseFloat(b),b=isNaN(b)?0:b):b=1);q.push({lang:f,pri:b})}q.sort(function(B,G){return B.pri<G.pri?1:B.pri>G.pri?-1:0});for(g=0;g<r;g++)if(f=q[g].lang,e=m[f])return e;for(g=0;g<r;g++){f=q[g].lang;do{a=f.lastIndexOf("-");if(-1===a)break;f=f.substr(0,a);if(e=m[f])return e}while(1)}for(g=0;g<r;g++){f=q[g].lang;for(var t in m)if(a=m[t],a.language==f)return a}}else if("object"===typeof b)return b;return e||null};d.format=function(b,e,m){m=this.findClosestCulture(m);b instanceof Date?b=Y(b,e,m):"number"===
typeof b&&(b=l(b,e,m));return b};d.localize=function(b,e){return this.findClosestCulture(e).messages[b]||this.cultures["default"].messages[b]};d.parseDate=function(b,e,m){m=this.findClosestCulture(m);var a;if(e){if("string"===typeof e&&(e=[e]),e.length){var g=0;for(var r=e.length;g<r;g++){var q=e[g];if(q&&(a=c(b,q,m)))break}}}else for(g in e=m.calendar.patterns,e)if(a=c(b,e[g],m))break;return a||null};d.parseInt=function(b,e,m){return E(d.parseFloat(b,e,m))};d.parseFloat=function(b,e,m){"number"!==
typeof e&&(m=e,e=10);var a=this.findClosestCulture(m);m=NaN;var g=a.numberFormat;-1<b.indexOf(a.numberFormat.currency.symbol)&&(b=b.replace(a.numberFormat.currency.symbol,""),b=b.replace(a.numberFormat.currency["."],a.numberFormat["."]));b=I(b);if(x.test(b))m=parseFloat(b);else if(!e&&v.test(b))m=parseInt(b,16);else{a=Z(b,g,g.pattern[0]);e=a[0];a=a[1];""===e&&"(n)"!==g.pattern[0]&&(a=Z(b,g,"(n)"),e=a[0],a=a[1]);""===e&&"-n"!==g.pattern[0]&&(a=Z(b,g,"-n"),e=a[0],a=a[1]);e=e||"+";b=a.indexOf("e");0>
b&&(b=a.indexOf("E"));if(0>b){var r=a;b=null}else r=a.substr(0,b),b=a.substr(b+1);var q=g["."],f=r.indexOf(q);0>f?(a=r,r=null):(a=r.substr(0,f),r=r.substr(f+q.length));q=g[","];a=a.split(q).join("");f=q.replace(/\u00A0/g," ");q!==f&&(a=a.split(f).join(""));e+=a;null!==r&&(e+="."+r);null!==b&&(g=Z(b,g,"-n"),e+="e"+(g[0]||"+")+g[1]);z.test(e)&&(m=parseFloat(e))}return m};d.culture=function(b){"undefined"!==typeof b&&(this.cultureSelector=b);return this.findClosestCulture(b)||this.cultures["default"]}})(this);
(function(){draggable=!1;var h=null,k=null,l=[59.888937,-101.601562],c=null,d=null,v=!0,x=null,z=null,w=function(){k.setCenter(new google.maps.LatLng(l[0],l[1]),2)},p=function(){d&&d.setMap(null);d=null;z&&(google.maps.event.removeListener(z),z=null)},u=function(a,g){document.getElementById("LATITUDE").value=Globalize.format(a,"n6");document.getElementById("LONGITUDE").value=Globalize.format(g,"n6")},A=function(a,g){a=new google.maps.LatLng(a,g);v&&k.setZoom(14);k.setCenter(a);v=!1;a=new google.maps.Marker({position:a,
map:k,clickable:!1,draggable});p();d=a;draggable&&(z=google.maps.event.addListener(a,"dragend",C))},C=function(){$("#GEOCODE_TYPE_SITE_REFRESH, #GEOCODE_TYPE_INTERSECTION_REFRESH").addClass("NotVisible");$("#GEOCODE_TYPE_MANUAL").prop("checked",!0);var a=this.getPosition();u(a.lat(),a.lng())},n=function(a){a&&(x=X,u(a.lat(),a.lng()),A(a.lat(),a.lng()))},y=function(a){switch(a){case google.maps.GeocoderStatus.ZERO_RESULTS:a=pageconstants.txt_geocode_unknown_address;break;case google.maps.GeocoderStatus.REQUEST_DENIED:a=
pageconstants.txt_geocode_map_key_fail;break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:a=pageconstants.txt_geocode_too_many_queries;break;default:a=pageconstants.txt_geocode_unknown_error+a}return a};window.get_response_message=y;var D=function(a){return function(g,r){r!==google.maps.GeocoderStatus.OK?a(null,r):a(g[0].geometry.location,r)}};window.handle_geocode=D;var I=function(){var a={zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};h=document.getElementById("map_canvas");k=new google.maps.Map(h,
a);w();c||=new google.maps.Geocoder;a=$("#LATITUDE")[0].value;var g=$("#LONGITUDE")[0].value;a&&g&&A(Globalize.parseFloat(a),Globalize.parseFloat(g))},E=[],F=!1;window.maps_loaded=function(){F=!0;$.each(E,function(a,g){g()});E=[]};window.add_maps_loaded_callback=function(a){F?a():E.push(a)};window.initialize_maps=function(a,g,r,q){if(!window.cioc_map_script_added){window.cioc_map_script_added=!0;Globalize.culture(a);var f="";q&&(f="&libraries=places");$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+
g+"&sensor=false&callback=maps_loaded&language="+a+f)}add_maps_loaded_callback(r)};var J=function(a,g){return D(function(r,q){r?(g&&$("#geocode_no_postal_code").show(),a(r)):q==google.maps.GeocoderStatus.ZERO_RESULTS&&!g&&document.getElementById("GEOCODE_TYPE_SITE").checked?W(a,!0):(alert(y(q)),a(null))})},V=function(a){var g=document.getElementById("EntryForm"),r=[];if(!g.SITE_STREET_NUMBER)return null;var q=[g.SITE_STREET_NUMBER.value,g.SITE_STREET.value,g.SITE_STREET_TYPE.value,g.SITE_STREET_DIR.value].join(" ");
q=q.replace(/^\s+/g,"");(q=q.replace(/\s+$/g,""))&&r.push(q);var f=["SITE_CITY","SITE_PROVINCE"];a||f.push("SITE_POSTAL_CODE");for(a=0;a<f.length;a++)(q=g[f[a]].value)&&r.push(q);(q=g.SITE_COUNTRY.value)?r.push(q):r.push("Canada");return(g=r.join(", "))&&"Canada"!=g?g:null},Y=function(){var a=document.EntryForm,g=[];if(!a.INTERSECTION&&!a.INTERSECTION.value)return null;for(var r=["INTERSECTION","SITE_CITY","SITE_PROVINCE"],q=0;q<r.length;q++){var f=a[r[q]].value;f&&g.push(f)}(f=a.SITE_COUNTRY.value)?
g.push(f):g.push("Canada");return g.join(", ")},X=null,aa=function(a,g,r){X=a;r=J(g,r);(X=a)?c.geocode({address:a},r):(p(),u("",""));a?$("#geocode_no_postal_code").hide():g(null)},W=function(a,g){var r=V(g);aa(r,a,g)},Z=function(a){var g=Y();aa(g,a)};window.handle_geocode_entryform_feedback=function(a,g){"undefined"!=typeof a&&null!==a&&"undefined"!=typeof g&&null!==g&&(x=X,n(google.maps.LatLng(Globalize.parseFloat(a),Globalize.parseFloat(g))))};var b=function(a){n(a)},e=function(a){m(!1);$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();
d||a||W(function(g){g?n(g):(v=!1,g=k.getCenter(),g=g.toUrlValue().split(","),u.apply(null,g),A.apply(null,g),X=x=null)})};window.do_geocode_type_manual=e;var m=function(a){var g=document.getElementById("map_refresh_ui_area");g&&(document.getElementById("LONGITUDE").readOnly=a,(document.getElementById("LATITUDE").readOnly=a)?$(g).hide():$(g).show())};window.entryform_maps_loaded=function(){draggable=!0;I();var a=$("#GEOCODE_TYPE_INTERSECTION_REFRESH"),g=$("#GEOCODE_TYPE_SITE_REFRESH");$("#GEOCODE_TYPE_SITE").click(function(){a.hide();
g.show();m(!0);W(n)});$("#GEOCODE_TYPE_INTERSECTION").click(function(){a.show();g.hide();m(!0);Z(n)});$("#GEOCODE_TYPE_MANUAL").click(function(){e(!1)});$("#GEOCODE_TYPE_BLANK").click(function(){$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();m(!0);p();w();v=!0;$("#geocode_no_postal_code").hide();u("","");x=X=null});g.click(function(){W(n)});a.click(function(){Z(n)});var r=document.EntryForm,q=document.getElementById("map_refresh");q&&$(q).click(function(){A(Globalize.parseFloat(r.LATITUDE.value),
Globalize.parseFloat(r.LONGITUDE.value))});r.SITE_STREET_NUMBER?document.getElementById("GEOCODE_TYPE_SITE").checked&&(W(b),g.show()):(r.GEOCODE_TYPE_SITE.disabled=!0,g.hide());r.INTERSECTION?document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(Z(b),a.show()):(r.GEOCODE_TYPE_INTERSECTION.disabled=!0,g.hide());m(!r.GEOCODE_TYPE_MANUAL.checked);$(r).submit(function(f){var t=null,B=null;document.getElementById("GEOCODE_TYPE_SITE").checked?(t=V(),B=pageconstants.txt_geocode_address_changed):
document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(t=Y(),B=pageconstants.txt_geocode_intersection_change);B&&t!=x&&!confirm(B)&&(h.scrollIntoView(!0),document.documentElement.scrollTop-=10,f.preventDefault(),f.stopImmediatePropagation(),$("#SUBMIT_BUTTON").prop("disabled",!1))});q=function(f){var t=$(this);$("#dropdownMAP_PIN .selection").html(t.html());$("#MAP_PIN").val(t.data("value"));f&&f.preventDefault()};$("#dropdownMAP_PINmenu li a").click(q);q.call($("#dropdownMAP_PINmenu li a[data-value="+
$("#MAP_PIN").val()+"]"))}})();(function(h){h.widget("ui.combobox",{options:{source:null},_create:function(){var k=this.element;this.options.source&&(h(k).autocomplete({focus:function(l,c){return!1},source:this.options.source,delay:0,minLength:0}),h("<span>").insertAfter(k).addClass("SmallButton DownButton").css("margin-left","1px").click(function(l){k.autocomplete("widget").is(":visible")?k.autocomplete("close"):(k.autocomplete("search",""),k.focus())}))}})})(jQuery);
jQuery(function(h){var k="AB BC MB NB NL NS NT NU ON PE QC SK YT".split(" ");h(".Province").combobox({source:k});window.cioc_province_source=k});
(function(){var h=function(c){c=c.toLowerCase();c=c.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");c=c.replace(RegExp("\u00e6","g"),"ae");c=c.replace(RegExp("\u00e7","g"),"c");c=c.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");c=c.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");c=c.replace(RegExp("\u00f1","g"),"n");c=c.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");c=c.replace(RegExp("\u009c","g"),"oe");c=c.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return c=c.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=h;window.slugify=function(c){c=h(c);c=c.replace(/-/g," ").replace(/[^a-z0-9\s]/g,"");c=c.trim();return c.replace(/\s+/g,"-")};var k=function(c,d,v,x,z){v=v||"value";x=x||"";z=z||"";return function(w,p){if(d.term&&(new RegExp(x+c.ui.autocomplete.escapeRegex(d.term)+z,"i")).test(w.term)&&d.content&&13>d.content.length){var u=new RegExp(x+c.ui.autocomplete.escapeRegex(w.term)+z,"i");p(c.grep(d.content,function(A){return u.test(h(A[v]))}));
return!0}return!1}};window.default_cache_search_fn=k;var l=function(c,d,v,x,z){v=v||{};z=z||k(c,v,x||"value");return function(w,p,u){w.term=h(w.term);v.term===w.term&&v.content?p(v.content):z(w,p)||c.ajax({url:u||d,dataType:"json",data:w,cache:!1,success:function(A){v.term=w.term;v.content=A;p(A)}})}};window.create_caching_source_fn=l;window.init_community_autocomplete=function(c,d,v,x,z){var w={};z&&=c(z);z&&!z.length&&(z=null);var p=c("#"+d).autocomplete({focus:function(u,A){return!1},select:function(u,
A){p.data({chkid:A.item.chkid,display:A.item.value})},source:l(c,v,w),minLength:x}).keypress(function(u){"13"==u.keyCode&&(u.preventDefault(),p.autocomplete("close"))});z&&(p.parents("form").on("submit",function(){var u=p.val();if(p.data("display")===u)z.val(p.data("chkid"));else{if(w.content){var A=h(u);u=c.grep(w.content,function(C){return h(C.value)===A});if(1===u.length){z.val(u[0].chkid);p.data({chkid:u[0].chkid,display:u[0].value}).val(u[0].value);return}}z.val("")}}),cache_register_onbeforerestorevalues(function(u){p.length&&
(u=u["autocomplete_data_"+p[0].id])&&p.data(u)}),cache_register_onbeforeunload(function(u){if(p.length){var A=p.data();A.display&&A.chkid&&(u["autocomplete_data_"+p[0].id]={display:A.display,chkid:A.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(l,c,d,v){cache_register_onbeforeunload(function(x){x[c+"_added"]=d});cache_register_onbeforerestorevalues(function(x){(x=x[c+"_added"])&&l.each(x,function(z,w){v(w.chkid,w.display,"")})})};window.basic_chk_add_html=function(l,c){return function(d,v){d=l("<tr>").append(l("<td>").append(l("<input>").prop({id:c+"_ID_"+d,type:"checkbox",checked:!0,defaultChecked:!0,name:c+"_ID",value:d})).append(document.createTextNode(" "+
v))).append(l("<td>").append(l("<input>").prop({id:c+"_NOTES_"+d,name:c+"_NOTES_"+d,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));l("#"+c+"_existing_add_table").append(d);return d.find('input[type="checkbox"]')[0]}};var h={},k=function(l){$("#NEW_"+l).autocomplete(h[l])};window.init_autocomplete_checklist=function(l,c){var d=c.field;if(!h[d]){var v=c.source;c.minLength=c.minLength||1;c.delay=c.delay||300;c.add_new_html=c.add_new_html||basic_chk_add_html(l,d);c.match_prop=
c.match_prop||"value";c.txt_not_found=c.txt_not_found||"Not Found";var x=l(c.delegate_root||document),z=c.added_values||[],w=function(n,y,D){var I=document.getElementById(d+"_ID_"+n);I?(I.checked=!0,c.after_add_new_value&&c.after_add_new_value.call(I)):(z.push({chkid:n,display:y,label:D}),n=c.add_new_html(n,y,D),c.after_add_new_value&&c.after_add_new_value.call(n))};create_checklist_onbefore_fns(l,d,z,w);var p={},u=function(n){l("#NEW_"+d).data({chkid:"",display:"",label:""}).prop("value","").focus();
l("#"+d+"_error").hide("slow",function(){l(this).remove()})},A=null,C=null;(function(n){l.isArray(n)?(C=function(y,D){var I=new RegExp(l.ui.autocomplete.escapeRegex(string_ci_ai(y.term)));D(l.grep(n,function(E){return I.test(string_ci_ai(E[c.match_prop]||E))}))},A=function(y,D){var I=string_ci_ai(y);y=l.grep(n,function(E){return string_ci_ai(string_ci_ai(E[c.match_prop]||E))===I});if(1===y.length)return D(y[0]),!0;D()}):"string"===typeof n?(C=create_caching_source_fn(l,n,p,c.match_prop),A=function(y,
D,I){var E=string_ci_ai(y);if(p.content){var F=l.grep(p.content,function(J){return string_ci_ai(J[c.match_prop])===E});if(1===F.length){D(F[0]);return}}I||string_ci_ai(p.term||"")===E?D():C({term:E},function(J){A(y,D,!0)})}):(C=n,A=c.look_for_fn)})(v);x.on("click","#add_"+d,function(n){n=l("#NEW_"+d);var y=n.data("chkid"),D=n.data("display"),I=n.data("label"),E=n[0].value;if(y&&D&&D==E)return w(y,D,I),u(),!1;A(n[0].value,function(F){F?(w(F.chkid,F.value,F.label),u()):0===l("#"+d+"_error").length&&
(l("#"+d+"_new_input_table").before(l("<p>").hide().addClass("Alert").prop("id",d+"_error").append(document.createTextNode(c.txt_not_found))),l("#"+d+"_error").show("slow"))});return!1});h[d]={focus:function(n,y){return!1},source:C,minLength:c.minLength,delay:c.delay,select:function(n,y){l("#NEW_"+d).data({chkid:y.item.chkid,display:y.item.value,label:y.item.label})}};x.on("keypress","#NEW_"+d,function(n){"13"==n.keyCode&&(n.preventDefault(),l("#NEW_"+d).autocomplete("close"),l("#add_"+d).trigger("click"))})}k(d)};
window.init_languages=function(l,c){var d=null,v=null,x=l("#LN_existing_add_table"),z=function(){var w=l(this).parents(".language-entry").find(".language-details-notes");this.checked?w.slideDown():w.slideUp()};init_autocomplete_checklist(l,{field:"LN",source:entryform.languages_source,txt_not_found:c,after_add_new_value:z,add_new_html:function(w,p){null===d&&(d=l("#add_LN"),v=d.data("newTemplate"));w=v.replace(/LANGNAMELANGNAME/g,p).replace(/IDIDID/g,w);x.append(w)}});x.on("change",".language-primary",
z).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+l(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(w,p){l(this).css(w);l("<div>").addClass("arrow").addClass(p.vertical).addClass(p.horizontal).appendTo(this)}}});window.languages_check_state=z}})();
(function(){window.only_items_chk_add_html=function(h,k,l){return function(c,d){l&&l();h("#"+k+"_existing_add_container").append(h("<label>").append(h("<input>").prop({id:k+"_ID_"+c,type:"checkbox",checked:!0,defaultChecked:!0,name:k+"_ID",value:c})).append("&nbsp;").append(document.createTextNode(d))).append(" ; ")}};window.init_check_for_autochecklist=function(h){var k=jQuery,l=function(){return k("<li>").append(k("<span>").data("jump_location",this.id).addClass("UnaddedChecklistJump SimulateLink").append(k(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},
c=k("input[id^=NEW_]");c.length&&(k("#EntryForm").submit(function(d){var v=c.map(function(){return this.value?this:null});if(v.length&&!d.isDefaultPrevented()){if(!confirm(h)){d.preventDefault();k("#SUBMIT_BUTTON").prop("disabled",!1);d=k("#unadded_checklist_error_box");var x=k("#unadded_checklist_error_list");var z=d.is(":visible");z&&x.children("ul:first").hide("slow",function(){k(this).remove()});var w=k("<ul>");z&&w.hide();x.append(w);k.each(v.map(l),function(){w.append(this)});z?w.show("slow"):
d.show("slow")}}else d.isDefaultPrevented()&&(d=k("#unadded_checklist_error_box"),x=k("#unadded_checklist_error_list"),d.hide("slow",function(){x.children().remove()}))}),k(document).on("click",".UnaddedChecklistJump",function(){var d=k(this).data("jump_location");(d=document.getElementById(d))&&d.scrollIntoView(!0)}))};window.init_entryform_items=function(h,k,l){var c=jQuery;h.each(function(){var d=null,v=this,x=c(v),z=1,w=x.find(".EntryFormItemContainerIds")[0];if(w){var p=x.data("maxAdd");p&&=
parseInt(p,10);var u=[];w.value&&(u=c.map(w.value.split(","),function(E){return 0===E.indexOf("NEW")&&0!==E.indexOf("NEWFB")?null:E}));var A={},C=function(){x.find(".EntryFormItemBox").each(function(E){c(this).find(".EntryFormItemCount").text(E+1)})},n=function(E){if(p){var F=x.find(".EntryFormItemContent:hidden").parent().find("button.EntryFormItemDelete").prop("disabled",!E);I.prop("disabled",!E);E?(F.removeClass("ui-state-disabled"),I.removeClass("ui-state-disabled")):(F.addClass("ui-state-disabled"),
I.addClass("ui-state-disabled"))}},y=function(){var E=0,F;for(F in A)E++;return u.length-E},D=function(E){var F=0;if(p&&!E&&(F=y(),F>=p)){alert("over");return}var J=x.data("addTmpl");u.push("NEW"+z++);w.value=u.join(",");J=c(J.replace(/\[COUNT\]/g,u.length).replace(/\[ID\]/g,u[u.length-1]));J.find(".DatePicker").autodatepicker();J.find(".Province").combobox({source:window.cioc_province_source});entryform.service_titles&&J.find(".ServiceTitleField").combobox({source:entryform.service_titles});x.append(J);
d&&(d.sortable("refresh"),C());p&&!E&&F+1===p&&n(!1)},I=x.parent().find(".EntryFormItemAdd").click(function(){D(!1)});x.on("click","button.EntryFormItemDelete",function(){var E=this,F=c(this).parents(".EntryFormItemBox").find(".EntryFormItemContent"),J=this.id.split("_");J=J[J.length-2];if(F.is(":visible"))F.hide("slow",function(){A[J]=get_form_values(F);c(E).text(l);F.find("input,select,textarea").each(function(){"input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?
"select"===this.nodeName.toLowerCase()?c(this).find("option").each(function(){this.selected=!1}):this.value="":this.checked=!1});n(!0)});else{var V=0;if(p&&(V=y(),V>=p)){alert("over");return}var Y=A[J];Y&&(delete A[J],restore_form_values(F,Y),F.show("slow",function(){c(E).text(k)}),p&&V+1===p&&n(!1))}});x.hasClass("sortable")&&(d=x.sortable({items:".EntryFormItemBox"}),d.bind("sortstart",function(E,F){F.helper.bgiframe();x.addClass("sorting")}),d.bind("sortstop",function(){var E=d.sortable("toArray");
u=c.map(E,function(F){F=F.split("_");return F[F.length-2]});w.value=u.join(",");setTimeout(function(){x.removeClass("sorting");C()},1)}));cache_register_onbeforeunload(function(E){E[v.id+"_ids"]=u;E[v.id+"_deletes"]=A;d&&(E[v.id+"_order"]=d.sortable("toArray"))});cache_register_onbeforerestorevalues(function(E){E[v.id+"_ids"]&&c.each(E[v.id+"_ids"],function(F,J){0===J.indexOf("NEW")&&D(!0)});E[v.id+"_deletes"]&&(A=E[v.id+"_deletes"],x.find(".EntryFormItemContent").each(function(){var F=this.id.split("_");
F=F[F.length-2];A[F]&&c(this).hide().parent().find("button.EntryFormItemDelete").text(l)}));p&&y()>=p&&n(!1);d&&(E=E[v.id+"_order"])&&(E.reverse(),c.each(E,function(F,J){c("#"+J).detach().prependTo(x)}),d.sortable("refresh"),C())})}})};window.init_schedule=function(h){var k=function(){var l=h(this).parents(".EntryFormItemBox"),c=this.value;"0"===c?l.find(".recurs-ui").hide():"1"==c?(l.find(".repeat-every-ui, .repeats-on-ui, .recurs-week-label").show(),l.find(".repeat-week-of-month-ui, .repeat-day-of-month-ui, .recurs-month-label").hide()):
"2"==c?(l.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-month-label").show(),l.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-week-label").hide()):(l.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-month-label").show(),l.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-week-label").hide())};h("#ScheduleEditArea").on("change",".recur-type-selector",k).on("click",".schedule-ui-accept-feedback",function(l){var c=h(this);l=c.parents(".EntryFormItemBox");c=c.data("schedule");
var d=l.find(".recur-type-selector");restore_form_values(l,c);k.call(d[0]);return!1}).find(".recur-type-selector").each(k)}})();
(function(){var h=jQuery;window.configure_entry_form_button=function(){h("#SUBMIT_BUTTON").click(function(k){k=h("#SUBMIT_BUTTON");k.prop("disabled")||(k.prop("disabled",!0),setTimeout(function(){h("#EntryForm").submit()},1))});h(document).bind("keydown",function(k){if(k.ctrlKey&&"s"===String.fromCharCode(k.which).toLowerCase())return setTimeout(function(){h("#SUBMIT_BUTTON").click()},1),k.preventDefault(),k.stopPropagation(),!1});h("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var k=h("#SUBMIT_BUTTON").prop("value");h("#SUBMIT_BUTTON").replaceWith(h('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",k));h("#EntryForm").submit(function(){var l=validateForm();!1===l&&h("#SUBMIT_BUTTON").prop("disabled",!1);return l})}})();
