window.CIOC={};
(function(b,c){c.do_drop_down_navigation=function(){for(var a=b.getElementById("ActionList").options,d=0;d<a.length;d++)if(a[d].selected){var e=a[d].getAttribute("href");e&&("undefined"!=typeof a[d].attributes.newwindow?c.open(e):c.location.href=e);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var d=a(this),b=a(d.data("target")),c={autoOpen:!1,title:b.data("title"),modal:b.data("modal")};b.dialog(c);d.click(function(){b.dialog("isOpen")?b.dialog("close"):b.dialog("open")})})})})(document,window);
function CheckAll(b,c){b||(b="IDList");var a=c;c||(a=document.RecordList);for(var d=a.elements.length,e=0;e<d;e++){var f=a.elements[e];f.name===b&&(f.checked=!0)}}function ClearAll(b,c){b||(b="IDList");var a=c;c||(a=document.RecordList);for(var d=a.elements.length,e=0;e<d;e++){var f=a.elements[e];f.name===b&&(f.checked=!1)}}function add_class(b,c){b&&!(new RegExp("\\b"+c+"\\b")).test(b.className)&&(b.className&&(c=" "+c),b.className+=c)}
function remove_class(b,c){if(b){for(var a=b.className.split(" "),d=[],e=0;e<a.length;e++){var f=a[e];f!==c&&d.push(f)}b.className=d.join(" ")}}function hide(b){add_class(b,"NotVisible")}function show(b){remove_class(b,"NotVisible")}function openWin(b,c){window.open(b,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(b,c){window.open(b,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(b,c){window.open(b,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(b){var c={sm:openWin,lg:openWinL,xl:openWinXL};b(document).on("click","a.poplink",function(){var a=b(this).data("popargs");(c[a.size||"sm"]||openWin)(this.href,a.name||"popwin");return!1})});
(function(){var b=jQuery,c={},a=function(a){null!==a&&"undefined"!==typeof a?b("#myListCount").text(a):(a=b("#myListCount").text())&&(a=parseInt(a,10));a?c.myListLink.show():c.myListLink.hide()},d=function(a){b.each(a,function(a,d){b("#added_to_list_"+d).show();b("#add_to_list_"+d).hide()})},e=function(e){return function(f){f.fail?alert(f.errinfo):(f.ids?a(b.grep(f.ids,p[c.domain]).length):f.count?a(f.count):a(0),d([e]))}},f=function(a){a=b(a.currentTarget).data("id");b.ajax({success:e(a),dataType:"json",
error:function(){alert("Error")},data:{id:a},type:"POST",url:c.current_list_url})},l=function(a){return function(d){if(d.fail)alert(d.errinfo);else{d=!0;if(a){var c=b("#results_table #remove_from_list_"+a);c.length?c.parent().parent().remove():(d=!1,c=b("#results_container #remove_from_list_"+a),c.parents(".dlist-result").remove())}c=!1;if((c=d?1===b("#results_table tr").length:0===b("#results_container .dlist-result").length)||!a)b("#records_ui").hide(),b("#no_records_message").show()}}},m=function(a){a=
b(a.currentTarget).data("id");b.ajax({success:l(a),dataType:"json",error:function(){alert("Error")},data:{ID:a,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},g=function(a){b.ajax({success:l(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},p={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},r=function(e){if(e.fail)q();else if(e.inrequest){var f=b.grep(e.ids,
p[c.domain]);d(f);a(f.length);(e=e.previous_ids)&&b.each(e,function(a,d){b("#ct_added_to_previous_request_"+d).show()});b(".ListUI img").prop("src",function(a,d){return d.replace("list","referral")});b("#list_header_text").hide();b("#ct_header_text").show();c.current_list_url=c.ct_update_url;v()}else q()},q=function(){var e=function(){c.list_view_mode||d(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;a((c.already_added||[]).length);
v()};c.list_view_mode||c.has_session?e():b.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&e()}})},v=function(){b(".HideListUI").delegate(".add_to_list","click",f).delegate(".remove_from_list","click",m).removeClass("HideListUI");b("#remove_all_from_list").click(g);b.browser.msie&&"8.0">b.browser.msie&&b(".ListUI").removeClass("FixIE")};window.init_list_adder=function(a){c=a;c.myListLink=b("#myListLink").parent(":hidden").add("#myListLink");
a.in_request?b.ajax({success:r,dataType:"json",error:null,type:"POST",url:a.in_request}):q()}})();this.JSON||(this.JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function c(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var d=m[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(d,b){var e,m,t,x,y=f,w,n=b[d];n&&"object"===typeof n&&"function"===typeof n.toJSON&&(n=n.toJSON(d));"function"===typeof g&&(n=g.call(b,d,n));switch(typeof n){case "string":return c(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";f+=l;w=[];if("[object Array]"===Object.prototype.toString.apply(n)){x=n.length;for(e=0;e<x;e+=1)w[e]=a(e,n)||"null";t=0===w.length?"[]":f?"[\n"+f+w.join(",\n"+f)+"\n"+y+"]":"["+w.join(",")+"]";f=y;return t}if(g&&"object"===typeof g)for(x=g.length,e=0;e<x;e+=1)m=g[e],"string"===typeof m&&(t=a(m,n))&&w.push(c(m)+(f?": ":":")+t);else for(m in n)Object.hasOwnProperty.call(n,m)&&(t=a(m,n))&&w.push(c(m)+(f?": ":":")+t);t=0===w.length?"{}":f?"{\n"+f+w.join(",\n"+f)+"\n"+
y+"}":"{"+w.join(",")+"}";f=y;return t}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,l,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;"function"!==typeof JSON.stringify&&(JSON.stringify=function(d,b,c){var e;l=f="";if("number"===typeof c)for(e=0;e<c;e+=1)l+=" ";else"string"===typeof c&&(l=c);if((g=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return a("",{"":d})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var e,f,n=a[d];if(n&&"object"===typeof n)for(e in n)Object.hasOwnProperty.call(n,e)&&(f=c(n,e),void 0!==f?n[e]=f:delete n[e]);return b.call(a,d,n)}var e;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(b){var c={};jQuery(b).find("input,select,textarea").each(function(a){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var d=c[this.name];$(this).find("option").each(function(a){this.selected&&d.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(b,c){var a=jQuery;a(b).find("input,select,textarea").each(function(d){if(this.name){var b=
c[this.name];"undefined"!=typeof b&&null!==b&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?a(this).find("option").each(function(d){this.selected=1<b.length?0<=a.inArray(this.value,b):0===b.length?!1:this.value===b[0]}):this.value=b.length?b[0]:"":this.checked=1<b.length?0<=a.inArray(this.value,b):0===b.length?!1:this.value===b[0])}})};window.init_cached_state=function(b){var c=jQuery;b=b||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];c(window).on("beforeunload",function(){var a={form_values:get_form_values(b)};c.each(onbeforeunload_fns,function(d,b){b(a)});document.getElementById("cache_form_values").value=JSON.stringify(a)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var a=document.getElementById("cache_form_values");if(a&&a.value){var d=
JSON.parse(a.value);c.each(onbeforerestorevalues_fns,function(a,b){b(d)});restore_form_values(b,d.form_values)}}}})();
(function(){var b=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},a={"en-CA":!0,"":!0},d={},e={"fr-CA":"fr","es-MX":"es"},f=function(){var a=b(this),d=a.data("culture"),e=c[d]||b.datepicker.regional[d].dateFormat,f={};a.hasClass("NoYear")&&(e=e.replace(/[\- .\/]*yy[\/]?/,""),f={beforeShow:function(a,
d){d.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,d){d.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});f.dateFormat=e;a.datepicker(b.extend({},b.datepicker.regional[d],f)).prop("autocomplete","off")},l=function(c){b.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+b.ui.version+"/i18n/jquery.ui.datepicker-"+c+".min.js",function(){a[c]=!0;b.each(d[c],function(){f.call(this)});delete d[c]})};b.datepicker.regional["en-CA"]=b.extend({},b.datepicker.regional[""]);b.fn.extend({autodatepicker:function(){return this.each(function(){var c=
b(this),g;g=c.parents("[lang]").first().prop("lang")||"en-CA";g=e[g]||g;c.data("culture",g);a[g]?f.call(this):(c=d[g],c||(c=d[g]=[],l(g)),c.push(this))})}});jQuery(function(){b("input.DatePicker").autodatepicker()})})();
(function(b,c){var a,d,e,f,l,m,g,p,r,q,v,t,x,y,w,n,A,H,F,L,E,K,I,J;a=function(s){return new a.prototype.init(s)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=a:b.Globalize=a;a.cultures={};a.prototype={constructor:a,init:function(s){this.cultures=a.cultures;this.cultureSelector=s;return this}};a.prototype.init.prototype=a.prototype;a.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};a.cultures["default"].calendar=a.cultures["default"].calendars.standard;a.cultures.en=a.cultures["default"];a.cultureSelector="en";d=/^0x[a-f0-9]+$/i;e=/^[+\-]?infinity$/i;f=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;l=/^\s+|\s+$/g;m=function(a,d){if(a.indexOf)return a.indexOf(d);for(var b=0,k=a.length;b<k;b++)if(a[b]===d)return b;return-1};g=function(a,d){return a.substr(a.length-d.length)===d};p=function(){var a,d,b,k,M,e=arguments[0]||{},f=1,h=arguments.length,
n=!1;"boolean"===typeof e&&(n=e,e=arguments[1]||{},f=2);for("object"===typeof e||q(e)||(e={});f<h;f++)if(null!=(a=arguments[f]))for(d in a)b=e[d],k=a[d],e!==k&&(n&&k&&(v(k)||(M=r(k)))?(M?(M=!1,b=b&&r(b)?b:[]):b=b&&v(b)?b:{},e[d]=p(n,b,k)):k!==c&&(e[d]=k));return e};r=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};q=function(a){return"[object Function]"===Object.prototype.toString.call(a)};v=function(a){return"[object Object]"===Object.prototype.toString.call(a)};
t=function(a,d){return 0===a.indexOf(d)};x=function(a){return(a+"").replace(l,"")};y=function(a){return isNaN(a)?NaN:Math[0>a?"ceil":"floor"](a)};w=function(a,d,b){var k;for(k=a.length;k<d;k+=1)a=b?"0"+a:a+"0";return a};n=function(a,d){for(var b=0,k=!1,c=0,e=a.length;c<e;c++){var f=a.charAt(c);switch(f){case "'":k?d.push("'"):b++;k=!1;break;case "\\":k&&d.push("\\");k=!k;break;default:d.push(f),k=!1}}return b};A=function(a,d){d=d||"F";var b;b=a.patterns;var k=d.length;if(1===k){b=b[d];if(!b)throw"Invalid date format string '"+
d+"'.";d=b}else 2===k&&"%"===d.charAt(0)&&(d=d.charAt(1));return d};H=function(a,d,b){function k(a,b){var d;d=a+"";return 1<b&&d.length<b?(d=l[b-2]+d,d.substr(d.length-b,b)):d}function c(){if(p||m)return p;p=t.test(d);m=!0;return p}function e(a,b){if(x)return x[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var f=b.calendar,h=f.convert;if(!d||!d.length||"i"===d){if(b&&b.name.length)if(h)b=H(a,f.patterns.F,b);else{b=
new Date(a.getTime());var O=E(a,f.eras);b.setFullYear(K(a,f,O));b=b.toLocaleString()}else b=a.toString();return b}var O=f.eras,g="s"===d;d=A(f,d);b=[];var u,l=["0","00","000"],p,m,t=/([^d]|^)(d|dd)([^d]|$)/g,r=0,q=L(),x;for(!g&&h&&(x=h.fromGregorian(a));;){u=q.lastIndex;h=q.exec(d);u=d.slice(u,h?h.index:d.length);r+=n(u,b);if(!h)break;if(r%2)b.push(h[0]);else switch(u=h[0],h=u.length,u){case "ddd":case "dddd":b.push((3===h?f.days.namesAbbr:f.days.names)[a.getDay()]);break;case "d":case "dd":p=!0;
b.push(k(e(a,2),h));break;case "MMM":case "MMMM":u=e(a,1);b.push(f.monthsGenitive&&c()?f.monthsGenitive[3===h?"namesAbbr":"names"][u]:f.months[3===h?"namesAbbr":"names"][u]);break;case "M":case "MM":b.push(k(e(a,1)+1,h));break;case "y":case "yy":case "yyyy":u=x?x[0]:K(a,f,E(a,O),g);4>h&&(u%=100);b.push(k(u,h));break;case "h":case "hh":u=a.getHours()%12;0===u&&(u=12);b.push(k(u,h));break;case "H":case "HH":b.push(k(a.getHours(),h));break;case "m":case "mm":b.push(k(a.getMinutes(),h));break;case "s":case "ss":b.push(k(a.getSeconds(),
h));break;case "t":case "tt":u=12>a.getHours()?f.AM?f.AM[0]:" ":f.PM?f.PM[0]:" ";b.push(1===h?u.charAt(0):u);break;case "f":case "ff":case "fff":b.push(k(a.getMilliseconds(),3).substr(0,h));break;case "z":case "zz":u=a.getTimezoneOffset()/60;b.push((0>=u?"+":"-")+k(Math.floor(Math.abs(u)),h));break;case "zzz":u=a.getTimezoneOffset()/60;b.push((0>=u?"+":"-")+k(Math.floor(Math.abs(u)),2)+":"+k(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":f.eras&&b.push(f.eras[E(a,O)].name);break;
case "/":b.push(f["/"]);break;default:throw"Invalid date format pattern '"+u+"'.";}}return b.join("")};(function(){var a;a=function(a,b,d){var c=d.groupSizes,e=c[0],f=1,h=Math.pow(10,b),h=Math.round(a*h)/h;isFinite(h)||(h=a);a=h+"";var h="",h=a.split(/e/i),s=1<h.length?parseInt(h[1],10):0;a=h[0];h=a.split(".");a=h[0];h=1<h.length?h[1]:"";0<s?(h=w(h,s,!1),a+=h.slice(0,s),h=h.substr(s)):0>s&&(s=-s,a=w(a,s+1,!0),h=a.slice(-s,a.length)+h,a=a.slice(0,-s));h=0<b?d["."]+(h.length>b?h.slice(0,b):w(h,b)):
"";b=a.length-1;d=d[","];for(s="";0<=b;){if(0===e||e>b)return a.slice(0,b+1)+(s.length?d+s+h:h);s=a.slice(b-e+1,b+1)+(s.length?d+s:"");b-=e;f<c.length&&(e=c[f],f++)}return a.slice(0,b+1)+d+s+h};F=function(b,d,k){if(!isFinite(b))return Infinity===b?k.numberFormat.positiveInfinity:-Infinity===b?k.numberFormat.negativeInfinity:k.numberFormat.NaN;if(!d||"i"===d)return k.name.length?b.toLocaleString():b.toString();d=d||"D";k=k.numberFormat;var c=Math.abs(b),e=-1;1<d.length&&(e=parseInt(d.slice(1),10));
var f=d.charAt(0).toUpperCase(),h;switch(f){case "D":d="n";c=y(c);-1!==e&&(c=w(""+c,e,!0));0>b&&(c="-"+c);break;case "N":h=k;case "C":h=h||k.currency;case "P":h=h||k.percent;d=0>b?h.pattern[0]:h.pattern[1]||"n";-1===e&&(e=h.decimals);c=a(c*("P"===f?100:1),e,h);break;default:throw"Bad number format specifier: "+f;}b=/n|\$|-|%/g;for(h="";;){e=b.lastIndex;f=b.exec(d);h+=d.slice(e,f?f.index:d.length);if(!f)break;switch(f[0]){case "n":h+=c;break;case "$":h+=k.currency.symbol;break;case "-":/[1-9]/.test(c)&&
(h+=k["-"]);break;case "%":h+=k.percent.symbol}}return h}})();L=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};E=function(a,b){if(!b)return 0;for(var d,k=a.getTime(),c=0,e=b.length;c<e;c++)if(d=b[c].start,null===d||k>=d)return c;return 0};K=function(a,b,d,c){a=a.getFullYear();!c&&b.eras&&(a-=b.eras[d].offset);return a};(function(){var a,b,d,c,e,f,g;a=function(a,b){if(100>b){var d=new Date,c=E(d),d=K(d,a,c),c=a.twoDigitYearMax,c="string"===
typeof c?(new Date).getFullYear()%100+parseInt(c,10):c;b+=d-d%100;b>c&&(b-=100)}return b};b=function(a,b,d){var c=a.days,e=a._upperDays;e||(a._upperDays=e=[g(c.names),g(c.namesAbbr),g(c.namesShort)]);b=f(b);d?(a=m(e[1],b),-1===a&&(a=m(e[2],b))):a=m(e[0],b);return a};d=function(a,b,d){var c=a.months,e=a.monthsGenitive||a.months,k=a._upperMonths,s=a._upperMonthsGen;k||(a._upperMonths=k=[g(c.names),g(c.namesAbbr)],a._upperMonthsGen=s=[g(e.names),g(e.namesAbbr)]);b=f(b);a=m(d?k[1]:k[0],b);0>a&&(a=m(d?
s[1]:s[0],b));return a};c=function(a,b){var d=a._parseRegExp;if(d){var c=d[b];if(c)return c}else a._parseRegExp=d={};for(var c=A(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),e=["^"],k=[],f=0,s=0,M=L(),g;null!==(g=M.exec(c));){var B=c.slice(f,g.index),f=M.lastIndex,s=s+n(B,e);if(s%2)e.push(g[0]);else{var B=g[0],z=B.length;switch(B){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":B="(\\D+)";break;case "tt":case "t":B="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":B=
"(\\d{"+z+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":B="(\\d\\d?)";break;case "zzz":B="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":B="([+-]?\\d\\d?)";break;case "/":B="(\\/)";break;default:throw"Invalid date format pattern '"+B+"'.";}B&&e.push(B);k.push(g[0])}}n(c.slice(f),e);e.push("$");c={regExp:e.join("").replace(/\s+/g,"\\s+"),groups:k};return d[b]=c};e=function(a,b,d){return a<b||a>d};f=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
g=function(a){for(var b=[],d=0,c=a.length;d<c;d++)b[d]=f(a[d]);return b};I=function(f,n,g){f=x(f);g=g.calendar;n=c(g,n);var z=(new RegExp(n.regExp)).exec(f);if(null===z)return null;var p=n.groups,l=n=f=null,m=null,r=null,A=0,q,P=0,w=0,y=0;q=null;for(var H=!1,v=0,E=p.length;v<E;v++){var C=z[v+1];if(C){var D=p[v],F=D.length,G=parseInt(C,10);switch(D){case "dd":case "d":m=G;if(e(m,1,31))return null;break;case "MMM":case "MMMM":l=d(g,C,3===F);if(e(l,0,11))return null;break;case "M":case "MM":l=G-1;if(e(l,
0,11))return null;break;case "y":case "yy":case "yyyy":n=4>F?a(g,G):G;if(e(n,0,9999))return null;break;case "h":case "hh":A=G;12===A&&(A=0);if(e(A,0,11))return null;break;case "H":case "HH":A=G;if(e(A,0,23))return null;break;case "m":case "mm":P=G;if(e(P,0,59))return null;break;case "s":case "ss":w=G;if(e(w,0,59))return null;break;case "tt":case "t":H=g.PM&&(C===g.PM[0]||C===g.PM[1]||C===g.PM[2]);if(!H&&(!g.AM||C!==g.AM[0]&&C!==g.AM[1]&&C!==g.AM[2]))return null;break;case "f":case "ff":case "fff":y=
G*Math.pow(10,3-F);if(e(y,0,999))return null;break;case "ddd":case "dddd":r=b(g,C,3===F);if(e(r,0,6))return null;break;case "zzz":D=C.split(/:/);if(2!==D.length)return null;q=parseInt(D[0],10);if(e(q,-12,13))return null;D=parseInt(D[1],10);if(e(D,0,59))return null;q=60*q+(t(C,"-")?-D:D);break;case "z":case "zz":q=G;if(e(q,-12,13))return null;q*=60;break;case "g":case "gg":if(!C||!g.eras)return null;C=x(C.toLowerCase());D=0;for(F=g.eras.length;D<F;D++)if(C===g.eras[D].name.toLowerCase()){f=D;break}if(null===
f)return null}}}z=new Date;p=(v=g.convert)?v.fromGregorian(z)[0]:z.getFullYear();null===n?n=p:g.eras&&(n+=g.eras[f||0].offset);null===l&&(l=0);null===m&&(m=1);if(v){if(z=v.toGregorian(n,l,m),null===z)return null}else if(z.setFullYear(n,l,m),z.getDate()!==m||null!==r&&z.getDay()!==r)return null;H&&12>A&&(A+=12);z.setHours(A,P,w,y);null!==q&&(g=z.getMinutes()-(q+z.getTimezoneOffset()),z.setHours(z.getHours()+parseInt(g/60,10),g%60));return z}})();J=function(a,b,d){var c=b["-"];b=b["+"];var e;switch(d){case "n -":c=
" "+c,b=" "+b;case "n-":g(a,c)?e=["-",a.substr(0,a.length-c.length)]:g(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":c+=" ",b+=" ";case "-n":t(a,c)?e=["-",a.substr(c.length)]:t(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":t(a,"(")&&g(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};a.prototype.findClosestCulture=function(b){return a.findClosestCulture.call(this,b)};a.prototype.format=function(b,d,c){return a.format.call(this,b,d,c)};a.prototype.localize=function(b,
d){return a.localize.call(this,b,d)};a.prototype.parseInt=function(b,d,c){return a.parseInt.call(this,b,d,c)};a.prototype.parseFloat=function(b,d,c){return a.parseFloat.call(this,b,d,c)};a.prototype.culture=function(b){return a.culture.call(this,b)};a.addCultureInfo=function(a,b,d){var c={},e=!1;"string"!==typeof a?(d=a,a=this.culture().name,c=this.cultures[a]):"string"!==typeof b?(d=b,e=null==this.cultures[a],c=this.cultures[a]||this.cultures["default"]):(e=!0,c=this.cultures[b]);this.cultures[a]=
p(!0,{},c,d);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};a.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(r(a)){var d,c=this.cultures,e=a,f,g=e.length,h=[];for(f=0;f<g;f++)a=x(e[f]),a=a.split(";"),d=x(a[0]),1===a.length?a=1:(a=x(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),h.push({lang:d,pri:a});h.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(f=0;f<g;f++)if(d=h[f].lang,b=c[d])return b;for(f=0;f<g;f++){d=h[f].lang;do{e=d.lastIndexOf("-");if(-1===e)break;d=d.substr(0,e);if(b=c[d])return b}while(1)}for(f=0;f<g;f++){d=h[f].lang;for(var n in c)if(e=c[n],e.language==d)return e}}else if("object"===typeof a)return a;return b||null};a.format=function(a,b,d){d=this.findClosestCulture(d);a instanceof Date?a=H(a,b,d):"number"===typeof a&&(a=F(a,b,d));return a};a.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};a.parseDate=function(a,b,d){d=this.findClosestCulture(d);var c,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var f=b.length;e<f;e++){var g=b[e];if(g&&(c=I(a,g,d)))break}}}else for(e in b=d.calendar.patterns,b)if(c=I(a,b[e],d))break;return c||null};a.parseInt=function(b,d,c){return y(a.parseFloat(b,d,c))};a.parseFloat=function(a,b,c){"number"!==typeof b&&(c=b,b=10);var k=this.findClosestCulture(c);c=NaN;var g=k.numberFormat;-1<a.indexOf(k.numberFormat.currency.symbol)&&
(a=a.replace(k.numberFormat.currency.symbol,""),a=a.replace(k.numberFormat.currency["."],k.numberFormat["."]));a=x(a);if(e.test(a))c=parseFloat(a);else if(!b&&d.test(a))c=parseInt(a,16);else{k=J(a,g,g.pattern[0]);b=k[0];k=k[1];""===b&&"(n)"!==g.pattern[0]&&(k=J(a,g,"(n)"),b=k[0],k=k[1]);""===b&&"-n"!==g.pattern[0]&&(k=J(a,g,"-n"),b=k[0],k=k[1]);b=b||"+";var n;a=k.indexOf("e");0>a&&(a=k.indexOf("E"));0>a?(n=k,a=null):(n=k.substr(0,a),a=k.substr(a+1));var l=g["."],h=n.indexOf(l);0>h?(k=n,n=null):(k=
n.substr(0,h),n=n.substr(h+l.length));l=g[","];k=k.split(l).join("");h=l.replace(/\u00A0/g," ");l!==h&&(k=k.split(h).join(""));b+=k;null!==n&&(b+="."+n);null!==a&&(g=J(a,g,"-n"),b+="e"+(g[0]||"+")+g[1]);f.test(b)&&(c=parseFloat(b))}return c};a.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
(function(){draggable=!1;var b=null,c=null,a=[59.888937,-101.601562],d=null,e=null,f=!0,l=null,m=null,g=function(){c.setCenter(new google.maps.LatLng(a[0],a[1]),2)},p=function(){e&&e.setMap(null);e=null;m&&(google.maps.event.removeListener(m),m=null)},r=function(a,b){document.getElementById("LATITUDE").value=Globalize.format(a,"n6");document.getElementById("LONGITUDE").value=Globalize.format(b,"n6")},q=function(a,b){var d=new google.maps.LatLng(a,b);f&&c.setZoom(14);c.setCenter(d);f=!1;d=new google.maps.Marker({position:d,
map:c,clickable:!1,draggable:draggable});p();e=d;draggable&&(m=google.maps.event.addListener(d,"dragend",v))},v=function(){$("#GEOCODE_TYPE_SITE_REFRESH, #GEOCODE_TYPE_INTERSECTION_REFRESH").addClass("NotVisible");$("#GEOCODE_TYPE_MANUAL").prop("checked",!0);var a=this.getPosition();r(a.lat(),a.lng())},t=function(a){a&&(l=E,r(a.lat(),a.lng()),q(a.lat(),a.lng()))},x=function(a){var b=null;switch(a){case google.maps.GeocoderStatus.ZERO_RESULTS:b=pageconstants.txt_geocode_unknown_address;break;case google.maps.GeocoderStatus.REQUEST_DENIED:b=
pageconstants.txt_geocode_map_key_fail;break;case google.maps.GeocoderStatus.OVER_QUERY_LIMIT:b=pageconstants.txt_geocode_too_many_queries;break;default:b=pageconstants.txt_geocode_unknown_error+a}return b};window.get_response_message=x;var y=function(a){return function(b,d){d!==google.maps.GeocoderStatus.OK?a(null,d):a(b[0].geometry.location,d)}};window.handle_geocode=y;var w=function(){var a={zoom:13,mapTypeId:google.maps.MapTypeId.ROADMAP};b=document.getElementById("map_canvas");c=new google.maps.Map(b,
a);g();d||(d=new google.maps.Geocoder);var a=$("#LATITUDE")[0].value,e=$("#LONGITUDE")[0].value;a&&e&&q(Globalize.parseFloat(a),Globalize.parseFloat(e))},n=[],A=!1;window.maps_loaded=function(){A=!0;$.each(n,function(a,b){b()});n=[]};window.add_maps_loaded_callback=function(a){A?a():n.push(a)};window.initialize_maps=function(a,b,d,c){if(!window.cioc_map_script_added){window.cioc_map_script_added=!0;Globalize.culture(a);var e="";c&&(e="&libraries=places");$.getScript("//maps.googleapis.com/maps/api/js?v=3&"+
b+"&sensor=false&callback=maps_loaded&language="+a+e)}add_maps_loaded_callback(d)};var H=function(a,b){return y(function(d,c){d?(b&&$("#geocode_no_postal_code").show(),a(d)):c==google.maps.GeocoderStatus.ZERO_RESULTS&&!b&&document.getElementById("GEOCODE_TYPE_SITE").checked?I(a,!0):(alert(x(c)),a(null))})},F=function(a){var b=document.getElementById("EntryForm"),d=[];if(!b.SITE_STREET_NUMBER)return null;var c=[b.SITE_STREET_NUMBER.value,b.SITE_STREET.value,b.SITE_STREET_TYPE.value,b.SITE_STREET_DIR.value].join(" "),
c=c.replace(/^\s+/g,"");(c=c.replace(/\s+$/g,""))&&d.push(c);var e=["SITE_CITY","SITE_PROVINCE"];a||e.push("SITE_POSTAL_CODE");for(a=0;a<e.length;a++)(c=b[e[a]].value)&&d.push(c);(c=b.SITE_COUNTRY.value)?d.push(c):d.push("Canada");return(b=d.join(", "))&&"Canada"!=b?b:null},L=function(){var a=document.EntryForm,b=[];if(!a.INTERSECTION&&!a.INTERSECTION.value)return null;for(var d=["INTERSECTION","SITE_CITY","SITE_PROVINCE"],c=0;c<d.length;c++){var e=a[d[c]].value;e&&b.push(e)}(e=a.SITE_COUNTRY.value)?
b.push(e):b.push("Canada");return b.join(", ")},E=null,K=function(a,b,c){E=a;c=H(b,c);(E=a)?d.geocode({address:a},c):(p(),r("",""));a?$("#geocode_no_postal_code").hide():b(null)},I=function(a,b){var d=F(b);K(d,a,b)},J=function(a){var b=L();K(b,a)};window.handle_geocode_entryform_feedback=function(a,b){"undefined"!=typeof a&&null!==a&&"undefined"!=typeof b&&null!==b&&(l=E,t(google.maps.LatLng(Globalize.parseFloat(a),Globalize.parseFloat(b))))};var s=function(a){t(a)},B=function(a){N(!1);$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();
e||a||I(function(a){a?t(a):(f=!1,a=c.getCenter(),a=a.toUrlValue().split(","),r.apply(null,a),q.apply(null,a),E=l=null)})};window.do_geocode_type_manual=B;var N=function(a){var b=document.getElementById("map_refresh_ui_area");b&&(document.getElementById("LONGITUDE").readOnly=a,(document.getElementById("LATITUDE").readOnly=a)?$(b).hide():$(b).show())};window.entryform_maps_loaded=function(){draggable=!0;w();var a=$("#GEOCODE_TYPE_INTERSECTION_REFRESH"),d=$("#GEOCODE_TYPE_SITE_REFRESH");$("#GEOCODE_TYPE_SITE").click(function(){a.hide();
d.show();N(!0);I(t)});$("#GEOCODE_TYPE_INTERSECTION").click(function(){a.show();d.hide();N(!0);J(t)});$("#GEOCODE_TYPE_MANUAL").click(function(){B(!1)});$("#GEOCODE_TYPE_BLANK").click(function(){$("#GEOCODE_TYPE_SITE_REFRESH,#GEOCODE_TYPE_INTERSECTION_REFRESH").hide();N(!0);p();g();f=!0;$("#geocode_no_postal_code").hide();r("","");l=E=null});d.click(function(){I(t)});a.click(function(){J(t)});var c=document.EntryForm,e=document.getElementById("map_refresh");e&&$(e).click(function(){q(Globalize.parseFloat(c.LATITUDE.value),
Globalize.parseFloat(c.LONGITUDE.value))});c.SITE_STREET_NUMBER?document.getElementById("GEOCODE_TYPE_SITE").checked&&(I(s),d.show()):(c.GEOCODE_TYPE_SITE.disabled=!0,d.hide());c.INTERSECTION?document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(J(s),a.show()):(c.GEOCODE_TYPE_INTERSECTION.disabled=!0,d.hide());N(!c.GEOCODE_TYPE_MANUAL.checked);$(c).submit(function(a){var d=null,c=null;document.getElementById("GEOCODE_TYPE_SITE").checked?(d=F(),c=pageconstants.txt_geocode_address_changed):
document.getElementById("GEOCODE_TYPE_INTERSECTION").checked&&(d=L(),c=pageconstants.txt_geocode_intersection_change);c&&d!=l&&!confirm(c)&&(b.scrollIntoView(!0),document.documentElement.scrollTop-=10,a.preventDefault(),a.stopImmediatePropagation(),$("#SUBMIT_BUTTON").prop("disabled",!1))});e=function(){var a=$(this);$("#dropdownMAP_PIN .selection").html(a.html());$("#MAP_PIN").val(a.data("value"))};$("#dropdownMAP_PINmenu li a").click(e);e.call($("#dropdownMAP_PINmenu li a[data-value="+$("#MAP_PIN").val()+
"]"))}})();(function(b){b.widget("ui.combobox",{options:{source:null},_create:function(){var c=this.element;this.options.source&&(b(c).autocomplete({focus:function(a,b){return!1},source:this.options.source,delay:0,minLength:0}),b("<span>").insertAfter(c).addClass("SmallButton DownButton").css("margin-left","1px").click(function(a){c.autocomplete("widget").is(":visible")?c.autocomplete("close"):(c.autocomplete("search",""),c.focus())}))}})})(jQuery);
jQuery(function(b){var c="AB BC MB NB NL NS NT NU ON PE QC SK YT".split(" ");b(".Province").combobox({source:c});window.cioc_province_source=c});
(function(){var b=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=b;var c=function(a,c,f,l,m){f=f||"value";l=l||"";m=m||"";return function(g,p){if(c.term&&(new RegExp(l+a.ui.autocomplete.escapeRegex(c.term)+m,"i")).test(g.term)&&c.content&&13>c.content.length){var r=new RegExp(l+a.ui.autocomplete.escapeRegex(g.term)+m,"i");p(a.grep(c.content,function(a){return r.test(b(a[f]))}));return!0}return!1}};window.default_cache_search_fn=c;var a=function(a,e,f,l,m){f=f||{};m=m||c(a,f,l||"value");
return function(c,l,r){c.term=b(c.term);f.term===c.term&&f.content?l(f.content):m(c,l)||a.ajax({url:r||e,dataType:"json",data:c,cache:!1,success:function(a){f.term=c.term;f.content=a;l(a)}})}};window.create_caching_source_fn=a;window.init_community_autocomplete=function(d,c,f,l,m){var g={};m&&(m=d(m));m&&!m.length&&(m=null);var p=d("#"+c).autocomplete({focus:function(a,b){return!1},select:function(a,b){p.data({chkid:b.item.chkid,display:b.item.value})},source:a(d,f,g),minLength:l}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),p.autocomplete("close"))});m&&(p.parents("form").on("submit",function(){var a=p.val();if(p.data("display")===a)m.val(p.data("chkid"));else{if(g.content){var c=b(a),a=d.grep(g.content,function(a){return b(a.value)===c});if(1===a.length){m.val(a[0].chkid);p.data({chkid:a[0].chkid,display:a[0].value}).val(a[0].value);return}}m.val("")}}),cache_register_onbeforerestorevalues(function(a){p.length&&(a=a["autocomplete_data_"+p[0].id])&&p.data(a)}),cache_register_onbeforeunload(function(a){if(p.length){var b=
p.data();b.display&&b.chkid&&(a["autocomplete_data_"+p[0].id]={display:b.display,chkid:b.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(a,b,c,f){cache_register_onbeforeunload(function(a){a[b+"_added"]=c});cache_register_onbeforerestorevalues(function(c){(c=c[b+"_added"])&&a.each(c,function(a,b){f(b.chkid,b.display,"")})})};window.basic_chk_add_html=function(a,b){return function(c,f){var l=a("<tr>").append(a("<td>").append(a("<input>").prop({id:b+"_ID_"+c,type:"checkbox",checked:!0,defaultChecked:!0,name:b+"_ID",value:c})).append(document.createTextNode(" "+
f))).append(a("<td>").append(a("<input>").prop({id:b+"_NOTES_"+c,name:b+"_NOTES_"+c,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));a("#"+b+"_existing_add_table").append(l);return l.find('input[type="checkbox"]')[0]}};var b={},c=function(a){$("#NEW_"+a).autocomplete(b[a])};window.init_autocomplete_checklist=function(a,d){var e=d.field;if(!b[e]){var f=d.source;d.minLength=d.minLength||1;d.delay=d.delay||300;d.add_new_html=d.add_new_html||basic_chk_add_html(a,e);d.match_prop=
d.match_prop||"value";d.txt_not_found=d.txt_not_found||"Not Found";var l=a(d.delegate_root||document),m=d.added_values||[],g=function(a,b,c){var f=document.getElementById(e+"_ID_"+a);f?(f.checked=!0,d.after_add_new_value&&d.after_add_new_value.call(f)):(m.push({chkid:a,display:b,label:c}),a=d.add_new_html(a,b,c),d.after_add_new_value&&d.after_add_new_value.call(a))};create_checklist_onbefore_fns(a,e,m,g);var p={},r=function(b){a("#NEW_"+e).data({chkid:"",display:"",label:""}).prop("value","").focus();
a("#"+e+"_error").hide("slow",function(){a(this).remove()})},q=null,v=null;(function(b){a.isArray(b)?(v=function(c,e){var f=new RegExp(a.ui.autocomplete.escapeRegex(string_ci_ai(c.term)));e(a.grep(b,function(a){return f.test(string_ci_ai(a[d.match_prop]||a))}))},q=function(c,e){var f=string_ci_ai(c),g=a.grep(b,function(a){return string_ci_ai(string_ci_ai(a[d.match_prop]||a))===f});if(1===g.length)return e(g[0]),!0;e()}):"string"===typeof b?(v=create_caching_source_fn(a,b,p,d.match_prop),q=function(b,
c,e){var f=string_ci_ai(b);if(p.content){var g=a.grep(p.content,function(a){return string_ci_ai(a[d.match_prop])===f});if(1===g.length){c(g[0]);return}}e||string_ci_ai(p.term||"")===f?c():v({term:f},function(a){q(b,c,!0)})}):(v=b,q=d.look_for_fn)})(f);l.on("click","#add_"+e,function(b){b=a("#NEW_"+e);var c=b.data("chkid"),f=b.data("display"),l=b.data("label"),n=b[0].value;if(c&&f&&f==n)return g(c,f,l),r(),!1;q(b[0].value,function(b){b?(g(b.chkid,b.value,b.label),r()):0===a("#"+e+"_error").length&&
(a("#"+e+"_new_input_table").before(a("<p>").hide().addClass("Alert").prop("id",e+"_error").append(document.createTextNode(d.txt_not_found))),a("#"+e+"_error").show("slow"))});return!1});b[e]={focus:function(a,b){return!1},source:v,minLength:d.minLength,delay:d.delay,select:function(b,c){a("#NEW_"+e).data({chkid:c.item.chkid,display:c.item.value,label:c.item.label})}};l.on("keypress","#NEW_"+e,function(b){"13"==b.keyCode&&(b.preventDefault(),a("#NEW_"+e).autocomplete("close"),a("#add_"+e).trigger("click"))})}c(e)};
window.init_languages=function(a,b){var c=null,f=null,l=a("#LN_existing_add_table"),m=function(){var b=a(this).parents(".language-entry").find(".language-details-notes");this.checked?b.slideDown():b.slideUp()};init_autocomplete_checklist(a,{field:"LN",source:entryform.languages_source,txt_not_found:b,after_add_new_value:m,add_new_html:function(b,d){null===c&&(c=a("#add_LN"),f=c.data("newTemplate"));var m=f.replace(/LANGNAMELANGNAME/g,d).replace(/IDIDID/g,b);l.append(m)}});l.on("change",".language-primary",
m).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+a(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(b,c){a(this).css(b);a("<div>").addClass("arrow").addClass(c.vertical).addClass(c.horizontal).appendTo(this)}}});window.languages_check_state=m}})();
(function(){window.only_items_chk_add_html=function(b,c,a){return function(d,e){a&&a();b("#"+c+"_existing_add_container").append(b("<label>").append(b("<input>").prop({id:c+"_ID_"+d,type:"checkbox",checked:!0,defaultChecked:!0,name:c+"_ID",value:d})).append("&nbsp;").append(document.createTextNode(e))).append(" ; ")}};window.init_check_for_autochecklist=function(b){var c=jQuery,a=function(){var a=c(this).data("jump_location");(a=document.getElementById(a))&&a.scrollIntoView(!0)},d=function(){return c("<li>").append(c("<span>").data("jump_location",
this.id).addClass("UnaddedChecklistJump SimulateLink").append(c(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},e=c("input[id^=NEW_]");e.length&&(c("#EntryForm").submit(function(a){var l=e.map(function(){return this.value?this:null}),m;if(l.length&&!a.isDefaultPrevented()){if(!confirm(b)){a.preventDefault();c("#SUBMIT_BUTTON").prop("disabled",!1);a=c("#unadded_checklist_error_box");m=c("#unadded_checklist_error_list");var g=a.is(":visible");g&&m.children("ul:first").hide("slow",
function(){c(this).remove()});var p=c("<ul>");g&&p.hide();m.append(p);c.each(l.map(d),function(){p.append(this)});g?p.show("slow"):a.show("slow")}}else a.isDefaultPrevented()&&(a=c("#unadded_checklist_error_box"),m=c("#unadded_checklist_error_list"),a.hide("slow",function(){m.children().remove()}))}),c(document).on("click",".UnaddedChecklistJump",a))};window.init_entryform_items=function(b,c,a){var d=jQuery;b.each(function(){var b=null,f=this,l=d(f),m=1,g=l.find(".EntryFormItemContainerIds")[0];if(g){var p=
l.data("maxAdd");p&&(p=parseInt(p,10));var r=[];g.value&&(r=d.map(g.value.split(","),function(a){return 0===a.indexOf("NEW")&&0!==a.indexOf("NEWFB")?null:a}));var q={},v=function(){l.find(".EntryFormItemBox").each(function(a){d(this).find(".EntryFormItemCount").text(a+1)})},t=function(a){if(p){var b=l.find(".EntryFormItemContent:hidden").parent().find("button.EntryFormItemDelete").prop("disabled",!a);w.prop("disabled",!a);a?(b.removeClass("ui-state-disabled"),w.removeClass("ui-state-disabled")):(b.addClass("ui-state-disabled"),
w.addClass("ui-state-disabled"))}},x=function(){var a=0,b;for(b in q)a++;return r.length-a},y=function(a){var c=0;if(p&&!a&&(c=x(),c>=p)){alert("over");return}var f=l.data("addTmpl");r.push("NEW"+m++);g.value=r.join(",");f=d(f.replace(/\[COUNT\]/g,r.length).replace(/\[ID\]/g,r[r.length-1]));f.find(".DatePicker").autodatepicker();f.find(".Province").combobox({source:window.cioc_province_source});entryform.service_titles&&f.find(".ServiceTitleField").combobox({source:entryform.service_titles});l.append(f);
b&&(b.sortable("refresh"),v());p&&!a&&c+1===p&&t(!1)},w=l.parent().find(".EntryFormItemAdd").click(function(){y(!1)});l.on("click","button.EntryFormItemDelete",function(){var b=this,e=d(this).parents(".EntryFormItemBox").find(".EntryFormItemContent"),f=this.id.split("_"),f=f[f.length-2];if(e.is(":visible"))e.hide("slow",function(){q[f]=get_form_values(e);d(b).text(a);e.find("input,select,textarea").each(function(){"input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?
"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(){this.selected=!1}):this.value="":this.checked=!1});t(!0)});else{var g=0;if(p&&(g=x(),g>=p)){alert("over");return}var l=q[f];l&&(delete q[f],restore_form_values(e,l),e.show("slow",function(){d(b).text(c)}),p&&g+1===p&&t(!1))}});l.hasClass("sortable")&&(b=l.sortable({items:".EntryFormItemBox"}),b.bind("sortstart",function(a,b){b.helper.bgiframe();l.addClass("sorting")}),b.bind("sortstop",function(){var a=b.sortable("toArray");
r=d.map(a,function(a){a=a.split("_");return a[a.length-2]});g.value=r.join(",");setTimeout(function(){l.removeClass("sorting");v()},1)}));cache_register_onbeforeunload(function(a){a[f.id+"_ids"]=r;a[f.id+"_deletes"]=q;b&&(a[f.id+"_order"]=b.sortable("toArray"))});cache_register_onbeforerestorevalues(function(c){c[f.id+"_ids"]&&d.each(c[f.id+"_ids"],function(a,b){0===b.indexOf("NEW")&&y(!0)});c[f.id+"_deletes"]&&(q=c[f.id+"_deletes"],l.find(".EntryFormItemContent").each(function(){var b=this.id.split("_"),
b=b[b.length-2];q[b]&&d(this).hide().parent().find("button.EntryFormItemDelete").text(a)}));p&&x()>=p&&t(!1);b&&(c=c[f.id+"_order"])&&(c.reverse(),d.each(c,function(a,b){d("#"+b).detach().prependTo(l)}),b.sortable("refresh"),v())})}})};window.init_schedule=function(b){var c=function(){var a=b(this).parents(".EntryFormItemBox"),c=this.value;"0"===c?a.find(".recurs-ui").hide():"1"==c?(a.find(".repeat-every-ui, .repeats-on-ui, .recurs-week-label").show(),a.find(".repeat-week-of-month-ui, .repeat-day-of-month-ui, .recurs-month-label").hide()):
"2"==c?(a.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-month-label").show(),a.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-week-label").hide()):(a.find(".repeat-week-of-month-ui, .repeats-on-ui, .recurs-month-label").show(),a.find(".repeat-every-ui, .repeat-day-of-month-ui, .recurs-week-label").hide())};b("#ScheduleEditArea").on("change",".recur-type-selector",c).on("click",".schedule-ui-accept-feedback",function(a){var d=b(this);a=d.parents(".EntryFormItemBox");var d=d.data("schedule"),
e=a.find(".recur-type-selector");restore_form_values(a,d);c.call(e[0]);return!1}).find(".recur-type-selector").each(c)}})();
(function(){var b=jQuery;window.configure_entry_form_button=function(){b("#SUBMIT_BUTTON").click(function(c){c=b("#SUBMIT_BUTTON");c.prop("disabled")||(c.prop("disabled",!0),setTimeout(function(){b("#EntryForm").submit()},1))});b(document).bind("keydown",function(c){if(c.ctrlKey&&"s"===String.fromCharCode(c.which).toLowerCase())return setTimeout(function(){b("#SUBMIT_BUTTON").click()},1),c.preventDefault(),c.stopPropagation(),!1});b("#SUBMIT_BUTTON").prop("disabled",!1)};window.configure_feedback_submit_button=
function(){var c=b("#SUBMIT_BUTTON").prop("value");b("#SUBMIT_BUTTON").replaceWith(b('<input type="button" class="btn btn-default" id="SUBMIT_BUTTON">').prop("value",c));b("#EntryForm").submit(function(){var a=validateForm();!1===a&&b("#SUBMIT_BUTTON").prop("disabled",!1);return a})}})();
