window.CIOC={};
(function(a,d){d.do_drop_down_navigation=function(){for(var b=a.getElementById("ActionList").options,f=0;f<b.length;f++)if(b[f].selected){var c=b[f].getAttribute("href");c&&("undefined"!=typeof b[f].attributes.newwindow?d.open(c):d.location.href=c);break}};jQuery(function(a){a("[data-toggle=dialog]").each(function(){var d=a(this),c=a(d.data("target")),e={autoOpen:!1,title:c.data("title"),modal:c.data("modal")};c.dialog(e);d.click(function(){c.dialog("isOpen")?c.dialog("close"):c.dialog("open")})})})})(document,window);
function CheckAll(a,d){a||(a="IDList");var b=d;d||(b=document.RecordList);for(var f=b.elements.length,c=0;c<f;c++){var e=b.elements[c];e.name===a&&(e.checked=!0)}}function ClearAll(a,d){a||(a="IDList");var b=d;d||(b=document.RecordList);for(var f=b.elements.length,c=0;c<f;c++){var e=b.elements[c];e.name===a&&(e.checked=!1)}}function add_class(a,d){a&&!(new RegExp("\\b"+d+"\\b")).test(a.className)&&(a.className&&(d=" "+d),a.className+=d)}
function remove_class(a,d){if(a){for(var b=a.className.split(" "),f=[],c=0;c<b.length;c++){var e=b[c];e!==d&&f.push(e)}a.className=f.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,d){window.open(a,d,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,d){window.open(a,d,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,d){window.open(a,d,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var d={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var b=a(this).data("popargs");(d[b.size||"sm"]||openWin)(this.href,b.name||"popwin");return!1})});
(function(){var a=jQuery,d={},b=function(b){null!==b&&"undefined"!==typeof b?a("#myListCount").text(b):(b=a("#myListCount").text())&&(b=parseInt(b,10));b?d.myListLink.show():d.myListLink.hide()},f=function(b){a.each(b,function(b,d){a("#added_to_list_"+d).show();a("#add_to_list_"+d).hide()})},c=function(c){return function(e){e.fail?alert(e.errinfo):(e.ids?b(a.grep(e.ids,v[d.domain]).length):e.count?b(e.count):b(0),f([c]))}},e=function(b){b=a(b.currentTarget).data("id");a.ajax({success:c(b),dataType:"json",
error:function(){alert("Error")},data:{id:b},type:"POST",url:d.current_list_url})},g=function(b){return function(d){if(d.fail)alert(d.errinfo);else{d=!0;if(b){var c=a("#results_table #remove_from_list_"+b);c.length?c.parent().parent().remove():(d=!1,c=a("#results_container #remove_from_list_"+b),c.parents(".dlist-result").remove())}c=!1;if((c=d?1===a("#results_table tr").length:0===a("#results_container .dlist-result").length)||!b)a("#records_ui").hide(),a("#no_records_message").show()}}},k=function(b){b=
a(b.currentTarget).data("id");a.ajax({success:g(b),dataType:"json",error:function(){alert("Error")},data:{ID:b,RemoveItem:d.domain},type:"POST",url:d.current_list_url})},h=function(b){a.ajax({success:g(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:d.domain},type:"POST",url:d.current_list_url})},v={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},E=function(c){if(c.fail)y();else if(c.inrequest){var e=a.grep(c.ids,
v[d.domain]);f(e);b(e.length);(c=c.previous_ids)&&a.each(c,function(b,d){a("#ct_added_to_previous_request_"+d).show()});a(".ListUI img").prop("src",function(a,b){return b.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();d.current_list_url=d.ct_update_url;z()}else y()},y=function(){var c=function(){d.list_view_mode||f(d.already_added||[]);d.current_list_url=d.list_view_mode&&"ct"===d.list_view_mode?d.ct_update_url:d.list_update_url;b((d.already_added||[]).length);
z()};d.list_view_mode||d.has_session?c():a.ajax({dataType:"json",error:null,url:d.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&c()}})},z=function(){a(".HideListUI").delegate(".add_to_list","click",e).delegate(".remove_from_list","click",k).removeClass("HideListUI");a("#remove_all_from_list").click(h);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(b){d=b;d.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
b.in_request?a.ajax({success:E,dataType:"json",error:null,type:"POST",url:b.in_request}):y()}})();this.JSON||(this.JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function d(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var b=k[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(a,c){var f,k,r,x,w=e,s,l=c[a];l&&"object"===typeof l&&"function"===typeof l.toJSON&&(l=l.toJSON(a));"function"===typeof h&&(l=h.call(c,a,l));switch(typeof l){case "string":return d(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);
case "object":if(!l)return"null";e+=g;s=[];if("[object Array]"===Object.prototype.toString.apply(l)){x=l.length;for(f=0;f<x;f+=1)s[f]=b(f,l)||"null";r=0===s.length?"[]":e?"[\n"+e+s.join(",\n"+e)+"\n"+w+"]":"["+s.join(",")+"]";e=w;return r}if(h&&"object"===typeof h)for(x=h.length,f=0;f<x;f+=1)k=h[f],"string"===typeof k&&(r=b(k,l))&&s.push(d(k)+(e?": ":":")+r);else for(k in l)Object.hasOwnProperty.call(l,k)&&(r=b(k,l))&&s.push(d(k)+(e?": ":":")+r);r=0===s.length?"{}":e?"{\n"+e+s.join(",\n"+e)+"\n"+
w+"}":"{"+s.join(",")+"}";e=w;return r}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,g,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,d,c){var f;g=e="";if("number"===typeof c)for(f=0;f<c;f+=1)g+=" ";else"string"===typeof c&&(g=c);if((h=d)&&"function"!==typeof d&&("object"!==typeof d||"number"!==typeof d.length))throw Error("JSON.stringify");return b("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function d(a,c){var f,e,k=a[c];if(k&&"object"===typeof k)for(f in k)Object.hasOwnProperty.call(k,f)&&(e=d(k,f),void 0!==e?k[f]=e:delete k[f]);return b.call(a,c,k)}var c;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),"function"===typeof b?d({"":c},""):c;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var d={};jQuery(a).find("input,select,textarea").each(function(a){if(this.name)if(d[this.name]||(d[this.name]=[]),"select"===this.nodeName.toLowerCase()){var f=d[this.name];$(this).find("option").each(function(a){this.selected&&f.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&d[this.name].push(this.value||"")});return d};window.restore_form_values=function(a,d){var b=jQuery;b(a).find("input,select,textarea").each(function(a){if(this.name){var c=
d[this.name];"undefined"!=typeof c&&null!==c&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?b(this).find("option").each(function(a){this.selected=1<c.length?0<=b.inArray(this.value,c):0===c.length?!1:this.value===c[0]}):this.value=c.length?c[0]:"":this.checked=1<c.length?0<=b.inArray(this.value,c):0===c.length?!1:this.value===c[0])}})};window.init_cached_state=function(a){var d=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];d(window).on("beforeunload",function(){var b={form_values:get_form_values(a)};d.each(onbeforeunload_fns,function(a,c){c(b)});document.getElementById("cache_form_values").value=JSON.stringify(b)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var b=document.getElementById("cache_form_values");if(b&&b.value){var f=
JSON.parse(b.value);d.each(onbeforerestorevalues_fns,function(a,b){b(f)});restore_form_values(a,f.form_values)}}}})();
(function(){var a=jQuery,d={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},b={"en-CA":!0,"":!0},f={},c={"fr-CA":"fr","es-MX":"es"},e=function(){var b=a(this),c=b.data("culture"),f=d[c]||a.datepicker.regional[c].dateFormat,e={};b.hasClass("NoYear")&&(f=f.replace(/[\- .\/]*yy[\/]?/,""),e={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});e.dateFormat=f;b.datepicker(a.extend({},a.datepicker.regional[c],e)).prop("autocomplete","off")},g=function(c){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+c+".min.js",function(){b[c]=!0;a.each(f[c],function(){e.call(this)});delete f[c]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var d=
a(this),h;h=d.parents("[lang]").first().prop("lang")||"en-CA";h=c[h]||h;d.data("culture",h);b[h]?e.call(this):(d=f[h],d||(d=f[h]=[],g(h)),d.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();
(function(a){a.extend({tablesorter:new function(){function b(a,b){d(a+","+((new Date).getTime()-b.getTime())+"ms")}function d(a){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(a):alert(a)}function c(b,c){if(b.config.debug)var A="";if(0!=b.tBodies.length){var C=b.tBodies[0].rows;if(C[0])for(var p=[],h=C[0].cells.length,m=0;m<h;m++){var n=!1;a.metadata&&a(c[m]).metadata()&&a(c[m]).metadata().sorter?n=e(a(c[m]).metadata().sorter):b.config.headers[m]&&b.config.headers[m].sorter&&
(n=e(b.config.headers[m].sorter));if(!n)a:{for(var n=b,q=C,u=-1,g=m,l=t.length,r=!1,s=!1,v=!0;""==s&&v;)u++,q[u]?(r=q[u].cells[g],s=a.trim(k(n.config,r)),n.config.debug&&d("Checking if value was empty on row:"+u)):v=!1;for(q=1;q<l;q++)if(t[q].is(s,n,r)){n=t[q];break a}n=t[0]}b.config.debug&&(A+="column:"+m+" parser:"+n.id+"\n");p.push(n)}b.config.debug&&d(A);return p}}function e(a){for(var b=t.length,c=0;c<b;c++)if(t[c].id.toLowerCase()==a.toLowerCase())return t[c];return!1}function g(c){if(c.config.debug)var d=
new Date;for(var f=c.tBodies[0]&&c.tBodies[0].rows.length||0,e=c.tBodies[0].rows[0]&&c.tBodies[0].rows[0].cells.length||0,p=c.config.parsers,h={row:[],normalized:[]},m=0;m<f;++m){var n=a(c.tBodies[0].rows[m]),q=[];if(n.hasClass(c.config.cssChildRow))h.row[h.row.length-1]=h.row[h.row.length-1].add(n);else{h.row.push(n);for(var u=0;u<e;++u)q.push(p[u].format(k(c.config,n[0].cells[u]),c,n[0].cells[u]));q.push(h.normalized.length);h.normalized.push(q)}}c.config.debug&&b("Building cache for "+f+" rows:",
d);return h}function k(b,c){var d="";if(!c)return"";b.supportsTextContent||(b.supportsTextContent=c.textContent||!1);return d="simple"==b.textExtraction?b.supportsTextContent?c.textContent:c.childNodes[0]&&c.childNodes[0].hasChildNodes()?c.childNodes[0].innerHTML:c.innerHTML:"function"==typeof b.textExtraction?b.textExtraction(c):a(c).text()}function h(c,d){if(c.config.debug)var f=new Date;for(var e=d.row,p=d.normalized,h=p.length,m=p[0].length-1,n=a(c.tBodies[0]),q=[],u=0;u<h;u++){var k=p[u][m];
q.push(e[k]);if(!c.config.appender)for(var g=e[k].length,l=0;l<g;l++)n[0].appendChild(e[k][l])}c.config.appender&&c.config.appender(c,q);q=null;c.config.debug&&b("Rebuilt table:",f);z(c);setTimeout(function(){a(c).trigger("sortEnd")},0)}function v(c){if(c.config.debug)var e=new Date;var A=E(c);$tableHeaders=a(c.config.selectorHeaders,c).each(function(b){this.column=A[this.parentNode.rowIndex+"-"+this.cellIndex];var d;d=c.config.sortInitialOrder;d="Number"!=typeof d?"desc"==d.toLowerCase()?1:0:1==
d?1:0;this.count=this.order=d;d=a.metadata&&!1===a(this).metadata().sorter?!0:!1;d||(d=c.config.headers[b]&&!1===c.config.headers[b].sorter?!0:!1);d&&(this.sortDisabled=!0);y(c,b)&&(this.order=this.lockedOrder=y(c,b));this.sortDisabled||(d=a(this).addClass(c.config.cssHeader),c.config.onRenderHeader&&c.config.onRenderHeader.apply(d));c.config.headerList[b]=this});c.config.debug&&(b("Built headers:",e),d($tableHeaders));return $tableHeaders}function E(a){var b=[],c={};a=a.getElementsByTagName("THEAD")[0].getElementsByTagName("TR");
for(var d=0;d<a.length;d++)for(var f=a[d].cells,e=0;e<f.length;e++){var m=f[e],n=m.parentNode.rowIndex,q=n+"-"+m.cellIndex,h=m.rowSpan||1,m=m.colSpan||1,k;"undefined"==typeof b[n]&&(b[n]=[]);for(var g=0;g<b[n].length+1;g++)if("undefined"==typeof b[n][g]){k=g;break}c[q]=k;for(g=n;g<n+h;g++){"undefined"==typeof b[g]&&(b[g]=[]);for(var q=b[g],l=k;l<k+m;l++)q[l]="x"}}return c}function y(a,b){return a.config.headers[b]&&a.config.headers[b].lockedOrder?a.config.headers[b].lockedOrder:!1}function z(a){for(var b=
a.config.widgets,c=b.length,d=0;d<c;d++)r(b[d]).format(a)}function r(a){for(var b=B.length,c=0;c<b;c++)if(B[c].id.toLowerCase()==a.toLowerCase())return B[c]}function x(a,b){for(var c=b.length,d=0;d<c;d++)if(b[d][0]==a)return!0;return!1}function w(b,c,d,f){c.removeClass(f[0]).removeClass(f[1]);var e=[];c.each(function(b){this.sortDisabled||(e[this.column]=a(this))});b=d.length;for(c=0;c<b;c++)e[d[c][0]].addClass(f[d[c][1]])}function s(b,c){if(b.config.widthFixed){var d=a("<colgroup>");a("tr:first td",
b.tBodies[0]).each(function(){d.append(a("<col>").css("width",a(this).width()))});a(b).prepend(d)}}function l(a,c,d){if(a.config.debug)var f=new Date;for(var e="var sortWrapper = function(a,b) {",h=c.length,m=0;m<h;m++)var n=c[m][0],q=c[m][1],n="text"==a.config.parsers[n].type?0==q?D("text","asc",n):D("text","desc",n):0==q?D("numeric","asc",n):D("numeric","desc",n),g="e"+m,e=e+("var "+g+" = "+n),e=e+("if("+g+") { return "+g+"; } "),e=e+"else { ";m=d.normalized[0].length-1;e+="return a["+m+"]-b["+
m+"];";for(m=0;m<h;m++)e+="}; ";e+="return 0; }; ";a.config.debug&&b("Evaling expression:"+e,new Date);eval(e);d.normalized.sort(sortWrapper);a.config.debug&&b("Sorting on "+c.toString()+" and dir "+q+" time:",f);return d}function D(a,b,c){var d="a["+c+"]";c="b["+c+"]";if("text"==a&&"asc"==b)return"("+d+" == "+c+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : ("+d+" < "+c+") ? -1 : 1 )));";if("text"==a&&"desc"==b)return"("+d+" == "+c+" ? 0 : ("+d+
" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : ("+c+" < "+d+") ? -1 : 1 )));";if("numeric"==a&&"asc"==b)return"("+d+" === null && "+c+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+c+"));";if("numeric"==a&&"desc"==b)return"("+d+" === null && "+c+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : "+c+" - "+d+"));"}var t=[],B=[];this.defaults=
{cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=b;this.construct=function(b){return this.each(function(){if(this.tHead&&
this.tBodies){var d,f,e,p;this.config={};p=a.extend(this.config,a.tablesorter.defaults,b);d=a(this);a.data(this,"tablesorter",p);f=v(this);this.config.parsers=c(this,f);e=g(this);var t=[p.cssDesc,p.cssAsc];s(this);f.click(function(b){var c=d[0].tBodies[0]&&d[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&0<c){d.trigger("sortStart");a(this);c=this.column;this.order=this.count++%2;this.lockedOrder&&(this.order=this.lockedOrder);if(b[p.sortMultiSortKey])if(x(c,p.sortList))for(b=0;b<p.sortList.length;b++){var q=
p.sortList[b],g=p.headerList[q[0]];q[0]==c&&(g.count=q[1],g.count++,q[1]=g.count%2)}else p.sortList.push([c,this.order]);else{p.sortList=[];if(null!=p.sortForce)for(q=p.sortForce,b=0;b<q.length;b++)q[b][0]!=c&&p.sortList.push(q[b]);p.sortList.push([c,this.order])}setTimeout(function(){w(d[0],f,p.sortList,t);h(d[0],l(d[0],p.sortList,e))},1);return!1}}).mousedown(function(){if(p.cancelSelection)return this.onselectstart=function(){return!1},!1});d.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=
c(a,f);e=g(a)},1)}).bind("updateCell",function(a,b){var c=this.config,d=[b.parentNode.rowIndex-1,b.cellIndex];e.normalized[d[0]][d[1]]=c.parsers[d[1]].format(k(c,b),b)}).bind("sorton",function(b,c){a(this).trigger("sortStart");p.sortList=c;for(var d=p.sortList,g=this.config,k=d.length,F=0;F<k;F++){var r=d[F],s=g.headerList[r[0]];s.count=r[1];s.count++}w(this,f,d,t);h(this,l(this,d,e))}).bind("appendCache",function(){h(this,e)}).bind("applyWidgetId",function(a,b){r(b).format(this)}).bind("applyWidgets",
function(){z(this)});a.metadata&&a(this).metadata()&&a(this).metadata().sortlist&&(p.sortList=a(this).metadata().sortlist);0<p.sortList.length&&d.trigger("sorton",[p.sortList]);z(this)}})};this.addParser=function(a){for(var b=t.length,c=!0,d=0;d<b;d++)t[d].id.toLowerCase()==a.id.toLowerCase()&&(c=!1);c&&t.push(a)};this.addWidget=function(a){B.push(a)};this.formatFloat=function(a){a=parseFloat(a);return isNaN(a)?0:a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(b,
c){return/^[-+]?\d*$/.test(a.trim(b.replace(/[,.']/g,"")))};this.clearTableBody=function(b){a.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(b.tBodies[0]):b.tBodies[0].innerHTML=""}}});a.fn.extend({tablesorter:a.tablesorter.construct});var d=a.tablesorter;d.addParser({id:"text",is:function(a){return!0},format:function(b){return a.trim(b.toLocaleLowerCase())},type:"text"});d.addParser({id:"digit",is:function(b,d){return a.tablesorter.isDigit(b,d.config)},format:function(b){return a.tablesorter.formatFloat(b)},
type:"numeric"});d.addParser({id:"currency",is:function(a){return/^[\u00a3$\u20ac?.]/.test(a)},format:function(b){return a.tablesorter.formatFloat(b.replace(new RegExp(/[\u00a3$\u20ac]/g),""))},type:"numeric"});d.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(b){b=b.split(".");for(var d="",c=b.length,e=0;e<c;e++)var g=b[e],d=2==g.length?d+("0"+g):d+g;return a.tablesorter.formatFloat(d)},type:"numeric"});d.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},
format:function(a){return jQuery.trim(a.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});d.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(b){return a.tablesorter.formatFloat(""!=b?(new Date(b.replace(new RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});d.addParser({id:"percent",is:function(b){return/\%$/.test(a.trim(b))},format:function(b){return a.tablesorter.formatFloat(b.replace(new RegExp(/%/g),""))},type:"numeric"});
d.addParser({id:"usLongDate",is:function(a){return a.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(b){return a.tablesorter.formatFloat((new Date(b)).getTime())},type:"numeric"});d.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(b,d){var c=d.config;b=b.replace(/\-/g,"/");if("us"==c.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,
"$3/$1/$2");else if("uk"==c.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if("dd/mm/yy"==c.dateFormat||"dd-mm-yy"==c.dateFormat)b=b.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return a.tablesorter.formatFloat((new Date(b)).getTime())},type:"numeric"});d.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(b){return a.tablesorter.formatFloat((new Date("2000/01/01 "+b)).getTime())},
type:"numeric"});d.addParser({id:"metadata",is:function(a){return!1},format:function(b,d,c){b=d.config;b=b.parserMetadataName?b.parserMetadataName:"sortValue";return a(c).metadata()[b]},type:"numeric"});d.addWidget({id:"zebra",format:function(b){if(b.config.debug)var d=new Date;var c,e=-1,g;a("tr:visible",b.tBodies[0]).each(function(d){c=a(this);c.hasClass(b.config.cssChildRow)||e++;g=0==e%2;c.removeClass(b.config.widgetZebra.css[g?0:1]).addClass(b.config.widgetZebra.css[g?1:0])});b.config.debug&&
a.tablesorter.benchmark("Applying Zebra widget",d)}})})(jQuery);(function(a){var d=jQuery,b=function(b){b=d(b);var c=b.data("tblKey");return c!==a?c:b.text()};d(function(){d(".sortable_table").each(function(){var a={textExtraction:b},c=d(this),e=c.data("sortdisabled");if(e){var g={};a.headers=g;jQuery.each(e,function(a,b){g[b]={sorter:!1}})}if(e=c.data("defaultSort"))a.sortList=[e];c.tablesorter(a)})})})();
(function(){window.get_form_values=function(a){var d={};jQuery(a).find("input,select,textarea").each(function(a){if(this.name)if(d[this.name]||(d[this.name]=[]),"select"===this.nodeName.toLowerCase()){var f=d[this.name];$(this).find("option").each(function(a){this.selected&&f.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&d[this.name].push(this.value||"")});return d};window.restore_form_values=function(a,d){var b=jQuery;b(a).find("input,select,textarea").each(function(a){if(this.name){var c=
d[this.name];"undefined"!=typeof c&&null!==c&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?b(this).find("option").each(function(a){this.selected=1<c.length?0<=b.inArray(this.value,c):0===c.length?!1:this.value===c[0]}):this.value=c.length?c[0]:"":this.checked=1<c.length?0<=b.inArray(this.value,c):0===c.length?!1:this.value===c[0])}})};window.init_cached_state=function(a){var d=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];d(window).on("beforeunload",function(){var b={form_values:get_form_values(a)};d.each(onbeforeunload_fns,function(a,c){c(b)});document.getElementById("cache_form_values").value=JSON.stringify(b)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var b=document.getElementById("cache_form_values");if(b&&b.value){var f=
JSON.parse(b.value);d.each(onbeforerestorevalues_fns,function(a,b){b(f)});restore_form_values(a,f.form_values)}}}})();
(function(a){window.init_vprofiles=function(d,b,f,c){var e,g,k=null,h,v,E=function(a){a.personal_values=get_form_values("#personalform");a.last_tab=e.tabs("option","active")},y=function(a){a.last_tab&&e.tabs("option","active",a.last_tab);a.personal_values&&restore_form_values("#personalform",a.personal_values)},z=function(b){var c=a(this).parents("tr").first();b=c.data("refid");var d=a("#outcome_dialog"),e=a("#referral_outcome_"+b).data("outcome"),f=c.find(".OutcomeNotes").text(),g=c.find(".PositionTitle").html(),
c=c.find(".ReferralDate").html();a("#outcome_dialog_title").html(g+" ("+c+")");a("#outcome_refid")[0].value=b;a("#outcome_state").find("option[value='"+e+"']").prop("selected",!0);a("#outcome_notes")[0].value=f;d.data("created")?d.dialog("open"):(d.dialog({modal:!0,width:810}),d.data("created",!0));return!1},r=function(b){a("#outcome_dialog").dialog("close")},x=function(b){if(!b.error){r();b=a("#referral_outcome_"+b.RefID);var c=a("#outcome_state")[0].value,d=a.trim(a("#outcome_notes")[0].value);
b.data("outcome",c);"N"===c?b.find(".OutcomeContainer").hide():("S"===c?(b.find(".OutcomeSuccessfull").show(),b.find(".OutcomeUnsuccessful").hide()):(b.find(".OutcomeSuccessfull").hide(),b.find(".OutcomeUnsuccessful").show()),b.find(".OutcomeContainer").show());b.find(".OutcomeNotes").text(d);d?b.find(".OutcomeNotesContainer").show():b.find(".OutcomeNotesContainer").hide()}},w=function(b){b=a(this).serialize();a.post("outcome2.asp",b,x,"json");return!1},s=function(b){b=a(this).parents("tr").first().data("refid");
var c=a("#confirm_hide_dialog");a("#hide_confirm_refid")[0].value=b;c.data("created")?c.dialog("open"):(c.dialog({modal:!0,width:500}),c.data("created",!0));return!1},l=function(b){a("#confirm_hide_dialog").dialog("close");return!1},D=function(b){l();a.post("hideref.asp",a("#hide_confirm_form").serialize());a("#referral_table_row_"+a("#hide_confirm_refid")[0].value).remove();0===a("#referral_tab tbody tr").length&&(e.find(".ui-tabs-nav li:eq(2)").remove(),a("#referral_tab").remove(),e.tabs("refresh"))},
t=function(b){c?a.get(c,null,B,"html"):k&&a("#results_area").html(k);h.empty().append(v.children().clone(!0));g?g.dialog("open"):g=a("#interest_dialog").dialog({modal:!0,width:675,height:400});return!1},B=function(b){var c=a("#results_area"),d=h.find(".selected_interests_input"),e=(d=a.trim(d[0].value))&&d.split(",")||[];k||(k=c.html());c.html(b).find(".InterestResult").each(function(){var b=a(this),c=b.data("id");-1!==a.inArray(c.toString(),e)&&(b.find(".interest_add").hide(),b.find(".interest_added").show())})},
F=function(b){b=a(this).serialize();a.post("../interestfind.asp",b,B,"html");return!1},G=function(c){c=a(this);var d=c.parents("li.InterestResult:first");id=d.data("id");interests_input=h.find(".selected_interests_input");interest_ids=(val=a.trim(interests_input[0].value))&&val.split(",")||[];if(-1===a.inArray(id.toString(),interest_ids)){h.find(".NoSelectedInterests").hide();interest_ids.push(id);interests_input[0].value=interest_ids.join(",");h.append(a('<div class="selected_interest">'+d.find(".source_interest_text").html()+
' [ <a href="#" class="remove_interest"><img src="'+b+'images/redx.gif" alt="'+f+'"></a> ]</div>').data("id",id));var e=h.find("div.selected_interest").get();a.each(e,function(a,b){h.append(b)})}c.hide();d.find(".interest_added").show();return!1},A=function(b){b=a(this).parents(".selected_interest:first");id=b.data("id");term_list=b.parents(".TermList");interests_input=term_list.find(".selected_interests_input");interest_ids=(val=a.trim(interests_input[0].value))&&val.split(",")||[];interest_ids=
a.grep(interest_ids,function(a,b){return a!==id.toString()});interests_input[0].value=interest_ids.join(",");b.remove();a("#interest_add_"+id).show();a("#interest_added_"+id).hide();0===interest_ids.length&&term_list.find(".NoSelectedInterests").show();return!1},C=function(b){b=a(this).parents(".InterestList:first");b.find(".selected_interests_input")[0].value="";b.find(".selected_interest").remove();b.find(".NoSelectedInterests").show();return!1},p=function(b){b=a("#results_area");b.find(".interest_added").hide();
b.find(".interest_add").show();C.call(this);return!1},H=function(a){g.dialog("close");v.empty().append(h.children());return!1};a(function(a){e=a("#TabbedDisplayTabArea").tabs({selected:d});init_cached_state("#criteria_form");cache_register_onbeforeunload(E);cache_register_onbeforerestorevalues(y);restore_cached_state();h=a("#dlg_selected_interests");v=a("#selected_interests");a(document).on("click","input.referral_outcome_edit",z);a(document).on("click","input.referral_hide",s);a("#confirm_cancel").click(l);
a("#confirm_okay").click(D);a("#outcome_cancel").click(r);a("#outcome_form").submit(w);a("#interests_button").click(t);a("#interest_search_form").submit(F);a("#interest_dialog").delegate(".interest_add","click",G);a("#interest_dialog, #selected_interests").delegate(".remove_interest","click",A);a("#clear_button").click(p);a("#clear_interests").click(C);a("#accept_button").click(H);var b=v.html();a("#criteria_reset_button").click(function(){a("#criteria_form")[0].reset();v.html(b);return!1})})}})(jQuery);
