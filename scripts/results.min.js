/*
 Globalize

 http://github.com/jquery/globalize

 Copyright Software Freedom Conservancy, Inc.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
 jQuery scrollbarWidth - v0.2 - 2/11/2009
 http://benalman.com/projects/jquery-misc-plugins/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 http://benalman.com/projects/jquery-bbq-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery hashchange event - v1.2 - 2/11/2010
 http://benalman.com/projects/jquery-hashchange-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery throttle / debounce - v1.1 - 3/7/2010
 http://benalman.com/projects/jquery-throttle-debounce-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery blockUI plugin
 Version 2.70.0-2014.11.23
 Requires jQuery v1.7 or later

 Examples at: http://malsup.com/jquery/block/
 Copyright (c) 2007-2013 M. Alsup
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html

 Thanks to Amir-Hossein Sobhi for some excellent contributions!
*/
window.CIOC={};
(function(a,b){b.do_drop_down_navigation=function(){for(var e=a.getElementById("ActionList").options,r=0;r<e.length;r++)if(e[r].selected){var n=e[r].getAttribute("href");n&&("undefined"!=typeof e[r].attributes.newwindow?b.open(n):b.location.href=n);break}};jQuery(function(e){e("[data-toggle=dialog]").each(function(){var r=e(this),n=e(r.data("target")),A={autoOpen:!1,title:n.data("title"),modal:n.data("modal")};n.dialog(A);r.click(function(){n.dialog("isOpen")?n.dialog("close"):n.dialog("open")})})})})(document,window);
function CheckAll(a,b){a||="IDList";var e=b;b||(e=document.RecordList);b=e.elements.length;for(var r=0;r<b;r++){var n=e.elements[r];n.name===a&&(n.checked=!0)}}function ClearAll(a,b){a||="IDList";var e=b;b||(e=document.RecordList);b=e.elements.length;for(var r=0;r<b;r++){var n=e.elements[r];n.name===a&&(n.checked=!1)}}function add_class(a,b){a&&!(new RegExp("\\b"+b+"\\b")).test(a.className)&&(a.className&&(b=" "+b),a.className+=b)}
function remove_class(a,b){if(a){for(var e=a.className.split(" "),r=[],n=0;n<e.length;n++){var A=e[n];A!==b&&r.push(A)}a.className=r.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,b){window.open(a,b,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,b){window.open(a,b,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,b){window.open(a,b,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var b={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var e=a(this).data("popargs");(b[e.size||"sm"]||openWin)(this.href,e.name||"popwin");return!1})});
(function(){var a=jQuery,b={},e=function(w){null!==w&&"undefined"!==typeof w?a("#myListCount").text(w):(w=a("#myListCount").text())&&(w=parseInt(w,10));w?b.myListLink.show():b.myListLink.hide()},r=function(w){a.each(w,function(H,q){a("#added_to_list_"+q).show();a("#add_to_list_"+q).hide()})},n=function(w){return function(H){H.fail?alert(H.errinfo):(H.ids?e(a.grep(H.ids,B[b.domain]).length):H.count?e(H.count):e(0),r([w]))}},A=function(w){w=a(w.currentTarget).data("id");a.ajax({success:n(w),dataType:"json",
error:function(){alert("Error")},data:{id:w},type:"POST",url:b.current_list_url})},O=function(w){return function(H){if(H.fail)alert(H.errinfo);else{H=!0;if(w){var q=a("#results_table #remove_from_list_"+w);q.length?q.parent().parent().remove():(H=!1,q=a("#results_container #remove_from_list_"+w),q.parents(".dlist-result").remove())}(H?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&w||(a("#records_ui").hide(),a("#no_records_message").show())}}},K=function(w){w=
a(w.currentTarget).data("id");a.ajax({success:O(w),dataType:"json",error:function(){alert("Error")},data:{ID:w,RemoveItem:b.domain},type:"POST",url:b.current_list_url})},T=function(w){a.ajax({success:O(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:b.domain},type:"POST",url:b.current_list_url})},B={CIC:function(w){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(w)},VOL:function(w){return/^[1-9][0-9]*$/.test(w)}},P=function(w){if(w.fail)R();else if(w.inrequest){var H=a.grep(w.ids,
B[b.domain]);r(H);e(H.length);(w=w.previous_ids)&&a.each(w,function(q,k){a("#ct_added_to_previous_request_"+k).show()});a(".ListUI img").prop("src",function(q,k){return k.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();b.current_list_url=b.ct_update_url;x()}else R()},R=function(){var w=function(){b.list_view_mode||r(b.already_added||[]);b.current_list_url=b.list_view_mode&&"ct"===b.list_view_mode?b.ct_update_url:b.list_update_url;e((b.already_added||[]).length);
x()};b.list_view_mode||b.has_session?w():a.ajax({dataType:"json",error:null,url:b.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(H){H.has_session&&w()}})},x=function(){a(".HideListUI").delegate(".add_to_list","click",A).delegate(".remove_from_list","click",K).removeClass("HideListUI");a("#remove_all_from_list").click(T);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(w){b=w;b.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
w.in_request?a.ajax({success:P,dataType:"json",error:null,type:"POST",url:w.in_request}):R()}})();this.JSON||(this.JSON={});
(function(){function a(B){return 10>B?"0"+B:B}function b(B){n.lastIndex=0;return n.test(B)?'"'+B.replace(n,function(P){var R=K[P];return"string"===typeof R?R:"\\u"+("0000"+P.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+B+'"'}function e(B,P){var R=A,x=P[B];x&&"object"===typeof x&&"function"===typeof x.toJSON&&(x=x.toJSON(B));"function"===typeof T&&(x=T.call(P,B,x));switch(typeof x){case "string":return b(x);case "number":return isFinite(x)?String(x):"null";case "boolean":case "null":return String(x);
case "object":if(!x)return"null";A+=O;var w=[];if("[object Array]"===Object.prototype.toString.apply(x)){var H=x.length;for(B=0;B<H;B+=1)w[B]=e(B,x)||"null";P=0===w.length?"[]":A?"[\n"+A+w.join(",\n"+A)+"\n"+R+"]":"["+w.join(",")+"]";A=R;return P}if(T&&"object"===typeof T)for(H=T.length,B=0;B<H;B+=1){var q=T[B];"string"===typeof q&&(P=e(q,x))&&w.push(b(q)+(A?": ":":")+P)}else for(q in x)Object.hasOwnProperty.call(x,q)&&(P=e(q,x))&&w.push(b(q)+(A?": ":":")+P);P=0===w.length?"{}":A?"{\n"+A+w.join(",\n"+
A)+"\n"+R+"}":"{"+w.join(",")+"}";A=R;return P}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(B){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(B){return this.valueOf()});var r=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
n=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,A,O,K={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},T;"function"!==typeof JSON.stringify&&(JSON.stringify=function(B,P,R){var x;O=A="";if("number"===typeof R)for(x=0;x<R;x+=1)O+=" ";else"string"===typeof R&&(O=R);if((T=P)&&"function"!==typeof P&&("object"!==typeof P||"number"!==typeof P.length))throw Error("JSON.stringify");return e("",{"":B})});
"function"!==typeof JSON.parse&&(JSON.parse=function(B,P){function R(x,w){var H,q=x[w];if(q&&"object"===typeof q)for(H in q)if(Object.hasOwnProperty.call(q,H)){var k=R(q,H);void 0!==k?q[H]=k:delete q[H]}return P.call(x,w,q)}B=String(B);r.lastIndex=0;r.test(B)&&(B=B.replace(r,function(x){return"\\u"+("0000"+x.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(B.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return B=eval("("+B+")"),"function"===typeof P?R({"":B},""):B;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var b={};jQuery(a).find("input,select,textarea").each(function(e){if(this.name)if(b[this.name]||(b[this.name]=[]),"select"===this.nodeName.toLowerCase()){var r=b[this.name];$(this).find("option").each(function(n){this.selected&&r.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&b[this.name].push(this.value||"")});return b};window.restore_form_values=function(a,b){var e=jQuery;e(a).find("input,select,textarea").each(function(r){if(this.name){var n=
b[this.name];"undefined"!=typeof n&&null!==n&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?e(this).find("option").each(function(A){this.selected=1<n.length?0<=e.inArray(this.value,n):0===n.length?!1:this.value===n[0]}):this.value=n.length?n[0]:"":this.checked=1<n.length?0<=e.inArray(this.value,n):0===n.length?!1:this.value===n[0])}})};window.init_cached_state=function(a){var b=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];var e=function(){var r=document.getElementById("cache_form_values");if(r){var n={form_values:get_form_values(a)};b.each(onbeforeunload_fns,function(A,O){O(n)});r.value=JSON.stringify(n)}};document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState&&e()});document.addEventListener("freeze",e);window.addEventListener("pagehide",e);window.cache_register_onbeforeunload=function(r){onbeforeunload_fns.push(r)};window.cache_register_onbeforerestorevalues=
function(r){onbeforerestorevalues_fns.push(r)};window.restore_cached_state=function(){b(window).on("pageshow",function(r){if(!r.originalEvent.persisted&&(r=document.getElementById("cache_form_values"))&&r.value){var n=JSON.parse(r.value);b.each(onbeforerestorevalues_fns,function(A,O){O(n)});restore_form_values(a,n.form_values)}})}}})();
(function(){var a=jQuery,b={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},e={"en-CA":!0,"":!0},r={},n={"fr-CA":"fr","es-MX":"es"},A=function(){var K=a(this),T=K.data("culture"),B=b[T]||a.datepicker.regional[T].dateFormat,P={};K.hasClass("NoYear")&&(B=B.replace(/[\- .\/]*yy[\/]?/,""),P={beforeShow:function(R,
x){x.dpDiv.addClass("NoYearDatePicker")},onClose:function(R,x){x.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});P.dateFormat=B;K.datepicker(a.extend({},a.datepicker.regional[T],P)).prop("autocomplete","off")},O=function(K){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+K+".min.js",function(){e[K]=!0;a.each(r[K],function(){A.call(this)});delete r[K]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var K=
a(this);var T=K.parents("[lang]").first().prop("lang")||"en-CA";T=n[T]||T;K.data("culture",T);e[T]?A.call(this):(K=r[T],K||(K=r[T]=[],O(T)),K.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();function ClusterIcon(a,b){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.cluster_=a;this.className_=a.getMarkerClusterer().getClusterClass();this.styles_=b;this.sums_=this.div_=this.center_=null;this.visible_=!1;this.setMap(a.getMap())}
ClusterIcon.prototype.onAdd=function(){var a=this,b,e;this.div_=document.createElement("div");this.div_.className=this.className_;this.visible_&&this.show();this.getPanes().overlayMouseTarget.appendChild(this.div_);this.getMap().getDiv().addEventListener("bounds_changed",function(){e=b});this.div_.addEventListener("mousedown",function(){b=!0;e=!1});this.div_.addEventListener("click",function(r){b=!1;if(!e){var n=a.cluster_.getMarkerClusterer();google.maps.event.trigger(n,"click",a.cluster_);google.maps.event.trigger(n,
"clusterclick",a.cluster_);if(n.getZoomOnClick()){var A=n.getMaxZoom();var O=a.cluster_.getBounds();n.getMap().fitBounds(O);setTimeout(function(){n.getMap().fitBounds(O);null!==A&&n.getMap().getZoom()>A&&n.getMap().setZoom(A+1)},100)}r.cancelBubble=!0;r.stopPropagation&&r.stopPropagation()}});this.div_.addEventListener("mouseover",function(){var r=a.cluster_.getMarkerClusterer();google.maps.event.trigger(r,"mouseover",a.cluster_)});this.div_.addEventListener("mouseout",function(){var r=a.cluster_.getMarkerClusterer();
google.maps.event.trigger(r,"mouseout",a.cluster_)})};ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)};ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px";this.div_.style.left=a.x+"px"}};
ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none");this.visible_=!1};
ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);this.div_.innerHTML=this.cluster_.printable_?"<img src='"+this.url_+"'><div style='position: absolute; top: 0px; left: 0px; width: "+this.width_+"px;'>"+this.sums_.text+"</div>":this.sums_.text;this.div_.title="undefined"===typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title;this.div_.style.display=""}this.visible_=
!0};
ClusterIcon.prototype.useStyle=function(a){this.sums_=a;a=Math.max(0,a.index-1);a=Math.min(this.styles_.length-1,a);a=this.styles_[a];this.url_=a.url;this.height_=a.height;this.width_=a.width;this.anchor_=a.anchor;this.anchorIcon_=a.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)];this.textColor_=a.textColor||"black";this.textSize_=a.textSize||11;this.textDecoration_=a.textDecoration||"none";this.fontWeight_=a.fontWeight||"bold";this.fontStyle_=a.fontStyle||"normal";this.fontFamily_=a.fontFamily||
"Arial,sans-serif";this.backgroundPosition_=a.backgroundPosition||"0 0"};ClusterIcon.prototype.setCenter=function(a){this.center_=a};
ClusterIcon.prototype.createCss=function(a){var b=[];this.cluster_.printable_||(b.push("background-image:url("+this.url_+");"),b.push("background-position:"+this.backgroundPosition_+";"));"object"===typeof this.anchor_?("number"===typeof this.anchor_[0]&&0<this.anchor_[0]&&this.anchor_[0]<this.height_?b.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):b.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"===typeof this.anchor_[1]&&0<this.anchor_[1]&&
this.anchor_[1]<this.width_?b.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):b.push("width:"+this.width_+"px; text-align:center;")):b.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");b.push("cursor:pointer; top:"+a.y+"px; left:"+a.x+"px; color:"+this.textColor_+"; position:absolute; font-size:"+this.textSize_+"px; font-family:"+this.fontFamily_+"; font-weight:"+this.fontWeight_+"; font-style:"+this.fontStyle_+
"; text-decoration:"+this.textDecoration_+";");return b.join("")};ClusterIcon.prototype.getPosFromLatLng_=function(a){a=this.getProjection().fromLatLngToDivPixel(a);a.x-=this.anchorIcon_[1];a.y-=this.anchorIcon_[0];return a};
function Cluster(a){this.markerClusterer_=a;this.map_=a.getMap();this.gridSize_=a.getGridSize();this.minClusterSize_=a.getMinimumClusterSize();this.averageCenter_=a.getAverageCenter();this.printable_=a.getPrintable();this.markers_=[];this.bounds_=this.center_=null;this.clusterIcon_=new ClusterIcon(this,a.getStyles())}Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getIcon=function(){return this.clusterIcon_};Cluster.prototype.getMarkers=function(){return this.markers_};
Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var a,b=new google.maps.LatLngBounds(this.center_,this.center_),e=this.getMarkers();for(a=0;a<e.length;a++)b.extend(e[a].getPosition());return b};Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null);this.markers_=[];delete this.markers_};
Cluster.prototype.addMarker=function(a){if(this.isMarkerAlreadyAdded_(a))return!1;if(!this.center_)this.center_=a.getPosition(),this.calculateBounds_();else if(this.averageCenter_){var b=this.markers_.length+1;var e=(this.center_.lat()*(b-1)+a.getPosition().lat())/b;b=(this.center_.lng()*(b-1)+a.getPosition().lng())/b;this.center_=new google.maps.LatLng(e,b);this.calculateBounds_()}a.isAdded=!0;this.markers_.push(a);e=this.markers_.length;b=this.markerClusterer_.getMaxZoom();if(null!==b&&this.map_.getZoom()>
b)a.getMap()!==this.map_&&a.setMap(this.map_);else if(e<this.minClusterSize_)a.getMap()!==this.map_&&a.setMap(this.map_);else if(e===this.minClusterSize_)for(a=0;a<e;a++)this.markers_[a].setMap(null);else a.setMap(null);this.updateIcon_();return!0};Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())};Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)};
Cluster.prototype.updateIcon_=function(){var a=this.markers_.length,b=this.markerClusterer_.getMaxZoom();null!==b&&this.map_.getZoom()>b?this.clusterIcon_.hide():a<this.minClusterSize_?this.clusterIcon_.hide():(a=this.markerClusterer_.getStyles().length,a=this.markerClusterer_.getCalculator()(this.markers_,a),this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(a),this.clusterIcon_.show())};
Cluster.prototype.isMarkerAlreadyAdded_=function(a){var b;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(a);for(b=0;b<this.markers_.length;b++)if(a===this.markers_[b])return!0;return!1};
function MarkerClusterer(a,b,e){this.extend(MarkerClusterer,google.maps.OverlayView);b=b||[];e=e||{};this.markers_=[];this.clusters_=[];this.listeners_=[];this.activeMap_=null;this.ready_=!1;this.gridSize_=e.gridSize||60;this.minClusterSize_=e.minimumClusterSize||2;this.maxZoom_=e.maxZoom||null;this.styles_=e.styles||[];this.title_=e.title||"";this.zoomOnClick_=!0;void 0!==e.zoomOnClick&&(this.zoomOnClick_=e.zoomOnClick);this.averageCenter_=!1;void 0!==e.averageCenter&&(this.averageCenter_=e.averageCenter);
this.ignoreHidden_=!1;void 0!==e.ignoreHidden&&(this.ignoreHidden_=e.ignoreHidden);this.printable_=!1;void 0!==e.printable&&(this.printable_=e.printable);this.imagePath_=e.imagePath||MarkerClusterer.IMAGE_PATH;this.imageExtension_=e.imageExtension||MarkerClusterer.IMAGE_EXTENSION;this.imageSizes_=e.imageSizes||MarkerClusterer.IMAGE_SIZES;this.calculator_=e.calculator||MarkerClusterer.CALCULATOR;this.batchSize_=e.batchSize||MarkerClusterer.BATCH_SIZE;this.batchSizeIE_=e.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE;
this.clusterClass_=e.clusterClass||"cluster";-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_);this.setupStyles_();this.addMarkers(b,!0);this.setMap(a)}
MarkerClusterer.prototype.onAdd=function(){var a=this;this.activeMap_=this.getMap();this.ready_=!0;this.repaint();this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){a.resetViewport_(!1);this.getZoom()!==(this.get("minZoom")||0)&&this.getZoom()!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){a.redraw_()})]};
MarkerClusterer.prototype.onRemove=function(){var a;for(a=0;a<this.markers_.length;a++)this.markers_[a].setMap(this.activeMap_);for(a=0;a<this.clusters_.length;a++)this.clusters_[a].remove();this.clusters_=[];for(a=0;a<this.listeners_.length;a++)google.maps.event.removeListener(this.listeners_[a]);this.listeners_=[];this.activeMap_=null;this.ready_=!1};MarkerClusterer.prototype.draw=function(){};
MarkerClusterer.prototype.setupStyles_=function(){var a;if(!(0<this.styles_.length))for(a=0;a<this.imageSizes_.length;a++){var b=this.imageSizes_[a];this.styles_.push({url:this.imagePath_+(a+1)+"."+this.imageExtension_,height:b,width:b})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var a,b=this.getMarkers(),e=new google.maps.LatLngBounds;for(a=0;a<b.length;a++)e.extend(b[a].getPosition());this.getMap().fitBounds(e)};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};
MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a};MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinimumClusterSize=function(a){this.minClusterSize_=a};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a};MarkerClusterer.prototype.getStyles=function(){return this.styles_};
MarkerClusterer.prototype.setStyles=function(a){this.styles_=a};MarkerClusterer.prototype.getTitle=function(){return this.title_};MarkerClusterer.prototype.setTitle=function(a){this.title_=a};MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.setZoomOnClick=function(a){this.zoomOnClick_=a};MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_};
MarkerClusterer.prototype.setAverageCenter=function(a){this.averageCenter_=a};MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_};MarkerClusterer.prototype.setIgnoreHidden=function(a){this.ignoreHidden_=a};MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_};MarkerClusterer.prototype.setImageExtension=function(a){this.imageExtension_=a};MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_};
MarkerClusterer.prototype.setImagePath=function(a){this.imagePath_=a};MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_};MarkerClusterer.prototype.setImageSizes=function(a){this.imageSizes_=a};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a};MarkerClusterer.prototype.getPrintable=function(){return this.printable_};
MarkerClusterer.prototype.setPrintable=function(a){this.printable_=a};MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_};MarkerClusterer.prototype.setBatchSizeIE=function(a){this.batchSizeIE_=a};MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_};MarkerClusterer.prototype.setClusterClass=function(a){this.clusterClass_=a};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};
MarkerClusterer.prototype.getClusters=function(){return this.clusters_};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.addMarker=function(a,b){this.pushMarkerTo_(a);b||this.redraw_()};MarkerClusterer.prototype.addMarkers=function(a,b){var e;for(e=0;e<a.length;e++)this.pushMarkerTo_(a[e]);b||this.redraw_()};
MarkerClusterer.prototype.pushMarkerTo_=function(a){if(a.getDraggable()){var b=this;google.maps.event.addListener(a,"dragend",function(){b.ready_&&(this.isAdded=!1,b.repaint())})}a.isAdded=!1;this.markers_.push(a)};MarkerClusterer.prototype.removeMarker=function(a,b){a=this.removeMarker_(a);!b&&a&&this.repaint();return a};MarkerClusterer.prototype.removeMarkers=function(a,b){var e,r=!1;for(e=0;e<a.length;e++){var n=this.removeMarker_(a[e]);r=r||n}!b&&r&&this.repaint();return r};
MarkerClusterer.prototype.removeMarker_=function(a){var b,e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(a);else for(b=0;b<this.markers_.length;b++)if(a===this.markers_[b]){e=b;break}if(-1===e)return!1;a.setMap(null);this.markers_.splice(e,1);return!0};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0);this.markers_=[]};
MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_=[];this.resetViewport_(!1);this.redraw_();setTimeout(function(){var b;for(b=0;b<a.length;b++)a[b].remove()},0)};
MarkerClusterer.prototype.getExtendedBounds=function(a){var b=this.getProjection(),e=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),r=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng());e=b.fromLatLngToDivPixel(e);e.x+=this.gridSize_;e.y-=this.gridSize_;r=b.fromLatLngToDivPixel(r);r.x-=this.gridSize_;r.y+=this.gridSize_;e=b.fromDivPixelToLatLng(e);b=b.fromDivPixelToLatLng(r);a.extend(e);a.extend(b);return a};MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)};
MarkerClusterer.prototype.resetViewport_=function(a){var b;for(b=0;b<this.clusters_.length;b++)this.clusters_[b].remove();this.clusters_=[];for(b=0;b<this.markers_.length;b++){var e=this.markers_[b];e.isAdded=!1;a&&e.setMap(null)}};MarkerClusterer.prototype.pi_over_180=Math.PI/180;MarkerClusterer.prototype.pi_over_360=Math.PI/360;MarkerClusterer.prototype.distanceBetweenPoints_=function(a,b){var e=a.lat(),r=b.lat();a=(b.lng()-a.lng())*Math.cos((e+r)/2);e=r-e;return 6371*Math.sqrt(a*a+e*e)};
MarkerClusterer.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())};MarkerClusterer.prototype.addToClosestCluster_=function(a){var b,e,r=4E4,n=null;for(b=0;b<this.clusters_.length;b++){var A=this.clusters_[b];if(e=A.getCenter())e=this.distanceBetweenPoints_(e,a.getPosition()),e<r&&(r=e,n=A)}n&&n.isMarkerInClusterBounds(a)?n.addMarker(a):(A=new Cluster(this),A.addMarker(a),this.clusters_.push(A))};
MarkerClusterer.prototype.createClusters_=function(a){var b=this;if(this.ready_){0===a&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!==typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic));var e=3<this.getMap().getZoom()?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,
178.00048865625));e=this.getExtendedBounds(e);for(var r=Math.min(a+this.batchSize_,this.markers_.length);a<r;a++){var n=this.markers_[a];!n.isAdded&&this.isMarkerInBounds_(n,e)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n)}r<this.markers_.length?this.timerRefStatic=setTimeout(function(){b.createClusters_(r)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}};
MarkerClusterer.prototype.extend=function(a,b){return function(e){for(var r in e.prototype)this.prototype[r]=e.prototype[r];return this}.apply(a,[b])};MarkerClusterer.CALCULATOR=function(a,b){for(var e=0,r=a=a.length.toString();0!==r;)r=parseInt(r/10,10),e++;e=Math.min(e,b);return{text:a,index:e,title:""}};MarkerClusterer.BATCH_SIZE=2E3;MarkerClusterer.BATCH_SIZE_IE=500;MarkerClusterer.IMAGE_PATH="//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m";
MarkerClusterer.IMAGE_EXTENSION="png";MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90];
(function(a,b){var e,r;var n=function(c){return new n.prototype.init(c)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=n:a.Globalize=n;n.cultures={};n.prototype={constructor:n,init:function(c){this.cultures=n.cultures;this.cultureSelector=c;return this}};n.prototype.init.prototype=n.prototype;n.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",
groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},
months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};
n.cultures["default"].calendar=n.cultures["default"].calendars.standard;n.cultures.en=n.cultures["default"];n.cultureSelector="en";var A=/^0x[a-f0-9]+$/i;var O=/^[+\-]?infinity$/i;var K=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;var T=/^\s+|\s+$/g;var B=function(c,d){if(c.indexOf)return c.indexOf(d);for(var h=0,g=c.length;h<g;h++)if(c[h]===d)return h;return-1};var P=function(c,d){return c.substr(c.length-d.length)===d};var R=function(){var c,d,h,g=arguments[0]||{},t=1,y=arguments.length,z=!1;"boolean"===typeof g&&
(z=g,g=arguments[1]||{},t=2);for("object"===typeof g||w(g)||(g={});t<y;t++)if(null!=(c=arguments[t]))for(d in c){var l=g[d];var E=c[d];g!==E&&(z&&E&&(H(E)||(h=x(E)))?(h?(h=!1,l=l&&x(l)?l:[]):l=l&&H(l)?l:{},g[d]=R(z,l,E)):E!==b&&(g[d]=E))}return g};var x=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)};var w=function(c){return"[object Function]"===Object.prototype.toString.call(c)};var H=function(c){return"[object Object]"===Object.prototype.toString.call(c)};
var q=function(c,d){return 0===c.indexOf(d)};var k=function(c){return(c+"").replace(T,"")};var N=function(c){return isNaN(c)?NaN:Math[0>c?"ceil":"floor"](c)};var C=function(c,d,h){var g;for(g=c.length;g<d;g+=1)c=h?"0"+c:c+"0";return c};var Q=function(c,d){for(var h=0,g=!1,t=0,y=c.length;t<y;t++){var z=c.charAt(t);switch(z){case "'":g?d.push("'"):h++;g=!1;break;case "\\":g&&d.push("\\");g=!g;break;default:d.push(z),g=!1}}return h};var W=function(c,d){d=d||"F";c=c.patterns;var h=d.length;if(1===h){c=
c[d];if(!c)throw"Invalid date format string '"+d+"'.";d=c}else 2===h&&"%"===d.charAt(0)&&(d=d.charAt(1));return d};var J=function(c,d,h){function g(fa,X){fa+="";return 1<X&&fa.length<X?(fa=S[X-2]+fa,fa.substr(fa.length-X,X)):fa}function t(fa,X){if(ia)return ia[X];switch(X){case 0:return fa.getFullYear();case 1:return fa.getMonth();case 2:return fa.getDate();default:throw"Invalid part value "+X;}}var y=h.calendar,z=y.convert;if(!d||!d.length||"i"===d){if(h&&h.name.length)if(z)h=J(c,y.patterns.F,h);
else{d=new Date(c.getTime());var l=p(c,y.eras);d.setFullYear(u(c,y,l));h=d.toLocaleString()}else h=c.toString();return h}var E=y.eras,M="s"===d;d=W(y,d);h=[];var S=["0","00","000"],aa=/([^d]|^)(d|dd)([^d]|$)/g,ba=0,ca=I(),ia;for(!M&&z&&(ia=z.fromGregorian(c));;){var U=ca.lastIndex;z=ca.exec(d);U=d.slice(U,z?z.index:d.length);ba+=Q(U,h);if(!z)break;if(ba%2)h.push(z[0]);else switch(U=z[0],z=U.length,U){case "ddd":case "dddd":h.push((3===z?y.days.namesAbbr:y.days.names)[c.getDay()]);break;case "d":case "dd":l=
!0;h.push(g(t(c,2),z));break;case "MMM":case "MMMM":U=t(c,1);var Z=h,pa=Z.push,oa;if(oa=y.monthsGenitive){if(!l&&!ja){l=aa.test(d);var ja=!0}oa=l}pa.call(Z,oa?y.monthsGenitive[3===z?"namesAbbr":"names"][U]:y.months[3===z?"namesAbbr":"names"][U]);break;case "M":case "MM":h.push(g(t(c,1)+1,z));break;case "y":case "yy":case "yyyy":U=ia?ia[0]:u(c,y,p(c,E),M);4>z&&(U%=100);h.push(g(U,z));break;case "h":case "hh":U=c.getHours()%12;0===U&&(U=12);h.push(g(U,z));break;case "H":case "HH":h.push(g(c.getHours(),
z));break;case "m":case "mm":h.push(g(c.getMinutes(),z));break;case "s":case "ss":h.push(g(c.getSeconds(),z));break;case "t":case "tt":U=12>c.getHours()?y.AM?y.AM[0]:" ":y.PM?y.PM[0]:" ";h.push(1===z?U.charAt(0):U);break;case "f":case "ff":case "fff":h.push(g(c.getMilliseconds(),3).substr(0,z));break;case "z":case "zz":U=c.getTimezoneOffset()/60;h.push((0>=U?"+":"-")+g(Math.floor(Math.abs(U)),z));break;case "zzz":U=c.getTimezoneOffset()/60;h.push((0>=U?"+":"-")+g(Math.floor(Math.abs(U)),2)+":"+g(Math.abs(c.getTimezoneOffset()%
60),2));break;case "g":case "gg":y.eras&&h.push(y.eras[p(c,E)].name);break;case "/":h.push(y["/"]);break;default:throw"Invalid date format pattern '"+U+"'.";}}return h.join("")};(function(){var c=function(d,h,g){var t=g.groupSizes,y=t[0],z=1,l=Math.pow(10,h);l=Math.round(d*l)/l;isFinite(l)||(l=d);d=l;l=(d+"").split(/e/i);var E=1<l.length?parseInt(l[1],10):0;d=l[0];l=d.split(".");d=l[0];l=1<l.length?l[1]:"";0<E?(l=C(l,E,!1),d+=l.slice(0,E),l=l.substr(E)):0>E&&(E=-E,d=C(d,E+1,!0),l=d.slice(-E,d.length)+
l,d=d.slice(0,-E));l=0<h?g["."]+(l.length>h?l.slice(0,h):C(l,h)):"";h=d.length-1;g=g[","];for(E="";0<=h;){if(0===y||y>h)return d.slice(0,h+1)+(E.length?g+E+l:l);E=d.slice(h-y+1,h+1)+(E.length?g+E:"");h-=y;z<t.length&&(y=t[z],z++)}return d.slice(0,h+1)+g+E+l};e=function(d,h,g){if(!isFinite(d))return Infinity===d?g.numberFormat.positiveInfinity:-Infinity===d?g.numberFormat.negativeInfinity:g.numberFormat.NaN;if(!h||"i"===h)return g.name.length?d.toLocaleString():d.toString();h=h||"D";g=g.numberFormat;
var t=Math.abs(d),y=-1;1<h.length&&(y=parseInt(h.slice(1),10));var z=h.charAt(0).toUpperCase();switch(z){case "D":h="n";t=N(t);-1!==y&&(t=C(""+t,y,!0));0>d&&(t="-"+t);break;case "N":var l=g;case "C":l=l||g.currency;case "P":l=l||g.percent;h=0>d?l.pattern[0]:l.pattern[1]||"n";-1===y&&(y=l.decimals);t=c(t*("P"===z?100:1),y,l);break;default:throw"Bad number format specifier: "+z;}d=/n|\$|-|%/g;for(l="";;){y=d.lastIndex;z=d.exec(h);l+=h.slice(y,z?z.index:h.length);if(!z)break;switch(z[0]){case "n":l+=
t;break;case "$":l+=g.currency.symbol;break;case "-":/[1-9]/.test(t)&&(l+=g["-"]);break;case "%":l+=g.percent.symbol}}return l}})();var I=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};var p=function(c,d){if(!d)return 0;for(var h=c.getTime(),g=0,t=d.length;g<t;g++)if(c=d[g].start,null===c||h>=c)return g;return 0};var u=function(c,d,h,g){c=c.getFullYear();!g&&d.eras&&(c-=d.eras[h].offset);return c};(function(){var c=function(l,E){if(100>
E){var M=new Date,S=p(M);M=u(M,l,S);l=l.twoDigitYearMax;l="string"===typeof l?(new Date).getFullYear()%100+parseInt(l,10):l;E+=M-M%100;E>l&&(E-=100)}return E};var d=function(l,E,M){var S=l.days,aa=l._upperDays;aa||(l._upperDays=aa=[z(S.names),z(S.namesAbbr),z(S.namesShort)]);E=y(E);M?(l=B(aa[1],E),-1===l&&(l=B(aa[2],E))):l=B(aa[0],E);return l};var h=function(l,E,M){var S=l.months,aa=l.monthsGenitive||l.months,ba=l._upperMonths,ca=l._upperMonthsGen;ba||(l._upperMonths=ba=[z(S.names),z(S.namesAbbr)],
l._upperMonthsGen=ca=[z(aa.names),z(aa.namesAbbr)]);E=y(E);l=B(M?ba[1]:ba[0],E);0>l&&(l=B(M?ca[1]:ca[0],E));return l};var g=function(l,E){var M=l._parseRegExp;if(M){var S=M[E];if(S)return S}else l._parseRegExp=M={};l=W(l,E).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");S=["^"];for(var aa=[],ba=0,ca=0,ia=I(),U;null!==(U=ia.exec(l));){var Z=l.slice(ba,U.index);ba=ia.lastIndex;ca+=Q(Z,S);if(ca%2)S.push(U[0]);else{Z=U[0];var pa=Z.length;switch(Z){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":Z=
"(\\D+)";break;case "tt":case "t":Z="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":Z="(\\d{"+pa+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":Z="(\\d\\d?)";break;case "zzz":Z="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":Z="([+-]?\\d\\d?)";break;case "/":Z="(\\/)";break;default:throw"Invalid date format pattern '"+Z+"'.";}Z&&S.push(Z);aa.push(U[0])}}Q(l.slice(ba),S);S.push("$");l={regExp:S.join("").replace(/\s+/g,
"\\s+"),groups:aa};return M[E]=l};var t=function(l,E,M){return l<E||l>M};var y=function(l){return l.split("\u00a0").join(" ").toUpperCase()};var z=function(l){for(var E=[],M=0,S=l.length;M<S;M++)E[M]=y(l[M]);return E};r=function(l,E,M){l=k(l);M=M.calendar;E=g(M,E);var S=(new RegExp(E.regExp)).exec(l);if(null===S)return null;var aa=E.groups,ba=E=l=null,ca=null,ia=null,U=0,Z=0,pa=0,oa=0;var ja=null;for(var fa=!1,X=0,qa=aa.length;X<qa;X++){var da=S[X+1];if(da){var ea=aa[X],ka=ea.length,na=parseInt(da,
10);switch(ea){case "dd":case "d":ca=na;if(t(ca,1,31))return null;break;case "MMM":case "MMMM":ba=h(M,da,3===ka);if(t(ba,0,11))return null;break;case "M":case "MM":ba=na-1;if(t(ba,0,11))return null;break;case "y":case "yy":case "yyyy":E=4>ka?c(M,na):na;if(t(E,0,9999))return null;break;case "h":case "hh":U=na;12===U&&(U=0);if(t(U,0,11))return null;break;case "H":case "HH":U=na;if(t(U,0,23))return null;break;case "m":case "mm":Z=na;if(t(Z,0,59))return null;break;case "s":case "ss":pa=na;if(t(pa,0,59))return null;
break;case "tt":case "t":fa=M.PM&&(da===M.PM[0]||da===M.PM[1]||da===M.PM[2]);if(!fa&&(!M.AM||da!==M.AM[0]&&da!==M.AM[1]&&da!==M.AM[2]))return null;break;case "f":case "ff":case "fff":oa=na*Math.pow(10,3-ka);if(t(oa,0,999))return null;break;case "ddd":case "dddd":ia=d(M,da,3===ka);if(t(ia,0,6))return null;break;case "zzz":ea=da.split(/:/);if(2!==ea.length)return null;ja=parseInt(ea[0],10);if(t(ja,-12,13))return null;ea=parseInt(ea[1],10);if(t(ea,0,59))return null;ja=60*ja+(q(da,"-")?-ea:ea);break;
case "z":case "zz":ja=na;if(t(ja,-12,13))return null;ja*=60;break;case "g":case "gg":if(!da||!M.eras)return null;da=k(da.toLowerCase());ea=0;for(ka=M.eras.length;ea<ka;ea++)if(da===M.eras[ea].name.toLowerCase()){l=ea;break}if(null===l)return null}}}S=new Date;aa=(X=M.convert)?X.fromGregorian(S)[0]:S.getFullYear();null===E?E=aa:M.eras&&(E+=M.eras[l||0].offset);null===ba&&(ba=0);null===ca&&(ca=1);if(X){if(S=X.toGregorian(E,ba,ca),null===S)return null}else if(S.setFullYear(E,ba,ca),S.getDate()!==ca||
null!==ia&&S.getDay()!==ia)return null;fa&&12>U&&(U+=12);S.setHours(U,Z,pa,oa);null!==ja&&(M=S.getMinutes()-(ja+S.getTimezoneOffset()),S.setHours(S.getHours()+parseInt(M/60,10),M%60));return S}})();var F=function(c,d,h){var g=d["-"];d=d["+"];var t;switch(h){case "n -":g=" "+g,d=" "+d;case "n-":P(c,g)?t=["-",c.substr(0,c.length-g.length)]:P(c,d)&&(t=["+",c.substr(0,c.length-d.length)]);break;case "- n":g+=" ",d+=" ";case "-n":q(c,g)?t=["-",c.substr(g.length)]:q(c,d)&&(t=["+",c.substr(d.length)]);break;
case "(n)":q(c,"(")&&P(c,")")&&(t=["-",c.substr(1,c.length-2)])}return t||["",c]};n.prototype.findClosestCulture=function(c){return n.findClosestCulture.call(this,c)};n.prototype.format=function(c,d,h){return n.format.call(this,c,d,h)};n.prototype.localize=function(c,d){return n.localize.call(this,c,d)};n.prototype.parseInt=function(c,d,h){return n.parseInt.call(this,c,d,h)};n.prototype.parseFloat=function(c,d,h){return n.parseFloat.call(this,c,d,h)};n.prototype.culture=function(c){return n.culture.call(this,
c)};n.addCultureInfo=function(c,d,h){var g=!1;"string"!==typeof c?(h=c,c=this.culture().name,d=this.cultures[c]):"string"!==typeof d?(h=d,g=null==this.cultures[c],d=this.cultures[c]||this.cultures["default"]):(g=!0,d=this.cultures[d]);this.cultures[c]=R(!0,{},d,h);g&&(this.cultures[c].calendar=this.cultures[c].calendars.standard)};n.findClosestCulture=function(c){var d;if(!c)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof c&&(c=c.split(","));if(x(c)){var h=
this.cultures,g=c,t,y=g.length,z=[];for(t=0;t<y;t++){c=k(g[t]);c=c.split(";");var l=k(c[0]);1===c.length?c=1:(c=k(c[1]),0===c.indexOf("q=")?(c=c.substr(2),c=parseFloat(c),c=isNaN(c)?0:c):c=1);z.push({lang:l,pri:c})}z.sort(function(M,S){return M.pri<S.pri?1:M.pri>S.pri?-1:0});for(t=0;t<y;t++)if(l=z[t].lang,d=h[l])return d;for(t=0;t<y;t++){l=z[t].lang;do{g=l.lastIndexOf("-");if(-1===g)break;l=l.substr(0,g);if(d=h[l])return d}while(1)}for(t=0;t<y;t++){l=z[t].lang;for(var E in h)if(g=h[E],g.language==
l)return g}}else if("object"===typeof c)return c;return d||null};n.format=function(c,d,h){h=this.findClosestCulture(h);c instanceof Date?c=J(c,d,h):"number"===typeof c&&(c=e(c,d,h));return c};n.localize=function(c,d){return this.findClosestCulture(d).messages[c]||this.cultures["default"].messages[c]};n.parseDate=function(c,d,h){h=this.findClosestCulture(h);var g;if(d){if("string"===typeof d&&(d=[d]),d.length){var t=0;for(var y=d.length;t<y;t++){var z=d[t];if(z&&(g=r(c,z,h)))break}}}else for(t in d=
h.calendar.patterns,d)if(g=r(c,d[t],h))break;return g||null};n.parseInt=function(c,d,h){return N(n.parseFloat(c,d,h))};n.parseFloat=function(c,d,h){"number"!==typeof d&&(h=d,d=10);var g=this.findClosestCulture(h);h=NaN;var t=g.numberFormat;-1<c.indexOf(g.numberFormat.currency.symbol)&&(c=c.replace(g.numberFormat.currency.symbol,""),c=c.replace(g.numberFormat.currency["."],g.numberFormat["."]));c=k(c);if(O.test(c))h=parseFloat(c);else if(!d&&A.test(c))h=parseInt(c,16);else{g=F(c,t,t.pattern[0]);d=
g[0];g=g[1];""===d&&"(n)"!==t.pattern[0]&&(g=F(c,t,"(n)"),d=g[0],g=g[1]);""===d&&"-n"!==t.pattern[0]&&(g=F(c,t,"-n"),d=g[0],g=g[1]);d=d||"+";c=g.indexOf("e");0>c&&(c=g.indexOf("E"));if(0>c){var y=g;c=null}else y=g.substr(0,c),c=g.substr(c+1);var z=t["."],l=y.indexOf(z);0>l?(g=y,y=null):(g=y.substr(0,l),y=y.substr(l+z.length));z=t[","];g=g.split(z).join("");l=z.replace(/\u00A0/g," ");z!==l&&(g=g.split(l).join(""));d+=g;null!==y&&(d+="."+y);null!==c&&(t=F(c,t,"-n"),d+="e"+(t[0]||"+")+t[1]);K.test(d)&&
(h=parseFloat(d))}return h};n.culture=function(c){"undefined"!==typeof c&&(this.cultureSelector=c);return this.findClosestCulture(c)||this.cultures["default"]}})(this);(function(a,b,e){"$:nomunge";a.scrollbarWidth=function(){if(e===b){var r=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body");var n=r.children();e=n.innerWidth()-n.height(99).innerWidth();r.remove()}return e}})(jQuery);
(function(a,b){function e(p){return"string"===typeof p}function r(p){var u=T.call(arguments,1);return function(){return p.apply(this,u.concat(T.call(arguments)))}}function n(p,u,F,c,d){if(c!==K){u=F.match(p?/^([^#]*)#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);F=u[3]||"";if(2===d&&e(c))c=c.replace(p?Q:C,"");else{var h=x(u[2]);c=e(c)?x[p?"fragment":"querystring"](c):c;c=2===d?c:1===d?a.extend({},c,h):a.extend({},h,c);c=P(c);p&&(c=c.replace(W,B))}p=u[1]+(p?"#":c||!u[1]?"?":"")+c+F}else p=u(F!==K?F:b.location.href);
return p}function A(p,u,F){u===K||"boolean"===typeof u?(F=u,u=P[p?"fragment":"querystring"]()):u=e(u)?u.replace(p?Q:C,""):u;return x(u,F)}function O(p,u,F,c){e(F)||"object"===typeof F||(c=F,F=u,u=K);return this.each(function(){var d=a(this),h=u||I()[(this.nodeName||"").toLowerCase()]||"",g=h&&d.attr(h)||"";d.attr(h,P[p](g,F,c))})}"$:nomunge";var K,T=Array.prototype.slice,B=decodeURIComponent,P=a.param,R,x,w,H=a.bbq=a.bbq||{},q,k,N=a.event.special,C=/^.*\?|#.*$/g,Q=/^.*#/,W,J={};P.querystring=r(n,
0,function(p){return p.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")});P.fragment=R=r(n,1,function(p){return p.replace(/^[^#]*#?(.*)$/,"$1")});R.noEscape=function(p){p=a.map((p||"").split(""),encodeURIComponent);W=new RegExp(p.join("|"),"g")};R.noEscape(",/");a.deparam=x=function(p,u){var F={},c={"true":!0,"false":!1,"null":null};a.each(p.replace(/\+/g," ").split("&"),function(d,h){var g=h.split("=");d=B(g[0]);h=F;var t=0,y=d.split("]["),z=y.length-1;/\[/.test(y[0])&&/\]$/.test(y[z])?(y[z]=y[z].replace(/\]$/,
""),y=y.shift().split("[").concat(y),z=y.length-1):z=0;if(2===g.length)if(g=B(g[1]),u&&(g=g&&!isNaN(g)?+g:"undefined"===g?K:c[g]!==K?c[g]:g),z)for(;t<=z;t++)d=""===y[t]?h.length:y[t],h=h[d]=t<z?h[d]||(y[t+1]&&isNaN(y[t+1])?{}:[]):g;else a.isArray(F[d])?F[d].push(g):F[d]=F[d]!==K?[F[d],g]:g;else d&&(F[d]=u?K:"")});return F};x.querystring=r(A,0);x.fragment=w=r(A,1);a.elemUrlAttr||(a.elemUrlAttr=function(p){return a.extend(J,p)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",
link:"href",script:"src"});var I=a.elemUrlAttr;a.fn.querystring=r(O,"querystring");a.fn.fragment=r(O,"fragment");H.pushState=q=function(p,u){e(p)&&/^#/.test(p)&&u===K&&(u=2);var F=p!==K;p=R(b.location.href,F?p:{},F?u:2);b.location.href=p+(/#/.test(p)?"":"#")};H.getState=k=function(p,u){return p===K||"boolean"===typeof p?w(p):w(u)[p]};H.removeState=function(p){var u={};p!==K&&(u=k(),a.each(a.isArray(p)?p:arguments,function(F,c){delete u[c]}));q(u,2)};N.hashchange=a.extend(N.hashchange,{add:function(p){function u(c){var d=
c.fragment=R();c.getState=function(h,g){return h===K||"boolean"===typeof h?x(d,h):x(d,g)[h]};F.apply(this,arguments)}if(a.isFunction(p)){var F=p;return u}F=p.handler;p.handler=u}})})(jQuery,this);
(function(a,b,e){function r(B){B=B||b.location.href;return B.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var n=a.event.special,A=document.documentMode,O=a.browser.msie&&(A===e||8>A),K="onhashchange"in b&&!O;a.hashchangeDelay=100;n.hashchange=a.extend(n.hashchange,{setup:function(){if(K)return!1;a(T.start)},teardown:function(){if(K)return!1;a(T.stop)}});var T=function(){function B(){w=H=function(q){return q};O&&(x=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,H=function(){return r(x.document.location.href)},
w=function(q,k){q!==k&&(k=x.document,k.open().close(),k.location.hash="#"+q)},w(r()))}var P={},R,x,w,H;P.start=function(){if(!R){var q=r();w||B();(function N(){var C=r(),Q=H(q);C!==q?(w(q=C,Q),a(b).trigger("hashchange")):Q!==q&&(b.location.href=b.location.href.replace(/#.*/,"")+"#"+Q);R=setTimeout(N,a.hashchangeDelay)})()}};P.stop=function(){x||(R&&clearTimeout(R),R=0)};return P}()})(jQuery,this);
(function(a,b){"$:nomunge";var e=a.jQuery||a.Cowboy||(a.Cowboy={}),r;e.throttle=r=function(n,A,O,K){function T(){function R(){P=+new Date;O.apply(w,q)}function x(){B=b}var w=this,H=+new Date-P,q=arguments;K&&!B&&R();B&&clearTimeout(B);K===b&&H>n?R():!0!==A&&(B=setTimeout(K?x:R,K===b?n-H:n))}var B,P=0;"boolean"!==typeof A&&(K=O,O=A,A=b);e.guid&&(T.guid=O.guid=O.guid||e.guid++);return T};e.debounce=function(n,A,O){return O===b?r(n,A,!1):r(n,O,!1!==A)}})(this);
(function(){function a(b){function e(q,k){var N=q==window,C=k&&void 0!==k.message?k.message:void 0;k=b.extend({},b.blockUI.defaults,k||{});if(!k.ignoreIfBlocked||!b(q).data("blockUI.isBlocked")){k.overlayCSS=b.extend({},b.blockUI.defaults.overlayCSS,k.overlayCSS||{});var Q=b.extend({},b.blockUI.defaults.css,k.css||{});k.onOverlayClick&&(k.overlayCSS.cursor="pointer");var W=b.extend({},b.blockUI.defaults.themedCSS,k.themedCSS||{});C=void 0===C?k.message:C;N&&w&&r(window,{fadeOut:0});if(C&&"string"!=
typeof C&&(C.parentNode||C.jquery)){var J=C.jquery?C[0]:C,I={};b(q).data("blockUI.history",I);I.el=J;I.parent=J.parentNode;I.display=J.style.display;I.position=J.style.position;I.parent&&I.parent.removeChild(J)}b(q).data("blockUI.onUnblock",k.onUnblock);I=k.baseZ;var p=P||k.forceIframe?b('<iframe class="blockUI" style="z-index:'+I++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+k.iframeSrc+'"></iframe>'):b('<div class="blockUI" style="display:none"></div>');
J=k.theme?b('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+I++ +';display:none"></div>'):b('<div class="blockUI blockOverlay" style="z-index:'+I++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');k.theme&&N?(I='<div class="blockUI '+k.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(I+10)+';display:none;position:fixed">',k.title&&(I+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+
(k.title||"&nbsp;")+"</div>"),I+='<div class="ui-widget-content ui-dialog-content"></div></div>'):k.theme?(I='<div class="blockUI '+k.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(I+10)+';display:none;position:absolute">',k.title&&(I+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(k.title||"&nbsp;")+"</div>"),I+='<div class="ui-widget-content ui-dialog-content"></div></div>'):I=N?'<div class="blockUI '+k.blockMsgClass+' blockPage" style="z-index:'+
(I+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+k.blockMsgClass+' blockElement" style="z-index:'+(I+10)+';display:none;position:absolute"></div>';I=b(I);C&&(k.theme?(I.css(W),I.addClass("ui-widget-content")):I.css(Q));k.theme||J.css(k.overlayCSS);J.css("position",N?"fixed":"absolute");(P||k.forceIframe)&&p.css("opacity",0);Q=[p,J,I];var u=N?b("body"):b(q);b.each(Q,function(){this.appendTo(u)});k.theme&&k.draggable&&b.fn.draggable&&I.draggable({handle:".ui-dialog-titlebar",cancel:"li"});
W=x&&(!b.support.boxModel||0<b("object,embed",N?null:q).length);if(R||W){N&&k.allowBodyStretch&&b.support.boxModel&&b("html,body").css("height","100%");if((R||!b.support.boxModel)&&!N){W=parseInt(b.css(q,"borderTopWidth"),10)||0;var F=parseInt(b.css(q,"borderLeftWidth"),10)||0,c=W?"(0 - "+W+")":0,d=F?"(0 - "+F+")":0}b.each(Q,function(h,g){g=g[0].style;g.position="absolute";2>h?(N?g.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+
k.quirksmodeOffsetHack+') + "px"'):g.setExpression("height",'this.parentNode.offsetHeight + "px"'),N?g.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):g.setExpression("width",'this.parentNode.offsetWidth + "px"'),d&&g.setExpression("left",d),c&&g.setExpression("top",c)):k.centerY?(N&&g.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),
g.marginTop=0):!k.centerY&&N&&(h=k.css&&k.css.top?parseInt(k.css.top,10):0,g.setExpression("top","((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+h+') + "px"'))})}C&&(k.theme?I.find(".ui-widget-content").append(C):I.append(C),(C.jquery||C.nodeType)&&b(C).show());(P||k.forceIframe)&&k.showOverlay&&p.show();k.fadeIn?(Q=k.onBlock?k.onBlock:B,p=k.showOverlay&&!C?Q:B,Q=C?Q:B,k.showOverlay&&J._fadeIn(k.fadeIn,p),C&&I._fadeIn(k.fadeIn,Q)):(k.showOverlay&&
J.show(),C&&I.show(),k.onBlock&&k.onBlock.bind(I)());A(1,q,k);N?(w=I[0],H=b(k.focusableElements,w),k.focusInput&&setTimeout(K,20)):T(I[0],k.centerX,k.centerY);k.timeout&&(C=setTimeout(function(){N?b.unblockUI(k):b(q).unblock(k)},k.timeout),b(q).data("blockUI.timeout",C))}}function r(q,k){var N=q==window,C=b(q),Q=C.data("blockUI.history"),W=C.data("blockUI.timeout");W&&(clearTimeout(W),C.removeData("blockUI.timeout"));k=b.extend({},b.blockUI.defaults,k||{});A(0,q,k);null===k.onUnblock&&(k.onUnblock=
C.data("blockUI.onUnblock"),C.removeData("blockUI.onUnblock"));var J=N?b("body").children().filter(".blockUI").add("body > .blockUI"):C.find(">.blockUI");k.cursorReset&&(1<J.length&&(J[1].style.cursor=k.cursorReset),2<J.length&&(J[2].style.cursor=k.cursorReset));N&&(w=H=null);if(k.fadeOut){var I=J.length;J.stop().fadeOut(k.fadeOut,function(){0===--I&&n(J,Q,k,q)})}else n(J,Q,k,q)}function n(q,k,N,C){var Q=b(C);if(!Q.data("blockUI.isBlocked")){q.each(function(W,J){this.parentNode&&this.parentNode.removeChild(this)});
k&&k.el&&(k.el.style.display=k.display,k.el.style.position=k.position,k.el.style.cursor="default",k.parent&&k.parent.appendChild(k.el),Q.removeData("blockUI.history"));Q.data("blockUI.static")&&Q.css("position","static");if("function"==typeof N.onUnblock)N.onUnblock(C,N);q=b(document.body);k=q.width();N=q[0].style.width;q.width(k-1).width(k);q[0].style.width=N}}function A(q,k,N){var C=k==window;k=b(k);if(q||(!C||w)&&(C||k.data("blockUI.isBlocked")))k.data("blockUI.isBlocked",q),C&&N.bindEvents&&(!q||
N.showOverlay)&&(q?b(document).bind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",N,O):b(document).unbind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",O))}function O(q){if("keydown"===q.type&&q.keyCode&&9==q.keyCode&&w&&q.data.constrainTabKey){var k=H,N=q.shiftKey&&q.target===k[0];if(!q.shiftKey&&q.target===k[k.length-1]||N)return setTimeout(function(){K(N)},10),!1}k=q.data;var C=b(q.target);if(C.hasClass("blockOverlay")&&k.onOverlayClick)k.onOverlayClick(q);
return 0<C.parents("div."+k.blockMsgClass).length?!0:0===C.parents().children().filter("div.blockUI").length}function K(q){H&&(q=H[!0===q?H.length-1:0])&&q.focus()}function T(q,k,N){var C=q.parentNode,Q=q.style,W=(C.offsetWidth-q.offsetWidth)/2-(parseInt(b.css(C,"borderLeftWidth"),10)||0);q=(C.offsetHeight-q.offsetHeight)/2-(parseInt(b.css(C,"borderTopWidth"),10)||0);k&&(Q.left=0<W?W+"px":"0");N&&(Q.top=0<q?q+"px":"0")}b.fn._fadeIn=b.fn.fadeIn;var B=b.noop||function(){},P=/MSIE/.test(navigator.userAgent),
R=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),x=b.isFunction(document.createElement("div").style.setExpression);b.blockUI=function(q){e(window,q)};b.unblockUI=function(q){r(window,q)};b.growlUI=function(q,k,N,C){var Q=b('<div class="growlUI"></div>');q&&Q.append("<h1>"+q+"</h1>");k&&Q.append("<h2>"+k+"</h2>");void 0===N&&(N=3E3);var W=function(J){J=J||{};b.blockUI({message:Q,fadeIn:"undefined"!==typeof J.fadeIn?J.fadeIn:700,fadeOut:"undefined"!==typeof J.fadeOut?J.fadeOut:
1E3,timeout:"undefined"!==typeof J.timeout?J.timeout:N,centerY:!1,showOverlay:!1,onUnblock:C,css:b.blockUI.defaults.growlCSS})};W();Q.css("opacity");Q.mouseover(function(){W({fadeIn:0,timeout:3E4});var J=b(".blockMsg");J.stop();J.fadeTo(300,1)}).mouseout(function(){b(".blockMsg").fadeOut(1E3)})};b.fn.block=function(q){if(this[0]===window)return b.blockUI(q),this;var k=b.extend({},b.blockUI.defaults,q||{});this.each(function(){var N=b(this);k.ignoreIfBlocked&&N.data("blockUI.isBlocked")||N.unblock({fadeOut:0})});
return this.each(function(){"static"==b.css(this,"position")&&(this.style.position="relative",b(this).data("blockUI.static",!0));this.style.zoom=1;e(this,q)})};b.fn.unblock=function(q){return this[0]===window?(b.unblockUI(q),this):this.each(function(){r(this,q)})};b.blockUI.version=2.7;b.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",
cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1E3,centerX:!0,centerY:!0,
allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var w=null,H=[]}"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)})();
(function(a,b,e){var r=Array.prototype.slice;jQuery.widget.extend=function(f){for(var m=r.call(arguments,1),v=0,D=m.length,G,L;v<D;v++)for(G in m[v])L=m[v][G],m[v].hasOwnProperty(G)&&void 0!==L&&(a.isPlainObject(L)&&a.isPlainObject(f[G])?f[G]=a.widget.extend({},f[G],L):f[G]=L);return f};var n=function(){};n.prototype.initialize=function(f){var m=this,v=a("<div>").css({fontFamily:"Arial,sans-serif",fontSize:"medium"});this.legendButton=this.makeButton_(O.txt_legend).appendTo(v).hide().click(function(){m.legendPopup.is(":hidden")?
m.legendPopup.show():m.legendPopup.hide()});this.legendPopup=a("<div>").addClass("MapLegendContainer").hide().appendTo(this.legendButton);var D=this.makeButton_(O.txt_to_bottom).appendTo(v).click(function(){var L=f.getCenter();d("Bottom");D.hide();G.show();f.panTo(L)}),G=this.makeButton_(O.txt_to_side).appendTo(v).click(function(){var L=f.getCenter();d("Side");G.hide();D.show();f.panTo(L)});this.makeButton_(O.txt_close).appendTo(v).click(function(){var L=a.param.fragment();if("/SHOWMAP"===L)a.bbq.pushState("#");
else{var V=L.split("?");L=V[0];V=1<V.length?"?"+V[1]:"";a.bbq.pushState("#"+L+":NOMAP"+V)}});"Side"===H?G.hide():D.hide();return v[0]};n.prototype.makeButton_=function(f){return a("<div>").css({backgroundColor:"white",border:"1px solid black",textAlign:"center",width:"5em",cursor:"pointer",margin:"3px"}).append(a("<div>").css({borderStyle:"solid",borderWidth:"1px",borderColor:"white rgb(176, 176, 176) rgb(176, 176, 176) white",fontSize:"12px"}).text(f))};n.prototype.addCategory=function(f,m,v,D){f=
a("<li>").css("listStyleImage","url('"+f+"')").text(m);this.legendButton.is(":hidden")&&(this.legendList=a("<ul>").addClass("MapLegendList").appendTo(this.legendPopup),this.legendButton.show());this.legendList.append(f);D&&a('<input type="checkbox">').prop({checked:!0,id:"mapping_category_"+v}).prependTo(f).click(function(G){G.stopPropagation();G=e.getElementById("mapping_category_"+v).checked;var L=[],V;for(V in C){var ha=C[V];ha.mappin===v&&L.push(ha.marker)}G?w.addMarkers(L):w.removeMarkers(L)})};
var A,O,K,T,B=null,P=function(f){var m=a("#results-column");m.length&&(B||(B=m[0].className),f?(a("#subjects_column").hide(),a("#show_subjects_display").show(),m[0].className="col-xs-12"):(a("#subjects_column").show(),a("#show_subjects_display").hide(),m[0].className=B))},R=function(){P(!0);return!1};b.do_hide_subjects=R;b.do_show_subjects=function(f){f.preventDefault();P(!1);return!1};var x=null,w=null,H="Side",q=[0,0],k=null,N=null,C={},Q=null,W=null,J=null,I=null,p=null,u=null,F=null,c=function(){var f=
[H].concat(q).join(",");var m=new Date;m.setTime(m.getTime()+31536E6);m="; expires="+m.toGMTString();e.cookie="cioc_map_position="+f+m+"; path=/"},d=function(f){if(H!==f){H=f;c();J.show();Q[0].className="MapSearchShift MapSearchShift"+H;I[0].className="MapSearchResults MapSearchResults"+H;J[0].className="MapSearchResults MapSearchResults"+H;var m="Side"===H?parseInt(q[0],10):parseInt(q[1],10);"Side"===f?(a("#bottom-handle").hide(),a("#side-handle").show(),m?(f=Math.trunc(a(b).width()*m/100),J.css({width:f.toString()+
"px",height:""}),I.css({width:f-u.outerWidth()+"px",height:""})):(J.css({width:"",height:""}),I.css({width:"",height:""}))):(a("#bottom-handle").show(),a("#site-handle").hide(),m?(f=Math.trunc(a(b).height()*m/100),J.css({height:(f+p.outerHeight()).toString()+"px",width:""}),I.css({height:f+"px",width:""})):(J.css({height:"",width:""}),I.css({height:"",width:""})));X()}},h=function(){ra&&(la.find("#results_table").addClass("HideMapColumn"),a.browser.msie&&"8.0">a.browser.msie&&la.find(".MapColumn").removeClass("FixIE"),
a("#check_all_in_viewport").hide(),a("#subjects_column").length&&a("#show_subjects_display").show(),a("#map_my_results_ui").show(),J.hide(),X())},g=function(){return'<div id="map_popup" class="MapPopup">'},t=null,y=null,z=null,l=null,E=null,M=function(){ka=t=null;na();z&&(google.maps.event.removeListener(z),z=null)},S=function(){y&&(y.close(),M())},aa=function(f,m,v){S();y=new google.maps.InfoWindow({content:f,position:m,maxWidth:I.innerWidth()-150,pixelOffset:v});z=google.maps.event.addListener(y,
"closeclick",M);y.open(x)},ba=function(f){var m;if(t===f&&y)S();else{if(9<f.getSize()&&x.getZoom()<x.mapTypes.get(x.getMapTypeId()).maxZoom)return!0;var v=f.getMarkers(),D=g()+"<ul>",G=[];for(m=0;m<v.length;m++){var L=v[m].num;var V=C[L];G.push(L);D+="<li style=\"list-style-image: url('"+A[V.mappin].image_small_circle+"');\"><b>"+V.orgname+'</b><br><a href="#/'+L+'">'+O.txt_more_info+"</a></li>"}aa(D+"</ul></div>",f.getCenter(),E);t=f;for(m=0;m<G.length;m++)L=G[m],Ca(L)}return!1},ca=!1,ia=function(){ca=
!0},U=!1,Z=function(){U=ca=!1;if(ta){var f=ta;ta=null;va.apply(null,f)}else if(ka){var m=C[ka];f=m.marker;(m=Da(w,m.marker))&&1<m.getSize()?y.setOptions({position:m.getCenter(),pixelOffset:E}):y.setOptions({position:f.getPosition(),pixelOffset:l})}else t&&ca&&S()},pa=function(){X()};b.maps_loaded=function(){var f=[59.888937,-101.601562];f={center:new google.maps.LatLng(f[0],f[1]),zoom:2,mapTypeId:google.maps.MapTypeId.ROADMAP};x=new google.maps.Map(I[0],f);google.maps.event.addListener(x,"zoom_changed",
ia);w=new MarkerClusterer(x,[],{gridSize:21,maxZoom:99,styles:[{url:"images/mapping/mm_0_white_circle.png",height:30,width:30}],zoomOnClick:!1});google.maps.event.addListener(w,"click",ba);google.maps.event.addListener(w,"clusteringend",Z);F=new n;x.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(F.initialize(x));a(b).resize(pa);La();(f=a.param.fragment())&&"/SHOWMAP"!==f&&a(b).trigger("hashchange")};var oa=function(){var f=a(b);return{width:f.width(),height:f.height()}},ja=function(){var f=
Q[0];return f.scrollHeight>f.offsetHeight},fa=function(){var f=Q[0];return f.scrollWidth>f.offsetWidth},X=function(f){null===k&&(k=a.scrollbarWidth());var m=k,v=k,D=oa();if(null===qa&&!ja()||null!==qa&&!qa)m=0;if(null===da&&!fa()||null!==da&&!da)v=0;"Side"===H?(v=J.is(":visible")?J.outerWidth():0,Q.css({width:(D.width-v).toString()+"px",height:""}),W.css("width",(D.width-v-m-N.width).toString()+"px"),I.css("height",D.height+"px")):(m=J.is(":visible")?J.height():0,Q.css({height:(D.height-m).toString()+
"px",width:""}),W.css({height:(D.height-m-v-N.height).toString()+"px",width:""}),console.log("bottom visible",m,Q.css("height"),W.css("height")));x&&!f&&google.maps.event.trigger(x,"resize");f||wa()},qa=null,da=null,ea={},ka=null,na=function(){a.each(ea,function(f,m){m.marker_icon&&(m.marker_icon.prop("src",A[C[f].mappin].image_small),m.marker_cell.removeClass("HighLight"))});ea={}},Ca=function(f){var m=a("#map_marker_icon_"+f+",#map_marker_icon_mobile_"+f),v=a("#map_column_"+f+",#map_column_mobile_"+
f);m&&(m.prop("src",A[C[f].mappin].image_small_dot),v.addClass("HighLight"));ea[f]={marker_icon:m,marker_cell:v};return m},Ma=function(){a.each(ea,function(f,m){if(!m.marker_icon){var v=a("#map_marker_icon_"+f+",#map_marker_icon_mobile_"+f),D=a("#map_column_"+f+",#map_column_mobile_"+f);v.prop("src",A[C[f].mappin].image_small_dot);D.addClass("HighLight");m.marker_icon=v;m.marker_cell=D}})},Da=function(f,m){f=f.getClusters();for(var v=0;v<f.length;v++)if(f[v].isMarkerInClusterBounds(m))return f[v];
return null},ta=null,va=function(f,m,v,D){if("undefined"===typeof v||null===v)v=!1;if(U)ta=a.makeArray(arguments);else{var G=C[f];if(G&&G.marker){if(ka===f&&y||D)if(v&&!D||S(),!D)return;var L=g()+"<b>"+G.orgname+'</b><br><a href="#/'+f+'">'+O.txt_more_info+"</a></div>";G=G.marker;var V=Da(w,G);V&&1<V.getSize()?(x.getBounds().contains(V.getCenter())||x.setCenter(V.getCenter()),aa(L,V.getCenter(),E)):aa(L,G.getPosition(),l);ka=f;L=Ca(f);L.length&&m&&(G=Q,L.filter(":visible")[0].scrollIntoView(!0),G.scrollTop(G.scrollTop()-
5))}else ka&&y&&S()}},Ea=function(f){return function(m){va(m,f)}},Na=function(f,m){a.ajax(m,{type:"get",data:{InlineResults:"on"},dataType:"text",success:function(v){var D=a("#body_content"),G=v.indexOf("<div "),L=a.trim(v.substr(0,G));L=L.split("\n");for(var V={},ha=0;ha<L.length;ha++){var Y=L[ha].replace(/\s+$/,"");if(Y){var ma=Y.substr(0,Y.indexOf("="));Y=Y.substr(Y.indexOf("=")+1);V[ma]=Y}}L=D.parent().hide();D.is(la)?D.detach():D.remove();v=v.substr(G);D=a("head")[0];(G=e.getElementById("custom_style"))&&
D.removeChild(G);G=V.basic_stylesheet;Fa(G);ha=V.template_stylesheet;Ga(ha);G=[G,ha];if(ha=V.custom_stylesheet)G.push(ha),ma=e.createElement("link"),ma.rel="STYLESHEET",ma.type="text/css",ma.id="custom_style",ma.href=ha,D.appendChild(ma);e.title=V.title;L.html(v);X();add_details_last_visible_class();xa(L,f,G,!1)}});return!1},la=null,Ha=null,ua=null,ya=null,za=null,Fa=function(f){var m=e.getElementById("basic_style");f!==m.attributes.href.value&&(m.href=f)},Ga=function(f){var m=e.getElementById("template_style");
f!==m.attributes.href.value&&(m.href=f)},Oa=function(f){if(!f)return!0;var m=[];for(const v in e.styleSheets){const D=e.styleSheets[v];D.href&&f.find(G=>G===D.ownerNode.attributes.href.value)&&m.push(D)}return m.length!==f.length?!1:!0},xa=function(f,m,v,D){setTimeout(function(){Oa(v)?(X(),f.show(),setTimeout(function(){X();null!==m&&va(m,D,!0,!0);D||Q.scrollTop(0)},1)):xa(f,m,v,D)},1)},Pa=function(f){f=f.fragment;var m=f.split("?",2);f=m[0];m=m[1];if("/SHOWMAP"===f){if(ra&&!I.is(":hidden")||Ia(),
I.is(":visible")&&la){m=a("#body_content");f=m.parent();m.find("#results_table").length||(f.hide(),m.replaceWith(la));m=a("head")[0];var v=e.getElementById("custom_style");v&&m.removeChild(v);Fa(ya);Ga(za);v=[ya,za];ua&&(v.push(ua.attributes.href.value),m.appendChild(ua));e.title=Ha;X();Ma();xa(f,ka,v,!0)}}else if(f)if(v=f.split(":"),f=1<v.length&&"NOMAP"===v[1],v=v[0],ra){v=v.substr(1);var D=la.find("#details_link_"+v).prop("href");if(D=D?D.replace(/^about:/,""):"/record/"+v)m=m||{},D=a.param.querystring(D,
m),I.is(":visible")?Na(v,D):b.location.href=D;f&&h()}else Ia();else h()},Qa=function(){if(J.is(":visible")){var f=a(this).prop("href").split("?",2)[1]||"";f&&="?"+f;a.bbq.pushState("#/"+a(this).data("num")+f);return!1}},Ra=function(){if(I.is(":visible"))return a.bbq.pushState("#/SHOWMAP"),!1},Sa=function(){var f=a(this).serialize();f&&="?"+f;var m=this.action.split("?")[0].split("/");m=m[m.length-1];a.bbq.pushState("#/"+m+f);return!1};b.do_check_all_in_viewport=function(){var f=null;C&&x&&(f=x.getBounds());
for(var m=e.RecordList,v=m.elements.length,D=0;D<v;D++){var G=m.elements[D];if("IDList"===G.name){var L=G.value;if(C&&x&&(L=C[L])&&L.icon&&f.contains(L.point)){G.checked=!0;continue}G.checked=!1}}return!1};var wa=a.throttle(200,function(){if(C&&x){var f=x.getBounds();if(f){var m=la.find("#results_table").hide();a.each(C,function(v,D){D.icon&&!ea[v]&&(v=D.last_in_bounds||!1,f.contains(D.point)?!1===v&&(D.icon.prop("src",A[D.mappin].image_small),D.icon.prop("title",A[D.mappin].category),D.last_in_bounds=
!0):!0===v&&(D.icon.prop("src","images/mapping/mm_0_white_20.png"),D.last_in_bounds=!1))});m.show().css("display","")}}}),Ja=function(){la.find("#results_table").removeClass("HideMapColumn");a.browser.msie&&"8.0">a.browser.msie&&la.find(".MapColumn").removeClass("FixIE")},Ta=Ea(!0),Ua=function(f){return function(){Ta(f)}},Va=Ea(!1),Wa=function(){Va(a(this).data("info").num)},Xa=function(f,m){return f-m},La=function(){Ja();la.find("#check_all_in_viewport").show();var f=la.find(".MapLink"),m=new google.maps.LatLngBounds,
v={0:{image:"image_small_circle",add_checkbox:!1}},D=[];l=new google.maps.Size(0,-25);E=new google.maps.Size(0,0);f.each(function(){var Y=a(this).data("info"),ma=Y.num;Y.icon=jQuery("#map_marker_icon_"+ma+",#map_marker_icon_mobile_"+ma);Y.icon.length||(Y.icon=null);Y.latitude=Globalize.parseFloat(Y.latitude);Y.longitude=Globalize.parseFloat(Y.longitude);C[ma]=Y;var Aa=new google.maps.LatLng(Y.latitude,Y.longitude);Y.point=Aa;var sa=A[Y.mappin].options;sa||(sa={icon:new google.maps.MarkerImage(A[Y.mappin].image,
new google.maps.Size(15,25)),shadow:new google.maps.MarkerImage("images/mapping/mm_shadow.png",new google.maps.Size(28,25),null,new google.maps.Point(8,25)),shape:{coords:[11,0,12,1,13,2,14,3,14,4,14,5,14,6,14,7,14,8,14,9,14,10,14,11,13,12,12,13,11,14,11,15,10,16,10,17,10,18,10,19,9,20,8,21,8,22,8,23,8,24,6,24,6,23,6,22,6,21,6,20,5,19,4,18,4,17,4,16,3,15,3,14,2,13,1,12,0,11,0,10,0,9,0,8,0,7,0,6,0,5,0,4,0,3,1,2,2,1,3,0],type:"poly"}},A[Y.mappin].options=sa,v[Y.mappin]={image:"image_small",add_checkbox:!0});
sa=a.extend({position:Aa},sa);Y.marker=new google.maps.Marker(sa);Y.marker.num=ma;D.push(Y.marker);m.extend(Aa);Y.marker_evt=google.maps.event.addListener(Y.marker,"click",Ua(ma))});w.addMarkers(D,0);var G=[];for(V in A)G.push(V);G.sort(Xa);for(var L=0;L<G.length;L++){var V=G[L];var ha=v[V];ha&&F.addCategory(A[V][ha.image],A[V].category,parseInt(V,10),ha.add_checkbox)}a(e).on("click",".DetailsLink",Qa);a(e).on("click",".SearchTotalLink",Ra);a(e).on("submit","#change_view_form",Sa);a(e).on("click",
".MapLink,.MapLinkMobile",Wa);ca=!1;google.maps.event.addListener(x,"bounds_changed",wa);f.length?x.fitBounds(m):(x.setCenter(new google.maps.LatLng(59.888937,-101.601562)),x.setZoom(2));f=e.getElementById("geo_latitude");(G=e.getElementById("geo_longitude"))&&f&&G.value&&f.value&&(f={icon:new google.maps.MarkerImage("images/mapping/mm_home.png",new google.maps.Size(23,39),null,new google.maps.Point(11,38)),shadow:new google.maps.MarkerImage("images/mapping/mm_home_shadow.png",new google.maps.Size(43,
39)),position:new google.maps.LatLng(Globalize.parseFloat(f.value),Globalize.parseFloat(G.value)),clickable:!1,zIndex:-15E9},(new google.maps.Marker(f)).setMap(x))},Ba=null,Ya=function(){qa=ja();da=fa();Ba=x.getCenter()},Ka=a.throttle(100,function(){"Side"===H?I.css("width",J.innerWidth()-u.outerWidth()+"px"):I.css("height",J.innerHeight()-p.outerHeight()+"px");X();Ba&&x.setCenter(Ba)}),Za=function(f,m){I.css({position:"absolute",top:"0px",right:"0px"});Ka(f,m);setTimeout(wa,5);da=qa=null;"Side"===
H?(q[0]=Math.trunc(100*J.outerWidth()/a(b).width()),J.css({top:"",left:"",height:""}),I.css({top:"",left:"",height:""})):(q[1]=Math.trunc(100*J.outerHeight()/a(b).height()),J.css({top:"",left:"",width:""}),I.css({top:"",left:""}));c()},ra=!1,Ia=function(){a:{var f=e.cookie.split(";");for(var m=0;m<f.length;m++){for(var v=f[m];" "===v.charAt(0);)v=v.substring(1,v.length);if(0===v.indexOf("cioc_map_position=")){f=v.substring(18,v.length);break a}}f=null}f&&(f=f.split(","),H=f[0],1<f.length&&(q=[f[1],
f[2]]));R();a("#show_subjects_display").hide();if(ra)a("#map_container").show();else{m=a("body");var D=a("<div>");f=a("#body_content").before(D).hide();f.find("script").remove();a("html").css("overflow","hidden");m.css({height:"100%"});var G=oa(),L=D.offset();v=L.top;L=L.left;var V=G.width-m.width()-L;N={height:v,width:L+V};G=a('<div id="fake_body"></div>').prop("className","MapSearchShift MapSearchShift"+H).insertBefore(D);v=a('<div id="fake_body_content"></div>').css("margin",v+"px "+V+"px 0px "+
L+"px").appendTo(G);D.remove();L={start:Ya,stop:Za,handles:{w:"#side-handle",n:"#bottom-handle"}};is_ie7?L.helper="ui-state-default":L.resize=Ka;D=a('<div id="map_container" style="position: absolute;"><div id="side-handle" class="ui-resizable-handle ui-resizable-w"><div id="map_drag_icon_left"></div><div id="map_drag_icon_right" style="position:absolute; top:50%; margin-top: 5px;"></div></div><div id="bottom-handle" class="ui-resizable-handle ui-resizable-n"><div id="map_drag_handle_bottom"><div id="map_drag_icon_up"></div><div id="map_drag_icon_down"></div></div></div><div id="map_canvas" style="position: absolute"></div></div>').insertBefore(G);
a("#map_container").resizable(L);m.css({overflow:"auto",margin:"0px"});Q=G;W=v;J=D;I=m=D.find("#map_canvas");u=a("#side-handle");p=a("#bottom-handle");"Side"===H?p.hide():u.hide();if(G="Side"===H?parseInt(q[0],10):parseInt(q[1],10))"Side"===H?(G=Math.trunc(a(b).width()*G/100),D.css("width",G+"px"),m.css("width",G-u.outerWidth()+"px")):(G=Math.trunc(a(b).height()*G/100),D.css("height",(G+p.outerHeight()).toString()+"px"),m.css("height",G+"px"));m[0].className="MapSearchResults MapSearchResults"+H;
D[0].className="MapSearchResults MapSearchResults"+H;v.append(f);f.show();X();la=f;Ha=e.title;ua=e.getElementById("custom_style");ya=e.getElementById("basic_style").attributes.href.value;za=e.getElementById("template_style").attributes.href.value;ra=!0}la.find("#map_my_results_ui").hide();if(null===x)return a.getScript("//maps.googleapis.com/maps/api/js?v=3&"+T+"&sensor=false&callback=maps_loaded&language="+K),!1;Ja();a("#check_all_in_viewport").show();X();return!1};b.initialize_mapping=function(f){A=
f.map_pins;O=f.translations;K=f.culture;T=f.key_arg;Globalize.culture(f.culture);f.auto_start&&!(new String(b.location.hash)).replace(/^#/,"")&&history.replaceState(null,"",(new String(b.location)).replace(/#$/,"")+"#/SHOWMAP");a("#map_my_results_ui").show();a(b).bind("hashchange",Pa);var m=e.RecordList;m&&(m.onsubmit=function(){ra&&J.is(":visible")?-1===m.action.indexOf("#/SHOWMAP")&&(m.action+="#/SHOWMAP"):-1!==m.action.indexOf("#/SHOWMAP")&&(m.action=m.action.substr(0,m.action.length-9))});a(b).trigger("hashchange")}})(jQuery,
this,document);
(function(){var a={},b=jQuery,e=null,r={},n={},A="",O=function(){var p=b(this);p.uibutton({icons:{primary:p.data("icon")},text:!1})},K=function(p){e=e.map(function(){return 0<=p.indexOf(b(this).data("vutId"))?this:null});e.each(function(){var u=b(this),F=u.data("vutId");u.data("uiAdded")||(u.data("uiAdded",!0),b('<span class="vacancy-ui vacancy-buttonset"><button class="vacancy-edit" id="vacancy-edit-'+F+'" data-vut-id="'+F+'" title="'+a.edit_txt+'" data-icon="ui-icon-pencil">'+a.edit_txt+'</button><button class="vacancy-history" data-icon="ui-icon-note" data-vut-id="'+
F+'" title="'+a.history_txt+'">'+a.history_txt+"</button></span>").buttonset().insertAfter(u).find("button").each(O))})},T=function(p,u,F){u=b('<div class="alert alert-dismissable '+u+'" style="display: none"></div>').text(F).append('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');F=p.children().first();F.length?F.before(u):p.append(u);u.slideDown("slow")},B=function(p){b.each(p,function(u,F){b("#vacancy-count-"+F.bt_vut_id).text(F.text)})},
P=function(p,u,F,c){return function(d){F.unblock();d.updates&&B(d.updates);T(c,(d.success?"alert-highlight":"alert-error")+" vacancy-notification",d.msg)}},R=function(p,u,F,c){return function(d,h){F.unblock();T(c,"alert-error vacancy-notification",a.server_error_txt+("error"!==h?h:d.statusText))}},x,w=function(){A&&(x&&clearTimeout(x),x=setTimeout(H,15E3))},H=function(){x=null;b.ajax({dataType:"json",url:a.refresh_url,cache:!1,data:{ids:A}}).done(function(p){p.success&&B(p.updates)}).always(w)},q=
function(p,u){var F=u.parent().block({message:null});u=u.data("vutId");var c=F.find(".vacancy-count"),d=F.find(".vacancy-notify-area");d.length||(d=b('<div class="vacancy-notify-area alert-stack"></div>'),d.appendTo(F));b.ajax({dataType:"json",url:a.increment_url,type:"POST",data:{BT_VUT_ID:u,Value:p}}).done(P(u,c,F,d)).fail(R(u,c,F,d))},k=function(){if(a.permission_url){e=b(".vacancy-count");var p=e.map(function(){return b(this).data("vutId")}).get();if(A=p=p.join())b.ajax({dataType:"json",url:a.permission_url,
cache:!1,data:{ids:p}}).done(K),w()}},N=null,C=function(){N||=b('<div id="vacancy-dialog" style="display:none;"></div>').appendTo(b("body")).dialog({autoOpen:!1,closeText:a.close_txt,title:a.history_title_txt,minWidth:500});return N},Q=function(p,u){u=b('<p class="Alert"></p>').text(u);p.empty().append(u)},W=function(p){var u=C();p.success?u.empty().html(p.content):Q(u,p.content);u.dialog("option","title",p.title)},J=function(p,u){var F=C();Q(F,a.server_error_txt+("error"!==u?u:p.statusText))},I=
function(){b(document).on("click",".vacancy-edit",function(p){p.preventDefault();p.stopPropagation();p=b(this);var u=p.data("vutId"),F=p.parent(),c=r[u];c||(c=b('<span class="vacancy-incrementer-ui vacancy-buttonset" style="display: none;" id="vacancy-incrementer-'+u+'" data-vut-id="'+u+'"><button class="vacancy-incrementer-up" data-icon="ui-icon-plusthick">'+a.up_txt+'</button><button class="vacancy-incrementer-down" data-icon="ui-icon-minusthick">'+a.down_txt+'</button><button class="vacancy-incrementer-done" data-icon="ui-icon-check">'+
a.done_txt+"</button></span>").buttonset().insertAfter(F),c.find("button").each(O),n[u]=F);p.parent().hide();c.show()}).on("click",".vacancy-incrementer-done",function(p){p.preventDefault();p.stopPropagation();p=b(this).parent();var u=p.data("vutId");u=n[u];p.hide();u.show();var F=p.parent().parent().find(".vacancy-notify-area");F.slideUp("fast",function(){F.remove()})}).on("click",".vacancy-incrementer-up",function(p){p.preventDefault();p.stopPropagation();q(1,b(this).parent())}).on("click",".vacancy-incrementer-down",
function(p){p.preventDefault();p.stopPropagation();q(-1,b(this).parent())}).on("click",".vacancy-history",function(p){p.preventDefault();p.stopPropagation();p=b(this).data("vutId");C().html('<p class="Info">'+a.loading_txt+"</p>").dialog("close").dialog("open").dialog("option","title",a.history_title_txt);b.ajax({dataType:"json",url:a.history_url,cache:!1,data:{BT_VUT_ID:p}}).done(W).fail(J)}).on("click",".close",function(p){p.preventDefault();p.stopPropagation();p=b(this);var u=p.parents("."+p.data("dismiss")).first();
u.slideUp("slow",function(){u.remove()})})};window.initialize_vacancy=function(p){a=p;k();I()};window.initialize_vacancy_options=function(p){a=p};window.initialize_vacancy_ui=k;window.initialize_vacancy_events=I})();
(function(){var a=function(){$(".agency-overview").each(function(){$(this).find(".related-row:visible").last().addClass("last-visible")})};window.initialize_listing_toggle=function(b,e,r,n){$(document).on("click",".show-toggle",function(){var A=$(this),O=A.parents(".related-records"),K=O.find(".details"),T=O.parents(".agency-overview");if(K.is(":visible"))K.slideUp(function(){A.text(b);T.find(".related-row").removeClass("last-visible").filter(":visible").last().addClass("last-visible")});else{var B=
T.find(".related-row").removeClass("last-visible");K.slideDown(function(){A.text(e);B.filter(":visible").last().addClass("last-visible")})}return!1}).on("click",".deleted-toggle",function(){var A=$(this),O=A.parents(".related-records"),K=O.find(".deleted-records"),T=O.parents(".agency-overview");if(K.is(":visible"))K.slideUp(function(){A.text(r);T.find(".related-row").removeClass("last-visible").filter(":visible").last().addClass("last-visible")});else{var B=T.find(".related-row").removeClass("last-visible");
K.slideDown(function(){A.text(n);B.filter(":visible").last().addClass("last-visible")})}return!1});a()};window.add_details_last_visible_class=a})();
