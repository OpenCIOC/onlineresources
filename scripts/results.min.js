/*
 Globalize

 http://github.com/jquery/globalize

 Copyright Software Freedom Conservancy, Inc.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
 jQuery scrollbarWidth - v0.2 - 2/11/2009
 http://benalman.com/projects/jquery-misc-plugins/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 http://benalman.com/projects/jquery-bbq-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery hashchange event - v1.2 - 2/11/2010
 http://benalman.com/projects/jquery-hashchange-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery throttle / debounce - v1.1 - 3/7/2010
 http://benalman.com/projects/jquery-throttle-debounce-plugin/

 Copyright (c) 2010 "Cowboy" Ben Alman
 Dual licensed under the MIT and GPL licenses.
 http://benalman.com/about/license/
 jQuery blockUI plugin
 Version 2.70.0-2014.11.23
 Requires jQuery v1.7 or later

 Examples at: http://malsup.com/jquery/block/
 Copyright (c) 2007-2013 M. Alsup
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html

 Thanks to Amir-Hossein Sobhi for some excellent contributions!
*/
window.CIOC={};
(function(a,b){b.do_drop_down_navigation=function(){for(var d=a.getElementById("ActionList").options,r=0;r<d.length;r++)if(d[r].selected){var n=d[r].getAttribute("href");n&&("undefined"!=typeof d[r].attributes.newwindow?b.open(n):b.location.href=n);break}};jQuery(function(d){d("[data-toggle=dialog]").each(function(){var r=d(this),n=d(r.data("target")),A={autoOpen:!1,title:n.data("title"),modal:n.data("modal")};n.dialog(A);r.click(function(){n.dialog("isOpen")?n.dialog("close"):n.dialog("open")})})})})(document,window);
function CheckAll(a,b){a||="IDList";var d=b;b||(d=document.RecordList);b=d.elements.length;for(var r=0;r<b;r++){var n=d.elements[r];n.name===a&&(n.checked=!0)}}function ClearAll(a,b){a||="IDList";var d=b;b||(d=document.RecordList);b=d.elements.length;for(var r=0;r<b;r++){var n=d.elements[r];n.name===a&&(n.checked=!1)}}function add_class(a,b){a&&!(new RegExp("\\b"+b+"\\b")).test(a.className)&&(a.className&&(b=" "+b),a.className+=b)}
function remove_class(a,b){if(a){for(var d=a.className.split(" "),r=[],n=0;n<d.length;n++){var A=d[n];A!==b&&r.push(A)}a.className=r.join(" ")}}function hide(a){add_class(a,"NotVisible")}function show(a){remove_class(a,"NotVisible")}function openWin(a,b){window.open(a,b,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(a,b){window.open(a,b,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(a,b){window.open(a,b,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(a){var b={sm:openWin,lg:openWinL,xl:openWinXL};a(document).on("click","a.poplink",function(){var d=a(this).data("popargs");(b[d.size||"sm"]||openWin)(this.href,d.name||"popwin");return!1})});
(function(){var a=jQuery,b={},d=function(v){null!==v&&"undefined"!==typeof v?a("#myListCount").text(v):(v=a("#myListCount").text())&&(v=parseInt(v,10));v?b.myListLink.show():b.myListLink.hide()},r=function(v){a.each(v,function(F,q){a("#added_to_list_"+q).show();a("#add_to_list_"+q).hide()})},n=function(v){return function(F){F.fail?alert(F.errinfo):(F.ids?d(a.grep(F.ids,B[b.domain]).length):F.count?d(F.count):d(0),r([v]))}},A=function(v){v=a(v.currentTarget).data("id");a.ajax({success:n(v),dataType:"json",
error:function(){alert("Error")},data:{id:v},type:"POST",url:b.current_list_url})},Q=function(v){return function(F){if(F.fail)alert(F.errinfo);else{F=!0;if(v){var q=a("#results_table #remove_from_list_"+v);q.length?q.parent().parent().remove():(F=!1,q=a("#results_container #remove_from_list_"+v),q.parents(".dlist-result").remove())}(F?1!==a("#results_table tr").length:0!==a("#results_container .dlist-result").length)&&v||(a("#records_ui").hide(),a("#no_records_message").show())}}},K=function(v){v=
a(v.currentTarget).data("id");a.ajax({success:Q(v),dataType:"json",error:function(){alert("Error")},data:{ID:v,RemoveItem:b.domain},type:"POST",url:b.current_list_url})},T=function(v){a.ajax({success:Q(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:b.domain},type:"POST",url:b.current_list_url})},B={CIC:function(v){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(v)},VOL:function(v){return/^[1-9][0-9]*$/.test(v)}},O=function(v){if(v.fail)R();else if(v.inrequest){var F=a.grep(v.ids,
B[b.domain]);r(F);d(F.length);(v=v.previous_ids)&&a.each(v,function(q,k){a("#ct_added_to_previous_request_"+k).show()});a(".ListUI img").prop("src",function(q,k){return k.replace("list","referral")});a("#list_header_text").hide();a("#ct_header_text").show();b.current_list_url=b.ct_update_url;w()}else R()},R=function(){var v=function(){b.list_view_mode||r(b.already_added||[]);b.current_list_url=b.list_view_mode&&"ct"===b.list_view_mode?b.ct_update_url:b.list_update_url;d((b.already_added||[]).length);
w()};b.list_view_mode||b.has_session?v():a.ajax({dataType:"json",error:null,url:b.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(F){F.has_session&&v()}})},w=function(){a(".HideListUI").delegate(".add_to_list","click",A).delegate(".remove_from_list","click",K).removeClass("HideListUI");a("#remove_all_from_list").click(T);a.browser.msie&&"8.0">a.browser.msie&&a(".ListUI").removeClass("FixIE")};window.init_list_adder=function(v){b=v;b.myListLink=a("#myListLink").parent(":hidden").add("#myListLink");
v.in_request?a.ajax({success:O,dataType:"json",error:null,type:"POST",url:v.in_request}):R()}})();this.JSON||(this.JSON={});
(function(){function a(B){return 10>B?"0"+B:B}function b(B){n.lastIndex=0;return n.test(B)?'"'+B.replace(n,function(O){var R=K[O];return"string"===typeof R?R:"\\u"+("0000"+O.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+B+'"'}function d(B,O){var R=A,w=O[B];w&&"object"===typeof w&&"function"===typeof w.toJSON&&(w=w.toJSON(B));"function"===typeof T&&(w=T.call(O,B,w));switch(typeof w){case "string":return b(w);case "number":return isFinite(w)?String(w):"null";case "boolean":case "null":return String(w);
case "object":if(!w)return"null";A+=Q;var v=[];if("[object Array]"===Object.prototype.toString.apply(w)){var F=w.length;for(B=0;B<F;B+=1)v[B]=d(B,w)||"null";O=0===v.length?"[]":A?"[\n"+A+v.join(",\n"+A)+"\n"+R+"]":"["+v.join(",")+"]";A=R;return O}if(T&&"object"===typeof T)for(F=T.length,B=0;B<F;B+=1){var q=T[B];"string"===typeof q&&(O=d(q,w))&&v.push(b(q)+(A?": ":":")+O)}else for(q in w)Object.hasOwnProperty.call(w,q)&&(O=d(q,w))&&v.push(b(q)+(A?": ":":")+O);O=0===v.length?"{}":A?"{\n"+A+v.join(",\n"+
A)+"\n"+R+"}":"{"+v.join(",")+"}";A=R;return O}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(B){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(B){return this.valueOf()});var r=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
n=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,A,Q,K={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},T;"function"!==typeof JSON.stringify&&(JSON.stringify=function(B,O,R){var w;Q=A="";if("number"===typeof R)for(w=0;w<R;w+=1)Q+=" ";else"string"===typeof R&&(Q=R);if((T=O)&&"function"!==typeof O&&("object"!==typeof O||"number"!==typeof O.length))throw Error("JSON.stringify");return d("",{"":B})});
"function"!==typeof JSON.parse&&(JSON.parse=function(B,O){function R(w,v){var F,q=w[v];if(q&&"object"===typeof q)for(F in q)if(Object.hasOwnProperty.call(q,F)){var k=R(q,F);void 0!==k?q[F]=k:delete q[F]}return O.call(w,v,q)}B=String(B);r.lastIndex=0;r.test(B)&&(B=B.replace(r,function(w){return"\\u"+("0000"+w.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(B.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return B=eval("("+B+")"),"function"===typeof O?R({"":B},""):B;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(a){var b={};jQuery(a).find("input,select,textarea").each(function(d){if(this.name)if(b[this.name]||(b[this.name]=[]),"select"===this.nodeName.toLowerCase()){var r=b[this.name];$(this).find("option").each(function(n){this.selected&&r.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&b[this.name].push(this.value||"")});return b};window.restore_form_values=function(a,b){var d=jQuery;d(a).find("input,select,textarea").each(function(r){if(this.name){var n=
b[this.name];"undefined"!=typeof n&&null!==n&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?d(this).find("option").each(function(A){this.selected=1<n.length?0<=d.inArray(this.value,n):0===n.length?!1:this.value===n[0]}):this.value=n.length?n[0]:"":this.checked=1<n.length?0<=d.inArray(this.value,n):0===n.length?!1:this.value===n[0])}})};window.init_cached_state=function(a){var b=jQuery;a=a||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];b(window).on("beforeunload",function(){var d={form_values:get_form_values(a)};b.each(onbeforeunload_fns,function(r,n){n(d)});document.getElementById("cache_form_values").value=JSON.stringify(d)});window.cache_register_onbeforeunload=function(d){onbeforeunload_fns.push(d)};window.cache_register_onbeforerestorevalues=function(d){onbeforerestorevalues_fns.push(d)};window.restore_cached_state=function(){var d=document.getElementById("cache_form_values");if(d&&d.value){var r=
JSON.parse(d.value);b.each(onbeforerestorevalues_fns,function(n,A){A(r)});restore_form_values(a,r.form_values)}}}})();
(function(){var a=jQuery,b={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},d={"en-CA":!0,"":!0},r={},n={"fr-CA":"fr","es-MX":"es"},A=function(){var K=a(this),T=K.data("culture"),B=b[T]||a.datepicker.regional[T].dateFormat,O={};K.hasClass("NoYear")&&(B=B.replace(/[\- .\/]*yy[\/]?/,""),O={beforeShow:function(R,
w){w.dpDiv.addClass("NoYearDatePicker")},onClose:function(R,w){w.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});O.dateFormat=B;K.datepicker(a.extend({},a.datepicker.regional[T],O)).prop("autocomplete","off")},Q=function(K){a.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+a.ui.version+"/i18n/jquery.ui.datepicker-"+K+".min.js",function(){d[K]=!0;a.each(r[K],function(){A.call(this)});delete r[K]})};a.datepicker.regional["en-CA"]=a.extend({},a.datepicker.regional[""]);a.fn.extend({autodatepicker:function(){return this.each(function(){var K=
a(this);var T=K.parents("[lang]").first().prop("lang")||"en-CA";T=n[T]||T;K.data("culture",T);d[T]?A.call(this):(K=r[T],K||(K=r[T]=[],Q(T)),K.push(this))})}});jQuery(function(){a("input.DatePicker").autodatepicker()})})();function ClusterIcon(a,b){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.cluster_=a;this.className_=a.getMarkerClusterer().getClusterClass();this.styles_=b;this.sums_=this.div_=this.center_=null;this.visible_=!1;this.setMap(a.getMap())}
ClusterIcon.prototype.onAdd=function(){var a=this,b,d;this.div_=document.createElement("div");this.div_.className=this.className_;this.visible_&&this.show();this.getPanes().overlayMouseTarget.appendChild(this.div_);this.getMap().getDiv().addEventListener("bounds_changed",function(){d=b});this.div_.addEventListener("mousedown",function(){b=!0;d=!1});this.div_.addEventListener("click",function(r){b=!1;if(!d){var n=a.cluster_.getMarkerClusterer();google.maps.event.trigger(n,"click",a.cluster_);google.maps.event.trigger(n,
"clusterclick",a.cluster_);if(n.getZoomOnClick()){var A=n.getMaxZoom();var Q=a.cluster_.getBounds();n.getMap().fitBounds(Q);setTimeout(function(){n.getMap().fitBounds(Q);null!==A&&n.getMap().getZoom()>A&&n.getMap().setZoom(A+1)},100)}r.cancelBubble=!0;r.stopPropagation&&r.stopPropagation()}});this.div_.addEventListener("mouseover",function(){var r=a.cluster_.getMarkerClusterer();google.maps.event.trigger(r,"mouseover",a.cluster_)});this.div_.addEventListener("mouseout",function(){var r=a.cluster_.getMarkerClusterer();
google.maps.event.trigger(r,"mouseout",a.cluster_)})};ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)};ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px";this.div_.style.left=a.x+"px"}};
ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none");this.visible_=!1};
ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);this.div_.innerHTML=this.cluster_.printable_?"<img src='"+this.url_+"'><div style='position: absolute; top: 0px; left: 0px; width: "+this.width_+"px;'>"+this.sums_.text+"</div>":this.sums_.text;this.div_.title="undefined"===typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title;this.div_.style.display=""}this.visible_=
!0};
ClusterIcon.prototype.useStyle=function(a){this.sums_=a;a=Math.max(0,a.index-1);a=Math.min(this.styles_.length-1,a);a=this.styles_[a];this.url_=a.url;this.height_=a.height;this.width_=a.width;this.anchor_=a.anchor;this.anchorIcon_=a.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)];this.textColor_=a.textColor||"black";this.textSize_=a.textSize||11;this.textDecoration_=a.textDecoration||"none";this.fontWeight_=a.fontWeight||"bold";this.fontStyle_=a.fontStyle||"normal";this.fontFamily_=a.fontFamily||
"Arial,sans-serif";this.backgroundPosition_=a.backgroundPosition||"0 0"};ClusterIcon.prototype.setCenter=function(a){this.center_=a};
ClusterIcon.prototype.createCss=function(a){var b=[];this.cluster_.printable_||(b.push("background-image:url("+this.url_+");"),b.push("background-position:"+this.backgroundPosition_+";"));"object"===typeof this.anchor_?("number"===typeof this.anchor_[0]&&0<this.anchor_[0]&&this.anchor_[0]<this.height_?b.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):b.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"===typeof this.anchor_[1]&&0<this.anchor_[1]&&
this.anchor_[1]<this.width_?b.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):b.push("width:"+this.width_+"px; text-align:center;")):b.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");b.push("cursor:pointer; top:"+a.y+"px; left:"+a.x+"px; color:"+this.textColor_+"; position:absolute; font-size:"+this.textSize_+"px; font-family:"+this.fontFamily_+"; font-weight:"+this.fontWeight_+"; font-style:"+this.fontStyle_+
"; text-decoration:"+this.textDecoration_+";");return b.join("")};ClusterIcon.prototype.getPosFromLatLng_=function(a){a=this.getProjection().fromLatLngToDivPixel(a);a.x-=this.anchorIcon_[1];a.y-=this.anchorIcon_[0];return a};
function Cluster(a){this.markerClusterer_=a;this.map_=a.getMap();this.gridSize_=a.getGridSize();this.minClusterSize_=a.getMinimumClusterSize();this.averageCenter_=a.getAverageCenter();this.printable_=a.getPrintable();this.markers_=[];this.bounds_=this.center_=null;this.clusterIcon_=new ClusterIcon(this,a.getStyles())}Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getIcon=function(){return this.clusterIcon_};Cluster.prototype.getMarkers=function(){return this.markers_};
Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var a,b=new google.maps.LatLngBounds(this.center_,this.center_),d=this.getMarkers();for(a=0;a<d.length;a++)b.extend(d[a].getPosition());return b};Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null);this.markers_=[];delete this.markers_};
Cluster.prototype.addMarker=function(a){if(this.isMarkerAlreadyAdded_(a))return!1;if(!this.center_)this.center_=a.getPosition(),this.calculateBounds_();else if(this.averageCenter_){var b=this.markers_.length+1;var d=(this.center_.lat()*(b-1)+a.getPosition().lat())/b;b=(this.center_.lng()*(b-1)+a.getPosition().lng())/b;this.center_=new google.maps.LatLng(d,b);this.calculateBounds_()}a.isAdded=!0;this.markers_.push(a);d=this.markers_.length;b=this.markerClusterer_.getMaxZoom();if(null!==b&&this.map_.getZoom()>
b)a.getMap()!==this.map_&&a.setMap(this.map_);else if(d<this.minClusterSize_)a.getMap()!==this.map_&&a.setMap(this.map_);else if(d===this.minClusterSize_)for(a=0;a<d;a++)this.markers_[a].setMap(null);else a.setMap(null);this.updateIcon_();return!0};Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())};Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)};
Cluster.prototype.updateIcon_=function(){var a=this.markers_.length,b=this.markerClusterer_.getMaxZoom();null!==b&&this.map_.getZoom()>b?this.clusterIcon_.hide():a<this.minClusterSize_?this.clusterIcon_.hide():(a=this.markerClusterer_.getStyles().length,a=this.markerClusterer_.getCalculator()(this.markers_,a),this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(a),this.clusterIcon_.show())};
Cluster.prototype.isMarkerAlreadyAdded_=function(a){var b;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(a);for(b=0;b<this.markers_.length;b++)if(a===this.markers_[b])return!0;return!1};
function MarkerClusterer(a,b,d){this.extend(MarkerClusterer,google.maps.OverlayView);b=b||[];d=d||{};this.markers_=[];this.clusters_=[];this.listeners_=[];this.activeMap_=null;this.ready_=!1;this.gridSize_=d.gridSize||60;this.minClusterSize_=d.minimumClusterSize||2;this.maxZoom_=d.maxZoom||null;this.styles_=d.styles||[];this.title_=d.title||"";this.zoomOnClick_=!0;void 0!==d.zoomOnClick&&(this.zoomOnClick_=d.zoomOnClick);this.averageCenter_=!1;void 0!==d.averageCenter&&(this.averageCenter_=d.averageCenter);
this.ignoreHidden_=!1;void 0!==d.ignoreHidden&&(this.ignoreHidden_=d.ignoreHidden);this.printable_=!1;void 0!==d.printable&&(this.printable_=d.printable);this.imagePath_=d.imagePath||MarkerClusterer.IMAGE_PATH;this.imageExtension_=d.imageExtension||MarkerClusterer.IMAGE_EXTENSION;this.imageSizes_=d.imageSizes||MarkerClusterer.IMAGE_SIZES;this.calculator_=d.calculator||MarkerClusterer.CALCULATOR;this.batchSize_=d.batchSize||MarkerClusterer.BATCH_SIZE;this.batchSizeIE_=d.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE;
this.clusterClass_=d.clusterClass||"cluster";-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_);this.setupStyles_();this.addMarkers(b,!0);this.setMap(a)}
MarkerClusterer.prototype.onAdd=function(){var a=this;this.activeMap_=this.getMap();this.ready_=!0;this.repaint();this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){a.resetViewport_(!1);this.getZoom()!==(this.get("minZoom")||0)&&this.getZoom()!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){a.redraw_()})]};
MarkerClusterer.prototype.onRemove=function(){var a;for(a=0;a<this.markers_.length;a++)this.markers_[a].setMap(this.activeMap_);for(a=0;a<this.clusters_.length;a++)this.clusters_[a].remove();this.clusters_=[];for(a=0;a<this.listeners_.length;a++)google.maps.event.removeListener(this.listeners_[a]);this.listeners_=[];this.activeMap_=null;this.ready_=!1};MarkerClusterer.prototype.draw=function(){};
MarkerClusterer.prototype.setupStyles_=function(){var a;if(!(0<this.styles_.length))for(a=0;a<this.imageSizes_.length;a++){var b=this.imageSizes_[a];this.styles_.push({url:this.imagePath_+(a+1)+"."+this.imageExtension_,height:b,width:b})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var a,b=this.getMarkers(),d=new google.maps.LatLngBounds;for(a=0;a<b.length;a++)d.extend(b[a].getPosition());this.getMap().fitBounds(d)};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};
MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a};MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinimumClusterSize=function(a){this.minClusterSize_=a};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a};MarkerClusterer.prototype.getStyles=function(){return this.styles_};
MarkerClusterer.prototype.setStyles=function(a){this.styles_=a};MarkerClusterer.prototype.getTitle=function(){return this.title_};MarkerClusterer.prototype.setTitle=function(a){this.title_=a};MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.setZoomOnClick=function(a){this.zoomOnClick_=a};MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_};
MarkerClusterer.prototype.setAverageCenter=function(a){this.averageCenter_=a};MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_};MarkerClusterer.prototype.setIgnoreHidden=function(a){this.ignoreHidden_=a};MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_};MarkerClusterer.prototype.setImageExtension=function(a){this.imageExtension_=a};MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_};
MarkerClusterer.prototype.setImagePath=function(a){this.imagePath_=a};MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_};MarkerClusterer.prototype.setImageSizes=function(a){this.imageSizes_=a};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a};MarkerClusterer.prototype.getPrintable=function(){return this.printable_};
MarkerClusterer.prototype.setPrintable=function(a){this.printable_=a};MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_};MarkerClusterer.prototype.setBatchSizeIE=function(a){this.batchSizeIE_=a};MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_};MarkerClusterer.prototype.setClusterClass=function(a){this.clusterClass_=a};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};
MarkerClusterer.prototype.getClusters=function(){return this.clusters_};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.addMarker=function(a,b){this.pushMarkerTo_(a);b||this.redraw_()};MarkerClusterer.prototype.addMarkers=function(a,b){var d;for(d=0;d<a.length;d++)this.pushMarkerTo_(a[d]);b||this.redraw_()};
MarkerClusterer.prototype.pushMarkerTo_=function(a){if(a.getDraggable()){var b=this;google.maps.event.addListener(a,"dragend",function(){b.ready_&&(this.isAdded=!1,b.repaint())})}a.isAdded=!1;this.markers_.push(a)};MarkerClusterer.prototype.removeMarker=function(a,b){a=this.removeMarker_(a);!b&&a&&this.repaint();return a};MarkerClusterer.prototype.removeMarkers=function(a,b){var d,r=!1;for(d=0;d<a.length;d++){var n=this.removeMarker_(a[d]);r=r||n}!b&&r&&this.repaint();return r};
MarkerClusterer.prototype.removeMarker_=function(a){var b,d=-1;if(this.markers_.indexOf)d=this.markers_.indexOf(a);else for(b=0;b<this.markers_.length;b++)if(a===this.markers_[b]){d=b;break}if(-1===d)return!1;a.setMap(null);this.markers_.splice(d,1);return!0};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0);this.markers_=[]};
MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_=[];this.resetViewport_(!1);this.redraw_();setTimeout(function(){var b;for(b=0;b<a.length;b++)a[b].remove()},0)};
MarkerClusterer.prototype.getExtendedBounds=function(a){var b=this.getProjection(),d=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),r=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng());d=b.fromLatLngToDivPixel(d);d.x+=this.gridSize_;d.y-=this.gridSize_;r=b.fromLatLngToDivPixel(r);r.x-=this.gridSize_;r.y+=this.gridSize_;d=b.fromDivPixelToLatLng(d);b=b.fromDivPixelToLatLng(r);a.extend(d);a.extend(b);return a};MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)};
MarkerClusterer.prototype.resetViewport_=function(a){var b;for(b=0;b<this.clusters_.length;b++)this.clusters_[b].remove();this.clusters_=[];for(b=0;b<this.markers_.length;b++){var d=this.markers_[b];d.isAdded=!1;a&&d.setMap(null)}};MarkerClusterer.prototype.pi_over_180=Math.PI/180;MarkerClusterer.prototype.pi_over_360=Math.PI/360;MarkerClusterer.prototype.distanceBetweenPoints_=function(a,b){var d=a.lat(),r=b.lat();a=(b.lng()-a.lng())*Math.cos((d+r)/2);d=r-d;return 6371*Math.sqrt(a*a+d*d)};
MarkerClusterer.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())};MarkerClusterer.prototype.addToClosestCluster_=function(a){var b,d,r=4E4,n=null;for(b=0;b<this.clusters_.length;b++){var A=this.clusters_[b];if(d=A.getCenter())d=this.distanceBetweenPoints_(d,a.getPosition()),d<r&&(r=d,n=A)}n&&n.isMarkerInClusterBounds(a)?n.addMarker(a):(A=new Cluster(this),A.addMarker(a),this.clusters_.push(A))};
MarkerClusterer.prototype.createClusters_=function(a){var b=this;if(this.ready_){0===a&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!==typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic));var d=3<this.getMap().getZoom()?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,
178.00048865625));d=this.getExtendedBounds(d);for(var r=Math.min(a+this.batchSize_,this.markers_.length);a<r;a++){var n=this.markers_[a];!n.isAdded&&this.isMarkerInBounds_(n,d)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n)}r<this.markers_.length?this.timerRefStatic=setTimeout(function(){b.createClusters_(r)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}};
MarkerClusterer.prototype.extend=function(a,b){return function(d){for(var r in d.prototype)this.prototype[r]=d.prototype[r];return this}.apply(a,[b])};MarkerClusterer.CALCULATOR=function(a,b){for(var d=0,r=a=a.length.toString();0!==r;)r=parseInt(r/10,10),d++;d=Math.min(d,b);return{text:a,index:d,title:""}};MarkerClusterer.BATCH_SIZE=2E3;MarkerClusterer.BATCH_SIZE_IE=500;MarkerClusterer.IMAGE_PATH="//google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m";
MarkerClusterer.IMAGE_EXTENSION="png";MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90];
(function(a,b){var d,r;var n=function(c){return new n.prototype.init(c)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=n:a.Globalize=n;n.cultures={};n.prototype={constructor:n,init:function(c){this.cultures=n.cultures;this.cultureSelector=c;return this}};n.prototype.init.prototype=n.prototype;n.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",
groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},
months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};
n.cultures["default"].calendar=n.cultures["default"].calendars.standard;n.cultures.en=n.cultures["default"];n.cultureSelector="en";var A=/^0x[a-f0-9]+$/i;var Q=/^[+\-]?infinity$/i;var K=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;var T=/^\s+|\s+$/g;var B=function(c,e){if(c.indexOf)return c.indexOf(e);for(var h=0,g=c.length;h<g;h++)if(c[h]===e)return h;return-1};var O=function(c,e){return c.substr(c.length-e.length)===e};var R=function(){var c,e,h,g=arguments[0]||{},t=1,y=arguments.length,z=!1;"boolean"===typeof g&&
(z=g,g=arguments[1]||{},t=2);for("object"===typeof g||v(g)||(g={});t<y;t++)if(null!=(c=arguments[t]))for(e in c){var l=g[e];var D=c[e];g!==D&&(z&&D&&(F(D)||(h=w(D)))?(h?(h=!1,l=l&&w(l)?l:[]):l=l&&F(l)?l:{},g[e]=R(z,l,D)):D!==b&&(g[e]=D))}return g};var w=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)};var v=function(c){return"[object Function]"===Object.prototype.toString.call(c)};var F=function(c){return"[object Object]"===Object.prototype.toString.call(c)};
var q=function(c,e){return 0===c.indexOf(e)};var k=function(c){return(c+"").replace(T,"")};var N=function(c){return isNaN(c)?NaN:Math[0>c?"ceil":"floor"](c)};var C=function(c,e,h){var g;for(g=c.length;g<e;g+=1)c=h?"0"+c:c+"0";return c};var P=function(c,e){for(var h=0,g=!1,t=0,y=c.length;t<y;t++){var z=c.charAt(t);switch(z){case "'":g?e.push("'"):h++;g=!1;break;case "\\":g&&e.push("\\");g=!g;break;default:e.push(z),g=!1}}return h};var X=function(c,e){e=e||"F";c=c.patterns;var h=e.length;if(1===h){c=
c[e];if(!c)throw"Invalid date format string '"+e+"'.";e=c}else 2===h&&"%"===e.charAt(0)&&(e=e.charAt(1));return e};var J=function(c,e,h){function g(fa,W){fa+="";return 1<W&&fa.length<W?(fa=S[W-2]+fa,fa.substr(fa.length-W,W)):fa}function t(fa,W){if(ha)return ha[W];switch(W){case 0:return fa.getFullYear();case 1:return fa.getMonth();case 2:return fa.getDate();default:throw"Invalid part value "+W;}}var y=h.calendar,z=y.convert;if(!e||!e.length||"i"===e){if(h&&h.name.length)if(z)h=J(c,y.patterns.F,h);
else{e=new Date(c.getTime());var l=m(c,y.eras);e.setFullYear(u(c,y,l));h=e.toLocaleString()}else h=c.toString();return h}var D=y.eras,M="s"===e;e=X(y,e);h=[];var S=["0","00","000"],aa=/([^d]|^)(d|dd)([^d]|$)/g,ba=0,ca=H(),ha;for(!M&&z&&(ha=z.fromGregorian(c));;){var U=ca.lastIndex;z=ca.exec(e);U=e.slice(U,z?z.index:e.length);ba+=P(U,h);if(!z)break;if(ba%2)h.push(z[0]);else switch(U=z[0],z=U.length,U){case "ddd":case "dddd":h.push((3===z?y.days.namesAbbr:y.days.names)[c.getDay()]);break;case "d":case "dd":l=
!0;h.push(g(t(c,2),z));break;case "MMM":case "MMMM":U=t(c,1);var Y=h,oa=Y.push,na;if(na=y.monthsGenitive){if(!l&&!ja){l=aa.test(e);var ja=!0}na=l}oa.call(Y,na?y.monthsGenitive[3===z?"namesAbbr":"names"][U]:y.months[3===z?"namesAbbr":"names"][U]);break;case "M":case "MM":h.push(g(t(c,1)+1,z));break;case "y":case "yy":case "yyyy":U=ha?ha[0]:u(c,y,m(c,D),M);4>z&&(U%=100);h.push(g(U,z));break;case "h":case "hh":U=c.getHours()%12;0===U&&(U=12);h.push(g(U,z));break;case "H":case "HH":h.push(g(c.getHours(),
z));break;case "m":case "mm":h.push(g(c.getMinutes(),z));break;case "s":case "ss":h.push(g(c.getSeconds(),z));break;case "t":case "tt":U=12>c.getHours()?y.AM?y.AM[0]:" ":y.PM?y.PM[0]:" ";h.push(1===z?U.charAt(0):U);break;case "f":case "ff":case "fff":h.push(g(c.getMilliseconds(),3).substr(0,z));break;case "z":case "zz":U=c.getTimezoneOffset()/60;h.push((0>=U?"+":"-")+g(Math.floor(Math.abs(U)),z));break;case "zzz":U=c.getTimezoneOffset()/60;h.push((0>=U?"+":"-")+g(Math.floor(Math.abs(U)),2)+":"+g(Math.abs(c.getTimezoneOffset()%
60),2));break;case "g":case "gg":y.eras&&h.push(y.eras[m(c,D)].name);break;case "/":h.push(y["/"]);break;default:throw"Invalid date format pattern '"+U+"'.";}}return h.join("")};(function(){var c=function(e,h,g){var t=g.groupSizes,y=t[0],z=1,l=Math.pow(10,h);l=Math.round(e*l)/l;isFinite(l)||(l=e);e=l;l=(e+"").split(/e/i);var D=1<l.length?parseInt(l[1],10):0;e=l[0];l=e.split(".");e=l[0];l=1<l.length?l[1]:"";0<D?(l=C(l,D,!1),e+=l.slice(0,D),l=l.substr(D)):0>D&&(D=-D,e=C(e,D+1,!0),l=e.slice(-D,e.length)+
l,e=e.slice(0,-D));l=0<h?g["."]+(l.length>h?l.slice(0,h):C(l,h)):"";h=e.length-1;g=g[","];for(D="";0<=h;){if(0===y||y>h)return e.slice(0,h+1)+(D.length?g+D+l:l);D=e.slice(h-y+1,h+1)+(D.length?g+D:"");h-=y;z<t.length&&(y=t[z],z++)}return e.slice(0,h+1)+g+D+l};d=function(e,h,g){if(!isFinite(e))return Infinity===e?g.numberFormat.positiveInfinity:-Infinity===e?g.numberFormat.negativeInfinity:g.numberFormat.NaN;if(!h||"i"===h)return g.name.length?e.toLocaleString():e.toString();h=h||"D";g=g.numberFormat;
var t=Math.abs(e),y=-1;1<h.length&&(y=parseInt(h.slice(1),10));var z=h.charAt(0).toUpperCase();switch(z){case "D":h="n";t=N(t);-1!==y&&(t=C(""+t,y,!0));0>e&&(t="-"+t);break;case "N":var l=g;case "C":l=l||g.currency;case "P":l=l||g.percent;h=0>e?l.pattern[0]:l.pattern[1]||"n";-1===y&&(y=l.decimals);t=c(t*("P"===z?100:1),y,l);break;default:throw"Bad number format specifier: "+z;}e=/n|\$|-|%/g;for(l="";;){y=e.lastIndex;z=e.exec(h);l+=h.slice(y,z?z.index:h.length);if(!z)break;switch(z[0]){case "n":l+=
t;break;case "$":l+=g.currency.symbol;break;case "-":/[1-9]/.test(t)&&(l+=g["-"]);break;case "%":l+=g.percent.symbol}}return l}})();var H=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};var m=function(c,e){if(!e)return 0;for(var h=c.getTime(),g=0,t=e.length;g<t;g++)if(c=e[g].start,null===c||h>=c)return g;return 0};var u=function(c,e,h,g){c=c.getFullYear();!g&&e.eras&&(c-=e.eras[h].offset);return c};(function(){var c=function(l,D){if(100>
D){var M=new Date,S=m(M);M=u(M,l,S);l=l.twoDigitYearMax;l="string"===typeof l?(new Date).getFullYear()%100+parseInt(l,10):l;D+=M-M%100;D>l&&(D-=100)}return D};var e=function(l,D,M){var S=l.days,aa=l._upperDays;aa||(l._upperDays=aa=[z(S.names),z(S.namesAbbr),z(S.namesShort)]);D=y(D);M?(l=B(aa[1],D),-1===l&&(l=B(aa[2],D))):l=B(aa[0],D);return l};var h=function(l,D,M){var S=l.months,aa=l.monthsGenitive||l.months,ba=l._upperMonths,ca=l._upperMonthsGen;ba||(l._upperMonths=ba=[z(S.names),z(S.namesAbbr)],
l._upperMonthsGen=ca=[z(aa.names),z(aa.namesAbbr)]);D=y(D);l=B(M?ba[1]:ba[0],D);0>l&&(l=B(M?ca[1]:ca[0],D));return l};var g=function(l,D){var M=l._parseRegExp;if(M){var S=M[D];if(S)return S}else l._parseRegExp=M={};l=X(l,D).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");S=["^"];for(var aa=[],ba=0,ca=0,ha=H(),U;null!==(U=ha.exec(l));){var Y=l.slice(ba,U.index);ba=ha.lastIndex;ca+=P(Y,S);if(ca%2)S.push(U[0]);else{Y=U[0];var oa=Y.length;switch(Y){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":Y=
"(\\D+)";break;case "tt":case "t":Y="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":Y="(\\d{"+oa+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":Y="(\\d\\d?)";break;case "zzz":Y="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":Y="([+-]?\\d\\d?)";break;case "/":Y="(\\/)";break;default:throw"Invalid date format pattern '"+Y+"'.";}Y&&S.push(Y);aa.push(U[0])}}P(l.slice(ba),S);S.push("$");l={regExp:S.join("").replace(/\s+/g,
"\\s+"),groups:aa};return M[D]=l};var t=function(l,D,M){return l<D||l>M};var y=function(l){return l.split("\u00a0").join(" ").toUpperCase()};var z=function(l){for(var D=[],M=0,S=l.length;M<S;M++)D[M]=y(l[M]);return D};r=function(l,D,M){l=k(l);M=M.calendar;D=g(M,D);var S=(new RegExp(D.regExp)).exec(l);if(null===S)return null;var aa=D.groups,ba=D=l=null,ca=null,ha=null,U=0,Y=0,oa=0,na=0;var ja=null;for(var fa=!1,W=0,pa=aa.length;W<pa;W++){var da=S[W+1];if(da){var ea=aa[W],ia=ea.length,ma=parseInt(da,
10);switch(ea){case "dd":case "d":ca=ma;if(t(ca,1,31))return null;break;case "MMM":case "MMMM":ba=h(M,da,3===ia);if(t(ba,0,11))return null;break;case "M":case "MM":ba=ma-1;if(t(ba,0,11))return null;break;case "y":case "yy":case "yyyy":D=4>ia?c(M,ma):ma;if(t(D,0,9999))return null;break;case "h":case "hh":U=ma;12===U&&(U=0);if(t(U,0,11))return null;break;case "H":case "HH":U=ma;if(t(U,0,23))return null;break;case "m":case "mm":Y=ma;if(t(Y,0,59))return null;break;case "s":case "ss":oa=ma;if(t(oa,0,59))return null;
break;case "tt":case "t":fa=M.PM&&(da===M.PM[0]||da===M.PM[1]||da===M.PM[2]);if(!fa&&(!M.AM||da!==M.AM[0]&&da!==M.AM[1]&&da!==M.AM[2]))return null;break;case "f":case "ff":case "fff":na=ma*Math.pow(10,3-ia);if(t(na,0,999))return null;break;case "ddd":case "dddd":ha=e(M,da,3===ia);if(t(ha,0,6))return null;break;case "zzz":ea=da.split(/:/);if(2!==ea.length)return null;ja=parseInt(ea[0],10);if(t(ja,-12,13))return null;ea=parseInt(ea[1],10);if(t(ea,0,59))return null;ja=60*ja+(q(da,"-")?-ea:ea);break;
case "z":case "zz":ja=ma;if(t(ja,-12,13))return null;ja*=60;break;case "g":case "gg":if(!da||!M.eras)return null;da=k(da.toLowerCase());ea=0;for(ia=M.eras.length;ea<ia;ea++)if(da===M.eras[ea].name.toLowerCase()){l=ea;break}if(null===l)return null}}}S=new Date;aa=(W=M.convert)?W.fromGregorian(S)[0]:S.getFullYear();null===D?D=aa:M.eras&&(D+=M.eras[l||0].offset);null===ba&&(ba=0);null===ca&&(ca=1);if(W){if(S=W.toGregorian(D,ba,ca),null===S)return null}else if(S.setFullYear(D,ba,ca),S.getDate()!==ca||
null!==ha&&S.getDay()!==ha)return null;fa&&12>U&&(U+=12);S.setHours(U,Y,oa,na);null!==ja&&(M=S.getMinutes()-(ja+S.getTimezoneOffset()),S.setHours(S.getHours()+parseInt(M/60,10),M%60));return S}})();var E=function(c,e,h){var g=e["-"];e=e["+"];var t;switch(h){case "n -":g=" "+g,e=" "+e;case "n-":O(c,g)?t=["-",c.substr(0,c.length-g.length)]:O(c,e)&&(t=["+",c.substr(0,c.length-e.length)]);break;case "- n":g+=" ",e+=" ";case "-n":q(c,g)?t=["-",c.substr(g.length)]:q(c,e)&&(t=["+",c.substr(e.length)]);break;
case "(n)":q(c,"(")&&O(c,")")&&(t=["-",c.substr(1,c.length-2)])}return t||["",c]};n.prototype.findClosestCulture=function(c){return n.findClosestCulture.call(this,c)};n.prototype.format=function(c,e,h){return n.format.call(this,c,e,h)};n.prototype.localize=function(c,e){return n.localize.call(this,c,e)};n.prototype.parseInt=function(c,e,h){return n.parseInt.call(this,c,e,h)};n.prototype.parseFloat=function(c,e,h){return n.parseFloat.call(this,c,e,h)};n.prototype.culture=function(c){return n.culture.call(this,
c)};n.addCultureInfo=function(c,e,h){var g=!1;"string"!==typeof c?(h=c,c=this.culture().name,e=this.cultures[c]):"string"!==typeof e?(h=e,g=null==this.cultures[c],e=this.cultures[c]||this.cultures["default"]):(g=!0,e=this.cultures[e]);this.cultures[c]=R(!0,{},e,h);g&&(this.cultures[c].calendar=this.cultures[c].calendars.standard)};n.findClosestCulture=function(c){var e;if(!c)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof c&&(c=c.split(","));if(w(c)){var h=
this.cultures,g=c,t,y=g.length,z=[];for(t=0;t<y;t++){c=k(g[t]);c=c.split(";");var l=k(c[0]);1===c.length?c=1:(c=k(c[1]),0===c.indexOf("q=")?(c=c.substr(2),c=parseFloat(c),c=isNaN(c)?0:c):c=1);z.push({lang:l,pri:c})}z.sort(function(M,S){return M.pri<S.pri?1:M.pri>S.pri?-1:0});for(t=0;t<y;t++)if(l=z[t].lang,e=h[l])return e;for(t=0;t<y;t++){l=z[t].lang;do{g=l.lastIndexOf("-");if(-1===g)break;l=l.substr(0,g);if(e=h[l])return e}while(1)}for(t=0;t<y;t++){l=z[t].lang;for(var D in h)if(g=h[D],g.language==
l)return g}}else if("object"===typeof c)return c;return e||null};n.format=function(c,e,h){h=this.findClosestCulture(h);c instanceof Date?c=J(c,e,h):"number"===typeof c&&(c=d(c,e,h));return c};n.localize=function(c,e){return this.findClosestCulture(e).messages[c]||this.cultures["default"].messages[c]};n.parseDate=function(c,e,h){h=this.findClosestCulture(h);var g;if(e){if("string"===typeof e&&(e=[e]),e.length){var t=0;for(var y=e.length;t<y;t++){var z=e[t];if(z&&(g=r(c,z,h)))break}}}else for(t in e=
h.calendar.patterns,e)if(g=r(c,e[t],h))break;return g||null};n.parseInt=function(c,e,h){return N(n.parseFloat(c,e,h))};n.parseFloat=function(c,e,h){"number"!==typeof e&&(h=e,e=10);var g=this.findClosestCulture(h);h=NaN;var t=g.numberFormat;-1<c.indexOf(g.numberFormat.currency.symbol)&&(c=c.replace(g.numberFormat.currency.symbol,""),c=c.replace(g.numberFormat.currency["."],g.numberFormat["."]));c=k(c);if(Q.test(c))h=parseFloat(c);else if(!e&&A.test(c))h=parseInt(c,16);else{g=E(c,t,t.pattern[0]);e=
g[0];g=g[1];""===e&&"(n)"!==t.pattern[0]&&(g=E(c,t,"(n)"),e=g[0],g=g[1]);""===e&&"-n"!==t.pattern[0]&&(g=E(c,t,"-n"),e=g[0],g=g[1]);e=e||"+";c=g.indexOf("e");0>c&&(c=g.indexOf("E"));if(0>c){var y=g;c=null}else y=g.substr(0,c),c=g.substr(c+1);var z=t["."],l=y.indexOf(z);0>l?(g=y,y=null):(g=y.substr(0,l),y=y.substr(l+z.length));z=t[","];g=g.split(z).join("");l=z.replace(/\u00A0/g," ");z!==l&&(g=g.split(l).join(""));e+=g;null!==y&&(e+="."+y);null!==c&&(t=E(c,t,"-n"),e+="e"+(t[0]||"+")+t[1]);K.test(e)&&
(h=parseFloat(e))}return h};n.culture=function(c){"undefined"!==typeof c&&(this.cultureSelector=c);return this.findClosestCulture(c)||this.cultures["default"]}})(this);(function(a,b,d){"$:nomunge";a.scrollbarWidth=function(){if(d===b){var r=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body");var n=r.children();d=n.innerWidth()-n.height(99).innerWidth();r.remove()}return d}})(jQuery);
(function(a,b){function d(m){return"string"===typeof m}function r(m){var u=T.call(arguments,1);return function(){return m.apply(this,u.concat(T.call(arguments)))}}function n(m,u,E,c,e){if(c!==K){u=E.match(m?/^([^#]*)#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);E=u[3]||"";if(2===e&&d(c))c=c.replace(m?P:C,"");else{var h=w(u[2]);c=d(c)?w[m?"fragment":"querystring"](c):c;c=2===e?c:1===e?a.extend({},c,h):a.extend({},h,c);c=O(c);m&&(c=c.replace(X,B))}m=u[1]+(m?"#":c||!u[1]?"?":"")+c+E}else m=u(E!==K?E:b.location.href);
return m}function A(m,u,E){u===K||"boolean"===typeof u?(E=u,u=O[m?"fragment":"querystring"]()):u=d(u)?u.replace(m?P:C,""):u;return w(u,E)}function Q(m,u,E,c){d(E)||"object"===typeof E||(c=E,E=u,u=K);return this.each(function(){var e=a(this),h=u||H()[(this.nodeName||"").toLowerCase()]||"",g=h&&e.attr(h)||"";e.attr(h,O[m](g,E,c))})}"$:nomunge";var K,T=Array.prototype.slice,B=decodeURIComponent,O=a.param,R,w,v,F=a.bbq=a.bbq||{},q,k,N=a.event.special,C=/^.*\?|#.*$/g,P=/^.*#/,X,J={};O.querystring=r(n,
0,function(m){return m.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")});O.fragment=R=r(n,1,function(m){return m.replace(/^[^#]*#?(.*)$/,"$1")});R.noEscape=function(m){m=a.map((m||"").split(""),encodeURIComponent);X=new RegExp(m.join("|"),"g")};R.noEscape(",/");a.deparam=w=function(m,u){var E={},c={"true":!0,"false":!1,"null":null};a.each(m.replace(/\+/g," ").split("&"),function(e,h){var g=h.split("=");e=B(g[0]);h=E;var t=0,y=e.split("]["),z=y.length-1;/\[/.test(y[0])&&/\]$/.test(y[z])?(y[z]=y[z].replace(/\]$/,
""),y=y.shift().split("[").concat(y),z=y.length-1):z=0;if(2===g.length)if(g=B(g[1]),u&&(g=g&&!isNaN(g)?+g:"undefined"===g?K:c[g]!==K?c[g]:g),z)for(;t<=z;t++)e=""===y[t]?h.length:y[t],h=h[e]=t<z?h[e]||(y[t+1]&&isNaN(y[t+1])?{}:[]):g;else a.isArray(E[e])?E[e].push(g):E[e]=E[e]!==K?[E[e],g]:g;else e&&(E[e]=u?K:"")});return E};w.querystring=r(A,0);w.fragment=v=r(A,1);a.elemUrlAttr||(a.elemUrlAttr=function(m){return a.extend(J,m)})({a:"href",base:"href",iframe:"src",img:"src",input:"src",form:"action",
link:"href",script:"src"});var H=a.elemUrlAttr;a.fn.querystring=r(Q,"querystring");a.fn.fragment=r(Q,"fragment");F.pushState=q=function(m,u){d(m)&&/^#/.test(m)&&u===K&&(u=2);var E=m!==K;m=R(b.location.href,E?m:{},E?u:2);b.location.href=m+(/#/.test(m)?"":"#")};F.getState=k=function(m,u){return m===K||"boolean"===typeof m?v(m):v(u)[m]};F.removeState=function(m){var u={};m!==K&&(u=k(),a.each(a.isArray(m)?m:arguments,function(E,c){delete u[c]}));q(u,2)};N.hashchange=a.extend(N.hashchange,{add:function(m){function u(c){var e=
c.fragment=R();c.getState=function(h,g){return h===K||"boolean"===typeof h?w(e,h):w(e,g)[h]};E.apply(this,arguments)}if(a.isFunction(m)){var E=m;return u}E=m.handler;m.handler=u}})})(jQuery,this);
(function(a,b,d){function r(B){B=B||b.location.href;return B.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var n=a.event.special,A=document.documentMode,Q=a.browser.msie&&(A===d||8>A),K="onhashchange"in b&&!Q;a.hashchangeDelay=100;n.hashchange=a.extend(n.hashchange,{setup:function(){if(K)return!1;a(T.start)},teardown:function(){if(K)return!1;a(T.stop)}});var T=function(){function B(){v=F=function(q){return q};Q&&(w=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,F=function(){return r(w.document.location.href)},
v=function(q,k){q!==k&&(k=w.document,k.open().close(),k.location.hash="#"+q)},v(r()))}var O={},R,w,v,F;O.start=function(){if(!R){var q=r();v||B();(function N(){var C=r(),P=F(q);C!==q?(v(q=C,P),a(b).trigger("hashchange")):P!==q&&(b.location.href=b.location.href.replace(/#.*/,"")+"#"+P);R=setTimeout(N,a.hashchangeDelay)})()}};O.stop=function(){w||(R&&clearTimeout(R),R=0)};return O}()})(jQuery,this);
(function(a,b){"$:nomunge";var d=a.jQuery||a.Cowboy||(a.Cowboy={}),r;d.throttle=r=function(n,A,Q,K){function T(){function R(){O=+new Date;Q.apply(v,q)}function w(){B=b}var v=this,F=+new Date-O,q=arguments;K&&!B&&R();B&&clearTimeout(B);K===b&&F>n?R():!0!==A&&(B=setTimeout(K?w:R,K===b?n-F:n))}var B,O=0;"boolean"!==typeof A&&(K=Q,Q=A,A=b);d.guid&&(T.guid=Q.guid=Q.guid||d.guid++);return T};d.debounce=function(n,A,Q){return Q===b?r(n,A,!1):r(n,Q,!1!==A)}})(this);
(function(){function a(b){function d(q,k){var N=q==window,C=k&&void 0!==k.message?k.message:void 0;k=b.extend({},b.blockUI.defaults,k||{});if(!k.ignoreIfBlocked||!b(q).data("blockUI.isBlocked")){k.overlayCSS=b.extend({},b.blockUI.defaults.overlayCSS,k.overlayCSS||{});var P=b.extend({},b.blockUI.defaults.css,k.css||{});k.onOverlayClick&&(k.overlayCSS.cursor="pointer");var X=b.extend({},b.blockUI.defaults.themedCSS,k.themedCSS||{});C=void 0===C?k.message:C;N&&v&&r(window,{fadeOut:0});if(C&&"string"!=
typeof C&&(C.parentNode||C.jquery)){var J=C.jquery?C[0]:C,H={};b(q).data("blockUI.history",H);H.el=J;H.parent=J.parentNode;H.display=J.style.display;H.position=J.style.position;H.parent&&H.parent.removeChild(J)}b(q).data("blockUI.onUnblock",k.onUnblock);H=k.baseZ;var m=O||k.forceIframe?b('<iframe class="blockUI" style="z-index:'+H++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+k.iframeSrc+'"></iframe>'):b('<div class="blockUI" style="display:none"></div>');
J=k.theme?b('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+H++ +';display:none"></div>'):b('<div class="blockUI blockOverlay" style="z-index:'+H++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');k.theme&&N?(H='<div class="blockUI '+k.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(H+10)+';display:none;position:fixed">',k.title&&(H+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+
(k.title||"&nbsp;")+"</div>"),H+='<div class="ui-widget-content ui-dialog-content"></div></div>'):k.theme?(H='<div class="blockUI '+k.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(H+10)+';display:none;position:absolute">',k.title&&(H+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(k.title||"&nbsp;")+"</div>"),H+='<div class="ui-widget-content ui-dialog-content"></div></div>'):H=N?'<div class="blockUI '+k.blockMsgClass+' blockPage" style="z-index:'+
(H+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+k.blockMsgClass+' blockElement" style="z-index:'+(H+10)+';display:none;position:absolute"></div>';H=b(H);C&&(k.theme?(H.css(X),H.addClass("ui-widget-content")):H.css(P));k.theme||J.css(k.overlayCSS);J.css("position",N?"fixed":"absolute");(O||k.forceIframe)&&m.css("opacity",0);P=[m,J,H];var u=N?b("body"):b(q);b.each(P,function(){this.appendTo(u)});k.theme&&k.draggable&&b.fn.draggable&&H.draggable({handle:".ui-dialog-titlebar",cancel:"li"});
X=w&&(!b.support.boxModel||0<b("object,embed",N?null:q).length);if(R||X){N&&k.allowBodyStretch&&b.support.boxModel&&b("html,body").css("height","100%");if((R||!b.support.boxModel)&&!N){X=parseInt(b.css(q,"borderTopWidth"),10)||0;var E=parseInt(b.css(q,"borderLeftWidth"),10)||0,c=X?"(0 - "+X+")":0,e=E?"(0 - "+E+")":0}b.each(P,function(h,g){g=g[0].style;g.position="absolute";2>h?(N?g.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+
k.quirksmodeOffsetHack+') + "px"'):g.setExpression("height",'this.parentNode.offsetHeight + "px"'),N?g.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):g.setExpression("width",'this.parentNode.offsetWidth + "px"'),e&&g.setExpression("left",e),c&&g.setExpression("top",c)):k.centerY?(N&&g.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),
g.marginTop=0):!k.centerY&&N&&(h=k.css&&k.css.top?parseInt(k.css.top,10):0,g.setExpression("top","((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+h+') + "px"'))})}C&&(k.theme?H.find(".ui-widget-content").append(C):H.append(C),(C.jquery||C.nodeType)&&b(C).show());(O||k.forceIframe)&&k.showOverlay&&m.show();k.fadeIn?(P=k.onBlock?k.onBlock:B,m=k.showOverlay&&!C?P:B,P=C?P:B,k.showOverlay&&J._fadeIn(k.fadeIn,m),C&&H._fadeIn(k.fadeIn,P)):(k.showOverlay&&
J.show(),C&&H.show(),k.onBlock&&k.onBlock.bind(H)());A(1,q,k);N?(v=H[0],F=b(k.focusableElements,v),k.focusInput&&setTimeout(K,20)):T(H[0],k.centerX,k.centerY);k.timeout&&(C=setTimeout(function(){N?b.unblockUI(k):b(q).unblock(k)},k.timeout),b(q).data("blockUI.timeout",C))}}function r(q,k){var N=q==window,C=b(q),P=C.data("blockUI.history"),X=C.data("blockUI.timeout");X&&(clearTimeout(X),C.removeData("blockUI.timeout"));k=b.extend({},b.blockUI.defaults,k||{});A(0,q,k);null===k.onUnblock&&(k.onUnblock=
C.data("blockUI.onUnblock"),C.removeData("blockUI.onUnblock"));var J=N?b("body").children().filter(".blockUI").add("body > .blockUI"):C.find(">.blockUI");k.cursorReset&&(1<J.length&&(J[1].style.cursor=k.cursorReset),2<J.length&&(J[2].style.cursor=k.cursorReset));N&&(v=F=null);if(k.fadeOut){var H=J.length;J.stop().fadeOut(k.fadeOut,function(){0===--H&&n(J,P,k,q)})}else n(J,P,k,q)}function n(q,k,N,C){var P=b(C);if(!P.data("blockUI.isBlocked")){q.each(function(X,J){this.parentNode&&this.parentNode.removeChild(this)});
k&&k.el&&(k.el.style.display=k.display,k.el.style.position=k.position,k.el.style.cursor="default",k.parent&&k.parent.appendChild(k.el),P.removeData("blockUI.history"));P.data("blockUI.static")&&P.css("position","static");if("function"==typeof N.onUnblock)N.onUnblock(C,N);q=b(document.body);k=q.width();N=q[0].style.width;q.width(k-1).width(k);q[0].style.width=N}}function A(q,k,N){var C=k==window;k=b(k);if(q||(!C||v)&&(C||k.data("blockUI.isBlocked")))k.data("blockUI.isBlocked",q),C&&N.bindEvents&&(!q||
N.showOverlay)&&(q?b(document).bind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",N,Q):b(document).unbind("mousedown mouseup keydown keypress keyup touchstart touchend touchmove",Q))}function Q(q){if("keydown"===q.type&&q.keyCode&&9==q.keyCode&&v&&q.data.constrainTabKey){var k=F,N=q.shiftKey&&q.target===k[0];if(!q.shiftKey&&q.target===k[k.length-1]||N)return setTimeout(function(){K(N)},10),!1}k=q.data;var C=b(q.target);if(C.hasClass("blockOverlay")&&k.onOverlayClick)k.onOverlayClick(q);
return 0<C.parents("div."+k.blockMsgClass).length?!0:0===C.parents().children().filter("div.blockUI").length}function K(q){F&&(q=F[!0===q?F.length-1:0])&&q.focus()}function T(q,k,N){var C=q.parentNode,P=q.style,X=(C.offsetWidth-q.offsetWidth)/2-(parseInt(b.css(C,"borderLeftWidth"),10)||0);q=(C.offsetHeight-q.offsetHeight)/2-(parseInt(b.css(C,"borderTopWidth"),10)||0);k&&(P.left=0<X?X+"px":"0");N&&(P.top=0<q?q+"px":"0")}b.fn._fadeIn=b.fn.fadeIn;var B=b.noop||function(){},O=/MSIE/.test(navigator.userAgent),
R=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),w=b.isFunction(document.createElement("div").style.setExpression);b.blockUI=function(q){d(window,q)};b.unblockUI=function(q){r(window,q)};b.growlUI=function(q,k,N,C){var P=b('<div class="growlUI"></div>');q&&P.append("<h1>"+q+"</h1>");k&&P.append("<h2>"+k+"</h2>");void 0===N&&(N=3E3);var X=function(J){J=J||{};b.blockUI({message:P,fadeIn:"undefined"!==typeof J.fadeIn?J.fadeIn:700,fadeOut:"undefined"!==typeof J.fadeOut?J.fadeOut:
1E3,timeout:"undefined"!==typeof J.timeout?J.timeout:N,centerY:!1,showOverlay:!1,onUnblock:C,css:b.blockUI.defaults.growlCSS})};X();P.css("opacity");P.mouseover(function(){X({fadeIn:0,timeout:3E4});var J=b(".blockMsg");J.stop();J.fadeTo(300,1)}).mouseout(function(){b(".blockMsg").fadeOut(1E3)})};b.fn.block=function(q){if(this[0]===window)return b.blockUI(q),this;var k=b.extend({},b.blockUI.defaults,q||{});this.each(function(){var N=b(this);k.ignoreIfBlocked&&N.data("blockUI.isBlocked")||N.unblock({fadeOut:0})});
return this.each(function(){"static"==b.css(this,"position")&&(this.style.position="relative",b(this).data("blockUI.static",!0));this.style.zoom=1;d(this,q)})};b.fn.unblock=function(q){return this[0]===window?(b.unblockUI(q),this):this.each(function(){r(this,q)})};b.blockUI.version=2.7;b.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",
cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1E3,centerX:!0,centerY:!0,
allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var v=null,F=[]}"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)})();
(function(a,b,d){var r=Array.prototype.slice;jQuery.widget.extend=function(f){for(var p=r.call(arguments,1),x=0,G=p.length,I,L;x<G;x++)for(I in p[x])L=p[x][I],p[x].hasOwnProperty(I)&&void 0!==L&&(a.isPlainObject(L)&&a.isPlainObject(f[I])?f[I]=a.widget.extend({},f[I],L):f[I]=L);return f};var n=function(){};n.prototype.initialize=function(f){var p=this,x=a("<div>").css({fontFamily:"Arial,sans-serif",fontSize:"medium"});this.legendButton=this.makeButton_(Q.txt_legend).appendTo(x).hide().click(function(){p.legendPopup.is(":hidden")?
p.legendPopup.show():p.legendPopup.hide()});this.legendPopup=a("<div>").addClass("MapLegendContainer").hide().appendTo(this.legendButton);var G=this.makeButton_(Q.txt_to_bottom).appendTo(x).click(function(){var L=f.getCenter();e("Bottom");G.hide();I.show();f.panTo(L)}),I=this.makeButton_(Q.txt_to_side).appendTo(x).click(function(){var L=f.getCenter();e("Side");I.hide();G.show();f.panTo(L)});this.makeButton_(Q.txt_close).appendTo(x).click(function(){var L=a.param.fragment();if("/SHOWMAP"===L)a.bbq.pushState("#");
else{var V=L.split("?");L=V[0];V=1<V.length?"?"+V[1]:"";a.bbq.pushState("#"+L+":NOMAP"+V)}});"Side"===F?I.hide():G.hide();return x[0]};n.prototype.makeButton_=function(f){return a("<div>").css({backgroundColor:"white",border:"1px solid black",textAlign:"center",width:"5em",cursor:"pointer",margin:"3px"}).append(a("<div>").css({borderStyle:"solid",borderWidth:"1px",borderColor:"white rgb(176, 176, 176) rgb(176, 176, 176) white",fontSize:"12px"}).text(f))};n.prototype.addCategory=function(f,p,x,G){f=
a("<li>").css("listStyleImage","url('"+f+"')").text(p);this.legendButton.is(":hidden")&&(this.legendList=a("<ul>").addClass("MapLegendList").appendTo(this.legendPopup),this.legendButton.show());this.legendList.append(f);G&&a('<input type="checkbox">').prop({checked:!0,id:"mapping_category_"+x}).prependTo(f).click(function(I){I.stopPropagation();I=d.getElementById("mapping_category_"+x).checked;var L=[],V;for(V in C){var ka=C[V];ka.mappin===x&&L.push(ka.marker)}I?v.addMarkers(L):v.removeMarkers(L)})};
var A,Q,K,T,B=null,O=function(f){var p=a("#results-column");p.length&&(B||(B=p[0].className),f?(a("#subjects_column").hide(),a("#show_subjects_display").show(),p[0].className="col-xs-12"):(a("#subjects_column").show(),a("#show_subjects_display").hide(),p[0].className=B))},R=function(){O(!0);return!1};b.do_hide_subjects=R;b.do_show_subjects=function(f){f.preventDefault();O(!1);return!1};var w=null,v=null,F="Side",q=[0,0],k=null,N=null,C={},P=null,X=null,J=null,H=null,m=null,u=null,E=null,c=function(){var f=
[F].concat(q).join(",");var p=new Date;p.setTime(p.getTime()+31536E6);p="; expires="+p.toGMTString();d.cookie="cioc_map_position="+f+p+"; path=/"},e=function(f){if(F!==f){F=f;c();J.show();P[0].className="MapSearchShift MapSearchShift"+F;H[0].className="MapSearchResults MapSearchResults"+F;J[0].className="MapSearchResults MapSearchResults"+F;var p="Side"===F?parseInt(q[0],10):parseInt(q[1],10);"Side"===f?(a("#bottom-handle").hide(),a("#side-handle").show(),p?(f=parseInt((a(b).width()*p/100).toFixed(0),
10),J.css({width:f.toString()+"px",height:""}),H.css({width:f-u.outerWidth()+"px",height:""})):(J.css({width:"",height:""}),H.css({width:"",height:""}))):(a("#bottom-handle").show(),a("#site-handle").hide(),p?(f=parseInt((a(b).height()*p/100).toFixed(0),10),J.css({height:(f+m.outerHeight()).toString()+"px",width:""}),H.css({height:f+"px",width:""})):(J.css({height:"",width:""}),H.css({height:"",width:""})));W()}},h=function(){ra&&(la.find("#results_table").addClass("HideMapColumn"),a.browser.msie&&
"8.0">a.browser.msie&&la.find(".MapColumn").removeClass("FixIE"),a("#check_all_in_viewport").hide(),a("#subjects_column").length&&a("#show_subjects_display").show(),a("#map_my_results_ui").show(),J.hide(),W())},g=function(){return'<div id="map_popup" class="MapPopup">'},t=null,y=null,z=null,l=null,D=null,M=function(){ia=t=null;ma();z&&(google.maps.event.removeListener(z),z=null)},S=function(){y&&(y.close(),M())},aa=function(f,p,x){S();y=new google.maps.InfoWindow({content:f,position:p,maxWidth:H.innerWidth()-
150,pixelOffset:x});z=google.maps.event.addListener(y,"closeclick",M);y.open(w)},ba=function(f){var p;if(t===f&&y)S();else{if(9<f.getSize()&&w.getZoom()<w.mapTypes.get(w.getMapTypeId()).maxZoom)return!0;var x=f.getMarkers(),G=g()+"<ul>",I=[];for(p=0;p<x.length;p++){var L=x[p].num;var V=C[L];I.push(L);G+="<li style=\"list-style-image: url('"+A[V.mappin].image_small_circle+"');\"><b>"+V.orgname+'</b><br><a href="#/'+L+'">'+Q.txt_more_info+"</a></li>"}aa(G+"</ul></div>",f.getCenter(),D);t=f;for(p=0;p<
I.length;p++)L=I[p],za(L)}return!1},ca=!1,ha=function(){ca=!0},U=!1,Y=function(){U=ca=!1;if(ta){var f=ta;ta=null;ua.apply(null,f)}else if(ia){var p=C[ia];f=p.marker;(p=Aa(v,p.marker))&&1<p.getSize()?y.setOptions({position:p.getCenter(),pixelOffset:D}):y.setOptions({position:f.getPosition(),pixelOffset:l})}else t&&ca&&S()},oa=function(){W()};b.maps_loaded=function(){var f=[59.888937,-101.601562];f={center:new google.maps.LatLng(f[0],f[1]),zoom:2,mapTypeId:google.maps.MapTypeId.ROADMAP};w=new google.maps.Map(H[0],
f);google.maps.event.addListener(w,"zoom_changed",ha);v=new MarkerClusterer(w,[],{gridSize:21,maxZoom:99,styles:[{url:"images/mapping/mm_0_white_circle.png",height:30,width:30}],zoomOnClick:!1});google.maps.event.addListener(v,"click",ba);google.maps.event.addListener(v,"clusteringend",Y);E=new n;w.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(E.initialize(w));a(b).resize(oa);Ka();(f=a.param.fragment())&&"/SHOWMAP"!==f&&a(b).trigger("hashchange")};var na=function(){var f=a(b);return{width:f.width(),
height:f.height()}},ja=function(){var f=P[0];return f.scrollHeight>f.offsetHeight},fa=function(){var f=P[0];return f.scrollWidth>f.offsetWidth},W=function(f){null===k&&(k=a.scrollbarWidth());var p=k,x=k,G=na();if(null===pa&&!ja()||null!==pa&&!pa)p=0;if(null===da&&!fa()||null!==da&&!da)x=0;"Side"===F?(x=J.is(":visible")?J.outerWidth():0,P.css({width:(G.width-x).toString()+"px",height:""}),X.css("width",(G.width-x-p-N.width).toString()+"px"),H.css("height",G.height+"px")):(p=J.is(":visible")?J.height():
0,P.css({height:(G.height-p).toString()+"px",width:""}),X.css({height:(G.height-p-x-N.height).toString()+"px",width:""}));w&&!f&&google.maps.event.trigger(w,"resize");f||va()},pa=null,da=null,ea={},ia=null,ma=function(){a.each(ea,function(f,p){p.marker_icon&&(p.marker_icon.prop("src",A[C[f].mappin].image_small),p.marker_cell.removeClass("HighLight"))});ea={}},za=function(f){var p=a("#map_marker_icon_"+f+",#map_marker_icon_mobile_"+f),x=a("#map_column_"+f+",#map_column_mobile_"+f);p&&(p.prop("src",
A[C[f].mappin].image_small_dot),x.addClass("HighLight"));ea[f]={marker_icon:p,marker_cell:x};return p},La=function(){a.each(ea,function(f,p){if(!p.marker_icon){var x=a("#map_marker_icon_"+f+",#map_marker_icon_mobile_"+f),G=a("#map_column_"+f+",#map_column_mobile_"+f);x.prop("src",A[C[f].mappin].image_small_dot);G.addClass("HighLight");p.marker_icon=x;p.marker_cell=G}})},Aa=function(f,p){f=f.getClusters();for(var x=0;x<f.length;x++)if(f[x].isMarkerInClusterBounds(p))return f[x];return null},ta=null,
ua=function(f,p,x,G){if("undefined"===typeof x||null===x)x=!1;if(U)ta=a.makeArray(arguments);else{var I=C[f];if(I&&I.marker){if(ia===f&&y||G)if(x&&!G||S(),!G)return;var L=g()+"<b>"+I.orgname+'</b><br><a href="#/'+f+'">'+Q.txt_more_info+"</a></div>";I=I.marker;var V=Aa(v,I);V&&1<V.getSize()?(w.getBounds().contains(V.getCenter())||w.setCenter(V.getCenter()),aa(L,V.getCenter(),D)):aa(L,I.getPosition(),l);ia=f;L=za(f);L.length&&p&&(I=P,L.filter(":visible")[0].scrollIntoView(!0),I.scrollTop(I.scrollTop()-
5))}else ia&&y&&S()}},Ba=function(f){return function(p){ua(p,f)}},Na=function(f,p){a.ajax(p,{type:"get",data:{InlineResults:"on"},dataType:"text",success:function(x){Ma(f,x)}});return!1},la=null,Ca=null,wa=null,Da=null,Ea=null,Oa=function(){if(la){var f=a("#body_content");f.find("#results_table").length||f.replaceWith(la);f=a("head")[0];var p=d.getElementById("custom_style");p&&f.removeChild(p);Fa(Da);Ga(Ea);wa&&f.appendChild(wa);d.title=Ca;W();La();setTimeout(function(){W();ia?ua(ia,!0,!0,!0):P.scrollTop(0)},
10)}return!1},Fa=function(f){var p=d.getElementById("basic_style");f!==p.href&&(p.href=f)},Ga=function(f){var p=d.getElementById("template_style");f!==p.href&&(p.href=f)},Ma=function(f,p){var x=a("#body_content"),G=p.indexOf("<div "),I=a.trim(p.substr(0,G));I=I.split("\n");for(var L={},V=0;V<I.length;V++){var ka=I[V].replace(/\s+$/,"");if(ka){var Z=ka.substr(0,ka.indexOf("="));ka=ka.substr(ka.indexOf("=")+1);L[Z]=ka}}I=x.parent().hide();x.is(la)?x.detach():x.remove();p=p.substr(G);x=a("head")[0];
(G=d.getElementById("custom_style"))&&x.removeChild(G);Fa(L.basic_stylesheet);Ga(L.template_stylesheet);if(G=L.custom_stylesheet)V=d.createElement("link"),V.rel="STYLESHEET",V.type="text/css",V.id="custom_style",V.href=G,x.appendChild(V);d.title=L.title;I.html(p).show();W();a(P).scrollTop(0);add_details_last_visible_class();setTimeout(function(qa){W();ua(qa,!1,!0,!0)},1,f)},Pa=function(f){f=f.fragment;var p=f.split("?",2);f=p[0];p=p[1];if("/SHOWMAP"===f)ra&&!H.is(":hidden")||Ha(),H.is(":visible")&&
Oa();else if(f){var x=f.split(":");f=1<x.length&&"NOMAP"===x[1];x=x[0];if(ra){x=x.substr(1);var G=la.find("#details_link_"+x).prop("href");if(G=G?G.replace(/^about:/,""):"/record/"+x)p=p||{},G=a.param.querystring(G,p),H.is(":visible")?Na(x,G):b.location.href=G;f&&h()}else Ha()}else h()},Qa=function(){if(J.is(":visible")){var f=a(this).prop("href").split("?",2)[1]||"";f&&="?"+f;a.bbq.pushState("#/"+a(this).data("num")+f);return!1}},Ra=function(){if(H.is(":visible"))return a.bbq.pushState("#/SHOWMAP"),
!1},Sa=function(){var f=a(this).serialize();f&&="?"+f;var p=this.action.split("?")[0].split("/");p=p[p.length-1];a.bbq.pushState("#/"+p+f);return!1};b.do_check_all_in_viewport=function(){var f=null;C&&w&&(f=w.getBounds());for(var p=d.RecordList,x=p.elements.length,G=0;G<x;G++){var I=p.elements[G];if("IDList"===I.name){var L=I.value;if(C&&w&&(L=C[L])&&L.icon&&f.contains(L.point)){I.checked=!0;continue}I.checked=!1}}return!1};var va=a.throttle(200,function(){if(C&&w){var f=w.getBounds();if(f){var p=
la.find("#results_table").hide();a.each(C,function(x,G){G.icon&&!ea[x]&&(x=G.last_in_bounds||!1,f.contains(G.point)?!1===x&&(G.icon.prop("src",A[G.mappin].image_small),G.icon.prop("title",A[G.mappin].category),G.last_in_bounds=!0):!0===x&&(G.icon.prop("src","images/mapping/mm_0_white_20.png"),G.last_in_bounds=!1))});p.show().css("display","")}}}),Ia=function(){la.find("#results_table").removeClass("HideMapColumn");a.browser.msie&&"8.0">a.browser.msie&&la.find(".MapColumn").removeClass("FixIE")},Ta=
Ba(!0),Ua=function(f){return function(){Ta(f)}},Va=Ba(!1),Wa=function(){Va(a(this).data("info").num)},Xa=function(f,p){return f-p},Ka=function(){Ia();la.find("#check_all_in_viewport").show();var f=la.find(".MapLink"),p=new google.maps.LatLngBounds,x={0:{image:"image_small_circle",add_checkbox:!1}},G=[];l=new google.maps.Size(0,-25);D=new google.maps.Size(0,0);f.each(function(){var Z=a(this).data("info"),qa=Z.num;Z.icon=jQuery("#map_marker_icon_"+qa+",#map_marker_icon_mobile_"+qa);Z.icon.length||(Z.icon=
null);Z.latitude=Globalize.parseFloat(Z.latitude);Z.longitude=Globalize.parseFloat(Z.longitude);C[qa]=Z;var xa=new google.maps.LatLng(Z.latitude,Z.longitude);Z.point=xa;var sa=A[Z.mappin].options;sa||(sa={icon:new google.maps.MarkerImage(A[Z.mappin].image,new google.maps.Size(15,25)),shadow:new google.maps.MarkerImage("images/mapping/mm_shadow.png",new google.maps.Size(28,25),null,new google.maps.Point(8,25)),shape:{coords:[11,0,12,1,13,2,14,3,14,4,14,5,14,6,14,7,14,8,14,9,14,10,14,11,13,12,12,13,
11,14,11,15,10,16,10,17,10,18,10,19,9,20,8,21,8,22,8,23,8,24,6,24,6,23,6,22,6,21,6,20,5,19,4,18,4,17,4,16,3,15,3,14,2,13,1,12,0,11,0,10,0,9,0,8,0,7,0,6,0,5,0,4,0,3,1,2,2,1,3,0],type:"poly"}},A[Z.mappin].options=sa,x[Z.mappin]={image:"image_small",add_checkbox:!0});sa=a.extend({position:xa},sa);Z.marker=new google.maps.Marker(sa);Z.marker.num=qa;G.push(Z.marker);p.extend(xa);Z.marker_evt=google.maps.event.addListener(Z.marker,"click",Ua(qa))});v.addMarkers(G,0);var I=[];for(V in A)I.push(V);I.sort(Xa);
for(var L=0;L<I.length;L++){var V=I[L];var ka=x[V];ka&&E.addCategory(A[V][ka.image],A[V].category,parseInt(V,10),ka.add_checkbox)}a(d).on("click",".DetailsLink",Qa);a(d).on("click",".SearchTotalLink",Ra);a(d).on("submit","#change_view_form",Sa);a(d).on("click",".MapLink,.MapLinkMobile",Wa);ca=!1;google.maps.event.addListener(w,"bounds_changed",va);f.length?w.fitBounds(p):(w.setCenter(new google.maps.LatLng(59.888937,-101.601562)),w.setZoom(2));f=d.getElementById("geo_latitude");(I=d.getElementById("geo_longitude"))&&
f&&I.value&&f.value&&(f={icon:new google.maps.MarkerImage("images/mapping/mm_home.png",new google.maps.Size(23,39),null,new google.maps.Point(11,38)),shadow:new google.maps.MarkerImage("images/mapping/mm_home_shadow.png",new google.maps.Size(43,39)),position:new google.maps.LatLng(Globalize.parseFloat(f.value),Globalize.parseFloat(I.value)),clickable:!1,zIndex:-15E9},(new google.maps.Marker(f)).setMap(w))},ya=null,Ya=function(){pa=ja();da=fa();ya=w.getCenter()},Ja=a.throttle(100,function(){"Side"===
F?H.css("width",J.innerWidth()-u.outerWidth()+"px"):H.css("height",J.innerHeight()-m.outerHeight()+"px");W();ya&&w.setCenter(ya)}),Za=function(f,p){H.css({position:"absolute",top:"0px",right:"0px"});Ja(f,p);setTimeout(va,5);da=pa=null;"Side"===F?(q[0]=(100*J.outerWidth()/a(b).width()).toFixed(0),J.css({top:"",left:"",height:""}),H.css({top:"",left:"",height:""})):(q[1]=(100*J.outerHeight()/a(b).height()).toFixed(0),J.css({top:"",left:"",width:""}),H.css({top:"",left:""}));c()},ra=!1,Ha=function(){a:{var f=
d.cookie.split(";");for(var p=0;p<f.length;p++){for(var x=f[p];" "===x.charAt(0);)x=x.substring(1,x.length);if(0===x.indexOf("cioc_map_position=")){f=x.substring(18,x.length);break a}}f=null}f&&(f=f.split(","),F=f[0],1<f.length&&(q=[f[1],f[2]]));R();a("#show_subjects_display").hide();if(ra)a("#map_container").show();else{p=a("body");var G=a("<div>");f=a("#body_content").before(G).hide();f.find("script").remove();a("html").css("overflow","hidden");p.css({height:"100%"});var I=na(),L=G.offset();x=L.top;
L=L.left;var V=I.width-p.width()-L;N={height:x,width:L+V};I=a('<div id="fake_body"></div>').prop("className","MapSearchShift MapSearchShift"+F).insertBefore(G);x=a('<div id="fake_body_content"></div>').css("margin",x+"px "+V+"px 0px "+L+"px").appendTo(I);G.remove();L={start:Ya,stop:Za,handles:{w:"#side-handle",n:"#bottom-handle"}};is_ie7?L.helper="ui-state-default":L.resize=Ja;G=a('<div id="map_container" style="position: absolute;"><div id="side-handle" class="ui-resizable-handle ui-resizable-w"><div id="map_drag_icon_left"></div><div id="map_drag_icon_right" style="position:absolute; top:50%; margin-top: 5px;"></div></div><div id="bottom-handle" class="ui-resizable-handle ui-resizable-n"><div id="map_drag_handle_bottom"><div id="map_drag_icon_up"></div><div id="map_drag_icon_down"></div></div></div><div id="map_canvas" style="position: absolute"></div></div>').insertBefore(I);
a("#map_container").resizable(L);p.css({overflow:"auto",margin:"0px"});P=I;X=x;J=G;H=p=G.find("#map_canvas");u=a("#side-handle");m=a("#bottom-handle");"Side"===F?m.hide():u.hide();if(I="Side"===F?parseInt(q[0],10):parseInt(q[1],10))"Side"===F?(I=(a(b).width()*I/100).toFixed(0),G.css("width",I+"px"),p.css("width",I-u.outerWidth()+"px")):(I=(a(b).height()*I/100).toFixed(0),G.css("height",(I+m.outerHeight()).toString()+"px"),p.css("height",I+"px"));p[0].className="MapSearchResults MapSearchResults"+
F;G[0].className="MapSearchResults MapSearchResults"+F;x.append(f);f.show();W();la=f;Ca=d.title;wa=d.getElementById("custom_style");Da=d.getElementById("basic_style").href;Ea=d.getElementById("template_style").href;ra=!0}la.find("#map_my_results_ui").hide();if(null===w)return a.getScript("//maps.googleapis.com/maps/api/js?v=3&"+T+"&sensor=false&callback=maps_loaded&language="+K),!1;Ia();a("#check_all_in_viewport").show();W();return!1};b.initialize_mapping=function(f){A=f.map_pins;Q=f.translations;
K=f.culture;T=f.key_arg;Globalize.culture(f.culture);f.auto_start&&!(new String(b.location.hash)).replace(/^#/,"")&&history.replaceState(null,"",(new String(b.location)).replace(/#$/,"")+"#/SHOWMAP");a("#map_my_results_ui").show();a(b).bind("hashchange",Pa);var p=d.RecordList;p&&(p.onsubmit=function(){ra&&J.is(":visible")?-1===p.action.indexOf("#/SHOWMAP")&&(p.action+="#/SHOWMAP"):-1!==p.action.indexOf("#/SHOWMAP")&&(p.action=p.action.substr(0,p.action.length-9))});a(b).trigger("hashchange")}})(jQuery,
this,document);
(function(){var a={},b=jQuery,d=null,r={},n={},A="",Q=function(){var m=b(this);m.uibutton({icons:{primary:m.data("icon")},text:!1})},K=function(m){d=d.map(function(){return 0<=m.indexOf(b(this).data("vutId"))?this:null});d.each(function(){var u=b(this),E=u.data("vutId");u.data("uiAdded")||(u.data("uiAdded",!0),b('<span class="vacancy-ui vacancy-buttonset"><button class="vacancy-edit" id="vacancy-edit-'+E+'" data-vut-id="'+E+'" title="'+a.edit_txt+'" data-icon="ui-icon-pencil">'+a.edit_txt+'</button><button class="vacancy-history" data-icon="ui-icon-note" data-vut-id="'+
E+'" title="'+a.history_txt+'">'+a.history_txt+"</button></span>").buttonset().insertAfter(u).find("button").each(Q))})},T=function(m,u,E){u=b('<div class="alert alert-dismissable '+u+'" style="display: none"></div>').text(E).append('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');E=m.children().first();E.length?E.before(u):m.append(u);u.slideDown("slow")},B=function(m){b.each(m,function(u,E){b("#vacancy-count-"+E.bt_vut_id).text(E.text)})},
O=function(m,u,E,c){return function(e){E.unblock();e.updates&&B(e.updates);T(c,(e.success?"alert-highlight":"alert-error")+" vacancy-notification",e.msg)}},R=function(m,u,E,c){return function(e,h){E.unblock();T(c,"alert-error vacancy-notification",a.server_error_txt+("error"!==h?h:e.statusText))}},w,v=function(){A&&(w&&clearTimeout(w),w=setTimeout(F,15E3))},F=function(){w=null;b.ajax({dataType:"json",url:a.refresh_url,cache:!1,data:{ids:A}}).done(function(m){m.success&&B(m.updates)}).always(v)},q=
function(m,u){var E=u.parent().block({message:null});u=u.data("vutId");var c=E.find(".vacancy-count"),e=E.find(".vacancy-notify-area");e.length||(e=b('<div class="vacancy-notify-area alert-stack"></div>'),e.appendTo(E));b.ajax({dataType:"json",url:a.increment_url,type:"POST",data:{BT_VUT_ID:u,Value:m}}).done(O(u,c,E,e)).fail(R(u,c,E,e))},k=function(){if(a.permission_url){d=b(".vacancy-count");var m=d.map(function(){return b(this).data("vutId")}).get();if(A=m=m.join())b.ajax({dataType:"json",url:a.permission_url,
cache:!1,data:{ids:m}}).done(K),v()}},N=null,C=function(){N||=b('<div id="vacancy-dialog" style="display:none;"></div>').appendTo(b("body")).dialog({autoOpen:!1,closeText:a.close_txt,title:a.history_title_txt,minWidth:500});return N},P=function(m,u){u=b('<p class="Alert"></p>').text(u);m.empty().append(u)},X=function(m){var u=C();m.success?u.empty().html(m.content):P(u,m.content);u.dialog("option","title",m.title)},J=function(m,u){var E=C();P(E,a.server_error_txt+("error"!==u?u:m.statusText))},H=
function(){b(document).on("click",".vacancy-edit",function(m){m.preventDefault();m.stopPropagation();m=b(this);var u=m.data("vutId"),E=m.parent(),c=r[u];c||(c=b('<span class="vacancy-incrementer-ui vacancy-buttonset" style="display: none;" id="vacancy-incrementer-'+u+'" data-vut-id="'+u+'"><button class="vacancy-incrementer-up" data-icon="ui-icon-plusthick">'+a.up_txt+'</button><button class="vacancy-incrementer-down" data-icon="ui-icon-minusthick">'+a.down_txt+'</button><button class="vacancy-incrementer-done" data-icon="ui-icon-check">'+
a.done_txt+"</button></span>").buttonset().insertAfter(E),c.find("button").each(Q),n[u]=E);m.parent().hide();c.show()}).on("click",".vacancy-incrementer-done",function(m){m.preventDefault();m.stopPropagation();m=b(this).parent();var u=m.data("vutId");u=n[u];m.hide();u.show();var E=m.parent().parent().find(".vacancy-notify-area");E.slideUp("fast",function(){E.remove()})}).on("click",".vacancy-incrementer-up",function(m){m.preventDefault();m.stopPropagation();q(1,b(this).parent())}).on("click",".vacancy-incrementer-down",
function(m){m.preventDefault();m.stopPropagation();q(-1,b(this).parent())}).on("click",".vacancy-history",function(m){m.preventDefault();m.stopPropagation();m=b(this).data("vutId");C().html('<p class="Info">'+a.loading_txt+"</p>").dialog("close").dialog("open").dialog("option","title",a.history_title_txt);b.ajax({dataType:"json",url:a.history_url,cache:!1,data:{BT_VUT_ID:m}}).done(X).fail(J)}).on("click",".close",function(m){m.preventDefault();m.stopPropagation();m=b(this);var u=m.parents("."+m.data("dismiss")).first();
u.slideUp("slow",function(){u.remove()})})};window.initialize_vacancy=function(m){a=m;k();H()};window.initialize_vacancy_options=function(m){a=m};window.initialize_vacancy_ui=k;window.initialize_vacancy_events=H})();
(function(){var a=function(){$(".agency-overview").each(function(){$(this).find(".related-row:visible").last().addClass("last-visible")})};window.initialize_listing_toggle=function(b,d,r,n){$(document).on("click",".show-toggle",function(){var A=$(this),Q=A.parents(".related-records"),K=Q.find(".details"),T=Q.parents(".agency-overview");if(K.is(":visible"))K.slideUp(function(){A.text(b);T.find(".related-row").removeClass("last-visible").filter(":visible").last().addClass("last-visible")});else{var B=
T.find(".related-row").removeClass("last-visible");K.slideDown(function(){A.text(d);B.filter(":visible").last().addClass("last-visible")})}return!1}).on("click",".deleted-toggle",function(){var A=$(this),Q=A.parents(".related-records"),K=Q.find(".deleted-records"),T=Q.parents(".agency-overview");if(K.is(":visible"))K.slideUp(function(){A.text(r);T.find(".related-row").removeClass("last-visible").filter(":visible").last().addClass("last-visible")});else{var B=T.find(".related-row").removeClass("last-visible");
K.slideDown(function(){A.text(n);B.filter(":visible").last().addClass("last-visible")})}return!1});a()};window.add_details_last_visible_class=a})();
