window.CIOC={};
(function(b,c){c.do_drop_down_navigation=function(){for(var a=b.getElementById("ActionList").options,e=0;e<a.length;e++)if(a[e].selected){var d=a[e].getAttribute("href");d&&("undefined"!=typeof a[e].attributes.newwindow?c.open(d):c.location.href=d);break}};jQuery(function(b){b("[data-toggle=dialog]").each(function(){var e=b(this),c=b(e.data("target")),f={autoOpen:!1,title:c.data("title"),modal:c.data("modal")};c.dialog(f);e.click(function(){c.dialog("isOpen")?c.dialog("close"):c.dialog("open")})})})})(document,window);
function CheckAll(b,c){b||(b="IDList");var a=c;c||(a=document.RecordList);for(var e=a.elements.length,d=0;d<e;d++){var f=a.elements[d];f.name===b&&(f.checked=!0)}}function ClearAll(b,c){b||(b="IDList");var a=c;c||(a=document.RecordList);for(var e=a.elements.length,d=0;d<e;d++){var f=a.elements[d];f.name===b&&(f.checked=!1)}}function add_class(b,c){b&&!(new RegExp("\\b"+c+"\\b")).test(b.className)&&(b.className&&(c=" "+c),b.className+=c)}
function remove_class(b,c){if(b){for(var a=b.className.split(" "),e=[],d=0;d<a.length;d++){var f=a[d];f!==c&&e.push(f)}b.className=e.join(" ")}}function hide(b){add_class(b,"NotVisible")}function show(b){remove_class(b,"NotVisible")}function openWin(b,c){window.open(b,c,"toolbar=no,width=490,height=485,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}
function openWinL(b,c){window.open(b,c,"toolbar=no,width=650,height=520,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}function openWinXL(b,c){window.open(b,c,"toolbar=no,width=755,height=550,location=no,scrollBars=yes,resizable=no,titlebar=yes").focus()}jQuery(function(b){var c={sm:openWin,lg:openWinL,xl:openWinXL};b(document).on("click","a.poplink",function(){var a=b(this).data("popargs");(c[a.size||"sm"]||openWin)(this.href,a.name||"popwin");return!1})});
(function(){var b=jQuery,c={},a=function(a){null!==a&&"undefined"!==typeof a?b("#myListCount").text(a):(a=b("#myListCount").text())&&(a=parseInt(a,10));a?c.myListLink.show():c.myListLink.hide()},e=function(a){b.each(a,function(a,e){b("#added_to_list_"+e).show();b("#add_to_list_"+e).hide()})},d=function(d){return function(f){f.fail?alert(f.errinfo):(f.ids?a(b.grep(f.ids,k[c.domain]).length):f.count?a(f.count):a(0),e([d]))}},f=function(a){a=b(a.currentTarget).data("id");b.ajax({success:d(a),dataType:"json",
error:function(){alert("Error")},data:{id:a},type:"POST",url:c.current_list_url})},l=function(a){return function(e){if(e.fail)alert(e.errinfo);else{e=!0;if(a){var c=b("#results_table #remove_from_list_"+a);c.length?c.parent().parent().remove():(e=!1,c=b("#results_container #remove_from_list_"+a),c.parents(".dlist-result").remove())}c=!1;if((c=e?1===b("#results_table tr").length:0===b("#results_container .dlist-result").length)||!a)b("#records_ui").hide(),b("#no_records_message").show()}}},g=function(a){a=
b(a.currentTarget).data("id");b.ajax({success:l(a),dataType:"json",error:function(){alert("Error")},data:{ID:a,RemoveItem:c.domain},type:"POST",url:c.current_list_url})},h=function(a){b.ajax({success:l(),dataType:"json",error:function(){alert("Error")},data:{ID:"all",RemoveItem:c.domain},type:"POST",url:c.current_list_url})},k={CIC:function(a){return/^[A-Za-z]{3}[0-9]{4,5}$/.test(a)},VOL:function(a){return/^[1-9][0-9]*$/.test(a)}},s=function(d){if(d.fail)p();else if(d.inrequest){var f=b.grep(d.ids,
k[c.domain]);e(f);a(f.length);(d=d.previous_ids)&&b.each(d,function(a,e){b("#ct_added_to_previous_request_"+e).show()});b(".ListUI img").prop("src",function(a,b){return b.replace("list","referral")});b("#list_header_text").hide();b("#ct_header_text").show();c.current_list_url=c.ct_update_url;r()}else p()},p=function(){var d=function(){c.list_view_mode||e(c.already_added||[]);c.current_list_url=c.list_view_mode&&"ct"===c.list_view_mode?c.ct_update_url:c.list_update_url;a((c.already_added||[]).length);
r()};c.list_view_mode||c.has_session?d():b.ajax({dataType:"json",error:null,url:c.list_update_url,data:{SessionTest:"on"},type:"POST",success:function(a){a.has_session&&d()}})},r=function(){b(".HideListUI").delegate(".add_to_list","click",f).delegate(".remove_from_list","click",g).removeClass("HideListUI");b("#remove_all_from_list").click(h);b.browser.msie&&"8.0">b.browser.msie&&b(".ListUI").removeClass("FixIE")};window.init_list_adder=function(a){c=a;c.myListLink=b("#myListLink").parent(":hidden").add("#myListLink");
a.in_request?b.ajax({success:s,dataType:"json",error:null,type:"POST",url:a.in_request}):p()}})();this.JSON||(this.JSON={});
(function(){function b(a){return 10>a?"0"+a:a}function c(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=g[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,e){var d,g,q,t,u=f,n,m=e[b];m&&"object"===typeof m&&"function"===typeof m.toJSON&&(m=m.toJSON(b));"function"===typeof h&&(m=h.call(e,b,m));switch(typeof m){case "string":return c(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);
case "object":if(!m)return"null";f+=l;n=[];if("[object Array]"===Object.prototype.toString.apply(m)){t=m.length;for(d=0;d<t;d+=1)n[d]=a(d,m)||"null";q=0===n.length?"[]":f?"[\n"+f+n.join(",\n"+f)+"\n"+u+"]":"["+n.join(",")+"]";f=u;return q}if(h&&"object"===typeof h)for(t=h.length,d=0;d<t;d+=1)g=h[d],"string"===typeof g&&(q=a(g,m))&&n.push(c(g)+(f?": ":":")+q);else for(g in m)Object.hasOwnProperty.call(m,g)&&(q=a(g,m))&&n.push(c(g)+(f?": ":":")+q);q=0===n.length?"{}":f?"{\n"+f+n.join(",\n"+f)+"\n"+
u+"}":"{"+n.join(",")+"}";f=u;return q}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,l,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof JSON.stringify&&(JSON.stringify=function(b,e,c){var d;l=f="";if("number"===typeof c)for(d=0;d<c;d+=1)l+=" ";else"string"===typeof c&&(l=c);if((h=e)&&"function"!==typeof e&&("object"!==typeof e||"number"!==typeof e.length))throw Error("JSON.stringify");return a("",{"":b})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,e){var d,f,g=a[e];if(g&&"object"===typeof g)for(d in g)Object.hasOwnProperty.call(g,d)&&(f=c(g,d),void 0!==f?g[d]=f:delete g[d]);return b.call(a,e,g)}var d;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();
(function(){window.get_form_values=function(b){var c={};jQuery(b).find("input,select,textarea").each(function(a){if(this.name)if(c[this.name]||(c[this.name]=[]),"select"===this.nodeName.toLowerCase()){var b=c[this.name];$(this).find("option").each(function(a){this.selected&&b.push(this.value)})}else("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type||this.checked)&&c[this.name].push(this.value||"")});return c};window.restore_form_values=function(b,c){var a=jQuery;a(b).find("input,select,textarea").each(function(b){if(this.name){var d=
c[this.name];"undefined"!=typeof d&&null!==d&&("input"!==this.nodeName.toLowerCase()||"checkbox"!==this.type&&"radio"!==this.type?"select"===this.nodeName.toLowerCase()?a(this).find("option").each(function(b){this.selected=1<d.length?0<=a.inArray(this.value,d):0===d.length?!1:this.value===d[0]}):this.value=d.length?d[0]:"":this.checked=1<d.length?0<=a.inArray(this.value,d):0===d.length?!1:this.value===d[0])}})};window.init_cached_state=function(b){var c=jQuery;b=b||"#EntryForm";onbeforeunload_fns=
[];onbeforerestorevalues_fns=[];c(window).on("beforeunload",function(){var a={form_values:get_form_values(b)};c.each(onbeforeunload_fns,function(b,d){d(a)});document.getElementById("cache_form_values").value=JSON.stringify(a)});window.cache_register_onbeforeunload=function(a){onbeforeunload_fns.push(a)};window.cache_register_onbeforerestorevalues=function(a){onbeforerestorevalues_fns.push(a)};window.restore_cached_state=function(){var a=document.getElementById("cache_form_values");if(a&&a.value){var e=
JSON.parse(a.value);c.each(onbeforerestorevalues_fns,function(a,b){b(e)});restore_form_values(b,e.form_values)}}}})();
(function(){var b=jQuery,c={"en-CA":"d M yy",de:"dd.mm.yy",fr:"d M yy",it:"d M yy",nl:"d M yy",no:"d M yy",pt:"d-mm-yy",sv:"d M yy",hu:"M d. yy",ro:"d M yy",hr:"d M yy",sl:"d M yy",bg:"d MM yy",ru:"d M yy",tr:"d M yy",lv:"d M yy",lt:"d M yy",ko:"yy/mm/dd","zh-CN":"yy/mm/dd",th:"d M yy"},a={"en-CA":!0,"":!0},e={},d={"fr-CA":"fr","es-MX":"es"},f=function(){var a=b(this),e=a.data("culture"),d=c[e]||b.datepicker.regional[e].dateFormat,f={};a.hasClass("NoYear")&&(d=d.replace(/[\- .\/]*yy[\/]?/,""),f={beforeShow:function(a,
b){b.dpDiv.addClass("NoYearDatePicker")},onClose:function(a,b){b.dpDiv.removeClass("NoYearDatePicker")},changeYear:!1});f.dateFormat=d;a.datepicker(b.extend({},b.datepicker.regional[e],f)).prop("autocomplete","off")},l=function(d){b.getScript("//ajax.googleapis.com/ajax/libs/jqueryui/"+b.ui.version+"/i18n/jquery.ui.datepicker-"+d+".min.js",function(){a[d]=!0;b.each(e[d],function(){f.call(this)});delete e[d]})};b.datepicker.regional["en-CA"]=b.extend({},b.datepicker.regional[""]);b.fn.extend({autodatepicker:function(){return this.each(function(){var c=
b(this),h;h=c.parents("[lang]").first().prop("lang")||"en-CA";h=d[h]||h;c.data("culture",h);a[h]?f.call(this):(c=e[h],c||(c=e[h]=[],l(h)),c.push(this))})}});jQuery(function(){b("input.DatePicker").autodatepicker()})})();
(function(b){function c(a){return a&&a.constructor===Number?a+"px":a}b.fn.bgiframe=b.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(a){a=b.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},a);var e='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+a.src+'"style="display:block;position:absolute;z-index:-1;'+(!1!==a.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==a.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":
c(a.top))+";left:"+("auto"==a.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":c(a.left))+";width:"+("auto"==a.width?"expression(this.parentNode.offsetWidth+'px')":c(a.width))+";height:"+("auto"==a.height?"expression(this.parentNode.offsetHeight+'px')":c(a.height))+';"/>';return this.each(function(){0===b(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(e),this.firstChild)})}:function(){return this};b.fn.bgIframe=b.fn.bgiframe})(jQuery);
(function(){var b=function(a){a=a.toLowerCase();a=a.replace(RegExp("[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]","g"),"a");a=a.replace(RegExp("\u00e6","g"),"ae");a=a.replace(RegExp("\u00e7","g"),"c");a=a.replace(RegExp("[\u00e8\u00e9\u00ea\u00eb]","g"),"e");a=a.replace(RegExp("[\u00ec\u00ed\u00ee\u00ef]","g"),"i");a=a.replace(RegExp("\u00f1","g"),"n");a=a.replace(RegExp("[\u00f2\u00f3\u00f4\u00f5\u00f6]","g"),"o");a=a.replace(RegExp("\u009c","g"),"oe");a=a.replace(RegExp("[\u00f9\u00fa\u00fb\u00fc]","g"),
"u");return a=a.replace(RegExp("[\u00fd\u00ff]","g"),"y")};window.string_ci_ai=b;var c=function(a,d,c,l,g){c=c||"value";l=l||"";g=g||"";return function(h,k){if(d.term&&(new RegExp(l+a.ui.autocomplete.escapeRegex(d.term)+g,"i")).test(h.term)&&d.content&&13>d.content.length){var s=new RegExp(l+a.ui.autocomplete.escapeRegex(h.term)+g,"i");k(a.grep(d.content,function(a){return s.test(b(a[c]))}));return!0}return!1}};window.default_cache_search_fn=c;var a=function(a,d,f,l,g){f=f||{};g=g||c(a,f,l||"value");
return function(c,k,s){c.term=b(c.term);f.term===c.term&&f.content?k(f.content):g(c,k)||a.ajax({url:s||d,dataType:"json",data:c,cache:!1,success:function(a){f.term=c.term;f.content=a;k(a)}})}};window.create_caching_source_fn=a;window.init_community_autocomplete=function(c,d,f,l,g){var h={};g&&(g=c(g));g&&!g.length&&(g=null);var k=c("#"+d).autocomplete({focus:function(a,b){return!1},select:function(a,b){k.data({chkid:b.item.chkid,display:b.item.value})},source:a(c,f,h),minLength:l}).keypress(function(a){"13"==
a.keyCode&&(a.preventDefault(),k.autocomplete("close"))});g&&(k.parents("form").on("submit",function(){var a=k.val();if(k.data("display")===a)g.val(k.data("chkid"));else{if(h.content){var d=b(a),a=c.grep(h.content,function(a){return b(a.value)===d});if(1===a.length){g.val(a[0].chkid);k.data({chkid:a[0].chkid,display:a[0].value}).val(a[0].value);return}}g.val("")}}),cache_register_onbeforerestorevalues(function(a){k.length&&(a=a["autocomplete_data_"+k[0].id])&&k.data(a)}),cache_register_onbeforeunload(function(a){if(k.length){var b=
k.data();b.display&&b.chkid&&(a["autocomplete_data_"+k[0].id]={display:b.display,chkid:b.chkid})}}))}})();
(function(){window.entryform=window.entryform||{};window.create_checklist_onbefore_fns=function(a,b,c,f){cache_register_onbeforeunload(function(a){a[b+"_added"]=c});cache_register_onbeforerestorevalues(function(c){(c=c[b+"_added"])&&a.each(c,function(a,b){f(b.chkid,b.display,"")})})};window.basic_chk_add_html=function(a,b){return function(c,f){var l=a("<tr>").append(a("<td>").append(a("<input>").prop({id:b+"_ID_"+c,type:"checkbox",checked:!0,defaultChecked:!0,name:b+"_ID",value:c})).append(document.createTextNode(" "+
f))).append(a("<td>").append(a("<input>").prop({id:b+"_NOTES_"+c,name:b+"_NOTES_"+c,size:entryform.chk_notes_size,maxlength:entryform.chk_notes_maxlen})));a("#"+b+"_existing_add_table").append(l);return l.find('input[type="checkbox"]')[0]}};var b={},c=function(a){$("#NEW_"+a).autocomplete(b[a])};window.init_autocomplete_checklist=function(a,e){var d=e.field;if(!b[d]){var f=e.source;e.minLength=e.minLength||1;e.delay=e.delay||300;e.add_new_html=e.add_new_html||basic_chk_add_html(a,d);e.match_prop=
e.match_prop||"value";e.txt_not_found=e.txt_not_found||"Not Found";var l=a(e.delegate_root||document),g=e.added_values||[],h=function(a,b,c){var f=document.getElementById(d+"_ID_"+a);f?(f.checked=!0,e.after_add_new_value&&e.after_add_new_value.call(f)):(g.push({chkid:a,display:b,label:c}),a=e.add_new_html(a,b,c),e.after_add_new_value&&e.after_add_new_value.call(a))};create_checklist_onbefore_fns(a,d,g,h);var k={},s=function(b){a("#NEW_"+d).data({chkid:"",display:"",label:""}).prop("value","").focus();
a("#"+d+"_error").hide("slow",function(){a(this).remove()})},p=null,r=null;(function(b){a.isArray(b)?(r=function(c,d){var f=new RegExp(a.ui.autocomplete.escapeRegex(string_ci_ai(c.term)));d(a.grep(b,function(a){return f.test(string_ci_ai(a[e.match_prop]||a))}))},p=function(c,d){var f=string_ci_ai(c),g=a.grep(b,function(a){return string_ci_ai(string_ci_ai(a[e.match_prop]||a))===f});if(1===g.length)return d(g[0]),!0;d()}):"string"===typeof b?(r=create_caching_source_fn(a,b,k,e.match_prop),p=function(b,
c,d){var f=string_ci_ai(b);if(k.content){var g=a.grep(k.content,function(a){return string_ci_ai(a[e.match_prop])===f});if(1===g.length){c(g[0]);return}}d||string_ci_ai(k.term||"")===f?c():r({term:f},function(a){p(b,c,!0)})}):(r=b,p=e.look_for_fn)})(f);l.on("click","#add_"+d,function(b){b=a("#NEW_"+d);var c=b.data("chkid"),f=b.data("display"),g=b.data("label"),k=b[0].value;if(c&&f&&f==k)return h(c,f,g),s(),!1;p(b[0].value,function(b){b?(h(b.chkid,b.value,b.label),s()):0===a("#"+d+"_error").length&&
(a("#"+d+"_new_input_table").before(a("<p>").hide().addClass("Alert").prop("id",d+"_error").append(document.createTextNode(e.txt_not_found))),a("#"+d+"_error").show("slow"))});return!1});b[d]={focus:function(a,b){return!1},source:r,minLength:e.minLength,delay:e.delay,select:function(b,c){a("#NEW_"+d).data({chkid:c.item.chkid,display:c.item.value,label:c.item.label})}};l.on("keypress","#NEW_"+d,function(b){"13"==b.keyCode&&(b.preventDefault(),a("#NEW_"+d).autocomplete("close"),a("#add_"+d).trigger("click"))})}c(d)};
window.init_languages=function(a,b){var c=null,f=null,l=a("#LN_existing_add_table"),g=function(){var b=a(this).parents(".language-entry").find(".language-details-notes");this.checked?b.slideDown():b.slideUp()};init_autocomplete_checklist(a,{field:"LN",source:entryform.languages_source,txt_not_found:b,after_add_new_value:g,add_new_html:function(b,e){null===c&&(c=a("#add_LN"),f=c.data("newTemplate"));var g=f.replace(/LANGNAMELANGNAME/g,e).replace(/IDIDID/g,b);l.append(g)}});l.on("change",".language-primary",
g).uitooltip({items:"[data-help-text]",content:function(){return'<div class="language-help-text">'+a(this).data("helpText")+"</div>"},position:{my:"center bottom-20",at:"center top",using:function(b,c){a(this).css(b);a("<div>").addClass("arrow").addClass(c.vertical).addClass(c.horizontal).appendTo(this)}}});window.languages_check_state=g}})();
(function(){window.only_items_chk_add_html=function(b,c,a){return function(e,d){a&&a();b("#"+c+"_existing_add_container").append(b("<label>").append(b("<input>").prop({id:c+"_ID_"+e,type:"checkbox",checked:!0,defaultChecked:!0,name:c+"_ID",value:e})).append("&nbsp;").append(document.createTextNode(d))).append(" ; ")}};window.init_check_for_autochecklist=function(b){var c=jQuery,a=function(){var a=c(this).data("jump_location");(a=document.getElementById(a))&&a.scrollIntoView(!0)},e=function(){return c("<li>").append(c("<span>").data("jump_location",
this.id).addClass("UnaddedChecklistJump SimulateLink").append(c(this).parentsUntil("td[data-field-display-name]").parent().data("fieldDisplayName")))},d=c("input[id^=NEW_]");d.length&&(c("#EntryForm").submit(function(a){var l=d.map(function(){return this.value?this:null}),g;if(l.length&&!a.isDefaultPrevented()){if(!confirm(b)){a.preventDefault();c("#SUBMIT_BUTTON").prop("disabled",!1);a=c("#unadded_checklist_error_box");g=c("#unadded_checklist_error_list");var h=a.is(":visible");h&&g.children("ul:first").hide("slow",
function(){c(this).remove()});var k=c("<ul>");h&&k.hide();g.append(k);c.each(l.map(e),function(){k.append(this)});h?k.show("slow"):a.show("slow")}}else a.isDefaultPrevented()&&(a=c("#unadded_checklist_error_box"),g=c("#unadded_checklist_error_list"),a.hide("slow",function(){g.children().remove()}))}),c(document).on("click",".UnaddedChecklistJump",a))}})();
(function(){var b=jQuery;window.init_municipality_autocomplete=function(c,a,e){c.each(function(){var c={},f=this,l=this.id.replace("Web",""),g=b("#"+l),h=b(this).data("cm_info",{value:this.value,chkid:g[0].value}).autocomplete({focus:function(a,b){return!1},source:create_caching_source_fn(b,a,c),minLength:1,close:function(){h.is(":focus")||k()}}).keypress(function(a){"13"==a.keyCode&&(a.preventDefault(),h.autocomplete("close"))}),k=function(){var a=h.data("cm_info"),k=f.value,l;if(k)if(a&&a.chkid&&
a.value&&a.value===k)g[0].value=a.chkid;else{l=string_ci_ai(k);if(c.content&&(a=b.grep(c.content,function(a){return string_ci_ai(a.value)===l}),1===a.length)){g[0].value=a[0].chkid;h.data("cm_info",a[0]);return}setTimeout(function(){h[0].focus()},1);alert(e)}else g[0].value=""};h.blur(function(){h.autocomplete("widget").is(":visible")||k()})})}})();
(function(){window.init_cm_checklist=function(b,c,a){var e={},d=create_caching_source_fn(b,c,e,"label"),f=a.parent_cmid_input||null,l=9999,g=b("#cm-checklist-template").html(),h=b("#cm-checklist-target");c=f?function(a,b,c){a.parent=f.val();return d(a,b,c)}:d;var k=function(c,f,g){var h=string_ci_ai(c);if(e.content){var l=b.grep(e.content,function(b){return string_ci_ai(b[a.match_prop])===h});if(1===l.length){f(l[0]);return}}g||string_ci_ai(e.term||"")===h?f():d({term:h},function(a){k(c,f,!0)})};
a.parent_cmid_input&&(f=b(a.parent_cmid_input));a.source=c;a.look_for_fn=k;a.add_new_html=function(a,c){to_add=b(g.replace(/\[COUNT\]/g,l++).replace(/\[ID\]/g,a).replace(/\[LABEL\]/g,b("<div>").text(c).html()));h.is(":hidden")?h.removeClass("hidden").append(to_add):h.append(to_add);return!1};init_autocomplete_checklist(b,a)};window.init_community_edit=function(b){var c=9999,a=null,e=null;b("#add-alternate-name").click(function(d){var f=null;d.preventDefault();a||(a=b("#alt-name-template").html(),
e=b("#alt-name-target"));f=b(a.replace(/\[COUNT\]/g,c++));e.is(":hidden")?e.removeClass("hidden").append(f):e.append(f);return!1})}})();
